var wC=Object.defineProperty;var SC=(r,e,t)=>e in r?wC(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var TC=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var X=(r,e,t)=>SC(r,typeof e!="symbol"?e+"":e,t);var II=TC((zn,Hn)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function tf(r){const e=Object.create(null);for(const t of r.split(","))e[t]=1;return t=>t in e}const Qe={},ao=[],or=()=>{},OC=()=>!1,lu=r=>r.charCodeAt(0)===111&&r.charCodeAt(1)===110&&(r.charCodeAt(2)>122||r.charCodeAt(2)<97),nf=r=>r.startsWith("onUpdate:"),kt=Object.assign,rf=(r,e)=>{const t=r.indexOf(e);t>-1&&r.splice(t,1)},EC=Object.prototype.hasOwnProperty,We=(r,e)=>EC.call(r,e),we=Array.isArray,lo=r=>xl(r)==="[object Map]",cu=r=>xl(r)==="[object Set]",vg=r=>xl(r)==="[object Date]",Ee=r=>typeof r=="function",vt=r=>typeof r=="string",ur=r=>typeof r=="symbol",Ke=r=>r!==null&&typeof r=="object",fv=r=>(Ke(r)||Ee(r))&&Ee(r.then)&&Ee(r.catch),gv=Object.prototype.toString,xl=r=>gv.call(r),MC=r=>xl(r).slice(8,-1),pv=r=>xl(r)==="[object Object]",sf=r=>vt(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,Pa=tf(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),uu=r=>{const e=Object.create(null);return t=>e[t]||(e[t]=r(t))},PC=/-(\w)/g,tr=uu(r=>r.replace(PC,(e,t)=>t?t.toUpperCase():"")),AC=/\B([A-Z])/g,$i=uu(r=>r.replace(AC,"-$1").toLowerCase()),hu=uu(r=>r.charAt(0).toUpperCase()+r.slice(1)),nh=uu(r=>r?`on${hu(r)}`:""),os=(r,e)=>!Object.is(r,e),lc=(r,...e)=>{for(let t=0;t<r.length;t++)r[t](...e)},mv=(r,e,t,n=!1)=>{Object.defineProperty(r,e,{configurable:!0,enumerable:!1,writable:n,value:t})},Cc=r=>{const e=parseFloat(r);return isNaN(e)?r:e},FC=r=>{const e=vt(r)?Number(r):NaN;return isNaN(e)?r:e};let yg;const du=()=>yg||(yg=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function _n(r){if(we(r)){const e={};for(let t=0;t<r.length;t++){const n=r[t],s=vt(n)?IC(n):_n(n);if(s)for(const i in s)e[i]=s[i]}return e}else if(vt(r)||Ke(r))return r}const kC=/;(?![^(]*\))/g,RC=/:([^]+)/,DC=/\/\*[^]*?\*\//g;function IC(r){const e={};return r.replace(DC,"").split(kC).forEach(t=>{if(t){const n=t.split(RC);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function Pt(r){let e="";if(vt(r))e=r;else if(we(r))for(let t=0;t<r.length;t++){const n=Pt(r[t]);n&&(e+=n+" ")}else if(Ke(r))for(const t in r)r[t]&&(e+=t+" ");return e.trim()}const LC="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",BC=tf(LC);function vv(r){return!!r||r===""}function jC(r,e){if(r.length!==e.length)return!1;let t=!0;for(let n=0;t&&n<r.length;n++)t=fu(r[n],e[n]);return t}function fu(r,e){if(r===e)return!0;let t=vg(r),n=vg(e);if(t||n)return t&&n?r.getTime()===e.getTime():!1;if(t=ur(r),n=ur(e),t||n)return r===e;if(t=we(r),n=we(e),t||n)return t&&n?jC(r,e):!1;if(t=Ke(r),n=Ke(e),t||n){if(!t||!n)return!1;const s=Object.keys(r).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in r){const a=r.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!fu(r[o],e[o]))return!1}}return String(r)===String(e)}function zC(r,e){return r.findIndex(t=>fu(t,e))}const yv=r=>!!(r&&r.__v_isRef===!0),pn=r=>vt(r)?r:r==null?"":we(r)||Ke(r)&&(r.toString===gv||!Ee(r.toString))?yv(r)?pn(r.value):JSON.stringify(r,bv,2):String(r),bv=(r,e)=>yv(e)?bv(r,e.value):lo(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[n,s],i)=>(t[rh(n,i)+" =>"]=s,t),{})}:cu(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>rh(t))}:ur(e)?rh(e):Ke(e)&&!we(e)&&!pv(e)?String(e):e,rh=(r,e="")=>{var t;return ur(r)?`Symbol(${(t=r.description)!=null?t:e})`:r};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Rn;class HC{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Rn,!e&&Rn&&(this.index=(Rn.scopes||(Rn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=Rn;try{return Rn=this,e()}finally{Rn=t}}}on(){Rn=this}off(){Rn=this.parent}stop(e){if(this._active){this._active=!1;let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(this.effects.length=0,t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function $C(){return Rn}let et;const sh=new WeakSet;class _v{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Rn&&Rn.active&&Rn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,sh.has(this)&&(sh.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Cv(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,bg(this),wv(this);const e=et,t=ar;et=this,ar=!0;try{return this.fn()}finally{Sv(this),et=e,ar=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)lf(e);this.deps=this.depsTail=void 0,bg(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?sh.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){qh(this)&&this.run()}get dirty(){return qh(this)}}let xv=0,Aa,Fa;function Cv(r,e=!1){if(r.flags|=8,e){r.next=Fa,Fa=r;return}r.next=Aa,Aa=r}function of(){xv++}function af(){if(--xv>0)return;if(Fa){let e=Fa;for(Fa=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let r;for(;Aa;){let e=Aa;for(Aa=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){r||(r=n)}e=t}}if(r)throw r}function wv(r){for(let e=r.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Sv(r){let e,t=r.depsTail,n=t;for(;n;){const s=n.prevDep;n.version===-1?(n===t&&(t=s),lf(n),NC(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=s}r.deps=e,r.depsTail=t}function qh(r){for(let e=r.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Tv(e.dep.computed)||e.dep.version!==e.version))return!0;return!!r._dirty}function Tv(r){if(r.flags&4&&!(r.flags&16)||(r.flags&=-17,r.globalVersion===qa))return;r.globalVersion=qa;const e=r.dep;if(r.flags|=2,e.version>0&&!r.isSSR&&r.deps&&!qh(r)){r.flags&=-3;return}const t=et,n=ar;et=r,ar=!0;try{wv(r);const s=r.fn(r._value);(e.version===0||os(s,r._value))&&(r._value=s,e.version++)}catch(s){throw e.version++,s}finally{et=t,ar=n,Sv(r),r.flags&=-3}}function lf(r,e=!1){const{dep:t,prevSub:n,nextSub:s}=r;if(n&&(n.nextSub=s,r.prevSub=void 0),s&&(s.prevSub=n,r.nextSub=void 0),t.subs===r&&(t.subs=n,!n&&t.computed)){t.computed.flags&=-5;for(let i=t.computed.deps;i;i=i.nextDep)lf(i,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function NC(r){const{prevDep:e,nextDep:t}=r;e&&(e.nextDep=t,r.prevDep=void 0),t&&(t.prevDep=e,r.nextDep=void 0)}let ar=!0;const Ov=[];function Gs(){Ov.push(ar),ar=!1}function qs(){const r=Ov.pop();ar=r===void 0?!0:r}function bg(r){const{cleanup:e}=r;if(r.cleanup=void 0,e){const t=et;et=void 0;try{e()}finally{et=t}}}let qa=0;class VC{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class cf{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!et||!ar||et===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==et)t=this.activeLink=new VC(et,this),et.deps?(t.prevDep=et.depsTail,et.depsTail.nextDep=t,et.depsTail=t):et.deps=et.depsTail=t,Ev(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const n=t.nextDep;n.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=n),t.prevDep=et.depsTail,t.nextDep=void 0,et.depsTail.nextDep=t,et.depsTail=t,et.deps===t&&(et.deps=n)}return t}trigger(e){this.version++,qa++,this.notify(e)}notify(e){of();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{af()}}}function Ev(r){if(r.dep.sc++,r.sub.flags&4){const e=r.dep.computed;if(e&&!r.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)Ev(n)}const t=r.dep.subs;t!==r&&(r.prevSub=t,t&&(t.nextSub=r)),r.dep.subs=r}}const wc=new WeakMap,Ci=Symbol(""),Kh=Symbol(""),Ka=Symbol("");function Qt(r,e,t){if(ar&&et){let n=wc.get(r);n||wc.set(r,n=new Map);let s=n.get(t);s||(n.set(t,s=new cf),s.map=n,s.key=t),s.track()}}function ns(r,e,t,n,s,i){const o=wc.get(r);if(!o){qa++;return}const a=l=>{l&&l.trigger()};if(of(),e==="clear")o.forEach(a);else{const l=we(r),c=l&&sf(t);if(l&&t==="length"){const u=Number(n);o.forEach((h,d)=>{(d==="length"||d===Ka||!ur(d)&&d>=u)&&a(h)})}else switch((t!==void 0||o.has(void 0))&&a(o.get(t)),c&&a(o.get(Ka)),e){case"add":l?c&&a(o.get("length")):(a(o.get(Ci)),lo(r)&&a(o.get(Kh)));break;case"delete":l||(a(o.get(Ci)),lo(r)&&a(o.get(Kh)));break;case"set":lo(r)&&a(o.get(Ci));break}}af()}function WC(r,e){const t=wc.get(r);return t&&t.get(e)}function Ki(r){const e=ze(r);return e===r?e:(Qt(e,"iterate",Ka),Qn(r)?e:e.map(en))}function gu(r){return Qt(r=ze(r),"iterate",Ka),r}const YC={__proto__:null,[Symbol.iterator](){return ih(this,Symbol.iterator,en)},concat(...r){return Ki(this).concat(...r.map(e=>we(e)?Ki(e):e))},entries(){return ih(this,"entries",r=>(r[1]=en(r[1]),r))},every(r,e){return Gr(this,"every",r,e,void 0,arguments)},filter(r,e){return Gr(this,"filter",r,e,t=>t.map(en),arguments)},find(r,e){return Gr(this,"find",r,e,en,arguments)},findIndex(r,e){return Gr(this,"findIndex",r,e,void 0,arguments)},findLast(r,e){return Gr(this,"findLast",r,e,en,arguments)},findLastIndex(r,e){return Gr(this,"findLastIndex",r,e,void 0,arguments)},forEach(r,e){return Gr(this,"forEach",r,e,void 0,arguments)},includes(...r){return oh(this,"includes",r)},indexOf(...r){return oh(this,"indexOf",r)},join(r){return Ki(this).join(r)},lastIndexOf(...r){return oh(this,"lastIndexOf",r)},map(r,e){return Gr(this,"map",r,e,void 0,arguments)},pop(){return Qo(this,"pop")},push(...r){return Qo(this,"push",r)},reduce(r,...e){return _g(this,"reduce",r,e)},reduceRight(r,...e){return _g(this,"reduceRight",r,e)},shift(){return Qo(this,"shift")},some(r,e){return Gr(this,"some",r,e,void 0,arguments)},splice(...r){return Qo(this,"splice",r)},toReversed(){return Ki(this).toReversed()},toSorted(r){return Ki(this).toSorted(r)},toSpliced(...r){return Ki(this).toSpliced(...r)},unshift(...r){return Qo(this,"unshift",r)},values(){return ih(this,"values",en)}};function ih(r,e,t){const n=gu(r),s=n[e]();return n!==r&&!Qn(r)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=t(i.value)),i}),s}const XC=Array.prototype;function Gr(r,e,t,n,s,i){const o=gu(r),a=o!==r&&!Qn(r),l=o[e];if(l!==XC[e]){const h=l.apply(r,i);return a?en(h):h}let c=t;o!==r&&(a?c=function(h,d){return t.call(this,en(h),d,r)}:t.length>2&&(c=function(h,d){return t.call(this,h,d,r)}));const u=l.call(o,c,n);return a&&s?s(u):u}function _g(r,e,t,n){const s=gu(r);let i=t;return s!==r&&(Qn(r)?t.length>3&&(i=function(o,a,l){return t.call(this,o,a,l,r)}):i=function(o,a,l){return t.call(this,o,en(a),l,r)}),s[e](i,...n)}function oh(r,e,t){const n=ze(r);Qt(n,"iterate",Ka);const s=n[e](...t);return(s===-1||s===!1)&&ff(t[0])?(t[0]=ze(t[0]),n[e](...t)):s}function Qo(r,e,t=[]){Gs(),of();const n=ze(r)[e].apply(r,t);return af(),qs(),n}const UC=tf("__proto__,__v_isRef,__isVue"),Mv=new Set(Object.getOwnPropertyNames(Symbol).filter(r=>r!=="arguments"&&r!=="caller").map(r=>Symbol[r]).filter(ur));function GC(r){ur(r)||(r=String(r));const e=ze(this);return Qt(e,"has",r),e.hasOwnProperty(r)}class Pv{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,n){if(t==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(t==="__v_isReactive")return!s;if(t==="__v_isReadonly")return s;if(t==="__v_isShallow")return i;if(t==="__v_raw")return n===(s?i?s1:Rv:i?kv:Fv).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const o=we(e);if(!s){let l;if(o&&(l=YC[t]))return l;if(t==="hasOwnProperty")return GC}const a=Reflect.get(e,t,Bt(e)?e:n);return(ur(t)?Mv.has(t):UC(t))||(s||Qt(e,"get",t),i)?a:Bt(a)?o&&sf(t)?a:a.value:Ke(a)?s?hf(a):pu(a):a}}class Av extends Pv{constructor(e=!1){super(!1,e)}set(e,t,n,s){let i=e[t];if(!this._isShallow){const l=Ri(i);if(!Qn(n)&&!Ri(n)&&(i=ze(i),n=ze(n)),!we(e)&&Bt(i)&&!Bt(n))return l?!1:(i.value=n,!0)}const o=we(e)&&sf(t)?Number(t)<e.length:We(e,t),a=Reflect.set(e,t,n,Bt(e)?e:s);return e===ze(s)&&(o?os(n,i)&&ns(e,"set",t,n):ns(e,"add",t,n)),a}deleteProperty(e,t){const n=We(e,t);e[t];const s=Reflect.deleteProperty(e,t);return s&&n&&ns(e,"delete",t,void 0),s}has(e,t){const n=Reflect.has(e,t);return(!ur(t)||!Mv.has(t))&&Qt(e,"has",t),n}ownKeys(e){return Qt(e,"iterate",we(e)?"length":Ci),Reflect.ownKeys(e)}}class qC extends Pv{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const KC=new Av,ZC=new qC,JC=new Av(!0),Zh=r=>r,jl=r=>Reflect.getPrototypeOf(r);function QC(r,e,t){return function(...n){const s=this.__v_raw,i=ze(s),o=lo(i),a=r==="entries"||r===Symbol.iterator&&o,l=r==="keys"&&o,c=s[r](...n),u=t?Zh:e?Jh:en;return!e&&Qt(i,"iterate",l?Kh:Ci),{next(){const{value:h,done:d}=c.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function zl(r){return function(...e){return r==="delete"?!1:r==="clear"?void 0:this}}function e1(r,e){const t={get(s){const i=this.__v_raw,o=ze(i),a=ze(s);r||(os(s,a)&&Qt(o,"get",s),Qt(o,"get",a));const{has:l}=jl(o),c=e?Zh:r?Jh:en;if(l.call(o,s))return c(i.get(s));if(l.call(o,a))return c(i.get(a));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!r&&Qt(ze(s),"iterate",Ci),Reflect.get(s,"size",s)},has(s){const i=this.__v_raw,o=ze(i),a=ze(s);return r||(os(s,a)&&Qt(o,"has",s),Qt(o,"has",a)),s===a?i.has(s):i.has(s)||i.has(a)},forEach(s,i){const o=this,a=o.__v_raw,l=ze(a),c=e?Zh:r?Jh:en;return!r&&Qt(l,"iterate",Ci),a.forEach((u,h)=>s.call(i,c(u),c(h),o))}};return kt(t,r?{add:zl("add"),set:zl("set"),delete:zl("delete"),clear:zl("clear")}:{add(s){!e&&!Qn(s)&&!Ri(s)&&(s=ze(s));const i=ze(this);return jl(i).has.call(i,s)||(i.add(s),ns(i,"add",s,s)),this},set(s,i){!e&&!Qn(i)&&!Ri(i)&&(i=ze(i));const o=ze(this),{has:a,get:l}=jl(o);let c=a.call(o,s);c||(s=ze(s),c=a.call(o,s));const u=l.call(o,s);return o.set(s,i),c?os(i,u)&&ns(o,"set",s,i):ns(o,"add",s,i),this},delete(s){const i=ze(this),{has:o,get:a}=jl(i);let l=o.call(i,s);l||(s=ze(s),l=o.call(i,s)),a&&a.call(i,s);const c=i.delete(s);return l&&ns(i,"delete",s,void 0),c},clear(){const s=ze(this),i=s.size!==0,o=s.clear();return i&&ns(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=QC(s,r,e)}),t}function uf(r,e){const t=e1(r,e);return(n,s,i)=>s==="__v_isReactive"?!r:s==="__v_isReadonly"?r:s==="__v_raw"?n:Reflect.get(We(t,s)&&s in n?t:n,s,i)}const t1={get:uf(!1,!1)},n1={get:uf(!1,!0)},r1={get:uf(!0,!1)},Fv=new WeakMap,kv=new WeakMap,Rv=new WeakMap,s1=new WeakMap;function i1(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function o1(r){return r.__v_skip||!Object.isExtensible(r)?0:i1(MC(r))}function pu(r){return Ri(r)?r:df(r,!1,KC,t1,Fv)}function Dv(r){return df(r,!1,JC,n1,kv)}function hf(r){return df(r,!0,ZC,r1,Rv)}function df(r,e,t,n,s){if(!Ke(r)||r.__v_raw&&!(e&&r.__v_isReactive))return r;const i=s.get(r);if(i)return i;const o=o1(r);if(o===0)return r;const a=new Proxy(r,o===2?n:t);return s.set(r,a),a}function co(r){return Ri(r)?co(r.__v_raw):!!(r&&r.__v_isReactive)}function Ri(r){return!!(r&&r.__v_isReadonly)}function Qn(r){return!!(r&&r.__v_isShallow)}function ff(r){return r?!!r.__v_raw:!1}function ze(r){const e=r&&r.__v_raw;return e?ze(e):r}function Iv(r){return!We(r,"__v_skip")&&Object.isExtensible(r)&&mv(r,"__v_skip",!0),r}const en=r=>Ke(r)?pu(r):r,Jh=r=>Ke(r)?hf(r):r;function Bt(r){return r?r.__v_isRef===!0:!1}function G(r){return Lv(r,!1)}function mu(r){return Lv(r,!0)}function Lv(r,e){return Bt(r)?r:new a1(r,e)}class a1{constructor(e,t){this.dep=new cf,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:ze(e),this._value=t?e:en(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,n=this.__v_isShallow||Qn(e)||Ri(e);e=n?e:ze(e),os(e,t)&&(this._rawValue=e,this._value=n?e:en(e),this.dep.trigger())}}function sn(r){return Bt(r)?r.value:r}const l1={get:(r,e,t)=>e==="__v_raw"?r:sn(Reflect.get(r,e,t)),set:(r,e,t,n)=>{const s=r[e];return Bt(s)&&!Bt(t)?(s.value=t,!0):Reflect.set(r,e,t,n)}};function Bv(r){return co(r)?r:new Proxy(r,l1)}class c1{constructor(e,t,n){this._object=e,this._key=t,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return WC(ze(this._object),this._key)}}class u1{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Di(r,e,t){return Bt(r)?r:Ee(r)?new u1(r):Ke(r)&&arguments.length>1?h1(r,e,t):G(r)}function h1(r,e,t){const n=r[e];return Bt(n)?n:new c1(r,e,t)}class d1{constructor(e,t,n){this.fn=e,this.setter=t,this._value=void 0,this.dep=new cf(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=qa-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&et!==this)return Cv(this,!0),!0}get value(){const e=this.dep.track();return Tv(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function f1(r,e,t=!1){let n,s;return Ee(r)?n=r:(n=r.get,s=r.set),new d1(n,s,t)}const Hl={},Sc=new WeakMap;let oi;function g1(r,e=!1,t=oi){if(t){let n=Sc.get(t);n||Sc.set(t,n=[]),n.push(r)}}function p1(r,e,t=Qe){const{immediate:n,deep:s,once:i,scheduler:o,augmentJob:a,call:l}=t,c=y=>s?y:Qn(y)||s===!1||s===0?rs(y,1):rs(y);let u,h,d,f,g=!1,p=!1;if(Bt(r)?(h=()=>r.value,g=Qn(r)):co(r)?(h=()=>c(r),g=!0):we(r)?(p=!0,g=r.some(y=>co(y)||Qn(y)),h=()=>r.map(y=>{if(Bt(y))return y.value;if(co(y))return c(y);if(Ee(y))return l?l(y,2):y()})):Ee(r)?e?h=l?()=>l(r,2):r:h=()=>{if(d){Gs();try{d()}finally{qs()}}const y=oi;oi=u;try{return l?l(r,3,[f]):r(f)}finally{oi=y}}:h=or,e&&s){const y=h,C=s===!0?1/0:s;h=()=>rs(y(),C)}const m=$C(),v=()=>{u.stop(),m&&m.active&&rf(m.effects,u)};if(i&&e){const y=e;e=(...C)=>{y(...C),v()}}let _=p?new Array(r.length).fill(Hl):Hl;const x=y=>{if(!(!(u.flags&1)||!u.dirty&&!y))if(e){const C=u.run();if(s||g||(p?C.some((E,b)=>os(E,_[b])):os(C,_))){d&&d();const E=oi;oi=u;try{const b=[C,_===Hl?void 0:p&&_[0]===Hl?[]:_,f];l?l(e,3,b):e(...b),_=C}finally{oi=E}}}else u.run()};return a&&a(x),u=new _v(h),u.scheduler=o?()=>o(x,!1):x,f=y=>g1(y,!1,u),d=u.onStop=()=>{const y=Sc.get(u);if(y){if(l)l(y,4);else for(const C of y)C();Sc.delete(u)}},e?n?x(!0):_=u.run():o?o(x.bind(null,!0),!0):u.run(),v.pause=u.pause.bind(u),v.resume=u.resume.bind(u),v.stop=v,v}function rs(r,e=1/0,t){if(e<=0||!Ke(r)||r.__v_skip||(t=t||new Set,t.has(r)))return r;if(t.add(r),e--,Bt(r))rs(r.value,e,t);else if(we(r))for(let n=0;n<r.length;n++)rs(r[n],e,t);else if(cu(r)||lo(r))r.forEach(n=>{rs(n,e,t)});else if(pv(r)){for(const n in r)rs(r[n],e,t);for(const n of Object.getOwnPropertySymbols(r))Object.prototype.propertyIsEnumerable.call(r,n)&&rs(r[n],e,t)}return r}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Cl(r,e,t,n){try{return n?r(...n):r()}catch(s){vu(s,e,t)}}function hr(r,e,t,n){if(Ee(r)){const s=Cl(r,e,t,n);return s&&fv(s)&&s.catch(i=>{vu(i,e,t)}),s}if(we(r)){const s=[];for(let i=0;i<r.length;i++)s.push(hr(r[i],e,t,n));return s}}function vu(r,e,t,n=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Qe;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${t}`;for(;a;){const u=a.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](r,l,c)===!1)return}a=a.parent}if(i){Gs(),Cl(i,null,10,[r,l,c]),qs();return}}m1(r,t,s,n,o)}function m1(r,e,t,n=!0,s=!1){if(s)throw r;console.error(r)}const hn=[];let Sr=-1;const uo=[];let Cs=null,eo=0;const jv=Promise.resolve();let Tc=null;function dr(r){const e=Tc||jv;return r?e.then(this?r.bind(this):r):e}function v1(r){let e=Sr+1,t=hn.length;for(;e<t;){const n=e+t>>>1,s=hn[n],i=Za(s);i<r||i===r&&s.flags&2?e=n+1:t=n}return e}function gf(r){if(!(r.flags&1)){const e=Za(r),t=hn[hn.length-1];!t||!(r.flags&2)&&e>=Za(t)?hn.push(r):hn.splice(v1(e),0,r),r.flags|=1,zv()}}function zv(){Tc||(Tc=jv.then(Nv))}function Hv(r){we(r)?uo.push(...r):Cs&&r.id===-1?Cs.splice(eo+1,0,r):r.flags&1||(uo.push(r),r.flags|=1),zv()}function xg(r,e,t=Sr+1){for(;t<hn.length;t++){const n=hn[t];if(n&&n.flags&2){if(r&&n.id!==r.uid)continue;hn.splice(t,1),t--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function $v(r){if(uo.length){const e=[...new Set(uo)].sort((t,n)=>Za(t)-Za(n));if(uo.length=0,Cs){Cs.push(...e);return}for(Cs=e,eo=0;eo<Cs.length;eo++){const t=Cs[eo];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}Cs=null,eo=0}}const Za=r=>r.id==null?r.flags&2?-1:1/0:r.id;function Nv(r){try{for(Sr=0;Sr<hn.length;Sr++){const e=hn[Sr];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Cl(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Sr<hn.length;Sr++){const e=hn[Sr];e&&(e.flags&=-2)}Sr=-1,hn.length=0,$v(),Tc=null,(hn.length||uo.length)&&Nv()}}let It=null,Vv=null;function Oc(r){const e=It;return It=r,Vv=r&&r.type.__scopeId||null,e}function ho(r,e=It,t){if(!e||r._n)return r;const n=(...s)=>{n._d&&kg(-1);const i=Oc(e);let o;try{o=r(...s)}finally{Oc(i),n._d&&kg(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function zr(r,e){if(It===null)return r;const t=wu(It),n=r.dirs||(r.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,a,l=Qe]=e[s];i&&(Ee(i)&&(i={mounted:i,updated:i}),i.deep&&rs(o),n.push({dir:i,instance:t,value:o,oldValue:void 0,arg:a,modifiers:l}))}return r}function ei(r,e,t,n){const s=r.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let l=a.dir[n];l&&(Gs(),hr(l,t,8,[r.el,a,r,e]),qs())}}const y1=Symbol("_vte"),Wv=r=>r.__isTeleport,ws=Symbol("_leaveCb"),$l=Symbol("_enterCb");function Yv(){const r={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Et(()=>{r.isMounted=!0}),Ho(()=>{r.isUnmounting=!0}),r}const Xn=[Function,Array],Xv={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Xn,onEnter:Xn,onAfterEnter:Xn,onEnterCancelled:Xn,onBeforeLeave:Xn,onLeave:Xn,onAfterLeave:Xn,onLeaveCancelled:Xn,onBeforeAppear:Xn,onAppear:Xn,onAfterAppear:Xn,onAppearCancelled:Xn},Uv=r=>{const e=r.subTree;return e.component?Uv(e.component):e},b1={name:"BaseTransition",props:Xv,setup(r,{slots:e}){const t=wl(),n=Yv();return()=>{const s=e.default&&pf(e.default(),!0);if(!s||!s.length)return;const i=Gv(s),o=ze(r),{mode:a}=o;if(n.isLeaving)return ah(i);const l=Cg(i);if(!l)return ah(i);let c=Ja(l,o,n,t,h=>c=h);l.type!==nn&&Ii(l,c);let u=t.subTree&&Cg(t.subTree);if(u&&u.type!==nn&&!li(l,u)&&Uv(t).type!==nn){let h=Ja(u,o,n,t);if(Ii(u,h),a==="out-in"&&l.type!==nn)return n.isLeaving=!0,h.afterLeave=()=>{n.isLeaving=!1,t.job.flags&8||t.update(),delete h.afterLeave,u=void 0},ah(i);a==="in-out"&&l.type!==nn?h.delayLeave=(d,f,g)=>{const p=qv(n,u);p[String(u.key)]=u,d[ws]=()=>{f(),d[ws]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{g(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return i}}};function Gv(r){let e=r[0];if(r.length>1){for(const t of r)if(t.type!==nn){e=t;break}}return e}const _1=b1;function qv(r,e){const{leavingVNodes:t}=r;let n=t.get(e.type);return n||(n=Object.create(null),t.set(e.type,n)),n}function Ja(r,e,t,n,s){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:h,onBeforeLeave:d,onLeave:f,onAfterLeave:g,onLeaveCancelled:p,onBeforeAppear:m,onAppear:v,onAfterAppear:_,onAppearCancelled:x}=e,y=String(r.key),C=qv(t,r),E=(S,$)=>{S&&hr(S,n,9,$)},b=(S,$)=>{const N=$[1];E(S,$),we(S)?S.every(H=>H.length<=1)&&N():S.length<=1&&N()},w={mode:o,persisted:a,beforeEnter(S){let $=l;if(!t.isMounted)if(i)$=m||l;else return;S[ws]&&S[ws](!0);const N=C[y];N&&li(r,N)&&N.el[ws]&&N.el[ws](),E($,[S])},enter(S){let $=c,N=u,H=h;if(!t.isMounted)if(i)$=v||c,N=_||u,H=x||h;else return;let U=!1;const ee=S[$l]=re=>{U||(U=!0,re?E(H,[S]):E(N,[S]),w.delayedLeave&&w.delayedLeave(),S[$l]=void 0)};$?b($,[S,ee]):ee()},leave(S,$){const N=String(r.key);if(S[$l]&&S[$l](!0),t.isUnmounting)return $();E(d,[S]);let H=!1;const U=S[ws]=ee=>{H||(H=!0,$(),ee?E(p,[S]):E(g,[S]),S[ws]=void 0,C[N]===r&&delete C[N])};C[N]=r,f?b(f,[S,U]):U()},clone(S){const $=Ja(S,e,t,n,s);return s&&s($),$}};return w}function ah(r){if(yu(r))return r=zs(r),r.children=null,r}function Cg(r){if(!yu(r))return Wv(r.type)&&r.children?Gv(r.children):r;const{shapeFlag:e,children:t}=r;if(t){if(e&16)return t[0];if(e&32&&Ee(t.default))return t.default()}}function Ii(r,e){r.shapeFlag&6&&r.component?(r.transition=e,Ii(r.component.subTree,e)):r.shapeFlag&128?(r.ssContent.transition=e.clone(r.ssContent),r.ssFallback.transition=e.clone(r.ssFallback)):r.transition=e}function pf(r,e=!1,t){let n=[],s=0;for(let i=0;i<r.length;i++){let o=r[i];const a=t==null?o.key:String(t)+String(o.key!=null?o.key:i);o.type===Ne?(o.patchFlag&128&&s++,n=n.concat(pf(o.children,e,a))):(e||o.type!==nn)&&n.push(a!=null?zs(o,{key:a}):o)}if(s>1)for(let i=0;i<n.length;i++)n[i].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function Re(r,e){return Ee(r)?kt({name:r.name},e,{setup:r}):r}function Kv(r){r.ids=[r.ids[0]+r.ids[2]+++"-",0,0]}function Ec(r,e,t,n,s=!1){if(we(r)){r.forEach((g,p)=>Ec(g,e&&(we(e)?e[p]:e),t,n,s));return}if(fo(n)&&!s){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Ec(r,e,t,n.component.subTree);return}const i=n.shapeFlag&4?wu(n.component):n.el,o=s?null:i,{i:a,r:l}=r,c=e&&e.r,u=a.refs===Qe?a.refs={}:a.refs,h=a.setupState,d=ze(h),f=h===Qe?()=>!1:g=>We(d,g);if(c!=null&&c!==l&&(vt(c)?(u[c]=null,f(c)&&(h[c]=null)):Bt(c)&&(c.value=null)),Ee(l))Cl(l,a,12,[o,u]);else{const g=vt(l),p=Bt(l);if(g||p){const m=()=>{if(r.f){const v=g?f(l)?h[l]:u[l]:l.value;s?we(v)&&rf(v,i):we(v)?v.includes(i)||v.push(i):g?(u[l]=[i],f(l)&&(h[l]=u[l])):(l.value=[i],r.k&&(u[r.k]=l.value))}else g?(u[l]=o,f(l)&&(h[l]=o)):p&&(l.value=o,r.k&&(u[r.k]=o))};o?(m.id=-1,kn(m,t)):m()}}}du().requestIdleCallback;du().cancelIdleCallback;const fo=r=>!!r.type.__asyncLoader,yu=r=>r.type.__isKeepAlive;function Zv(r,e){Qv(r,"a",e)}function Jv(r,e){Qv(r,"da",e)}function Qv(r,e,t=Vt){const n=r.__wdc||(r.__wdc=()=>{let s=t;for(;s;){if(s.isDeactivated)return;s=s.parent}return r()});if(bu(e,n,t),t){let s=t.parent;for(;s&&s.parent;)yu(s.parent.vnode)&&x1(n,e,t,s),s=s.parent}}function x1(r,e,t,n){const s=bu(e,r,n,!0);Nr(()=>{rf(n[e],s)},t)}function bu(r,e,t=Vt,n=!1){if(t){const s=t[r]||(t[r]=[]),i=e.__weh||(e.__weh=(...o)=>{Gs();const a=Sl(t),l=hr(e,t,r,o);return a(),qs(),l});return n?s.unshift(i):s.push(i),i}}const hs=r=>(e,t=Vt)=>{(!tl||r==="sp")&&bu(r,(...n)=>e(...n),t)},_u=hs("bm"),Et=hs("m"),e0=hs("bu"),t0=hs("u"),Ho=hs("bum"),Nr=hs("um"),C1=hs("sp"),w1=hs("rtg"),S1=hs("rtc");function T1(r,e=Vt){bu("ec",r,e)}const n0="components";function ka(r,e){return i0(n0,r,!0,e)||r}const r0=Symbol.for("v-ndc");function s0(r){return vt(r)?i0(n0,r,!1)||r:r||r0}function i0(r,e,t=!0,n=!1){const s=It||Vt;if(s){const i=s.type;{const a=hw(i,!1);if(a&&(a===e||a===tr(e)||a===hu(tr(e))))return i}const o=wg(s[r]||i[r],e)||wg(s.appContext[r],e);return!o&&n?i:o}}function wg(r,e){return r&&(r[e]||r[tr(e)]||r[hu(tr(e))])}function xn(r,e,t,n){let s;const i=t&&t[n],o=we(r);if(o||vt(r)){const a=o&&co(r);let l=!1;a&&(l=!Qn(r),r=gu(r)),s=new Array(r.length);for(let c=0,u=r.length;c<u;c++)s[c]=e(l?en(r[c]):r[c],c,void 0,i&&i[c])}else if(typeof r=="number"){s=new Array(r);for(let a=0;a<r;a++)s[a]=e(a+1,a,void 0,i&&i[a])}else if(Ke(r))if(r[Symbol.iterator])s=Array.from(r,(a,l)=>e(a,l,void 0,i&&i[l]));else{const a=Object.keys(r);s=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];s[l]=e(r[u],u,l,i&&i[l])}}else s=[];return t&&(t[n]=s),s}function O1(r,e,t={},n,s){if(It.ce||It.parent&&fo(It.parent)&&It.parent.ce)return ce(),Nt(Ne,null,[dt("slot",t,n)],64);let i=r[e];i&&i._c&&(i._d=!1),ce();const o=i&&o0(i(t)),a=t.key||o&&o.key,l=Nt(Ne,{key:(a&&!ur(a)?a:`_${e}`)+""},o||[],o&&r._===1?64:-2);return l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),i&&i._c&&(i._d=!0),l}function o0(r){return r.some(e=>To(e)?!(e.type===nn||e.type===Ne&&!o0(e.children)):!0)?r:null}const Qh=r=>r?O0(r)?wu(r):Qh(r.parent):null,Ra=kt(Object.create(null),{$:r=>r,$el:r=>r.vnode.el,$data:r=>r.data,$props:r=>r.props,$attrs:r=>r.attrs,$slots:r=>r.slots,$refs:r=>r.refs,$parent:r=>Qh(r.parent),$root:r=>Qh(r.root),$host:r=>r.ce,$emit:r=>r.emit,$options:r=>l0(r),$forceUpdate:r=>r.f||(r.f=()=>{gf(r.update)}),$nextTick:r=>r.n||(r.n=dr.bind(r.proxy)),$watch:r=>U1.bind(r)}),lh=(r,e)=>r!==Qe&&!r.__isScriptSetup&&We(r,e),E1={get({_:r},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:n,data:s,props:i,accessCache:o,type:a,appContext:l}=r;let c;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return n[e];case 2:return s[e];case 4:return t[e];case 3:return i[e]}else{if(lh(n,e))return o[e]=1,n[e];if(s!==Qe&&We(s,e))return o[e]=2,s[e];if((c=r.propsOptions[0])&&We(c,e))return o[e]=3,i[e];if(t!==Qe&&We(t,e))return o[e]=4,t[e];ed&&(o[e]=0)}}const u=Ra[e];let h,d;if(u)return e==="$attrs"&&Qt(r.attrs,"get",""),u(r);if((h=a.__cssModules)&&(h=h[e]))return h;if(t!==Qe&&We(t,e))return o[e]=4,t[e];if(d=l.config.globalProperties,We(d,e))return d[e]},set({_:r},e,t){const{data:n,setupState:s,ctx:i}=r;return lh(s,e)?(s[e]=t,!0):n!==Qe&&We(n,e)?(n[e]=t,!0):We(r.props,e)||e[0]==="$"&&e.slice(1)in r?!1:(i[e]=t,!0)},has({_:{data:r,setupState:e,accessCache:t,ctx:n,appContext:s,propsOptions:i}},o){let a;return!!t[o]||r!==Qe&&We(r,o)||lh(e,o)||(a=i[0])&&We(a,o)||We(n,o)||We(Ra,o)||We(s.config.globalProperties,o)},defineProperty(r,e,t){return t.get!=null?r._.accessCache[e]=0:We(t,"value")&&this.set(r,e,t.value,null),Reflect.defineProperty(r,e,t)}};function Sg(r){return we(r)?r.reduce((e,t)=>(e[t]=null,e),{}):r}let ed=!0;function M1(r){const e=l0(r),t=r.proxy,n=r.ctx;ed=!1,e.beforeCreate&&Tg(e.beforeCreate,r,"bc");const{data:s,computed:i,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:d,beforeUpdate:f,updated:g,activated:p,deactivated:m,beforeDestroy:v,beforeUnmount:_,destroyed:x,unmounted:y,render:C,renderTracked:E,renderTriggered:b,errorCaptured:w,serverPrefetch:S,expose:$,inheritAttrs:N,components:H,directives:U,filters:ee}=e;if(c&&P1(c,n,null),o)for(const z in o){const R=o[z];Ee(R)&&(n[z]=R.bind(t))}if(s){const z=s.call(t,t);Ke(z)&&(r.data=pu(z))}if(ed=!0,i)for(const z in i){const R=i[z],ue=Ee(R)?R.bind(t,t):Ee(R.get)?R.get.bind(t,t):or,de=!Ee(R)&&Ee(R.set)?R.set.bind(t):or,Ce=me({get:ue,set:de});Object.defineProperty(n,z,{enumerable:!0,configurable:!0,get:()=>Ce.value,set:fe=>Ce.value=fe})}if(a)for(const z in a)a0(a[z],n,t,z);if(l){const z=Ee(l)?l.call(t):l;Reflect.ownKeys(z).forEach(R=>{po(R,z[R])})}u&&Tg(u,r,"c");function te(z,R){we(R)?R.forEach(ue=>z(ue.bind(t))):R&&z(R.bind(t))}if(te(_u,h),te(Et,d),te(e0,f),te(t0,g),te(Zv,p),te(Jv,m),te(T1,w),te(S1,E),te(w1,b),te(Ho,_),te(Nr,y),te(C1,S),we($))if($.length){const z=r.exposed||(r.exposed={});$.forEach(R=>{Object.defineProperty(z,R,{get:()=>t[R],set:ue=>t[R]=ue})})}else r.exposed||(r.exposed={});C&&r.render===or&&(r.render=C),N!=null&&(r.inheritAttrs=N),H&&(r.components=H),U&&(r.directives=U),S&&Kv(r)}function P1(r,e,t=or){we(r)&&(r=td(r));for(const n in r){const s=r[n];let i;Ke(s)?"default"in s?i=Ct(s.from||n,s.default,!0):i=Ct(s.from||n):i=Ct(s),Bt(i)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[n]=i}}function Tg(r,e,t){hr(we(r)?r.map(n=>n.bind(e.proxy)):r.bind(e.proxy),e,t)}function a0(r,e,t,n){let s=n.includes(".")?x0(t,n):()=>t[n];if(vt(r)){const i=e[r];Ee(i)&&Ot(s,i)}else if(Ee(r))Ot(s,r.bind(t));else if(Ke(r))if(we(r))r.forEach(i=>a0(i,e,t,n));else{const i=Ee(r.handler)?r.handler.bind(t):e[r.handler];Ee(i)&&Ot(s,i,r)}}function l0(r){const e=r.type,{mixins:t,extends:n}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=r.appContext,a=i.get(e);let l;return a?l=a:!s.length&&!t&&!n?l=e:(l={},s.length&&s.forEach(c=>Mc(l,c,o,!0)),Mc(l,e,o)),Ke(e)&&i.set(e,l),l}function Mc(r,e,t,n=!1){const{mixins:s,extends:i}=e;i&&Mc(r,i,t,!0),s&&s.forEach(o=>Mc(r,o,t,!0));for(const o in e)if(!(n&&o==="expose")){const a=A1[o]||t&&t[o];r[o]=a?a(r[o],e[o]):e[o]}return r}const A1={data:Og,props:Eg,emits:Eg,methods:la,computed:la,beforeCreate:ln,created:ln,beforeMount:ln,mounted:ln,beforeUpdate:ln,updated:ln,beforeDestroy:ln,beforeUnmount:ln,destroyed:ln,unmounted:ln,activated:ln,deactivated:ln,errorCaptured:ln,serverPrefetch:ln,components:la,directives:la,watch:k1,provide:Og,inject:F1};function Og(r,e){return e?r?function(){return kt(Ee(r)?r.call(this,this):r,Ee(e)?e.call(this,this):e)}:e:r}function F1(r,e){return la(td(r),td(e))}function td(r){if(we(r)){const e={};for(let t=0;t<r.length;t++)e[r[t]]=r[t];return e}return r}function ln(r,e){return r?[...new Set([].concat(r,e))]:e}function la(r,e){return r?kt(Object.create(null),r,e):e}function Eg(r,e){return r?we(r)&&we(e)?[...new Set([...r,...e])]:kt(Object.create(null),Sg(r),Sg(e??{})):e}function k1(r,e){if(!r)return e;if(!e)return r;const t=kt(Object.create(null),r);for(const n in e)t[n]=ln(r[n],e[n]);return t}function c0(){return{app:null,config:{isNativeTag:OC,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let R1=0;function D1(r,e){return function(n,s=null){Ee(n)||(n=kt({},n)),s!=null&&!Ke(s)&&(s=null);const i=c0(),o=new WeakSet,a=[];let l=!1;const c=i.app={_uid:R1++,_component:n,_props:s,_container:null,_context:i,_instance:null,version:gw,get config(){return i.config},set config(u){},use(u,...h){return o.has(u)||(u&&Ee(u.install)?(o.add(u),u.install(c,...h)):Ee(u)&&(o.add(u),u(c,...h))),c},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),c},component(u,h){return h?(i.components[u]=h,c):i.components[u]},directive(u,h){return h?(i.directives[u]=h,c):i.directives[u]},mount(u,h,d){if(!l){const f=c._ceVNode||dt(n,s);return f.appContext=i,d===!0?d="svg":d===!1&&(d=void 0),r(f,u,d),l=!0,c._container=u,u.__vue_app__=c,wu(f.component)}},onUnmount(u){a.push(u)},unmount(){l&&(hr(a,c._instance,16),r(null,c._container),delete c._container.__vue_app__)},provide(u,h){return i.provides[u]=h,c},runWithContext(u){const h=go;go=c;try{return u()}finally{go=h}}};return c}}let go=null;function po(r,e){if(Vt){let t=Vt.provides;const n=Vt.parent&&Vt.parent.provides;n===t&&(t=Vt.provides=Object.create(n)),t[r]=e}}function Ct(r,e,t=!1){const n=Vt||It;if(n||go){const s=go?go._context.provides:n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(s&&r in s)return s[r];if(arguments.length>1)return t&&Ee(e)?e.call(n&&n.proxy):e}}const u0={},h0=()=>Object.create(u0),d0=r=>Object.getPrototypeOf(r)===u0;function I1(r,e,t,n=!1){const s={},i=h0();r.propsDefaults=Object.create(null),f0(r,e,s,i);for(const o in r.propsOptions[0])o in s||(s[o]=void 0);t?r.props=n?s:Dv(s):r.type.props?r.props=s:r.props=i,r.attrs=i}function L1(r,e,t,n){const{props:s,attrs:i,vnode:{patchFlag:o}}=r,a=ze(s),[l]=r.propsOptions;let c=!1;if((n||o>0)&&!(o&16)){if(o&8){const u=r.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if(xu(r.emitsOptions,d))continue;const f=e[d];if(l)if(We(i,d))f!==i[d]&&(i[d]=f,c=!0);else{const g=tr(d);s[g]=nd(l,a,g,f,r,!1)}else f!==i[d]&&(i[d]=f,c=!0)}}}else{f0(r,e,s,i)&&(c=!0);let u;for(const h in a)(!e||!We(e,h)&&((u=$i(h))===h||!We(e,u)))&&(l?t&&(t[h]!==void 0||t[u]!==void 0)&&(s[h]=nd(l,a,h,void 0,r,!0)):delete s[h]);if(i!==a)for(const h in i)(!e||!We(e,h))&&(delete i[h],c=!0)}c&&ns(r.attrs,"set","")}function f0(r,e,t,n){const[s,i]=r.propsOptions;let o=!1,a;if(e)for(let l in e){if(Pa(l))continue;const c=e[l];let u;s&&We(s,u=tr(l))?!i||!i.includes(u)?t[u]=c:(a||(a={}))[u]=c:xu(r.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,o=!0)}if(i){const l=ze(t),c=a||Qe;for(let u=0;u<i.length;u++){const h=i[u];t[h]=nd(s,l,h,c[h],r,!We(c,h))}}return o}function nd(r,e,t,n,s,i){const o=r[t];if(o!=null){const a=We(o,"default");if(a&&n===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Ee(l)){const{propsDefaults:c}=s;if(t in c)n=c[t];else{const u=Sl(s);n=c[t]=l.call(null,e),u()}}else n=l;s.ce&&s.ce._setProp(t,n)}o[0]&&(i&&!a?n=!1:o[1]&&(n===""||n===$i(t))&&(n=!0))}return n}const B1=new WeakMap;function g0(r,e,t=!1){const n=t?B1:e.propsCache,s=n.get(r);if(s)return s;const i=r.props,o={},a=[];let l=!1;if(!Ee(r)){const u=h=>{l=!0;const[d,f]=g0(h,e,!0);kt(o,d),f&&a.push(...f)};!t&&e.mixins.length&&e.mixins.forEach(u),r.extends&&u(r.extends),r.mixins&&r.mixins.forEach(u)}if(!i&&!l)return Ke(r)&&n.set(r,ao),ao;if(we(i))for(let u=0;u<i.length;u++){const h=tr(i[u]);Mg(h)&&(o[h]=Qe)}else if(i)for(const u in i){const h=tr(u);if(Mg(h)){const d=i[u],f=o[h]=we(d)||Ee(d)?{type:d}:kt({},d),g=f.type;let p=!1,m=!0;if(we(g))for(let v=0;v<g.length;++v){const _=g[v],x=Ee(_)&&_.name;if(x==="Boolean"){p=!0;break}else x==="String"&&(m=!1)}else p=Ee(g)&&g.name==="Boolean";f[0]=p,f[1]=m,(p||We(f,"default"))&&a.push(h)}}const c=[o,a];return Ke(r)&&n.set(r,c),c}function Mg(r){return r[0]!=="$"&&!Pa(r)}const p0=r=>r[0]==="_"||r==="$stable",mf=r=>we(r)?r.map(Er):[Er(r)],j1=(r,e,t)=>{if(e._n)return e;const n=ho((...s)=>mf(e(...s)),t);return n._c=!1,n},m0=(r,e,t)=>{const n=r._ctx;for(const s in r){if(p0(s))continue;const i=r[s];if(Ee(i))e[s]=j1(s,i,n);else if(i!=null){const o=mf(i);e[s]=()=>o}}},v0=(r,e)=>{const t=mf(e);r.slots.default=()=>t},y0=(r,e,t)=>{for(const n in e)(t||n!=="_")&&(r[n]=e[n])},z1=(r,e,t)=>{const n=r.slots=h0();if(r.vnode.shapeFlag&32){const s=e._;s?(y0(n,e,t),t&&mv(n,"_",s,!0)):m0(e,n)}else e&&v0(r,e)},H1=(r,e,t)=>{const{vnode:n,slots:s}=r;let i=!0,o=Qe;if(n.shapeFlag&32){const a=e._;a?t&&a===1?i=!1:y0(s,e,t):(i=!e.$stable,m0(e,s)),o=e}else e&&(v0(r,e),o={default:1});if(i)for(const a in s)!p0(a)&&o[a]==null&&delete s[a]},kn=ew;function $1(r){return N1(r)}function N1(r,e){const t=du();t.__VUE__=!0;const{insert:n,remove:s,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:d,setScopeId:f=or,insertStaticContent:g}=r,p=(T,O,L,q=null,Z=null,k=null,V=void 0,K=null,W=!!O.dynamicChildren)=>{if(T===O)return;T&&!li(T,O)&&(q=M(T),fe(T,Z,k,!0),T=null),O.patchFlag===-2&&(W=!1,O.dynamicChildren=null);const{type:Y,ref:ae,shapeFlag:ie}=O;switch(Y){case Cu:m(T,O,L,q);break;case nn:v(T,O,L,q);break;case cc:T==null&&_(O,L,q,V);break;case Ne:H(T,O,L,q,Z,k,V,K,W);break;default:ie&1?C(T,O,L,q,Z,k,V,K,W):ie&6?U(T,O,L,q,Z,k,V,K,W):(ie&64||ie&128)&&Y.process(T,O,L,q,Z,k,V,K,W,se)}ae!=null&&Z&&Ec(ae,T&&T.ref,k,O||T,!O)},m=(T,O,L,q)=>{if(T==null)n(O.el=a(O.children),L,q);else{const Z=O.el=T.el;O.children!==T.children&&c(Z,O.children)}},v=(T,O,L,q)=>{T==null?n(O.el=l(O.children||""),L,q):O.el=T.el},_=(T,O,L,q)=>{[T.el,T.anchor]=g(T.children,O,L,q,T.el,T.anchor)},x=({el:T,anchor:O},L,q)=>{let Z;for(;T&&T!==O;)Z=d(T),n(T,L,q),T=Z;n(O,L,q)},y=({el:T,anchor:O})=>{let L;for(;T&&T!==O;)L=d(T),s(T),T=L;s(O)},C=(T,O,L,q,Z,k,V,K,W)=>{O.type==="svg"?V="svg":O.type==="math"&&(V="mathml"),T==null?E(O,L,q,Z,k,V,K,W):S(T,O,Z,k,V,K,W)},E=(T,O,L,q,Z,k,V,K)=>{let W,Y;const{props:ae,shapeFlag:ie,transition:le,dirs:ge}=T;if(W=T.el=o(T.type,k,ae&&ae.is,ae),ie&8?u(W,T.children):ie&16&&w(T.children,W,null,q,Z,ch(T,k),V,K),ge&&ei(T,null,q,"created"),b(W,T,T.scopeId,V,q),ae){for(const Be in ae)Be!=="value"&&!Pa(Be)&&i(W,Be,null,ae[Be],k,q);"value"in ae&&i(W,"value",null,ae.value,k),(Y=ae.onVnodeBeforeMount)&&_r(Y,q,T)}ge&&ei(T,null,q,"beforeMount");const Pe=V1(Z,le);Pe&&le.beforeEnter(W),n(W,O,L),((Y=ae&&ae.onVnodeMounted)||Pe||ge)&&kn(()=>{Y&&_r(Y,q,T),Pe&&le.enter(W),ge&&ei(T,null,q,"mounted")},Z)},b=(T,O,L,q,Z)=>{if(L&&f(T,L),q)for(let k=0;k<q.length;k++)f(T,q[k]);if(Z){let k=Z.subTree;if(O===k||w0(k.type)&&(k.ssContent===O||k.ssFallback===O)){const V=Z.vnode;b(T,V,V.scopeId,V.slotScopeIds,Z.parent)}}},w=(T,O,L,q,Z,k,V,K,W=0)=>{for(let Y=W;Y<T.length;Y++){const ae=T[Y]=K?Ss(T[Y]):Er(T[Y]);p(null,ae,O,L,q,Z,k,V,K)}},S=(T,O,L,q,Z,k,V)=>{const K=O.el=T.el;let{patchFlag:W,dynamicChildren:Y,dirs:ae}=O;W|=T.patchFlag&16;const ie=T.props||Qe,le=O.props||Qe;let ge;if(L&&ti(L,!1),(ge=le.onVnodeBeforeUpdate)&&_r(ge,L,O,T),ae&&ei(O,T,L,"beforeUpdate"),L&&ti(L,!0),(ie.innerHTML&&le.innerHTML==null||ie.textContent&&le.textContent==null)&&u(K,""),Y?$(T.dynamicChildren,Y,K,L,q,ch(O,Z),k):V||R(T,O,K,null,L,q,ch(O,Z),k,!1),W>0){if(W&16)N(K,ie,le,L,Z);else if(W&2&&ie.class!==le.class&&i(K,"class",null,le.class,Z),W&4&&i(K,"style",ie.style,le.style,Z),W&8){const Pe=O.dynamicProps;for(let Be=0;Be<Pe.length;Be++){const Ie=Pe[Be],Rt=ie[Ie],Dt=le[Ie];(Dt!==Rt||Ie==="value")&&i(K,Ie,Rt,Dt,Z,L)}}W&1&&T.children!==O.children&&u(K,O.children)}else!V&&Y==null&&N(K,ie,le,L,Z);((ge=le.onVnodeUpdated)||ae)&&kn(()=>{ge&&_r(ge,L,O,T),ae&&ei(O,T,L,"updated")},q)},$=(T,O,L,q,Z,k,V)=>{for(let K=0;K<O.length;K++){const W=T[K],Y=O[K],ae=W.el&&(W.type===Ne||!li(W,Y)||W.shapeFlag&70)?h(W.el):L;p(W,Y,ae,null,q,Z,k,V,!0)}},N=(T,O,L,q,Z)=>{if(O!==L){if(O!==Qe)for(const k in O)!Pa(k)&&!(k in L)&&i(T,k,O[k],null,Z,q);for(const k in L){if(Pa(k))continue;const V=L[k],K=O[k];V!==K&&k!=="value"&&i(T,k,K,V,Z,q)}"value"in L&&i(T,"value",O.value,L.value,Z)}},H=(T,O,L,q,Z,k,V,K,W)=>{const Y=O.el=T?T.el:a(""),ae=O.anchor=T?T.anchor:a("");let{patchFlag:ie,dynamicChildren:le,slotScopeIds:ge}=O;ge&&(K=K?K.concat(ge):ge),T==null?(n(Y,L,q),n(ae,L,q),w(O.children||[],L,ae,Z,k,V,K,W)):ie>0&&ie&64&&le&&T.dynamicChildren?($(T.dynamicChildren,le,L,Z,k,V,K),(O.key!=null||Z&&O===Z.subTree)&&b0(T,O,!0)):R(T,O,L,ae,Z,k,V,K,W)},U=(T,O,L,q,Z,k,V,K,W)=>{O.slotScopeIds=K,T==null?O.shapeFlag&512?Z.ctx.activate(O,L,q,V,W):ee(O,L,q,Z,k,V,W):re(T,O,W)},ee=(T,O,L,q,Z,k,V)=>{const K=T.component=ow(T,q,Z);if(yu(T)&&(K.ctx.renderer=se),aw(K,!1,V),K.asyncDep){if(Z&&Z.registerDep(K,te,V),!T.el){const W=K.subTree=dt(nn);v(null,W,O,L)}}else te(K,T,O,L,Z,k,V)},re=(T,O,L)=>{const q=O.component=T.component;if(J1(T,O,L))if(q.asyncDep&&!q.asyncResolved){z(q,O,L);return}else q.next=O,q.update();else O.el=T.el,q.vnode=O},te=(T,O,L,q,Z,k,V)=>{const K=()=>{if(T.isMounted){let{next:ie,bu:le,u:ge,parent:Pe,vnode:Be}=T;{const Xt=_0(T);if(Xt){ie&&(ie.el=Be.el,z(T,ie,V)),Xt.asyncDep.then(()=>{T.isUnmounted||K()});return}}let Ie=ie,Rt;ti(T,!1),ie?(ie.el=Be.el,z(T,ie,V)):ie=Be,le&&lc(le),(Rt=ie.props&&ie.props.onVnodeBeforeUpdate)&&_r(Rt,Pe,ie,Be),ti(T,!0);const Dt=Ag(T),Yt=T.subTree;T.subTree=Dt,p(Yt,Dt,h(Yt.el),M(Yt),T,Z,k),ie.el=Dt.el,Ie===null&&Q1(T,Dt.el),ge&&kn(ge,Z),(Rt=ie.props&&ie.props.onVnodeUpdated)&&kn(()=>_r(Rt,Pe,ie,Be),Z)}else{let ie;const{el:le,props:ge}=O,{bm:Pe,m:Be,parent:Ie,root:Rt,type:Dt}=T,Yt=fo(O);ti(T,!1),Pe&&lc(Pe),!Yt&&(ie=ge&&ge.onVnodeBeforeMount)&&_r(ie,Ie,O),ti(T,!0);{Rt.ce&&Rt.ce._injectChildStyle(Dt);const Xt=T.subTree=Ag(T);p(null,Xt,L,q,T,Z,k),O.el=Xt.el}if(Be&&kn(Be,Z),!Yt&&(ie=ge&&ge.onVnodeMounted)){const Xt=O;kn(()=>_r(ie,Ie,Xt),Z)}(O.shapeFlag&256||Ie&&fo(Ie.vnode)&&Ie.vnode.shapeFlag&256)&&T.a&&kn(T.a,Z),T.isMounted=!0,O=L=q=null}};T.scope.on();const W=T.effect=new _v(K);T.scope.off();const Y=T.update=W.run.bind(W),ae=T.job=W.runIfDirty.bind(W);ae.i=T,ae.id=T.uid,W.scheduler=()=>gf(ae),ti(T,!0),Y()},z=(T,O,L)=>{O.component=T;const q=T.vnode.props;T.vnode=O,T.next=null,L1(T,O.props,q,L),H1(T,O.children,L),Gs(),xg(T),qs()},R=(T,O,L,q,Z,k,V,K,W=!1)=>{const Y=T&&T.children,ae=T?T.shapeFlag:0,ie=O.children,{patchFlag:le,shapeFlag:ge}=O;if(le>0){if(le&128){de(Y,ie,L,q,Z,k,V,K,W);return}else if(le&256){ue(Y,ie,L,q,Z,k,V,K,W);return}}ge&8?(ae&16&&ve(Y,Z,k),ie!==Y&&u(L,ie)):ae&16?ge&16?de(Y,ie,L,q,Z,k,V,K,W):ve(Y,Z,k,!0):(ae&8&&u(L,""),ge&16&&w(ie,L,q,Z,k,V,K,W))},ue=(T,O,L,q,Z,k,V,K,W)=>{T=T||ao,O=O||ao;const Y=T.length,ae=O.length,ie=Math.min(Y,ae);let le;for(le=0;le<ie;le++){const ge=O[le]=W?Ss(O[le]):Er(O[le]);p(T[le],ge,L,null,Z,k,V,K,W)}Y>ae?ve(T,Z,k,!0,!1,ie):w(O,L,q,Z,k,V,K,W,ie)},de=(T,O,L,q,Z,k,V,K,W)=>{let Y=0;const ae=O.length;let ie=T.length-1,le=ae-1;for(;Y<=ie&&Y<=le;){const ge=T[Y],Pe=O[Y]=W?Ss(O[Y]):Er(O[Y]);if(li(ge,Pe))p(ge,Pe,L,null,Z,k,V,K,W);else break;Y++}for(;Y<=ie&&Y<=le;){const ge=T[ie],Pe=O[le]=W?Ss(O[le]):Er(O[le]);if(li(ge,Pe))p(ge,Pe,L,null,Z,k,V,K,W);else break;ie--,le--}if(Y>ie){if(Y<=le){const ge=le+1,Pe=ge<ae?O[ge].el:q;for(;Y<=le;)p(null,O[Y]=W?Ss(O[Y]):Er(O[Y]),L,Pe,Z,k,V,K,W),Y++}}else if(Y>le)for(;Y<=ie;)fe(T[Y],Z,k,!0),Y++;else{const ge=Y,Pe=Y,Be=new Map;for(Y=Pe;Y<=le;Y++){const Ut=O[Y]=W?Ss(O[Y]):Er(O[Y]);Ut.key!=null&&Be.set(Ut.key,Y)}let Ie,Rt=0;const Dt=le-Pe+1;let Yt=!1,Xt=0;const yr=new Array(Dt);for(Y=0;Y<Dt;Y++)yr[Y]=0;for(Y=ge;Y<=ie;Y++){const Ut=T[Y];if(Rt>=Dt){fe(Ut,Z,k,!0);continue}let ne;if(Ut.key!=null)ne=Be.get(Ut.key);else for(Ie=Pe;Ie<=le;Ie++)if(yr[Ie-Pe]===0&&li(Ut,O[Ie])){ne=Ie;break}ne===void 0?fe(Ut,Z,k,!0):(yr[ne-Pe]=Y+1,ne>=Xt?Xt=ne:Yt=!0,p(Ut,O[ne],L,null,Z,k,V,K,W),Rt++)}const rr=Yt?W1(yr):ao;for(Ie=rr.length-1,Y=Dt-1;Y>=0;Y--){const Ut=Pe+Y,ne=O[Ut],pe=Ut+1<ae?O[Ut+1].el:q;yr[Y]===0?p(null,ne,L,pe,Z,k,V,K,W):Yt&&(Ie<0||Y!==rr[Ie]?Ce(ne,L,pe,2):Ie--)}}},Ce=(T,O,L,q,Z=null)=>{const{el:k,type:V,transition:K,children:W,shapeFlag:Y}=T;if(Y&6){Ce(T.component.subTree,O,L,q);return}if(Y&128){T.suspense.move(O,L,q);return}if(Y&64){V.move(T,O,L,se);return}if(V===Ne){n(k,O,L);for(let ie=0;ie<W.length;ie++)Ce(W[ie],O,L,q);n(T.anchor,O,L);return}if(V===cc){x(T,O,L);return}if(q!==2&&Y&1&&K)if(q===0)K.beforeEnter(k),n(k,O,L),kn(()=>K.enter(k),Z);else{const{leave:ie,delayLeave:le,afterLeave:ge}=K,Pe=()=>n(k,O,L),Be=()=>{ie(k,()=>{Pe(),ge&&ge()})};le?le(k,Pe,Be):Be()}else n(k,O,L)},fe=(T,O,L,q=!1,Z=!1)=>{const{type:k,props:V,ref:K,children:W,dynamicChildren:Y,shapeFlag:ae,patchFlag:ie,dirs:le,cacheIndex:ge}=T;if(ie===-2&&(Z=!1),K!=null&&Ec(K,null,L,T,!0),ge!=null&&(O.renderCache[ge]=void 0),ae&256){O.ctx.deactivate(T);return}const Pe=ae&1&&le,Be=!fo(T);let Ie;if(Be&&(Ie=V&&V.onVnodeBeforeUnmount)&&_r(Ie,O,T),ae&6)De(T.component,L,q);else{if(ae&128){T.suspense.unmount(L,q);return}Pe&&ei(T,null,O,"beforeUnmount"),ae&64?T.type.remove(T,O,L,se,q):Y&&!Y.hasOnce&&(k!==Ne||ie>0&&ie&64)?ve(Y,O,L,!1,!0):(k===Ne&&ie&384||!Z&&ae&16)&&ve(W,O,L),q&&$e(T)}(Be&&(Ie=V&&V.onVnodeUnmounted)||Pe)&&kn(()=>{Ie&&_r(Ie,O,T),Pe&&ei(T,null,O,"unmounted")},L)},$e=T=>{const{type:O,el:L,anchor:q,transition:Z}=T;if(O===Ne){Te(L,q);return}if(O===cc){y(T);return}const k=()=>{s(L),Z&&!Z.persisted&&Z.afterLeave&&Z.afterLeave()};if(T.shapeFlag&1&&Z&&!Z.persisted){const{leave:V,delayLeave:K}=Z,W=()=>V(L,k);K?K(T.el,k,W):W()}else k()},Te=(T,O)=>{let L;for(;T!==O;)L=d(T),s(T),T=L;s(O)},De=(T,O,L)=>{const{bum:q,scope:Z,job:k,subTree:V,um:K,m:W,a:Y}=T;Pg(W),Pg(Y),q&&lc(q),Z.stop(),k&&(k.flags|=8,fe(V,T,O,L)),K&&kn(K,O),kn(()=>{T.isUnmounted=!0},O),O&&O.pendingBranch&&!O.isUnmounted&&T.asyncDep&&!T.asyncResolved&&T.suspenseId===O.pendingId&&(O.deps--,O.deps===0&&O.resolve())},ve=(T,O,L,q=!1,Z=!1,k=0)=>{for(let V=k;V<T.length;V++)fe(T[V],O,L,q,Z)},M=T=>{if(T.shapeFlag&6)return M(T.component.subTree);if(T.shapeFlag&128)return T.suspense.next();const O=d(T.anchor||T.el),L=O&&O[y1];return L?d(L):O};let D=!1;const B=(T,O,L)=>{T==null?O._vnode&&fe(O._vnode,null,null,!0):p(O._vnode||null,T,O,null,null,null,L),O._vnode=T,D||(D=!0,xg(),$v(),D=!1)},se={p,um:fe,m:Ce,r:$e,mt:ee,mc:w,pc:R,pbc:$,n:M,o:r};return{render:B,hydrate:void 0,createApp:D1(B)}}function ch({type:r,props:e},t){return t==="svg"&&r==="foreignObject"||t==="mathml"&&r==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function ti({effect:r,job:e},t){t?(r.flags|=32,e.flags|=4):(r.flags&=-33,e.flags&=-5)}function V1(r,e){return(!r||r&&!r.pendingBranch)&&e&&!e.persisted}function b0(r,e,t=!1){const n=r.children,s=e.children;if(we(n)&&we(s))for(let i=0;i<n.length;i++){const o=n[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=Ss(s[i]),a.el=o.el),!t&&a.patchFlag!==-2&&b0(o,a)),a.type===Cu&&(a.el=o.el)}}function W1(r){const e=r.slice(),t=[0];let n,s,i,o,a;const l=r.length;for(n=0;n<l;n++){const c=r[n];if(c!==0){if(s=t[t.length-1],r[s]<c){e[n]=s,t.push(n);continue}for(i=0,o=t.length-1;i<o;)a=i+o>>1,r[t[a]]<c?i=a+1:o=a;c<r[t[i]]&&(i>0&&(e[n]=t[i-1]),t[i]=n)}}for(i=t.length,o=t[i-1];i-- >0;)t[i]=o,o=e[o];return t}function _0(r){const e=r.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:_0(e)}function Pg(r){if(r)for(let e=0;e<r.length;e++)r[e].flags|=8}const Y1=Symbol.for("v-scx"),X1=()=>Ct(Y1);function Qa(r,e){return vf(r,null,e)}function Ot(r,e,t){return vf(r,e,t)}function vf(r,e,t=Qe){const{immediate:n,deep:s,flush:i,once:o}=t,a=kt({},t),l=e&&n||!e&&i!=="post";let c;if(tl){if(i==="sync"){const f=X1();c=f.__watcherHandles||(f.__watcherHandles=[])}else if(!l){const f=()=>{};return f.stop=or,f.resume=or,f.pause=or,f}}const u=Vt;a.call=(f,g,p)=>hr(f,u,g,p);let h=!1;i==="post"?a.scheduler=f=>{kn(f,u&&u.suspense)}:i!=="sync"&&(h=!0,a.scheduler=(f,g)=>{g?f():gf(f)}),a.augmentJob=f=>{e&&(f.flags|=4),h&&(f.flags|=2,u&&(f.id=u.uid,f.i=u))};const d=p1(r,e,a);return tl&&(c?c.push(d):l&&d()),d}function U1(r,e,t){const n=this.proxy,s=vt(r)?r.includes(".")?x0(n,r):()=>n[r]:r.bind(n,n);let i;Ee(e)?i=e:(i=e.handler,t=e);const o=Sl(this),a=vf(s,i.bind(n),t);return o(),a}function x0(r,e){const t=e.split(".");return()=>{let n=r;for(let s=0;s<t.length&&n;s++)n=n[t[s]];return n}}const G1=(r,e)=>e==="modelValue"||e==="model-value"?r.modelModifiers:r[`${e}Modifiers`]||r[`${tr(e)}Modifiers`]||r[`${$i(e)}Modifiers`];function q1(r,e,...t){if(r.isUnmounted)return;const n=r.vnode.props||Qe;let s=t;const i=e.startsWith("update:"),o=i&&G1(n,e.slice(7));o&&(o.trim&&(s=t.map(u=>vt(u)?u.trim():u)),o.number&&(s=t.map(Cc)));let a,l=n[a=nh(e)]||n[a=nh(tr(e))];!l&&i&&(l=n[a=nh($i(e))]),l&&hr(l,r,6,s);const c=n[a+"Once"];if(c){if(!r.emitted)r.emitted={};else if(r.emitted[a])return;r.emitted[a]=!0,hr(c,r,6,s)}}function C0(r,e,t=!1){const n=e.emitsCache,s=n.get(r);if(s!==void 0)return s;const i=r.emits;let o={},a=!1;if(!Ee(r)){const l=c=>{const u=C0(c,e,!0);u&&(a=!0,kt(o,u))};!t&&e.mixins.length&&e.mixins.forEach(l),r.extends&&l(r.extends),r.mixins&&r.mixins.forEach(l)}return!i&&!a?(Ke(r)&&n.set(r,null),null):(we(i)?i.forEach(l=>o[l]=null):kt(o,i),Ke(r)&&n.set(r,o),o)}function xu(r,e){return!r||!lu(e)?!1:(e=e.slice(2).replace(/Once$/,""),We(r,e[0].toLowerCase()+e.slice(1))||We(r,$i(e))||We(r,e))}function Ag(r){const{type:e,vnode:t,proxy:n,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:h,data:d,setupState:f,ctx:g,inheritAttrs:p}=r,m=Oc(r);let v,_;try{if(t.shapeFlag&4){const y=s||n,C=y;v=Er(c.call(C,y,u,h,f,d,g)),_=a}else{const y=e;v=Er(y.length>1?y(h,{attrs:a,slots:o,emit:l}):y(h,null)),_=e.props?a:K1(a)}}catch(y){Da.length=0,vu(y,r,1),v=dt(nn)}let x=v;if(_&&p!==!1){const y=Object.keys(_),{shapeFlag:C}=x;y.length&&C&7&&(i&&y.some(nf)&&(_=Z1(_,i)),x=zs(x,_,!1,!0))}return t.dirs&&(x=zs(x,null,!1,!0),x.dirs=x.dirs?x.dirs.concat(t.dirs):t.dirs),t.transition&&Ii(x,t.transition),v=x,Oc(m),v}const K1=r=>{let e;for(const t in r)(t==="class"||t==="style"||lu(t))&&((e||(e={}))[t]=r[t]);return e},Z1=(r,e)=>{const t={};for(const n in r)(!nf(n)||!(n.slice(9)in e))&&(t[n]=r[n]);return t};function J1(r,e,t){const{props:n,children:s,component:i}=r,{props:o,children:a,patchFlag:l}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return n?Fg(n,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(o[d]!==n[d]&&!xu(c,d))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:n===o?!1:n?o?Fg(n,o,c):!0:!!o;return!1}function Fg(r,e,t){const n=Object.keys(e);if(n.length!==Object.keys(r).length)return!0;for(let s=0;s<n.length;s++){const i=n[s];if(e[i]!==r[i]&&!xu(t,i))return!0}return!1}function Q1({vnode:r,parent:e},t){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===r&&(n.el=r.el),n===r)(r=e.vnode).el=t,e=e.parent;else break}}const w0=r=>r.__isSuspense;function ew(r,e){e&&e.pendingBranch?we(r)?e.effects.push(...r):e.effects.push(r):Hv(r)}const Ne=Symbol.for("v-fgt"),Cu=Symbol.for("v-txt"),nn=Symbol.for("v-cmt"),cc=Symbol.for("v-stc"),Da=[];let gn=null;function ce(r=!1){Da.push(gn=r?null:[])}function tw(){Da.pop(),gn=Da[Da.length-1]||null}let So=1;function kg(r,e=!1){So+=r,r<0&&gn&&e&&(gn.hasOnce=!0)}function S0(r){return r.dynamicChildren=So>0?gn||ao:null,tw(),So>0&&gn&&gn.push(r),r}function Se(r,e,t,n,s,i){return S0(P(r,e,t,n,s,i,!0))}function Nt(r,e,t,n,s){return S0(dt(r,e,t,n,s,!0))}function To(r){return r?r.__v_isVNode===!0:!1}function li(r,e){return r.type===e.type&&r.key===e.key}const T0=({key:r})=>r??null,uc=({ref:r,ref_key:e,ref_for:t})=>(typeof r=="number"&&(r=""+r),r!=null?vt(r)||Bt(r)||Ee(r)?{i:It,r,k:e,f:!!t}:r:null);function P(r,e=null,t=null,n=0,s=null,i=r===Ne?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:r,props:e,key:e&&T0(e),ref:e&&uc(e),scopeId:Vv,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:It};return a?(yf(l,t),i&128&&r.normalize(l)):t&&(l.shapeFlag|=vt(t)?8:16),So>0&&!o&&gn&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&gn.push(l),l}const dt=nw;function nw(r,e=null,t=null,n=0,s=null,i=!1){if((!r||r===r0)&&(r=nn),To(r)){const a=zs(r,e,!0);return t&&yf(a,t),So>0&&!i&&gn&&(a.shapeFlag&6?gn[gn.indexOf(r)]=a:gn.push(a)),a.patchFlag=-2,a}if(dw(r)&&(r=r.__vccOpts),e){e=rw(e);let{class:a,style:l}=e;a&&!vt(a)&&(e.class=Pt(a)),Ke(l)&&(ff(l)&&!we(l)&&(l=kt({},l)),e.style=_n(l))}const o=vt(r)?1:w0(r)?128:Wv(r)?64:Ke(r)?4:Ee(r)?2:0;return P(r,e,t,n,s,o,i,!0)}function rw(r){return r?ff(r)||d0(r)?kt({},r):r:null}function zs(r,e,t=!1,n=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:l}=r,c=e?bf(s||{},e):s,u={__v_isVNode:!0,__v_skip:!0,type:r.type,props:c,key:c&&T0(c),ref:e&&e.ref?t&&i?we(i)?i.concat(uc(e)):[i,uc(e)]:uc(e):i,scopeId:r.scopeId,slotScopeIds:r.slotScopeIds,children:a,target:r.target,targetStart:r.targetStart,targetAnchor:r.targetAnchor,staticCount:r.staticCount,shapeFlag:r.shapeFlag,patchFlag:e&&r.type!==Ne?o===-1?16:o|16:o,dynamicProps:r.dynamicProps,dynamicChildren:r.dynamicChildren,appContext:r.appContext,dirs:r.dirs,transition:l,component:r.component,suspense:r.suspense,ssContent:r.ssContent&&zs(r.ssContent),ssFallback:r.ssFallback&&zs(r.ssFallback),el:r.el,anchor:r.anchor,ctx:r.ctx,ce:r.ce};return l&&n&&Ii(u,l.clone(u)),u}function el(r=" ",e=0){return dt(Cu,null,r,e)}function ft(r="",e=!1){return e?(ce(),Nt(nn,null,r)):dt(nn,null,r)}function Er(r){return r==null||typeof r=="boolean"?dt(nn):we(r)?dt(Ne,null,r.slice()):To(r)?Ss(r):dt(Cu,null,String(r))}function Ss(r){return r.el===null&&r.patchFlag!==-1||r.memo?r:zs(r)}function yf(r,e){let t=0;const{shapeFlag:n}=r;if(e==null)e=null;else if(we(e))t=16;else if(typeof e=="object")if(n&65){const s=e.default;s&&(s._c&&(s._d=!1),yf(r,s()),s._c&&(s._d=!0));return}else{t=32;const s=e._;!s&&!d0(e)?e._ctx=It:s===3&&It&&(It.slots._===1?e._=1:(e._=2,r.patchFlag|=1024))}else Ee(e)?(e={default:e,_ctx:It},t=32):(e=String(e),n&64?(t=16,e=[el(e)]):t=8);r.children=e,r.shapeFlag|=t}function bf(...r){const e={};for(let t=0;t<r.length;t++){const n=r[t];for(const s in n)if(s==="class")e.class!==n.class&&(e.class=Pt([e.class,n.class]));else if(s==="style")e.style=_n([e.style,n.style]);else if(lu(s)){const i=e[s],o=n[s];o&&i!==o&&!(we(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=n[s])}return e}function _r(r,e,t,n=null){hr(r,e,7,[t,n])}const sw=c0();let iw=0;function ow(r,e,t){const n=r.type,s=(e?e.appContext:r.appContext)||sw,i={uid:iw++,vnode:r,type:n,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new HC(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:g0(n,s),emitsOptions:C0(n,s),emit:null,emitted:null,propsDefaults:Qe,inheritAttrs:n.inheritAttrs,ctx:Qe,data:Qe,props:Qe,attrs:Qe,slots:Qe,refs:Qe,setupState:Qe,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=q1.bind(null,i),r.ce&&r.ce(i),i}let Vt=null;const wl=()=>Vt||It;let Pc,rd;{const r=du(),e=(t,n)=>{let s;return(s=r[t])||(s=r[t]=[]),s.push(n),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};Pc=e("__VUE_INSTANCE_SETTERS__",t=>Vt=t),rd=e("__VUE_SSR_SETTERS__",t=>tl=t)}const Sl=r=>{const e=Vt;return Pc(r),r.scope.on(),()=>{r.scope.off(),Pc(e)}},Rg=()=>{Vt&&Vt.scope.off(),Pc(null)};function O0(r){return r.vnode.shapeFlag&4}let tl=!1;function aw(r,e=!1,t=!1){e&&rd(e);const{props:n,children:s}=r.vnode,i=O0(r);I1(r,n,i,e),z1(r,s,t);const o=i?lw(r,e):void 0;return e&&rd(!1),o}function lw(r,e){const t=r.type;r.accessCache=Object.create(null),r.proxy=new Proxy(r.ctx,E1);const{setup:n}=t;if(n){Gs();const s=r.setupContext=n.length>1?uw(r):null,i=Sl(r),o=Cl(n,r,0,[r.props,s]),a=fv(o);if(qs(),i(),(a||r.sp)&&!fo(r)&&Kv(r),a){if(o.then(Rg,Rg),e)return o.then(l=>{Dg(r,l)}).catch(l=>{vu(l,r,0)});r.asyncDep=o}else Dg(r,o)}else E0(r)}function Dg(r,e,t){Ee(e)?r.type.__ssrInlineRender?r.ssrRender=e:r.render=e:Ke(e)&&(r.setupState=Bv(e)),E0(r)}function E0(r,e,t){const n=r.type;r.render||(r.render=n.render||or);{const s=Sl(r);Gs();try{M1(r)}finally{qs(),s()}}}const cw={get(r,e){return Qt(r,"get",""),r[e]}};function uw(r){const e=t=>{r.exposed=t||{}};return{attrs:new Proxy(r.attrs,cw),slots:r.slots,emit:r.emit,expose:e}}function wu(r){return r.exposed?r.exposeProxy||(r.exposeProxy=new Proxy(Bv(Iv(r.exposed)),{get(e,t){if(t in e)return e[t];if(t in Ra)return Ra[t](r)},has(e,t){return t in e||t in Ra}})):r.proxy}function hw(r,e=!0){return Ee(r)?r.displayName||r.name:r.name||e&&r.__name}function dw(r){return Ee(r)&&"__vccOpts"in r}const me=(r,e)=>f1(r,e,tl);function J(r,e,t){const n=arguments.length;return n===2?Ke(e)&&!we(e)?To(e)?dt(r,null,[e]):dt(r,e):dt(r,null,e):(n>3?t=Array.prototype.slice.call(arguments,2):n===3&&To(t)&&(t=[t]),dt(r,e,t))}function fw(r,e){const t=r.memo;if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(os(t[n],e[n]))return!1;return So>0&&gn&&gn.push(r),!0}const gw="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let sd;const Ig=typeof window<"u"&&window.trustedTypes;if(Ig)try{sd=Ig.createPolicy("vue",{createHTML:r=>r})}catch{}const M0=sd?r=>sd.createHTML(r):r=>r,pw="http://www.w3.org/2000/svg",mw="http://www.w3.org/1998/Math/MathML",Zr=typeof document<"u"?document:null,Lg=Zr&&Zr.createElement("template"),vw={insert:(r,e,t)=>{e.insertBefore(r,t||null)},remove:r=>{const e=r.parentNode;e&&e.removeChild(r)},createElement:(r,e,t,n)=>{const s=e==="svg"?Zr.createElementNS(pw,r):e==="mathml"?Zr.createElementNS(mw,r):t?Zr.createElement(r,{is:t}):Zr.createElement(r);return r==="select"&&n&&n.multiple!=null&&s.setAttribute("multiple",n.multiple),s},createText:r=>Zr.createTextNode(r),createComment:r=>Zr.createComment(r),setText:(r,e)=>{r.nodeValue=e},setElementText:(r,e)=>{r.textContent=e},parentNode:r=>r.parentNode,nextSibling:r=>r.nextSibling,querySelector:r=>Zr.querySelector(r),setScopeId(r,e){r.setAttribute(e,"")},insertStaticContent(r,e,t,n,s,i){const o=t?t.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),t),!(s===i||!(s=s.nextSibling)););else{Lg.innerHTML=M0(n==="svg"?`<svg>${r}</svg>`:n==="mathml"?`<math>${r}</math>`:r);const a=Lg.content;if(n==="svg"||n==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},ms="transition",ea="animation",Oo=Symbol("_vtc"),P0={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},A0=kt({},Xv,P0),yw=r=>(r.displayName="Transition",r.props=A0,r),Ac=yw((r,{slots:e})=>J(_1,F0(r),e)),ni=(r,e=[])=>{we(r)?r.forEach(t=>t(...e)):r&&r(...e)},Bg=r=>r?we(r)?r.some(e=>e.length>1):r.length>1:!1;function F0(r){const e={};for(const H in r)H in P0||(e[H]=r[H]);if(r.css===!1)return e;const{name:t="v",type:n,duration:s,enterFromClass:i=`${t}-enter-from`,enterActiveClass:o=`${t}-enter-active`,enterToClass:a=`${t}-enter-to`,appearFromClass:l=i,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:h=`${t}-leave-from`,leaveActiveClass:d=`${t}-leave-active`,leaveToClass:f=`${t}-leave-to`}=r,g=bw(s),p=g&&g[0],m=g&&g[1],{onBeforeEnter:v,onEnter:_,onEnterCancelled:x,onLeave:y,onLeaveCancelled:C,onBeforeAppear:E=v,onAppear:b=_,onAppearCancelled:w=x}=e,S=(H,U,ee,re)=>{H._enterCancelled=re,xs(H,U?u:a),xs(H,U?c:o),ee&&ee()},$=(H,U)=>{H._isLeaving=!1,xs(H,h),xs(H,f),xs(H,d),U&&U()},N=H=>(U,ee)=>{const re=H?b:_,te=()=>S(U,H,ee);ni(re,[U,te]),jg(()=>{xs(U,H?l:i),wr(U,H?u:a),Bg(re)||zg(U,n,p,te)})};return kt(e,{onBeforeEnter(H){ni(v,[H]),wr(H,i),wr(H,o)},onBeforeAppear(H){ni(E,[H]),wr(H,l),wr(H,c)},onEnter:N(!1),onAppear:N(!0),onLeave(H,U){H._isLeaving=!0;const ee=()=>$(H,U);wr(H,h),H._enterCancelled?(wr(H,d),id()):(id(),wr(H,d)),jg(()=>{H._isLeaving&&(xs(H,h),wr(H,f),Bg(y)||zg(H,n,m,ee))}),ni(y,[H,ee])},onEnterCancelled(H){S(H,!1,void 0,!0),ni(x,[H])},onAppearCancelled(H){S(H,!0,void 0,!0),ni(w,[H])},onLeaveCancelled(H){$(H),ni(C,[H])}})}function bw(r){if(r==null)return null;if(Ke(r))return[uh(r.enter),uh(r.leave)];{const e=uh(r);return[e,e]}}function uh(r){return FC(r)}function wr(r,e){e.split(/\s+/).forEach(t=>t&&r.classList.add(t)),(r[Oo]||(r[Oo]=new Set)).add(e)}function xs(r,e){e.split(/\s+/).forEach(n=>n&&r.classList.remove(n));const t=r[Oo];t&&(t.delete(e),t.size||(r[Oo]=void 0))}function jg(r){requestAnimationFrame(()=>{requestAnimationFrame(r)})}let _w=0;function zg(r,e,t,n){const s=r._endId=++_w,i=()=>{s===r._endId&&n()};if(t!=null)return setTimeout(i,t);const{type:o,timeout:a,propCount:l}=k0(r,e);if(!o)return n();const c=o+"end";let u=0;const h=()=>{r.removeEventListener(c,d),i()},d=f=>{f.target===r&&++u>=l&&h()};setTimeout(()=>{u<l&&h()},a+1),r.addEventListener(c,d)}function k0(r,e){const t=window.getComputedStyle(r),n=g=>(t[g]||"").split(", "),s=n(`${ms}Delay`),i=n(`${ms}Duration`),o=Hg(s,i),a=n(`${ea}Delay`),l=n(`${ea}Duration`),c=Hg(a,l);let u=null,h=0,d=0;e===ms?o>0&&(u=ms,h=o,d=i.length):e===ea?c>0&&(u=ea,h=c,d=l.length):(h=Math.max(o,c),u=h>0?o>c?ms:ea:null,d=u?u===ms?i.length:l.length:0);const f=u===ms&&/\b(transform|all)(,|$)/.test(n(`${ms}Property`).toString());return{type:u,timeout:h,propCount:d,hasTransform:f}}function Hg(r,e){for(;r.length<e.length;)r=r.concat(r);return Math.max(...e.map((t,n)=>$g(t)+$g(r[n])))}function $g(r){return r==="auto"?0:Number(r.slice(0,-1).replace(",","."))*1e3}function id(){return document.body.offsetHeight}function xw(r,e,t){const n=r[Oo];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?r.removeAttribute("class"):t?r.setAttribute("class",e):r.className=e}const Fc=Symbol("_vod"),R0=Symbol("_vsh"),Ng={beforeMount(r,{value:e},{transition:t}){r[Fc]=r.style.display==="none"?"":r.style.display,t&&e?t.beforeEnter(r):ta(r,e)},mounted(r,{value:e},{transition:t}){t&&e&&t.enter(r)},updated(r,{value:e,oldValue:t},{transition:n}){!e!=!t&&(n?e?(n.beforeEnter(r),ta(r,!0),n.enter(r)):n.leave(r,()=>{ta(r,!1)}):ta(r,e))},beforeUnmount(r,{value:e}){ta(r,e)}};function ta(r,e){r.style.display=e?r[Fc]:"none",r[R0]=!e}const D0=Symbol("");function Cw(r){const e=wl();if(!e)return;const t=e.ut=(s=r(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(i=>kc(i,s))},n=()=>{const s=r(e.proxy);e.ce?kc(e.ce,s):od(e.subTree,s),t(s)};e0(()=>{Hv(n)}),Et(()=>{Ot(n,or,{flush:"post"});const s=new MutationObserver(n);s.observe(e.subTree.el.parentNode,{childList:!0}),Nr(()=>s.disconnect())})}function od(r,e){if(r.shapeFlag&128){const t=r.suspense;r=t.activeBranch,t.pendingBranch&&!t.isHydrating&&t.effects.push(()=>{od(t.activeBranch,e)})}for(;r.component;)r=r.component.subTree;if(r.shapeFlag&1&&r.el)kc(r.el,e);else if(r.type===Ne)r.children.forEach(t=>od(t,e));else if(r.type===cc){let{el:t,anchor:n}=r;for(;t&&(kc(t,e),t!==n);)t=t.nextSibling}}function kc(r,e){if(r.nodeType===1){const t=r.style;let n="";for(const s in e)t.setProperty(`--${s}`,e[s]),n+=`--${s}: ${e[s]};`;t[D0]=n}}const ww=/(^|;)\s*display\s*:/;function Sw(r,e,t){const n=r.style,s=vt(t);let i=!1;if(t&&!s){if(e)if(vt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();t[a]==null&&hc(n,a,"")}else for(const o in e)t[o]==null&&hc(n,o,"");for(const o in t)o==="display"&&(i=!0),hc(n,o,t[o])}else if(s){if(e!==t){const o=n[D0];o&&(t+=";"+o),n.cssText=t,i=ww.test(t)}}else e&&r.removeAttribute("style");Fc in r&&(r[Fc]=i?n.display:"",r[R0]&&(n.display="none"))}const Vg=/\s*!important$/;function hc(r,e,t){if(we(t))t.forEach(n=>hc(r,e,n));else if(t==null&&(t=""),e.startsWith("--"))r.setProperty(e,t);else{const n=Tw(r,e);Vg.test(t)?r.setProperty($i(n),t.replace(Vg,""),"important"):r[n]=t}}const Wg=["Webkit","Moz","ms"],hh={};function Tw(r,e){const t=hh[e];if(t)return t;let n=tr(e);if(n!=="filter"&&n in r)return hh[e]=n;n=hu(n);for(let s=0;s<Wg.length;s++){const i=Wg[s]+n;if(i in r)return hh[e]=i}return e}const Yg="http://www.w3.org/1999/xlink";function Xg(r,e,t,n,s,i=BC(e)){n&&e.startsWith("xlink:")?t==null?r.removeAttributeNS(Yg,e.slice(6,e.length)):r.setAttributeNS(Yg,e,t):t==null||i&&!vv(t)?r.removeAttribute(e):r.setAttribute(e,i?"":ur(t)?String(t):t)}function Ug(r,e,t,n,s){if(e==="innerHTML"||e==="textContent"){t!=null&&(r[e]=e==="innerHTML"?M0(t):t);return}const i=r.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?r.getAttribute("value")||"":r.value,l=t==null?r.type==="checkbox"?"on":"":String(t);(a!==l||!("_value"in r))&&(r.value=l),t==null&&r.removeAttribute(e),r._value=t;return}let o=!1;if(t===""||t==null){const a=typeof r[e];a==="boolean"?t=vv(t):t==null&&a==="string"?(t="",o=!0):a==="number"&&(t=0,o=!0)}try{r[e]=t}catch{}o&&r.removeAttribute(s||e)}function ci(r,e,t,n){r.addEventListener(e,t,n)}function Ow(r,e,t,n){r.removeEventListener(e,t,n)}const Gg=Symbol("_vei");function Ew(r,e,t,n,s=null){const i=r[Gg]||(r[Gg]={}),o=i[e];if(n&&o)o.value=n;else{const[a,l]=Mw(e);if(n){const c=i[e]=Fw(n,s);ci(r,a,c,l)}else o&&(Ow(r,a,o,l),i[e]=void 0)}}const qg=/(?:Once|Passive|Capture)$/;function Mw(r){let e;if(qg.test(r)){e={};let n;for(;n=r.match(qg);)r=r.slice(0,r.length-n[0].length),e[n[0].toLowerCase()]=!0}return[r[2]===":"?r.slice(3):$i(r.slice(2)),e]}let dh=0;const Pw=Promise.resolve(),Aw=()=>dh||(Pw.then(()=>dh=0),dh=Date.now());function Fw(r,e){const t=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=t.attached)return;hr(kw(n,t.value),e,5,[n])};return t.value=r,t.attached=Aw(),t}function kw(r,e){if(we(e)){const t=r.stopImmediatePropagation;return r.stopImmediatePropagation=()=>{t.call(r),r._stopped=!0},e.map(n=>s=>!s._stopped&&n&&n(s))}else return e}const Kg=r=>r.charCodeAt(0)===111&&r.charCodeAt(1)===110&&r.charCodeAt(2)>96&&r.charCodeAt(2)<123,Rw=(r,e,t,n,s,i)=>{const o=s==="svg";e==="class"?xw(r,n,o):e==="style"?Sw(r,t,n):lu(e)?nf(e)||Ew(r,e,t,n,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Dw(r,e,n,o))?(Ug(r,e,n),!r.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Xg(r,e,n,o,i,e!=="value")):r._isVueCE&&(/[A-Z]/.test(e)||!vt(n))?Ug(r,tr(e),n,i,e):(e==="true-value"?r._trueValue=n:e==="false-value"&&(r._falseValue=n),Xg(r,e,n,o))};function Dw(r,e,t,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in r&&Kg(e)&&Ee(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&r.tagName==="INPUT"||e==="type"&&r.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=r.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Kg(e)&&vt(t)?!1:e in r}const I0=new WeakMap,L0=new WeakMap,Rc=Symbol("_moveCb"),Zg=Symbol("_enterCb"),Iw=r=>(delete r.props.mode,r),Lw=Iw({name:"TransitionGroup",props:kt({},A0,{tag:String,moveClass:String}),setup(r,{slots:e}){const t=wl(),n=Yv();let s,i;return t0(()=>{if(!s.length)return;const o=r.moveClass||`${r.name||"v"}-move`;if(!$w(s[0].el,t.vnode.el,o))return;s.forEach(jw),s.forEach(zw);const a=s.filter(Hw);id(),a.forEach(l=>{const c=l.el,u=c.style;wr(c,o),u.transform=u.webkitTransform=u.transitionDuration="";const h=c[Rc]=d=>{d&&d.target!==c||(!d||/transform$/.test(d.propertyName))&&(c.removeEventListener("transitionend",h),c[Rc]=null,xs(c,o))};c.addEventListener("transitionend",h)})}),()=>{const o=ze(r),a=F0(o);let l=o.tag||Ne;if(s=[],i)for(let c=0;c<i.length;c++){const u=i[c];u.el&&u.el instanceof Element&&(s.push(u),Ii(u,Ja(u,a,n,t)),I0.set(u,u.el.getBoundingClientRect()))}i=e.default?pf(e.default()):[];for(let c=0;c<i.length;c++){const u=i[c];u.key!=null&&Ii(u,Ja(u,a,n,t))}return dt(l,null,i)}}}),Bw=Lw;function jw(r){const e=r.el;e[Rc]&&e[Rc](),e[Zg]&&e[Zg]()}function zw(r){L0.set(r,r.el.getBoundingClientRect())}function Hw(r){const e=I0.get(r),t=L0.get(r),n=e.left-t.left,s=e.top-t.top;if(n||s){const i=r.el.style;return i.transform=i.webkitTransform=`translate(${n}px,${s}px)`,i.transitionDuration="0s",r}}function $w(r,e,t){const n=r.cloneNode(),s=r[Oo];s&&s.forEach(a=>{a.split(/\s+/).forEach(l=>l&&n.classList.remove(l))}),t.split(/\s+/).forEach(a=>a&&n.classList.add(a)),n.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(n);const{hasTransform:o}=k0(n);return i.removeChild(n),o}const Dc=r=>{const e=r.props["onUpdate:modelValue"]||!1;return we(e)?t=>lc(e,t):e};function Nw(r){r.target.composing=!0}function Jg(r){const e=r.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const mo=Symbol("_assign"),nl={created(r,{modifiers:{lazy:e,trim:t,number:n}},s){r[mo]=Dc(s);const i=n||s.props&&s.props.type==="number";ci(r,e?"change":"input",o=>{if(o.target.composing)return;let a=r.value;t&&(a=a.trim()),i&&(a=Cc(a)),r[mo](a)}),t&&ci(r,"change",()=>{r.value=r.value.trim()}),e||(ci(r,"compositionstart",Nw),ci(r,"compositionend",Jg),ci(r,"change",Jg))},mounted(r,{value:e}){r.value=e??""},beforeUpdate(r,{value:e,oldValue:t,modifiers:{lazy:n,trim:s,number:i}},o){if(r[mo]=Dc(o),r.composing)return;const a=(i||r.type==="number")&&!/^0\d/.test(r.value)?Cc(r.value):r.value,l=e??"";a!==l&&(document.activeElement===r&&r.type!=="range"&&(n&&e===t||s&&r.value.trim()===l)||(r.value=l))}},ad={deep:!0,created(r,{value:e,modifiers:{number:t}},n){const s=cu(e);ci(r,"change",()=>{const i=Array.prototype.filter.call(r.options,o=>o.selected).map(o=>t?Cc(Ic(o)):Ic(o));r[mo](r.multiple?s?new Set(i):i:i[0]),r._assigning=!0,dr(()=>{r._assigning=!1})}),r[mo]=Dc(n)},mounted(r,{value:e}){Qg(r,e)},beforeUpdate(r,e,t){r[mo]=Dc(t)},updated(r,{value:e}){r._assigning||Qg(r,e)}};function Qg(r,e){const t=r.multiple,n=we(e);if(!(t&&!n&&!cu(e))){for(let s=0,i=r.options.length;s<i;s++){const o=r.options[s],a=Ic(o);if(t)if(n){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=zC(e,a)>-1}else o.selected=e.has(a);else if(fu(Ic(o),e)){r.selectedIndex!==s&&(r.selectedIndex=s);return}}!t&&r.selectedIndex!==-1&&(r.selectedIndex=-1)}}function Ic(r){return"_value"in r?r._value:r.value}const Vw=kt({patchProp:Rw},vw);let ep;function Ww(){return ep||(ep=$1(Vw))}const Yw=(...r)=>{const e=Ww().createApp(...r),{mount:t}=e;return e.mount=n=>{const s=Uw(n);if(!s)return;const i=e._component;!Ee(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=t(s,!1,Xw(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function Xw(r){if(r instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&r instanceof MathMLElement)return"mathml"}function Uw(r){return vt(r)?document.querySelector(r):r}const ye={CONTROL_PANEL:{OPEN:"open-control-panel",SHOW_TEXT_SETTING_TOOLBAR:"control-panel:show-text-toolbar",HIDE_TEXT_SETTING_TOOLBAR:"control-panel:hide-text-setting-toolbar",SHOW_IMAGE_SETTING_TOOLBAR:"control-panel:show-image-toolbar",HIDE_IMAGE_SETTING_TOOLBAR:"control-panel:hide-image-setting-toolbar"},PANEL_TYPE:{BACKGROUND_IMAGE:"background-image",BACKGROUND_COLOR:"background-color",INSERT_IMAGE:"insert-image"},PANEL_ACTION:{REPLACE_IMAGE:"replace-image"},CANVAS:{CANVAS_UPDATE:"canvas:update",BACKGROUND_COLOR_CHANGE:"canvas:background-color-change",BACKGROUND_IMAGE_CHANGE:"canvas:background-image-change"},FRAME:{FRAME_ADDED:"frame:added",FRAME_REMOVED:"frame:removed",FRAME_UPDATED:"frame:updated",FRAMES_REORDERED:"frames:reordered",FRAMES_CLEARED:"frames:cleared"}};class Gw{constructor(){X(this,"events");this.events=new Map}on(e,t){this.events.has(e)||this.events.set(e,[]),this.events.get(e).push(t)}off(e,t){if(this.events.has(e))if(t){const n=this.events.get(e),s=n.indexOf(t);s!==-1&&n.splice(s,1),n.length===0&&this.events.delete(e)}else this.events.delete(e)}emit(e,t){this.events.has(e)&&this.events.get(e).forEach(n=>{n(t)})}}const Ae=new Gw,qw=Re({__name:"App",setup(r){return(e,t)=>{const n=ka("router-view");return ce(),Nt(n,null,{default:ho(({Component:s,route:i})=>[(ce(),Nt(s0(s)))]),_:1})}}}),Yn=(r,e)=>{const t=r.__vccOpts||r;for(const[n,s]of e)t[n]=s;return t},Kw=Yn(qw,[["__scopeId","data-v-4cc85dd4"]]);/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const to=typeof document<"u";function B0(r){return typeof r=="object"||"displayName"in r||"props"in r||"__vccOpts"in r}function Zw(r){return r.__esModule||r[Symbol.toStringTag]==="Module"||r.default&&B0(r.default)}const Ve=Object.assign;function fh(r,e){const t={};for(const n in e){const s=e[n];t[n]=fr(s)?s.map(r):r(s)}return t}const Ia=()=>{},fr=Array.isArray,j0=/#/g,Jw=/&/g,Qw=/\//g,eS=/=/g,tS=/\?/g,z0=/\+/g,nS=/%5B/g,rS=/%5D/g,H0=/%5E/g,sS=/%60/g,$0=/%7B/g,iS=/%7C/g,N0=/%7D/g,oS=/%20/g;function _f(r){return encodeURI(""+r).replace(iS,"|").replace(nS,"[").replace(rS,"]")}function aS(r){return _f(r).replace($0,"{").replace(N0,"}").replace(H0,"^")}function ld(r){return _f(r).replace(z0,"%2B").replace(oS,"+").replace(j0,"%23").replace(Jw,"%26").replace(sS,"`").replace($0,"{").replace(N0,"}").replace(H0,"^")}function lS(r){return ld(r).replace(eS,"%3D")}function cS(r){return _f(r).replace(j0,"%23").replace(tS,"%3F")}function uS(r){return r==null?"":cS(r).replace(Qw,"%2F")}function rl(r){try{return decodeURIComponent(""+r)}catch{}return""+r}const hS=/\/$/,dS=r=>r.replace(hS,"");function gh(r,e,t="/"){let n,s={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(n=e.slice(0,l),i=e.slice(l+1,a>-1?a:e.length),s=r(i)),a>-1&&(n=n||e.slice(0,a),o=e.slice(a,e.length)),n=mS(n??e,t),{fullPath:n+(i&&"?")+i+o,path:n,query:s,hash:rl(o)}}function fS(r,e){const t=e.query?r(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function tp(r,e){return!e||!r.toLowerCase().startsWith(e.toLowerCase())?r:r.slice(e.length)||"/"}function gS(r,e,t){const n=e.matched.length-1,s=t.matched.length-1;return n>-1&&n===s&&Eo(e.matched[n],t.matched[s])&&V0(e.params,t.params)&&r(e.query)===r(t.query)&&e.hash===t.hash}function Eo(r,e){return(r.aliasOf||r)===(e.aliasOf||e)}function V0(r,e){if(Object.keys(r).length!==Object.keys(e).length)return!1;for(const t in r)if(!pS(r[t],e[t]))return!1;return!0}function pS(r,e){return fr(r)?np(r,e):fr(e)?np(e,r):r===e}function np(r,e){return fr(e)?r.length===e.length&&r.every((t,n)=>t===e[n]):r.length===1&&r[0]===e}function mS(r,e){if(r.startsWith("/"))return r;if(!r)return e;const t=e.split("/"),n=r.split("/"),s=n[n.length-1];(s===".."||s===".")&&n.push("");let i=t.length-1,o,a;for(o=0;o<n.length;o++)if(a=n[o],a!==".")if(a==="..")i>1&&i--;else break;return t.slice(0,i).join("/")+"/"+n.slice(o).join("/")}const vs={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var sl;(function(r){r.pop="pop",r.push="push"})(sl||(sl={}));var La;(function(r){r.back="back",r.forward="forward",r.unknown=""})(La||(La={}));function vS(r){if(!r)if(to){const e=document.querySelector("base");r=e&&e.getAttribute("href")||"/",r=r.replace(/^\w+:\/\/[^\/]+/,"")}else r="/";return r[0]!=="/"&&r[0]!=="#"&&(r="/"+r),dS(r)}const yS=/^[^#]+#/;function bS(r,e){return r.replace(yS,"#")+e}function _S(r,e){const t=document.documentElement.getBoundingClientRect(),n=r.getBoundingClientRect();return{behavior:e.behavior,left:n.left-t.left-(e.left||0),top:n.top-t.top-(e.top||0)}}const Su=()=>({left:window.scrollX,top:window.scrollY});function xS(r){let e;if("el"in r){const t=r.el,n=typeof t=="string"&&t.startsWith("#"),s=typeof t=="string"?n?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!s)return;e=_S(s,r)}else e=r;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function rp(r,e){return(history.state?history.state.position-e:-1)+r}const cd=new Map;function CS(r,e){cd.set(r,e)}function wS(r){const e=cd.get(r);return cd.delete(r),e}let SS=()=>location.protocol+"//"+location.host;function W0(r,e){const{pathname:t,search:n,hash:s}=e,i=r.indexOf("#");if(i>-1){let a=s.includes(r.slice(i))?r.slice(i).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),tp(l,"")}return tp(t,r)+n+s}function TS(r,e,t,n){let s=[],i=[],o=null;const a=({state:d})=>{const f=W0(r,location),g=t.value,p=e.value;let m=0;if(d){if(t.value=f,e.value=d,o&&o===g){o=null;return}m=p?d.position-p.position:0}else n(f);s.forEach(v=>{v(t.value,g,{delta:m,type:sl.pop,direction:m?m>0?La.forward:La.back:La.unknown})})};function l(){o=t.value}function c(d){s.push(d);const f=()=>{const g=s.indexOf(d);g>-1&&s.splice(g,1)};return i.push(f),f}function u(){const{history:d}=window;d.state&&d.replaceState(Ve({},d.state,{scroll:Su()}),"")}function h(){for(const d of i)d();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:h}}function sp(r,e,t,n=!1,s=!1){return{back:r,current:e,forward:t,replaced:n,position:window.history.length,scroll:s?Su():null}}function OS(r){const{history:e,location:t}=window,n={value:W0(r,t)},s={value:e.state};s.value||i(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,c,u){const h=r.indexOf("#"),d=h>-1?(t.host&&document.querySelector("base")?r:r.slice(h))+l:SS()+r+l;try{e[u?"replaceState":"pushState"](c,"",d),s.value=c}catch(f){console.error(f),t[u?"replace":"assign"](d)}}function o(l,c){const u=Ve({},e.state,sp(s.value.back,l,s.value.forward,!0),c,{position:s.value.position});i(l,u,!0),n.value=l}function a(l,c){const u=Ve({},s.value,e.state,{forward:l,scroll:Su()});i(u.current,u,!0);const h=Ve({},sp(n.value,l,null),{position:u.position+1},c);i(l,h,!1),n.value=l}return{location:n,state:s,push:a,replace:o}}function ES(r){r=vS(r);const e=OS(r),t=TS(r,e.state,e.location,e.replace);function n(i,o=!0){o||t.pauseListeners(),history.go(i)}const s=Ve({location:"",base:r,go:n,createHref:bS.bind(null,r)},e,t);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function MS(r){return r=location.host?r||location.pathname+location.search:"",r.includes("#")||(r+="#"),ES(r)}function PS(r){return typeof r=="string"||r&&typeof r=="object"}function Y0(r){return typeof r=="string"||typeof r=="symbol"}const X0=Symbol("");var ip;(function(r){r[r.aborted=4]="aborted",r[r.cancelled=8]="cancelled",r[r.duplicated=16]="duplicated"})(ip||(ip={}));function Mo(r,e){return Ve(new Error,{type:r,[X0]:!0},e)}function qr(r,e){return r instanceof Error&&X0 in r&&(e==null||!!(r.type&e))}const op="[^/]+?",AS={sensitive:!1,strict:!1,start:!0,end:!0},FS=/[.+*?^${}()[\]/\\]/g;function kS(r,e){const t=Ve({},AS,e),n=[];let s=t.start?"^":"";const i=[];for(const c of r){const u=c.length?[]:[90];t.strict&&!c.length&&(s+="/");for(let h=0;h<c.length;h++){const d=c[h];let f=40+(t.sensitive?.25:0);if(d.type===0)h||(s+="/"),s+=d.value.replace(FS,"\\$&"),f+=40;else if(d.type===1){const{value:g,repeatable:p,optional:m,regexp:v}=d;i.push({name:g,repeatable:p,optional:m});const _=v||op;if(_!==op){f+=10;try{new RegExp(`(${_})`)}catch(y){throw new Error(`Invalid custom RegExp for param "${g}" (${_}): `+y.message)}}let x=p?`((?:${_})(?:/(?:${_}))*)`:`(${_})`;h||(x=m&&c.length<2?`(?:/${x})`:"/"+x),m&&(x+="?"),s+=x,f+=20,m&&(f+=-8),p&&(f+=-20),_===".*"&&(f+=-50)}u.push(f)}n.push(u)}if(t.strict&&t.end){const c=n.length-1;n[c][n[c].length-1]+=.7000000000000001}t.strict||(s+="/?"),t.end?s+="$":t.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,t.sensitive?"":"i");function a(c){const u=c.match(o),h={};if(!u)return null;for(let d=1;d<u.length;d++){const f=u[d]||"",g=i[d-1];h[g.name]=f&&g.repeatable?f.split("/"):f}return h}function l(c){let u="",h=!1;for(const d of r){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const f of d)if(f.type===0)u+=f.value;else if(f.type===1){const{value:g,repeatable:p,optional:m}=f,v=g in c?c[g]:"";if(fr(v)&&!p)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const _=fr(v)?v.join("/"):v;if(!_)if(m)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${g}"`);u+=_}}return u||"/"}return{re:o,score:n,keys:i,parse:a,stringify:l}}function RS(r,e){let t=0;for(;t<r.length&&t<e.length;){const n=e[t]-r[t];if(n)return n;t++}return r.length<e.length?r.length===1&&r[0]===80?-1:1:r.length>e.length?e.length===1&&e[0]===80?1:-1:0}function U0(r,e){let t=0;const n=r.score,s=e.score;for(;t<n.length&&t<s.length;){const i=RS(n[t],s[t]);if(i)return i;t++}if(Math.abs(s.length-n.length)===1){if(ap(n))return 1;if(ap(s))return-1}return s.length-n.length}function ap(r){const e=r[r.length-1];return r.length>0&&e[e.length-1]<0}const DS={type:0,value:""},IS=/[a-zA-Z0-9_]/;function LS(r){if(!r)return[[]];if(r==="/")return[[DS]];if(!r.startsWith("/"))throw new Error(`Invalid path "${r}"`);function e(f){throw new Error(`ERR (${t})/"${c}": ${f}`)}let t=0,n=t;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,l,c="",u="";function h(){c&&(t===0?i.push({type:0,value:c}):t===1||t===2||t===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function d(){c+=l}for(;a<r.length;){if(l=r[a++],l==="\\"&&t!==2){n=t,t=4;continue}switch(t){case 0:l==="/"?(c&&h(),o()):l===":"?(h(),t=1):d();break;case 4:d(),t=n;break;case 1:l==="("?t=2:IS.test(l)?d():(h(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:t=3:u+=l;break;case 3:h(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${c}"`),h(),o(),s}function BS(r,e,t){const n=kS(LS(r.path),t),s=Ve(n,{record:r,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function jS(r,e){const t=[],n=new Map;e=hp({strict:!1,end:!0,sensitive:!1},e);function s(h){return n.get(h)}function i(h,d,f){const g=!f,p=cp(h);p.aliasOf=f&&f.record;const m=hp(e,h),v=[p];if("alias"in h){const y=typeof h.alias=="string"?[h.alias]:h.alias;for(const C of y)v.push(cp(Ve({},p,{components:f?f.record.components:p.components,path:C,aliasOf:f?f.record:p})))}let _,x;for(const y of v){const{path:C}=y;if(d&&C[0]!=="/"){const E=d.record.path,b=E[E.length-1]==="/"?"":"/";y.path=d.record.path+(C&&b+C)}if(_=BS(y,d,m),f?f.alias.push(_):(x=x||_,x!==_&&x.alias.push(_),g&&h.name&&!up(_)&&o(h.name)),G0(_)&&l(_),p.children){const E=p.children;for(let b=0;b<E.length;b++)i(E[b],_,f&&f.children[b])}f=f||_}return x?()=>{o(x)}:Ia}function o(h){if(Y0(h)){const d=n.get(h);d&&(n.delete(h),t.splice(t.indexOf(d),1),d.children.forEach(o),d.alias.forEach(o))}else{const d=t.indexOf(h);d>-1&&(t.splice(d,1),h.record.name&&n.delete(h.record.name),h.children.forEach(o),h.alias.forEach(o))}}function a(){return t}function l(h){const d=$S(h,t);t.splice(d,0,h),h.record.name&&!up(h)&&n.set(h.record.name,h)}function c(h,d){let f,g={},p,m;if("name"in h&&h.name){if(f=n.get(h.name),!f)throw Mo(1,{location:h});m=f.record.name,g=Ve(lp(d.params,f.keys.filter(x=>!x.optional).concat(f.parent?f.parent.keys.filter(x=>x.optional):[]).map(x=>x.name)),h.params&&lp(h.params,f.keys.map(x=>x.name))),p=f.stringify(g)}else if(h.path!=null)p=h.path,f=t.find(x=>x.re.test(p)),f&&(g=f.parse(p),m=f.record.name);else{if(f=d.name?n.get(d.name):t.find(x=>x.re.test(d.path)),!f)throw Mo(1,{location:h,currentLocation:d});m=f.record.name,g=Ve({},d.params,h.params),p=f.stringify(g)}const v=[];let _=f;for(;_;)v.unshift(_.record),_=_.parent;return{name:m,path:p,params:g,matched:v,meta:HS(v)}}r.forEach(h=>i(h));function u(){t.length=0,n.clear()}return{addRoute:i,resolve:c,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:s}}function lp(r,e){const t={};for(const n of e)n in r&&(t[n]=r[n]);return t}function cp(r){const e={path:r.path,redirect:r.redirect,name:r.name,meta:r.meta||{},aliasOf:r.aliasOf,beforeEnter:r.beforeEnter,props:zS(r),children:r.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in r?r.components||null:r.component&&{default:r.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function zS(r){const e={},t=r.props||!1;if("component"in r)e.default=t;else for(const n in r.components)e[n]=typeof t=="object"?t[n]:t;return e}function up(r){for(;r;){if(r.record.aliasOf)return!0;r=r.parent}return!1}function HS(r){return r.reduce((e,t)=>Ve(e,t.meta),{})}function hp(r,e){const t={};for(const n in r)t[n]=n in e?e[n]:r[n];return t}function $S(r,e){let t=0,n=e.length;for(;t!==n;){const i=t+n>>1;U0(r,e[i])<0?n=i:t=i+1}const s=NS(r);return s&&(n=e.lastIndexOf(s,n-1)),n}function NS(r){let e=r;for(;e=e.parent;)if(G0(e)&&U0(r,e)===0)return e}function G0({record:r}){return!!(r.name||r.components&&Object.keys(r.components).length||r.redirect)}function VS(r){const e={};if(r===""||r==="?")return e;const n=(r[0]==="?"?r.slice(1):r).split("&");for(let s=0;s<n.length;++s){const i=n[s].replace(z0," "),o=i.indexOf("="),a=rl(o<0?i:i.slice(0,o)),l=o<0?null:rl(i.slice(o+1));if(a in e){let c=e[a];fr(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function dp(r){let e="";for(let t in r){const n=r[t];if(t=lS(t),n==null){n!==void 0&&(e+=(e.length?"&":"")+t);continue}(fr(n)?n.map(i=>i&&ld(i)):[n&&ld(n)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+t,i!=null&&(e+="="+i))})}return e}function WS(r){const e={};for(const t in r){const n=r[t];n!==void 0&&(e[t]=fr(n)?n.map(s=>s==null?null:""+s):n==null?n:""+n)}return e}const YS=Symbol(""),fp=Symbol(""),Tu=Symbol(""),q0=Symbol(""),ud=Symbol("");function na(){let r=[];function e(n){return r.push(n),()=>{const s=r.indexOf(n);s>-1&&r.splice(s,1)}}function t(){r=[]}return{add:e,list:()=>r.slice(),reset:t}}function Ts(r,e,t,n,s,i=o=>o()){const o=n&&(n.enterCallbacks[s]=n.enterCallbacks[s]||[]);return()=>new Promise((a,l)=>{const c=d=>{d===!1?l(Mo(4,{from:t,to:e})):d instanceof Error?l(d):PS(d)?l(Mo(2,{from:e,to:d})):(o&&n.enterCallbacks[s]===o&&typeof d=="function"&&o.push(d),a())},u=i(()=>r.call(n&&n.instances[s],e,t,c));let h=Promise.resolve(u);r.length<3&&(h=h.then(c)),h.catch(d=>l(d))})}function ph(r,e,t,n,s=i=>i()){const i=[];for(const o of r)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(B0(l)){const u=(l.__vccOpts||l)[e];u&&i.push(Ts(u,t,n,o,a,s))}else{let c=l();i.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const h=Zw(u)?u.default:u;o.mods[a]=u,o.components[a]=h;const f=(h.__vccOpts||h)[e];return f&&Ts(f,t,n,o,a,s)()}))}}return i}function gp(r){const e=Ct(Tu),t=Ct(q0),n=me(()=>{const l=sn(r.to);return e.resolve(l)}),s=me(()=>{const{matched:l}=n.value,{length:c}=l,u=l[c-1],h=t.matched;if(!u||!h.length)return-1;const d=h.findIndex(Eo.bind(null,u));if(d>-1)return d;const f=pp(l[c-2]);return c>1&&pp(u)===f&&h[h.length-1].path!==f?h.findIndex(Eo.bind(null,l[c-2])):d}),i=me(()=>s.value>-1&&KS(t.params,n.value.params)),o=me(()=>s.value>-1&&s.value===t.matched.length-1&&V0(t.params,n.value.params));function a(l={}){if(qS(l)){const c=e[sn(r.replace)?"replace":"push"](sn(r.to)).catch(Ia);return r.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:n,href:me(()=>n.value.href),isActive:i,isExactActive:o,navigate:a}}function XS(r){return r.length===1?r[0]:r}const US=Re({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:gp,setup(r,{slots:e}){const t=pu(gp(r)),{options:n}=Ct(Tu),s=me(()=>({[mp(r.activeClass,n.linkActiveClass,"router-link-active")]:t.isActive,[mp(r.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const i=e.default&&XS(e.default(t));return r.custom?i:J("a",{"aria-current":t.isExactActive?r.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:s.value},i)}}}),GS=US;function qS(r){if(!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)&&!r.defaultPrevented&&!(r.button!==void 0&&r.button!==0)){if(r.currentTarget&&r.currentTarget.getAttribute){const e=r.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return r.preventDefault&&r.preventDefault(),!0}}function KS(r,e){for(const t in e){const n=e[t],s=r[t];if(typeof n=="string"){if(n!==s)return!1}else if(!fr(s)||s.length!==n.length||n.some((i,o)=>i!==s[o]))return!1}return!0}function pp(r){return r?r.aliasOf?r.aliasOf.path:r.path:""}const mp=(r,e,t)=>r??e??t,ZS=Re({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(r,{attrs:e,slots:t}){const n=Ct(ud),s=me(()=>r.route||n.value),i=Ct(fp,0),o=me(()=>{let c=sn(i);const{matched:u}=s.value;let h;for(;(h=u[c])&&!h.components;)c++;return c}),a=me(()=>s.value.matched[o.value]);po(fp,me(()=>o.value+1)),po(YS,a),po(ud,s);const l=G();return Ot(()=>[l.value,a.value,r.name],([c,u,h],[d,f,g])=>{u&&(u.instances[h]=c,f&&f!==u&&c&&c===d&&(u.leaveGuards.size||(u.leaveGuards=f.leaveGuards),u.updateGuards.size||(u.updateGuards=f.updateGuards))),c&&u&&(!f||!Eo(u,f)||!d)&&(u.enterCallbacks[h]||[]).forEach(p=>p(c))},{flush:"post"}),()=>{const c=s.value,u=r.name,h=a.value,d=h&&h.components[u];if(!d)return vp(t.default,{Component:d,route:c});const f=h.props[u],g=f?f===!0?c.params:typeof f=="function"?f(c):f:null,m=J(d,Ve({},g,e,{onVnodeUnmounted:v=>{v.component.isUnmounted&&(h.instances[u]=null)},ref:l}));return vp(t.default,{Component:m,route:c})||m}}});function vp(r,e){if(!r)return null;const t=r(e);return t.length===1?t[0]:t}const JS=ZS;function QS(r){const e=jS(r.routes,r),t=r.parseQuery||VS,n=r.stringifyQuery||dp,s=r.history,i=na(),o=na(),a=na(),l=mu(vs);let c=vs;to&&r.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=fh.bind(null,M=>""+M),h=fh.bind(null,uS),d=fh.bind(null,rl);function f(M,D){let B,se;return Y0(M)?(B=e.getRecordMatcher(M),se=D):se=M,e.addRoute(se,B)}function g(M){const D=e.getRecordMatcher(M);D&&e.removeRoute(D)}function p(){return e.getRoutes().map(M=>M.record)}function m(M){return!!e.getRecordMatcher(M)}function v(M,D){if(D=Ve({},D||l.value),typeof M=="string"){const L=gh(t,M,D.path),q=e.resolve({path:L.path},D),Z=s.createHref(L.fullPath);return Ve(L,q,{params:d(q.params),hash:rl(L.hash),redirectedFrom:void 0,href:Z})}let B;if(M.path!=null)B=Ve({},M,{path:gh(t,M.path,D.path).path});else{const L=Ve({},M.params);for(const q in L)L[q]==null&&delete L[q];B=Ve({},M,{params:h(L)}),D.params=h(D.params)}const se=e.resolve(B,D),Me=M.hash||"";se.params=u(d(se.params));const T=fS(n,Ve({},M,{hash:aS(Me),path:se.path})),O=s.createHref(T);return Ve({fullPath:T,hash:Me,query:n===dp?WS(M.query):M.query||{}},se,{redirectedFrom:void 0,href:O})}function _(M){return typeof M=="string"?gh(t,M,l.value.path):Ve({},M)}function x(M,D){if(c!==M)return Mo(8,{from:D,to:M})}function y(M){return b(M)}function C(M){return y(Ve(_(M),{replace:!0}))}function E(M){const D=M.matched[M.matched.length-1];if(D&&D.redirect){const{redirect:B}=D;let se=typeof B=="function"?B(M):B;return typeof se=="string"&&(se=se.includes("?")||se.includes("#")?se=_(se):{path:se},se.params={}),Ve({query:M.query,hash:M.hash,params:se.path!=null?{}:M.params},se)}}function b(M,D){const B=c=v(M),se=l.value,Me=M.state,T=M.force,O=M.replace===!0,L=E(B);if(L)return b(Ve(_(L),{state:typeof L=="object"?Ve({},Me,L.state):Me,force:T,replace:O}),D||B);const q=B;q.redirectedFrom=D;let Z;return!T&&gS(n,se,B)&&(Z=Mo(16,{to:q,from:se}),Ce(se,se,!0,!1)),(Z?Promise.resolve(Z):$(q,se)).catch(k=>qr(k)?qr(k,2)?k:de(k):R(k,q,se)).then(k=>{if(k){if(qr(k,2))return b(Ve({replace:O},_(k.to),{state:typeof k.to=="object"?Ve({},Me,k.to.state):Me,force:T}),D||q)}else k=H(q,se,!0,O,Me);return N(q,se,k),k})}function w(M,D){const B=x(M,D);return B?Promise.reject(B):Promise.resolve()}function S(M){const D=Te.values().next().value;return D&&typeof D.runWithContext=="function"?D.runWithContext(M):M()}function $(M,D){let B;const[se,Me,T]=eT(M,D);B=ph(se.reverse(),"beforeRouteLeave",M,D);for(const L of se)L.leaveGuards.forEach(q=>{B.push(Ts(q,M,D))});const O=w.bind(null,M,D);return B.push(O),ve(B).then(()=>{B=[];for(const L of i.list())B.push(Ts(L,M,D));return B.push(O),ve(B)}).then(()=>{B=ph(Me,"beforeRouteUpdate",M,D);for(const L of Me)L.updateGuards.forEach(q=>{B.push(Ts(q,M,D))});return B.push(O),ve(B)}).then(()=>{B=[];for(const L of T)if(L.beforeEnter)if(fr(L.beforeEnter))for(const q of L.beforeEnter)B.push(Ts(q,M,D));else B.push(Ts(L.beforeEnter,M,D));return B.push(O),ve(B)}).then(()=>(M.matched.forEach(L=>L.enterCallbacks={}),B=ph(T,"beforeRouteEnter",M,D,S),B.push(O),ve(B))).then(()=>{B=[];for(const L of o.list())B.push(Ts(L,M,D));return B.push(O),ve(B)}).catch(L=>qr(L,8)?L:Promise.reject(L))}function N(M,D,B){a.list().forEach(se=>S(()=>se(M,D,B)))}function H(M,D,B,se,Me){const T=x(M,D);if(T)return T;const O=D===vs,L=to?history.state:{};B&&(se||O?s.replace(M.fullPath,Ve({scroll:O&&L&&L.scroll},Me)):s.push(M.fullPath,Me)),l.value=M,Ce(M,D,B,O),de()}let U;function ee(){U||(U=s.listen((M,D,B)=>{if(!De.listening)return;const se=v(M),Me=E(se);if(Me){b(Ve(Me,{replace:!0,force:!0}),se).catch(Ia);return}c=se;const T=l.value;to&&CS(rp(T.fullPath,B.delta),Su()),$(se,T).catch(O=>qr(O,12)?O:qr(O,2)?(b(Ve(_(O.to),{force:!0}),se).then(L=>{qr(L,20)&&!B.delta&&B.type===sl.pop&&s.go(-1,!1)}).catch(Ia),Promise.reject()):(B.delta&&s.go(-B.delta,!1),R(O,se,T))).then(O=>{O=O||H(se,T,!1),O&&(B.delta&&!qr(O,8)?s.go(-B.delta,!1):B.type===sl.pop&&qr(O,20)&&s.go(-1,!1)),N(se,T,O)}).catch(Ia)}))}let re=na(),te=na(),z;function R(M,D,B){de(M);const se=te.list();return se.length?se.forEach(Me=>Me(M,D,B)):console.error(M),Promise.reject(M)}function ue(){return z&&l.value!==vs?Promise.resolve():new Promise((M,D)=>{re.add([M,D])})}function de(M){return z||(z=!M,ee(),re.list().forEach(([D,B])=>M?B(M):D()),re.reset()),M}function Ce(M,D,B,se){const{scrollBehavior:Me}=r;if(!to||!Me)return Promise.resolve();const T=!B&&wS(rp(M.fullPath,0))||(se||!B)&&history.state&&history.state.scroll||null;return dr().then(()=>Me(M,D,T)).then(O=>O&&xS(O)).catch(O=>R(O,M,D))}const fe=M=>s.go(M);let $e;const Te=new Set,De={currentRoute:l,listening:!0,addRoute:f,removeRoute:g,clearRoutes:e.clearRoutes,hasRoute:m,getRoutes:p,resolve:v,options:r,push:y,replace:C,go:fe,back:()=>fe(-1),forward:()=>fe(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:te.add,isReady:ue,install(M){const D=this;M.component("RouterLink",GS),M.component("RouterView",JS),M.config.globalProperties.$router=D,Object.defineProperty(M.config.globalProperties,"$route",{enumerable:!0,get:()=>sn(l)}),to&&!$e&&l.value===vs&&($e=!0,y(s.location).catch(Me=>{}));const B={};for(const Me in vs)Object.defineProperty(B,Me,{get:()=>l.value[Me],enumerable:!0});M.provide(Tu,D),M.provide(q0,Dv(B)),M.provide(ud,l);const se=M.unmount;Te.add(M),M.unmount=function(){Te.delete(M),Te.size<1&&(c=vs,U&&U(),U=null,l.value=vs,$e=!1,z=!1),se()}}};function ve(M){return M.reduce((D,B)=>D.then(()=>S(B)),Promise.resolve())}return De}function eT(r,e){const t=[],n=[],s=[],i=Math.max(e.matched.length,r.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(r.matched.find(c=>Eo(c,a))?n.push(a):t.push(a));const l=r.matched[o];l&&(e.matched.find(c=>Eo(c,l))||s.push(l))}return[t,n,s]}function K0(){return Ct(Tu)}const tT={class:"toolbar"},nT={class:"toolbar-center"},rT=["onClick"],sT=["onClick"],iT={class:"toolbar-right"},oT={class:"frame-selector-container"},aT=["onClick"],lT=Re({__name:"Toolbar",props:{canvasManager:{}},setup(r){const e=K0(),t=r,n=G(null),s=G(null),i=G(!1),o=G(!1),a=G([]),l=()=>{var x;(x=t.canvasManager)==null||x.getModeManager().enterPresentMode()},c=()=>{t.canvasManager&&t.canvasManager.exportCanvasToJSON()},u=()=>{var x;(x=s.value)==null||x.click()},h=x=>{const y=x.target;if(y.files&&y.files[0]){const C=y.files[0],E=new FileReader;E.onload=b=>{var S;const w=(S=b.target)==null?void 0:S.result;w&&t.canvasManager&&t.canvasManager.importCanvasFromJSON(w),y.value=""},E.readAsText(C)}},d=()=>{e.push("/test")},f=()=>{if(!t.canvasManager)return;const x=t.canvasManager.getPageFrame(),y=t.canvasManager.getAllFrames(),C=[];x&&C.push(x),y&&y.length&&C.push(...y),a.value=C},g=x=>{t.canvasManager&&(t.canvasManager.navigateToFrame(x),o.value=!1)};Ot(()=>t.canvasManager,x=>{x&&f()},{immediate:!0}),Et(()=>{t.canvasManager&&f()});const p=[{name:"",type:"square",options:{width:100,height:100,fill:"#fff"}},{name:"",type:"rect",options:{width:150,height:100,fill:"#fff"}},{name:"",type:"triangle",options:{width:100,height:100,fill:"#fff"}},{name:"",type:"circle",options:{radius:50,fill:"#fff"}},{name:"",type:"line",options:{width:100,stroke:"#fff",strokeWidth:2}},{name:"",type:"arrow",options:{width:100,stroke:"#fff",strokeWidth:2}}],m=(x,y)=>{var C,E,b;console.log("addShape",(C=t.canvasManager)==null?void 0:C.getControlsManager()),(b=(E=t.canvasManager)==null?void 0:E.getControlsManager())==null||b.addShape(x,y),i.value=!1},v=x=>{var C,E;const y=x.target;if(y.files&&y.files[0]){const b=y.files[0],w=URL.createObjectURL(b);(E=(C=t.canvasManager)==null?void 0:C.getControlsManager())==null||E.addImage(w),y.value=""}},_=G([{id:2,name:"",action:()=>{var x,y;(y=(x=t.canvasManager)==null?void 0:x.getControlsManager())==null||y.addText()}},{id:3,name:"",action:()=>{var x;Ae.emit(ye.CONTROL_PANEL.OPEN,{type:ye.PANEL_TYPE.INSERT_IMAGE,canvas:(x=t.canvasManager)==null?void 0:x.getMainCanvas(),canvasManager:t.canvasManager,target:null,position:null})}},{id:4,name:"",action:()=>{i.value=!i.value}},{id:1,name:"",action:()=>console.log("select")}]);return(x,y)=>(ce(),Se("div",tT,[y[2]||(y[2]=P("div",{class:"toolbar-left"},[P("div",{class:"logo"},"Next Slides")],-1)),P("div",nT,[(ce(!0),Se(Ne,null,xn(_.value,C=>(ce(),Se("div",{class:"tool-item",key:C.id},[P("button",{class:"tool-btn",onClick:C.action},pn(C.name),9,rT),C.id===4?zr((ce(),Se("div",{key:0,class:"shape-dropdown",onMouseleave:y[0]||(y[0]=E=>i.value=!1)},[(ce(),Se(Ne,null,xn(p,E=>P("div",{key:E.type,class:"shape-item",onClick:b=>m(E.type,E.options)},pn(E.name),9,sT)),64))],544)),[[Ng,i.value]]):ft("",!0)]))),128)),P("input",{type:"file",ref_key:"fileInput",ref:n,accept:".jpg,.jpeg,.png",style:{display:"none"},onChange:v},null,544)]),P("div",iT,[P("button",{class:"test-page-btn",onClick:d},""),P("div",oT,[zr(P("div",{class:"frame-dropdown",onMouseleave:y[1]||(y[1]=C=>o.value=!1)},[(ce(!0),Se(Ne,null,xn(a.value,(C,E)=>(ce(),Se("div",{key:C.id,class:"frame-item",onClick:b=>g(C)},pn(E===0?"":` ${E}`),9,aT))),128))],544),[[Ng,o.value]])]),P("button",{class:"save-btn",onClick:c},""),P("button",{class:"import-btn",onClick:u},""),P("button",{class:"preview-btn",onClick:l},""),P("input",{type:"file",ref_key:"jsonFileInput",ref:s,accept:".json",style:{display:"none"},onChange:h},null,544)])]))}}),cT=Yn(lT,[["__scopeId","data-v-090392ee"]]);function F(r,e,t){return(e=function(n){var s=function(i,o){if(typeof i!="object"||!i)return i;var a=i[Symbol.toPrimitive];if(a!==void 0){var l=a.call(i,o);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(i)}(n,"string");return typeof s=="symbol"?s:s+""}(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function yp(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),t.push.apply(t,n)}return t}function A(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?yp(Object(t),!0).forEach(function(n){F(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):yp(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function lt(r,e){if(r==null)return{};var t,n,s=function(o,a){if(o==null)return{};var l={};for(var c in o)if({}.hasOwnProperty.call(o,c)){if(a.indexOf(c)>=0)continue;l[c]=o[c]}return l}(r,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(n=0;n<i.length;n++)t=i[n],e.indexOf(t)>=0||{}.propertyIsEnumerable.call(r,t)&&(s[t]=r[t])}return s}function Ks(r,e){return e||(e=r.slice(0)),Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(e)}}))}class bp{constructor(){F(this,"browserShadowBlurConstant",1),F(this,"DPI",96),F(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),F(this,"perfLimitSizeTotal",2097152),F(this,"maxCacheSideLimit",4096),F(this,"minCacheSideLimit",256),F(this,"disableStyleCopyPaste",!1),F(this,"enableGLFiltering",!0),F(this,"textureSize",4096),F(this,"forceGLPutImageData",!1),F(this,"cachesBoundsOfCurve",!1),F(this,"fontPaths",{}),F(this,"NUM_FRACTION_DIGITS",4)}}const He=new class extends bp{constructor(r){super(),this.configure(r)}configure(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,r)}addFonts(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=A(A({},this.fontPaths),r)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(r=>{delete this.fontPaths[r]})}clearFonts(){this.fontPaths={}}restoreDefaults(r){const e=new bp,t=(r==null?void 0:r.reduce((n,s)=>(n[s]=e[s],n),{}))||e;this.configure(t)}},Hs=function(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return console[r]("fabric",...t)};class Fr extends Error{constructor(e,t){super("fabric: ".concat(e),t)}}let Z0=class extends Fr{constructor(e){super("".concat(e," 'options.signal' is in 'aborted' state"))}};class uT{}class hT extends uT{testPrecision(e,t){const n="precision ".concat(t,` float;
void main(){}`),s=e.createShader(e.FRAGMENT_SHADER);return!!s&&(e.shaderSource(s,n),e.compileShader(s),!!e.getShaderParameter(s,e.COMPILE_STATUS))}queryWebGL(e){const t=e.getContext("webgl");t&&(this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(n=>this.testPrecision(t,n)),t.getExtension("WEBGL_lose_context").loseContext(),Hs("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(e){return!!this.maxTextureSize&&this.maxTextureSize>=e}}const dT={};let _p;const Hr=()=>_p||(_p={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new hT,dispose(){},copyPasteData:dT}),$o=()=>Hr().document,Ou=()=>Hr().window,J0=()=>{var r;return Math.max((r=He.devicePixelRatio)!==null&&r!==void 0?r:Ou().devicePixelRatio,1)},Ba=new class{constructor(){F(this,"charWidthsCache",{}),F(this,"boundsOfCurveCache",{})}getFontCache(r){let{fontFamily:e,fontStyle:t,fontWeight:n}=r;e=e.toLowerCase(),this.charWidthsCache[e]||(this.charWidthsCache[e]={});const s=this.charWidthsCache[e],i="".concat(t.toLowerCase(),"_").concat((n+"").toLowerCase());return s[i]||(s[i]={}),s[i]}clearFontCache(r){(r=(r||"").toLowerCase())?this.charWidthsCache[r]&&delete this.charWidthsCache[r]:this.charWidthsCache={}}limitDimsByArea(r){const{perfLimitSizeTotal:e}=He,t=Math.sqrt(e*r);return[Math.floor(t),Math.floor(e/t)]}},hd="6.6.1";function wi(){}const $s=Math.PI/2,ls=2*Math.PI,xf=Math.PI/180,mn=Object.freeze([1,0,0,1,0,0]),Cf=16,ys=.4477152502,Fe="center",Xe="left",Cn="top",dd="bottom",_t="right",wn="none",wf=/\r?\n/,Q0="moving",Eu="scaling",ey="rotating",Sf="rotate",ty="skewing",il="resizing",ny="modifyPoly",fT="modifyPath",Lc="changed",Mu="scale",vn="scaleX",Nn="scaleY",No="skewX",Vo="skewY",Ft="fill",Sn="stroke",Bc="modified",Zi="json",mh="svg",oe=new class{constructor(){this[Zi]=new Map,this[mh]=new Map}has(r){return this[Zi].has(r)}getClass(r){const e=this[Zi].get(r);if(!e)throw new Fr("No class registered for ".concat(r));return e}setClass(r,e){e?this[Zi].set(e,r):(this[Zi].set(r.type,r),this[Zi].set(r.type.toLowerCase(),r))}getSVGClass(r){return this[mh].get(r)}setSVGClass(r,e){this[mh].set(e??r.type.toLowerCase(),r)}},jc=new class extends Array{remove(r){const e=this.indexOf(r);e>-1&&this.splice(e,1)}cancelAll(){const r=this.splice(0);return r.forEach(e=>e.abort()),r}cancelByCanvas(r){if(!r)return[];const e=this.filter(t=>{var n;return t.target===r||typeof t.target=="object"&&((n=t.target)===null||n===void 0?void 0:n.canvas)===r});return e.forEach(t=>t.abort()),e}cancelByTarget(r){if(!r)return[];const e=this.filter(t=>t.target===r);return e.forEach(t=>t.abort()),e}};class gT{constructor(){F(this,"__eventListeners",{})}on(e,t){if(this.__eventListeners||(this.__eventListeners={}),typeof e=="object")return Object.entries(e).forEach(n=>{let[s,i]=n;this.on(s,i)}),()=>this.off(e);if(t){const n=e;return this.__eventListeners[n]||(this.__eventListeners[n]=[]),this.__eventListeners[n].push(t),()=>this.off(n,t)}return()=>!1}once(e,t){if(typeof e=="object"){const n=[];return Object.entries(e).forEach(s=>{let[i,o]=s;n.push(this.once(i,o))}),()=>n.forEach(s=>s())}if(t){const n=this.on(e,function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];t.call(this,...i),n()});return n}return()=>!1}_removeEventListener(e,t){if(this.__eventListeners[e])if(t){const n=this.__eventListeners[e],s=n.indexOf(t);s>-1&&n.splice(s,1)}else this.__eventListeners[e]=[]}off(e,t){if(this.__eventListeners)if(e===void 0)for(const n in this.__eventListeners)this._removeEventListener(n);else typeof e=="object"?Object.entries(e).forEach(n=>{let[s,i]=n;this._removeEventListener(s,i)}):this._removeEventListener(e,t)}fire(e,t){var n;if(!this.__eventListeners)return;const s=(n=this.__eventListeners[e])===null||n===void 0?void 0:n.concat();if(s)for(let i=0;i<s.length;i++)s[i].call(this,t||{})}}const ui=(r,e)=>{const t=r.indexOf(e);return t!==-1&&r.splice(t,1),r},gr=r=>{if(r===0)return 1;switch(Math.abs(r)/$s){case 1:case 3:return 0;case 2:return-1}return Math.cos(r)},pr=r=>{if(r===0)return 0;const e=r/$s,t=Math.sign(r);switch(e){case 1:return t;case 2:return 0;case 3:return-t}return Math.sin(r)};class j{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof e=="object"?(this.x=e.x,this.y=e.y):(this.x=e,this.y=t)}add(e){return new j(this.x+e.x,this.y+e.y)}addEquals(e){return this.x+=e.x,this.y+=e.y,this}scalarAdd(e){return new j(this.x+e,this.y+e)}scalarAddEquals(e){return this.x+=e,this.y+=e,this}subtract(e){return new j(this.x-e.x,this.y-e.y)}subtractEquals(e){return this.x-=e.x,this.y-=e.y,this}scalarSubtract(e){return new j(this.x-e,this.y-e)}scalarSubtractEquals(e){return this.x-=e,this.y-=e,this}multiply(e){return new j(this.x*e.x,this.y*e.y)}scalarMultiply(e){return new j(this.x*e,this.y*e)}scalarMultiplyEquals(e){return this.x*=e,this.y*=e,this}divide(e){return new j(this.x/e.x,this.y/e.y)}scalarDivide(e){return new j(this.x/e,this.y/e)}scalarDivideEquals(e){return this.x/=e,this.y/=e,this}eq(e){return this.x===e.x&&this.y===e.y}lt(e){return this.x<e.x&&this.y<e.y}lte(e){return this.x<=e.x&&this.y<=e.y}gt(e){return this.x>e.x&&this.y>e.y}gte(e){return this.x>=e.x&&this.y>=e.y}lerp(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return t=Math.max(Math.min(1,t),0),new j(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}distanceFrom(e){const t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)}midPointFrom(e){return this.lerp(e)}min(e){return new j(Math.min(this.x,e.x),Math.min(this.y,e.y))}max(e){return new j(Math.max(this.x,e.x),Math.max(this.y,e.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(e,t){return this.x=e,this.y=t,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setFromPoint(e){return this.x=e.x,this.y=e.y,this}swap(e){const t=this.x,n=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=n}clone(){return new j(this.x,this.y)}rotate(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Tf;const n=pr(e),s=gr(e),i=this.subtract(t);return new j(i.x*s-i.y*n,i.x*n+i.y*s).add(t)}transform(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new j(e[0]*this.x+e[2]*this.y+(t?0:e[4]),e[1]*this.x+e[3]*this.y+(t?0:e[5]))}}const Tf=new j(0,0),dc=r=>!!r&&Array.isArray(r._objects);function ry(r){class e extends r{constructor(){super(...arguments),F(this,"_objects",[])}_onObjectAdded(n){}_onObjectRemoved(n){}_onStackOrderChanged(n){}add(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];const o=this._objects.push(...s);return s.forEach(a=>this._onObjectAdded(a)),o}insertAt(n){for(var s=arguments.length,i=new Array(s>1?s-1:0),o=1;o<s;o++)i[o-1]=arguments[o];return this._objects.splice(n,0,...i),i.forEach(a=>this._onObjectAdded(a)),this._objects.length}remove(){const n=this._objects,s=[];for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return o.forEach(l=>{const c=n.indexOf(l);c!==-1&&(n.splice(c,1),s.push(l),this._onObjectRemoved(l))}),s}forEachObject(n){this.getObjects().forEach((s,i,o)=>n(s,i,o))}getObjects(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return s.length===0?[...this._objects]:this._objects.filter(o=>o.isType(...s))}item(n){return this._objects[n]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(n,s){return!!this._objects.includes(n)||!!s&&this._objects.some(i=>i instanceof e&&i.contains(n,!0))}complexity(){return this._objects.reduce((n,s)=>n+=s.complexity?s.complexity():0,0)}sendObjectToBack(n){return!(!n||n===this._objects[0])&&(ui(this._objects,n),this._objects.unshift(n),this._onStackOrderChanged(n),!0)}bringObjectToFront(n){return!(!n||n===this._objects[this._objects.length-1])&&(ui(this._objects,n),this._objects.push(n),this._onStackOrderChanged(n),!0)}sendObjectBackwards(n,s){if(!n)return!1;const i=this._objects.indexOf(n);if(i!==0){const o=this.findNewLowerIndex(n,i,s);return ui(this._objects,n),this._objects.splice(o,0,n),this._onStackOrderChanged(n),!0}return!1}bringObjectForward(n,s){if(!n)return!1;const i=this._objects.indexOf(n);if(i!==this._objects.length-1){const o=this.findNewUpperIndex(n,i,s);return ui(this._objects,n),this._objects.splice(o,0,n),this._onStackOrderChanged(n),!0}return!1}moveObjectTo(n,s){return n!==this._objects[s]&&(ui(this._objects,n),this._objects.splice(s,0,n),this._onStackOrderChanged(n),!0)}findNewLowerIndex(n,s,i){let o;if(i){o=s;for(let a=s-1;a>=0;--a)if(n.isOverlapping(this._objects[a])){o=a;break}}else o=s-1;return o}findNewUpperIndex(n,s,i){let o;if(i){o=s;for(let a=s+1;a<this._objects.length;++a)if(n.isOverlapping(this._objects[a])){o=a;break}}else o=s+1;return o}collectObjects(n){let{left:s,top:i,width:o,height:a}=n,{includeIntersecting:l=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const c=[],u=new j(s,i),h=u.add(new j(o,a));for(let d=this._objects.length-1;d>=0;d--){const f=this._objects[d];f.selectable&&f.visible&&(l&&f.intersectsWithRect(u,h)||f.isContainedWithinRect(u,h)||l&&f.containsPoint(u)||l&&f.containsPoint(h))&&c.push(f)}return c}}return e}class sy extends gT{_setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const t in e)this.set(t,e[t])}_setObject(e){for(const t in e)this._set(t,e[t])}set(e,t){return typeof e=="object"?this._setObject(e):this._set(e,t),this}_set(e,t){this[e]=t}toggle(e){const t=this.get(e);return typeof t=="boolean"&&this.set(e,!t),this}get(e){return this[e]}}function ja(r){return Ou().requestAnimationFrame(r)}function iy(r){return Ou().cancelAnimationFrame(r)}let pT=0;const Ns=()=>pT++,nr=()=>{const r=$o().createElement("canvas");if(!r||r.getContext===void 0)throw new Fr("Failed to create `canvas` element");return r},oy=()=>$o().createElement("img"),mr=r=>{const e=nr();return e.width=r.width,e.height=r.height,e},Of=(r,e,t)=>r.toDataURL("image/".concat(e),t),Ef=(r,e,t)=>new Promise((n,s)=>{r.toBlob(n,"image/".concat(e),t)}),gt=r=>r*xf,Vs=r=>r/xf,ay=r=>r.every((e,t)=>e===mn[t]),Jt=(r,e,t)=>new j(r).transform(e,t),Ln=r=>{const e=1/(r[0]*r[3]-r[1]*r[2]),t=[e*r[3],-e*r[1],-e*r[2],e*r[0],0,0],{x:n,y:s}=new j(r[4],r[5]).transform(t,!0);return t[4]=-n,t[5]=-s,t},pt=(r,e,t)=>[r[0]*e[0]+r[2]*e[1],r[1]*e[0]+r[3]*e[1],r[0]*e[2]+r[2]*e[3],r[1]*e[2]+r[3]*e[3],t?0:r[0]*e[4]+r[2]*e[5]+r[4],t?0:r[1]*e[4]+r[3]*e[5]+r[5]],Pu=(r,e)=>r.reduceRight((t,n)=>n&&t?pt(n,t,e):n||t,void 0)||mn.concat(),ly=r=>{let[e,t]=r;return Math.atan2(t,e)},Po=r=>{const e=ly(r),t=Math.pow(r[0],2)+Math.pow(r[1],2),n=Math.sqrt(t),s=(r[0]*r[3]-r[2]*r[1])/n,i=Math.atan2(r[0]*r[2]+r[1]*r[3],t);return{angle:Vs(e),scaleX:n,scaleY:s,skewX:Vs(i),skewY:0,translateX:r[4]||0,translateY:r[5]||0}},Wo=function(r){return[1,0,0,1,r,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function Yo(){let{angle:r=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:e=0,y:t=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=gt(r),s=gr(n),i=pr(n);return[s,i,-i,s,e?e-(s*e-i*t):0,t?t-(i*e+s*t):0]}const Au=function(r){return[r,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:r,0,0]},cy=r=>Math.tan(gt(r)),Mf=r=>[1,0,cy(r),1,0,0],Pf=r=>[1,cy(r),0,1,0,0],Tl=r=>{let{scaleX:e=1,scaleY:t=1,flipX:n=!1,flipY:s=!1,skewX:i=0,skewY:o=0}=r,a=Au(n?-e:e,s?-t:t);return i&&(a=pt(a,Mf(i),!0)),o&&(a=pt(a,Pf(o),!0)),a},uy=r=>{const{translateX:e=0,translateY:t=0,angle:n=0}=r;let s=Wo(e,t);n&&(s=pt(s,Yo({angle:n})));const i=Tl(r);return ay(i)||(s=pt(s,i)),s},za=function(r){let{signal:e,crossOrigin:t=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(n,s){if(e&&e.aborted)return s(new Z0("loadImage"));const i=oy();let o;e&&(o=function(l){i.src="",s(l)},e.addEventListener("abort",o,{once:!0}));const a=function(){i.onload=i.onerror=null,o&&(e==null||e.removeEventListener("abort",o)),n(i)};r?(i.onload=a,i.onerror=function(){o&&(e==null||e.removeEventListener("abort",o)),s(new Fr("Error loading ".concat(i.src)))},t&&(i.crossOrigin=t),i.src=r):a()})},Ao=function(r){let{signal:e,reviver:t=wi}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((n,s)=>{const i=[];e&&e.addEventListener("abort",s,{once:!0}),Promise.all(r.map(o=>oe.getClass(o.type).fromObject(o,{signal:e}).then(a=>(t(o,a),i.push(a),a)))).then(n).catch(o=>{i.forEach(a=>{a.dispose&&a.dispose()}),s(o)}).finally(()=>{e&&e.removeEventListener("abort",s)})})},Ol=function(r){let{signal:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((t,n)=>{const s=[];e&&e.addEventListener("abort",n,{once:!0});const i=Object.values(r).map(a=>a&&a.type&&oe.has(a.type)?Ao([a],{signal:e}).then(l=>{let[c]=l;return s.push(c),c}):a),o=Object.keys(r);Promise.all(i).then(a=>a.reduce((l,c,u)=>(l[o[u]]=c,l),{})).then(t).catch(a=>{s.forEach(l=>{l.dispose&&l.dispose()}),n(a)}).finally(()=>{e&&e.removeEventListener("abort",n)})})},Ni=function(r){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((e,t)=>(t in r&&(e[t]=r[t]),e),{})},Af=(r,e)=>Object.keys(r).reduce((t,n)=>(e(r[n],n,r)&&(t[n]=r[n]),t),{}),xp={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},vh=(r,e,t)=>(t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+6*(e-r)*t:t<.5?e:t<2/3?r+(e-r)*(2/3-t)*6:r),Cp=(r,e,t,n)=>{r/=255,e/=255,t/=255;const s=Math.max(r,e,t),i=Math.min(r,e,t);let o,a;const l=(s+i)/2;if(s===i)o=a=0;else{const c=s-i;switch(a=l>.5?c/(2-s-i):c/(s+i),s){case r:o=(e-t)/c+(e<t?6:0);break;case e:o=(t-r)/c+2;break;case t:o=(r-e)/c+4}o/=6}return[Math.round(360*o),Math.round(100*a),Math.round(100*l),n]},wp=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(r)/(r.endsWith("%")?100:1)},Nl=r=>Math.min(Math.round(r),255).toString(16).toUpperCase().padStart(2,"0"),Sp=r=>{let[e,t,n,s=1]=r;const i=Math.round(.3*e+.59*t+.11*n);return[i,i,i,s]};class Ge{constructor(e){if(F(this,"isUnrecognised",!1),e)if(e instanceof Ge)this.setSource([...e._source]);else if(Array.isArray(e)){const[t,n,s,i=1]=e;this.setSource([t,n,s,i])}else this.setSource(this._tryParsingColor(e));else this.setSource([0,0,0,1])}_tryParsingColor(e){return(e=e.toLowerCase())in xp&&(e=xp[e]),e==="transparent"?[255,255,255,0]:Ge.sourceFromHex(e)||Ge.sourceFromRgb(e)||Ge.sourceFromHsl(e)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(e){this._source=e}toRgb(){const[e,t,n]=this.getSource();return"rgb(".concat(e,",").concat(t,",").concat(n,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[e,t,n]=Cp(...this.getSource());return"hsl(".concat(e,",").concat(t,"%,").concat(n,"%)")}toHsla(){const[e,t,n,s]=Cp(...this.getSource());return"hsla(".concat(e,",").concat(t,"%,").concat(n,"%,").concat(s,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[e,t,n,s]=this.getSource();return"".concat(Nl(e)).concat(Nl(t)).concat(Nl(n)).concat(Nl(Math.round(255*s)))}getAlpha(){return this.getSource()[3]}setAlpha(e){return this._source[3]=e,this}toGrayscale(){return this.setSource(Sp(this.getSource())),this}toBlackWhite(e){const[t,,,n]=Sp(this.getSource()),s=t<(e||127)?0:255;return this.setSource([s,s,s,n]),this}overlayWith(e){e instanceof Ge||(e=new Ge(e));const t=this.getSource(),n=e.getSource(),[s,i,o]=t.map((a,l)=>Math.round(.5*a+.5*n[l]));return this.setSource([s,i,o,t[3]]),this}static fromRgb(e){return Ge.fromRgba(e)}static fromRgba(e){return new Ge(Ge.sourceFromRgb(e))}static sourceFromRgb(e){const t=e.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(t){const[n,s,i]=t.slice(1,4).map(o=>{const a=parseFloat(o);return o.endsWith("%")?Math.round(2.55*a):a});return[n,s,i,wp(t[4])]}}static fromHsl(e){return Ge.fromHsla(e)}static fromHsla(e){return new Ge(Ge.sourceFromHsl(e))}static sourceFromHsl(e){const t=e.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!t)return;const n=(Ge.parseAngletoDegrees(t[1])%360+360)%360/360,s=parseFloat(t[2])/100,i=parseFloat(t[3])/100;let o,a,l;if(s===0)o=a=l=i;else{const c=i<=.5?i*(s+1):i+s-i*s,u=2*i-c;o=vh(u,c,n+1/3),a=vh(u,c,n),l=vh(u,c,n-1/3)}return[Math.round(255*o),Math.round(255*a),Math.round(255*l),wp(t[4])]}static fromHex(e){return new Ge(Ge.sourceFromHex(e))}static sourceFromHex(e){if(e.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const t=e.slice(e.indexOf("#")+1);let n;n=t.length<=4?t.split("").map(l=>l+l):t.match(/.{2}/g);const[s,i,o,a=255]=n.map(l=>parseInt(l,16));return[s,i,o,a/255]}}static parseAngletoDegrees(e){const t=e.toLowerCase(),n=parseFloat(t);return t.includes("rad")?Vs(n):t.includes("turn")?360*n:n}}const ot=(r,e)=>parseFloat(Number(r).toFixed(e)),Si=function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Cf;const t=/\D{0,2}$/.exec(r),n=parseFloat(r),s=He.DPI;switch(t==null?void 0:t[0]){case"mm":return n*s/25.4;case"cm":return n*s/2.54;case"in":return n*s;case"pt":return n*s/72;case"pc":return n*s/72*12;case"em":return n*e;default:return n}},hy=r=>{const[e,t]=r.trim().split(" "),[n,s]=(i=e)&&i!==wn?[i.slice(1,4),i.slice(5,8)]:i===wn?[i,i]:["Mid","Mid"];var i;return{meetOrSlice:t||"meet",alignX:n,alignY:s}},ol=r=>"matrix("+r.map(e=>ot(e,He.NUM_FRACTION_DIGITS)).join(" ")+")",al=function(r,e){let t,n,s=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(e)if(e.toLive)t="url(#SVGID_".concat(e.id,")");else{const i=new Ge(e),o=i.getAlpha();t=i.toRgb(),o!==1&&(n=o.toString())}else t="none";return s?"".concat(r,": ").concat(t,"; ").concat(n?"".concat(r,"-opacity: ").concat(n,"; "):""):"".concat(r,'="').concat(t,'" ').concat(n?"".concat(r,'-opacity="').concat(n,'" '):"")},Zn=r=>!!r&&r.toLive!==void 0,Tp=r=>!!r&&typeof r.toObject=="function",Op=r=>!!r&&r.offsetX!==void 0&&"source"in r,hi=r=>!!r&&"multiSelectionStacking"in r;function dy(r){const e=r&&ir(r);let t=0,n=0;if(!r||!e)return{left:t,top:n};let s=r;const i=e.documentElement,o=e.body||{scrollLeft:0,scrollTop:0};for(;s&&(s.parentNode||s.host)&&(s=s.parentNode||s.host,s===e?(t=o.scrollLeft||i.scrollLeft||0,n=o.scrollTop||i.scrollTop||0):(t+=s.scrollLeft||0,n+=s.scrollTop||0),s.nodeType!==1||s.style.position!=="fixed"););return{left:t,top:n}}const ir=r=>r.ownerDocument||null,fy=r=>{var e;return((e=r.ownerDocument)===null||e===void 0?void 0:e.defaultView)||null},gy=function(r,e,t){let{width:n,height:s}=t,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;r.width=n,r.height=s,i>1&&(r.setAttribute("width",(n*i).toString()),r.setAttribute("height",(s*i).toString()),e.scale(i,i))},fd=(r,e)=>{let{width:t,height:n}=e;t&&(r.style.width=typeof t=="number"?"".concat(t,"px"):t),n&&(r.style.height=typeof n=="number"?"".concat(n,"px"):n)};function Ep(r){return r.onselectstart!==void 0&&(r.onselectstart=()=>!1),r.style.userSelect=wn,r}class py{constructor(e){F(this,"_originalCanvasStyle",void 0),F(this,"lower",void 0);const t=this.createLowerCanvas(e);this.lower={el:t,ctx:t.getContext("2d")}}createLowerCanvas(e){const t=(n=e)&&n.getContext!==void 0?e:e&&$o().getElementById(e)||nr();var n;if(t.hasAttribute("data-fabric"))throw new Fr("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=t.style.cssText,t.setAttribute("data-fabric","main"),t.classList.add("lower-canvas"),t}cleanupDOM(e){let{width:t,height:n}=e;const{el:s}=this.lower;s.classList.remove("lower-canvas"),s.removeAttribute("data-fabric"),s.setAttribute("width","".concat(t)),s.setAttribute("height","".concat(n)),s.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(e,t){const{el:n,ctx:s}=this.lower;gy(n,s,e,t)}setCSSDimensions(e){fd(this.lower.el,e)}calcOffset(){return function(e){var t;const n=e&&ir(e),s={left:0,top:0};if(!n)return s;const i=((t=fy(e))===null||t===void 0?void 0:t.getComputedStyle(e,null))||{};s.left+=parseInt(i.borderLeftWidth,10)||0,s.top+=parseInt(i.borderTopWidth,10)||0,s.left+=parseInt(i.paddingLeft,10)||0,s.top+=parseInt(i.paddingTop,10)||0;let o={left:0,top:0};const a=n.documentElement;e.getBoundingClientRect!==void 0&&(o=e.getBoundingClientRect());const l=dy(e);return{left:o.left+l.left-(a.clientLeft||0)+s.left,top:o.top+l.top-(a.clientTop||0)+s.top}}(this.lower.el)}dispose(){Hr().dispose(this.lower.el),delete this.lower}}const mT={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...mn]};class El extends ry(sy){get lowerCanvasEl(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.el}get contextContainer(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.ctx}static getDefaults(){return El.ownDefaults}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(t),this.initElements(e),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(e){this.elements=new py(e)}add(){const e=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}insertAt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];const i=super.insertAt(e,...n);return n.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),i}remove(){const e=super.remove(...arguments);return e.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}_onObjectAdded(e){e.canvas&&e.canvas!==this&&(Hs("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),e.canvas.remove(e)),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e){e._set("canvas",void 0),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?J0():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(e,t){return this.setDimensions({width:e},t)}setHeight(e,t){return this.setDimensions({height:e},t)}_setDimensionsImpl(e){let{cssOnly:t=!1,backstoreOnly:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t){const s=A({width:this.width,height:this.height},e);this.elements.setDimensions(s,this.getRetinaScaling()),this.hasLostContext=!0,this.width=s.width,this.height=s.height}n||this.elements.setCSSDimensions(e),this.calcOffset()}setDimensions(e,t){this._setDimensionsImpl(e,t),t&&t.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(e){this.viewportTransform=e,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(e,t){const n=e,s=[...this.viewportTransform],i=Jt(e,Ln(s));s[0]=t,s[3]=t;const o=Jt(i,s);s[4]+=n.x-o.x,s[5]+=n.y-o.y,this.setViewportTransform(s)}setZoom(e){this.zoomToPoint(new j(0,0),e)}absolutePan(e){const t=[...this.viewportTransform];return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)}relativePan(e){return this.absolutePan(new j(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(e){e.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=ja(()=>this.renderAndReset()))}calcViewportBoundaries(){const e=this.width,t=this.height,n=Ln(this.viewportTransform),s=Jt({x:0,y:0},n),i=Jt({x:e,y:t},n),o=s.min(i),a=s.max(i);return this.vptCoords={tl:o,tr:new j(a.x,o.y),bl:new j(o.x,a.y),br:a}}cancelRequestedRender(){this.nextRenderHandle&&(iy(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(e){}renderCanvas(e,t){if(this.destroyed)return;const n=this.viewportTransform,s=this.clipPath;this.calcViewportBoundaries(),this.clearContext(e),e.imageSmoothingEnabled=this.imageSmoothingEnabled,e.patternQuality="best",this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this._renderObjects(e,t),e.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(e),s&&(s._set("canvas",this),s.shouldCache(),s._transformDone=!0,s.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e,s)),this._renderOverlay(e),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(e),this.fire("after:render",{ctx:e}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(e,t){const n=this.viewportTransform;e.save(),e.transform(...n),e.globalCompositeOperation="destination-in",t.transform(e),e.scale(1/t.zoomX,1/t.zoomY),e.drawImage(t._cacheCanvas,-t.cacheTranslationX,-t.cacheTranslationY),e.restore()}_renderObjects(e,t){for(let n=0,s=t.length;n<s;++n)t[n]&&t[n].render(e)}_renderBackgroundOrOverlay(e,t){const n=this["".concat(t,"Color")],s=this["".concat(t,"Image")],i=this.viewportTransform,o=this["".concat(t,"Vpt")];if(!n&&!s)return;const a=Zn(n);if(n){if(e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=a?n.toLive(e):n,o&&e.transform(...i),a){e.transform(1,0,0,1,n.offsetX||0,n.offsetY||0);const l=n.gradientTransform||n.patternTransform;l&&e.transform(...l)}e.fill(),e.restore()}if(s){e.save();const{skipOffscreen:l}=this;this.skipOffscreen=o,o&&e.transform(...i),s.render(e),this.skipOffscreen=l,e.restore()}}_renderBackground(e){this._renderBackgroundOrOverlay(e,"background")}_renderOverlay(e){this._renderBackgroundOrOverlay(e,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new j(this.width/2,this.height/2)}centerObjectH(e){return this._centerObject(e,new j(this.getCenterPoint().x,e.getCenterPoint().y))}centerObjectV(e){return this._centerObject(e,new j(e.getCenterPoint().x,this.getCenterPoint().y))}centerObject(e){return this._centerObject(e,this.getCenterPoint())}viewportCenterObject(e){return this._centerObject(e,this.getVpCenter())}viewportCenterObjectH(e){return this._centerObject(e,new j(this.getVpCenter().x,e.getCenterPoint().y))}viewportCenterObjectV(e){return this._centerObject(e,new j(e.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return Jt(this.getCenterPoint(),Ln(this.viewportTransform))}_centerObject(e,t){e.setXY(t,Fe,Fe),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(e){return this.toDatalessObject(e)}toObject(e){return this._toObjectMethod("toObject",e)}toJSON(){return this.toObject()}toDatalessObject(e){return this._toObjectMethod("toDatalessObject",e)}_toObjectMethod(e,t){const n=this.clipPath,s=n&&!n.excludeFromExport?this._toObject(n,e,t):null;return A(A(A({version:hd},Ni(this,t)),{},{objects:this._objects.filter(i=>!i.excludeFromExport).map(i=>this._toObject(i,e,t))},this.__serializeBgOverlay(e,t)),s?{clipPath:s}:null)}_toObject(e,t,n){let s;this.includeDefaultValues||(s=e.includeDefaultValues,e.includeDefaultValues=!1);const i=e[t](n);return this.includeDefaultValues||(e.includeDefaultValues=!!s),i}__serializeBgOverlay(e,t){const n={},s=this.backgroundImage,i=this.overlayImage,o=this.backgroundColor,a=this.overlayColor;return Zn(o)?o.excludeFromExport||(n.background=o.toObject(t)):o&&(n.background=o),Zn(a)?a.excludeFromExport||(n.overlay=a.toObject(t)):a&&(n.overlay=a),s&&!s.excludeFromExport&&(n.backgroundImage=this._toObject(s,e,t)),i&&!i.excludeFromExport&&(n.overlayImage=this._toObject(i,e,t)),n}toSVG(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.reviver=t;const n=[];return this._setSVGPreamble(n,e),this._setSVGHeader(n,e),this.clipPath&&n.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(n,"background"),this._setSVGBgOverlayImage(n,"backgroundImage",t),this._setSVGObjects(n,t),this.clipPath&&n.push(`</g>
`),this._setSVGBgOverlayColor(n,"overlay"),this._setSVGBgOverlayImage(n,"overlayImage",t),n.push("</svg>"),n.join("")}_setSVGPreamble(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(e,t){const n=t.width||"".concat(this.width),s=t.height||"".concat(this.height),i=He.NUM_FRACTION_DIGITS,o=t.viewBox;let a;if(o)a='viewBox="'.concat(o.x," ").concat(o.y," ").concat(o.width," ").concat(o.height,'" ');else if(this.svgViewportTransformation){const l=this.viewportTransform;a='viewBox="'.concat(ot(-l[4]/l[0],i)," ").concat(ot(-l[5]/l[3],i)," ").concat(ot(this.width/l[0],i)," ").concat(ot(this.height/l[3],i),'" ')}else a='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',n,'" ','height="',s,'" ',a,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",hd,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),`</defs>
`)}createSVGClipPathMarkup(e){const t=this.clipPath;return t?(t.clipPathId="CLIPPATH_".concat(Ns()),'<clipPath id="'.concat(t.clipPathId,`" >
`).concat(t.toClipPathSVG(e.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map(e=>{const t=this["".concat(e,"Color")];if(Zn(t)){const n=this["".concat(e,"Vpt")],s=this.viewportTransform,i={isType:()=>!1,width:this.width/(n?s[0]:1),height:this.height/(n?s[3]:1)};return t.toSVG(i,{additionalTransform:n?ol(s):""})}}).join("")}createSVGFontFacesMarkup(){const e=[],t={},n=He.fontPaths;this._objects.forEach(function i(o){e.push(o),dc(o)&&o._objects.forEach(i)}),e.forEach(i=>{if(!(o=i)||typeof o._renderText!="function")return;var o;const{styles:a,fontFamily:l}=i;!t[l]&&n[l]&&(t[l]=!0,a&&Object.values(a).forEach(c=>{Object.values(c).forEach(u=>{let{fontFamily:h=""}=u;!t[h]&&n[h]&&(t[h]=!0)})}))});const s=Object.keys(t).map(i=>`		@font-face {
			font-family: '`.concat(i,`';
			src: url('`).concat(n[i],`');
		}
`)).join("");return s?`	<style type="text/css"><![CDATA[
`.concat(s,`]]></style>
`):""}_setSVGObjects(e,t){this.forEachObject(n=>{n.excludeFromExport||this._setSVGObject(e,n,t)})}_setSVGObject(e,t,n){e.push(t.toSVG(n))}_setSVGBgOverlayImage(e,t,n){const s=this[t];s&&!s.excludeFromExport&&s.toSVG&&e.push(s.toSVG(n))}_setSVGBgOverlayColor(e,t){const n=this["".concat(t,"Color")];if(n)if(Zn(n)){const s=n.repeat||"",i=this.width,o=this.height,a=this["".concat(t,"Vpt")]?ol(Ln(this.viewportTransform)):"";e.push('<rect transform="'.concat(a," translate(").concat(i/2,",").concat(o/2,')" x="').concat(n.offsetX-i/2,'" y="').concat(n.offsetY-o/2,'" width="').concat(s!=="repeat-y"&&s!=="no-repeat"||!Op(n)?i:n.source.width,'" height="').concat(s!=="repeat-x"&&s!=="no-repeat"||!Op(n)?o:n.source.height,'" fill="url(#SVGID_').concat(n.id,`)"></rect>
`))}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',n,'"',`></rect>
`)}loadFromJSON(e,t){let{signal:n}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return Promise.reject(new Fr("`json` is undefined"));const s=typeof e=="string"?JSON.parse(e):e,{objects:i=[],backgroundImage:o,background:a,overlayImage:l,overlay:c,clipPath:u}=s,h=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([Ao(i,{reviver:t,signal:n}),Ol({backgroundImage:o,backgroundColor:a,overlayImage:l,overlayColor:c,clipPath:u},{signal:n})]).then(d=>{let[f,g]=d;return this.clear(),this.add(...f),this.set(s),this.set(g),this.renderOnAddRemove=h,this})}clone(e){const t=this.toObject(e);return this.cloneWithoutData().loadFromJSON(t)}cloneWithoutData(){const e=mr(this);return new this.constructor(e)}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:n=1,multiplier:s=1,enableRetinaScaling:i=!1}=e,o=s*(i?this.getRetinaScaling():1);return Of(this.toCanvasElement(o,e),t,n)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:n=1,multiplier:s=1,enableRetinaScaling:i=!1}=e,o=s*(i?this.getRetinaScaling():1);return Ef(this.toCanvasElement(o,e),t,n)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:t,height:n,left:s,top:i,filter:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=(t||this.width)*e,l=(n||this.height)*e,c=this.getZoom(),u=this.width,h=this.height,d=this.skipControlsDrawing,f=c*e,g=this.viewportTransform,p=[f,0,0,f,(g[4]-(s||0))*e,(g[5]-(i||0))*e],m=this.enableRetinaScaling,v=mr({width:a,height:l}),_=o?this._objects.filter(x=>o(x)):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=p,this.width=a,this.height=l,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(v.getContext("2d"),_),this.viewportTransform=g,this.width=u,this.height=h,this.calcViewportBoundaries(),this.enableRetinaScaling=m,this.skipControlsDrawing=d,v}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),jc.cancelByCanvas(this),this.disposed=!0,new Promise((e,t)=>{const n=()=>{this.destroy(),e(!0)};n.kill=t,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?e(!1):this.nextRenderHandle?this.__cleanupTask=n:n()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(e=>e.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}F(El,"ownDefaults",mT);const vT=["touchstart","touchmove","touchend"],my=r=>{const e=dy(r.target),t=function(n){const s=n.changedTouches;return s&&s[0]?s[0]:n}(r);return new j(t.clientX+e.left,t.clientY+e.top)},zc=r=>vT.includes(r.type)||r.pointerType==="touch",gd=r=>{r.preventDefault(),r.stopPropagation()},Ir=r=>{let e=0,t=0,n=0,s=0;for(let i=0,o=r.length;i<o;i++){const{x:a,y:l}=r[i];(a>n||!i)&&(n=a),(a<e||!i)&&(e=a),(l>s||!i)&&(s=l),(l<t||!i)&&(t=l)}return{left:e,top:t,width:n-e,height:s-t}},yT=["translateX","translateY","scaleX","scaleY"],vy=(r,e)=>Fo(r,pt(e,r.calcOwnMatrix())),Fo=(r,e)=>{const t=Po(e),{translateX:n,translateY:s,scaleX:i,scaleY:o}=t,a=lt(t,yT),l=new j(n,s);r.flipX=!1,r.flipY=!1,Object.assign(r,a),r.set({scaleX:i,scaleY:o}),r.setPositionByOrigin(l,Fe,Fe)},yy=r=>{r.scaleX=1,r.scaleY=1,r.skewX=0,r.skewY=0,r.flipX=!1,r.flipY=!1,r.rotate(0)},Ff=r=>({scaleX:r.scaleX,scaleY:r.scaleY,skewX:r.skewX,skewY:r.skewY,angle:r.angle,left:r.left,flipX:r.flipX,flipY:r.flipY,top:r.top}),Fu=(r,e,t)=>{const n=r/2,s=e/2,i=[new j(-n,-s),new j(n,-s),new j(-n,s),new j(n,s)].map(a=>a.transform(t)),o=Ir(i);return new j(o.width,o.height)},Ml=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:mn;return pt(Ln(arguments.length>1&&arguments[1]!==void 0?arguments[1]:mn),r)},as=function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:mn,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:mn;return r.transform(Ml(e,t))},by=function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:mn,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:mn;return r.transform(Ml(e,t),!0)},pd=(r,e,t)=>{const n=Ml(e,t);return Fo(r,pt(n,r.calcOwnMatrix())),n},kf=(r,e)=>{var t;const{transform:{target:n}}=e;(t=n.canvas)===null||t===void 0||t.fire("object:".concat(r),A(A({},e),{},{target:n})),n.fire(r,e)},bT={left:-.5,top:-.5,center:0,bottom:.5,right:.5},Tt=r=>typeof r=="string"?bT[r]:r-.5,Hc="not-allowed";function _y(r){return Tt(r.originX)===Tt(Fe)&&Tt(r.originY)===Tt(Fe)}function Mp(r){return .5-Tt(r)}const lr=(r,e)=>r[e],Rf=(r,e,t,n)=>({e:r,transform:e,pointer:new j(t,n)});function xy(r,e){const t=r.getTotalAngle()+Vs(Math.atan2(e.y,e.x))+360;return Math.round(t%360/45)}function ku(r,e,t,n,s){var i;let{target:o,corner:a}=r;const l=o.controls[a],c=((i=o.canvas)===null||i===void 0?void 0:i.getZoom())||1,u=o.padding/c,h=function(d,f,g,p){const m=d.getRelativeCenterPoint(),v=g!==void 0&&p!==void 0?d.translateToGivenOrigin(m,Fe,Fe,g,p):new j(d.left,d.top);return(d.angle?f.rotate(-gt(d.angle),m):f).subtract(v)}(o,new j(n,s),e,t);return h.x>=u&&(h.x-=u),h.x<=-u&&(h.x+=u),h.y>=u&&(h.y-=u),h.y<=u&&(h.y+=u),h.x-=l.offsetX,h.y-=l.offsetY,h}const Cy=(r,e,t,n)=>{const{target:s,offsetX:i,offsetY:o}=e,a=t-i,l=n-o,c=!lr(s,"lockMovementX")&&s.left!==a,u=!lr(s,"lockMovementY")&&s.top!==l;return c&&s.set(Xe,a),u&&s.set(Cn,l),(c||u)&&kf(Q0,Rf(r,e,t,n)),c||u};class wy{getSvgStyles(e){const t=this.fillRule?this.fillRule:"nonzero",n=this.strokeWidth?this.strokeWidth:"0",s=this.strokeDashArray?this.strokeDashArray.join(" "):wn,i=this.strokeDashOffset?this.strokeDashOffset:"0",o=this.strokeLineCap?this.strokeLineCap:"butt",a=this.strokeLineJoin?this.strokeLineJoin:"miter",l=this.strokeMiterLimit?this.strokeMiterLimit:"4",c=this.opacity!==void 0?this.opacity:"1",u=this.visible?"":" visibility: hidden;",h=e?"":this.getSvgFilter(),d=al(Ft,this.fill);return[al(Sn,this.stroke),"stroke-width: ",n,"; ","stroke-dasharray: ",s,"; ","stroke-linecap: ",o,"; ","stroke-dashoffset: ",i,"; ","stroke-linejoin: ",a,"; ","stroke-miterlimit: ",l,"; ",d,"fill-rule: ",t,"; ","opacity: ",c,";",h,u].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const n=e?this.calcTransformMatrix():this.calcOwnMatrix(),s='transform="'.concat(ol(n));return"".concat(s).concat(t,'" ')}_toSVG(e){return[""]}toSVG(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})}toClipPathSVG(e){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})}_createBaseClipPathSVGMarkup(e){let{reviver:t,additionalTransform:n=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=[this.getSvgTransform(!0,n),this.getSvgCommons()].join(""),i=e.indexOf("COMMON_PARTS");return e[i]=s,t?t(e.join("")):e.join("")}_createBaseSVGMarkup(e){let{noStyle:t,reviver:n,withShadow:s,additionalTransform:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=t?"":'style="'.concat(this.getSvgStyles(),'" '),a=s?'style="'.concat(this.getSvgFilter(),'" '):"",l=this.clipPath,c=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",u=l&&l.absolutePositioned,h=this.stroke,d=this.fill,f=this.shadow,g=[],p=e.indexOf("COMMON_PARTS");let m;l&&(l.clipPathId="CLIPPATH_".concat(Ns()),m='<clipPath id="'.concat(l.clipPathId,`" >
`).concat(l.toClipPathSVG(n),`</clipPath>
`)),u&&g.push("<g ",a,this.getSvgCommons(),` >
`),g.push("<g ",this.getSvgTransform(!1),u?"":a+this.getSvgCommons(),` >
`);const v=[o,c,t?"":this.addPaintOrder()," ",i?'transform="'.concat(i,'" '):""].join("");return e[p]=v,Zn(d)&&g.push(d.toSVG(this)),Zn(h)&&g.push(h.toSVG(this)),f&&g.push(f.toSVG(this)),l&&g.push(m),g.push(e.join("")),g.push(`</g>
`),u&&g.push(`</g>
`),n?n(g.join("")):g.join("")}addPaintOrder(){return this.paintFirst!==Ft?' paint-order="'.concat(this.paintFirst,'" '):""}}function Ru(r){return new RegExp("^("+r.join("|")+")\\b","i")}var Pp;const Li=String.raw(Pp||(Pp=Ks(["(?:[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?)"],["(?:[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?)"]))),_T=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+Li+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+Li+"))?\\s+(.*)"),xT={cx:Xe,x:Xe,r:"radius",cy:Cn,y:Cn,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},yh="font-size",bh="clip-path";Ru(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]);Ru(["symbol","image","marker","pattern","view","svg"]);const Ap=Ru(["symbol","g","a","svg","clipPath","defs"]),CT=new j(1,0),Sy=new j,Df=(r,e)=>r.rotate(e),$c=(r,e)=>new j(e).subtract(r),Nc=r=>r.distanceFrom(Sy),Vc=(r,e)=>Math.atan2(vo(r,e),Oy(r,e)),Ty=r=>Vc(CT,r),Du=r=>r.eq(Sy)?r:r.scalarDivide(Nc(r)),If=function(r){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return Du(new j(-r.y,r.x).scalarMultiply(e?1:-1))},vo=(r,e)=>r.x*e.y-r.y*e.x,Oy=(r,e)=>r.x*e.x+r.y*e.y,md=(r,e,t)=>{if(r.eq(e)||r.eq(t))return!0;const n=vo(e,t),s=vo(e,r),i=vo(t,r);return n>=0?s>=0&&i<=0:!(s<=0&&i>=0)},Fp="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",kp=new RegExp("(?:\\s|^)"+Fp+Fp+"("+Li+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class Lr{constructor(e){const t=typeof e=="string"?Lr.parseShadow(e):e;Object.assign(this,Lr.ownDefaults,t),this.id=Ns()}static parseShadow(e){const t=e.trim(),[,n=0,s=0,i=0]=(kp.exec(t)||[]).map(o=>parseFloat(o)||0);return{color:(t.replace(kp,"")||"rgb(0,0,0)").trim(),offsetX:n,offsetY:s,blur:i}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(e){const t=Df(new j(this.offsetX,this.offsetY),gt(-e.angle)),n=new Ge(this.color);let s=40,i=40;return e.width&&e.height&&(s=100*ot((Math.abs(t.x)+this.blur)/e.width,He.NUM_FRACTION_DIGITS)+20,i=100*ot((Math.abs(t.y)+this.blur)/e.height,He.NUM_FRACTION_DIGITS)+20),e.flipX&&(t.x*=-1),e.flipY&&(t.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(i,'%" height="').concat(100+2*i,'%" x="-').concat(s,'%" width="').concat(100+2*s,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(ot(this.blur?this.blur/2:0,He.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(ot(t.x,He.NUM_FRACTION_DIGITS),'" dy="').concat(ot(t.y,He.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(n.toRgb(),'" flood-opacity="').concat(n.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const e={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},t=Lr.ownDefaults;return this.includeDefaultValues?e:Af(e,(n,s)=>n!==t[s])}static async fromObject(e){return new this(e)}}F(Lr,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),F(Lr,"type","shadow"),oe.setClass(Lr,"shadow");const Bi=(r,e,t)=>Math.max(r,Math.min(e,t)),wT=[Cn,Xe,vn,Nn,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",No,Vo],ds=[Ft,Sn,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],ST={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:Xe,originY:Cn,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:Ft,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},_h=(r,e,t,n)=>(r<Math.abs(e)?(r=e,n=t/4):n=e===0&&r===0?t/ls*Math.asin(1):t/ls*Math.asin(e/r),{a:r,c:e,p:t,s:n}),Rp=(r,e,t,n,s)=>r*Math.pow(2,10*(n-=1))*Math.sin((n*s-e)*ls/t),Ey=(r,e,t,n)=>-t*Math.cos(r/n*$s)+t+e,vd=(r,e,t,n)=>(r/=n)<1/2.75?t*(7.5625*r*r)+e:r<2/2.75?t*(7.5625*(r-=1.5/2.75)*r+.75)+e:r<2.5/2.75?t*(7.5625*(r-=2.25/2.75)*r+.9375)+e:t*(7.5625*(r-=2.625/2.75)*r+.984375)+e,Dp=(r,e,t,n)=>t-vd(n-r,0,t,n)+e;var TT=Object.freeze({__proto__:null,defaultEasing:Ey,easeInBack:function(r,e,t,n){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return t*(r/=n)*r*((s+1)*r-s)+e},easeInBounce:Dp,easeInCirc:(r,e,t,n)=>-t*(Math.sqrt(1-(r/=n)*r)-1)+e,easeInCubic:(r,e,t,n)=>t*(r/n)**3+e,easeInElastic:(r,e,t,n)=>{const s=t;let i=0;if(r===0)return e;if((r/=n)===1)return e+t;i||(i=.3*n);const{a:o,s:a,p:l}=_h(s,t,i,1.70158);return-Rp(o,a,l,r,n)+e},easeInExpo:(r,e,t,n)=>r===0?e:t*2**(10*(r/n-1))+e,easeInOutBack:function(r,e,t,n){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return(r/=n/2)<1?t/2*(r*r*((1+(s*=1.525))*r-s))+e:t/2*((r-=2)*r*((1+(s*=1.525))*r+s)+2)+e},easeInOutBounce:(r,e,t,n)=>r<n/2?.5*Dp(2*r,0,t,n)+e:.5*vd(2*r-n,0,t,n)+.5*t+e,easeInOutCirc:(r,e,t,n)=>(r/=n/2)<1?-t/2*(Math.sqrt(1-r**2)-1)+e:t/2*(Math.sqrt(1-(r-=2)*r)+1)+e,easeInOutCubic:(r,e,t,n)=>(r/=n/2)<1?t/2*r**3+e:t/2*((r-2)**3+2)+e,easeInOutElastic:(r,e,t,n)=>{const s=t;let i=0;if(r===0)return e;if((r/=n/2)===2)return e+t;i||(i=n*(.3*1.5));const{a:o,s:a,p:l,c}=_h(s,t,i,1.70158);return r<1?-.5*Rp(o,a,l,r,n)+e:o*Math.pow(2,-10*(r-=1))*Math.sin((r*n-a)*ls/l)*.5+c+e},easeInOutExpo:(r,e,t,n)=>r===0?e:r===n?e+t:(r/=n/2)<1?t/2*2**(10*(r-1))+e:t/2*-(2**(-10*--r)+2)+e,easeInOutQuad:(r,e,t,n)=>(r/=n/2)<1?t/2*r**2+e:-t/2*(--r*(r-2)-1)+e,easeInOutQuart:(r,e,t,n)=>(r/=n/2)<1?t/2*r**4+e:-t/2*((r-=2)*r**3-2)+e,easeInOutQuint:(r,e,t,n)=>(r/=n/2)<1?t/2*r**5+e:t/2*((r-2)**5+2)+e,easeInOutSine:(r,e,t,n)=>-t/2*(Math.cos(Math.PI*r/n)-1)+e,easeInQuad:(r,e,t,n)=>t*(r/=n)*r+e,easeInQuart:(r,e,t,n)=>t*(r/=n)*r**3+e,easeInQuint:(r,e,t,n)=>t*(r/n)**5+e,easeInSine:(r,e,t,n)=>-t*Math.cos(r/n*$s)+t+e,easeOutBack:function(r,e,t,n){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return t*((r=r/n-1)*r*((s+1)*r+s)+1)+e},easeOutBounce:vd,easeOutCirc:(r,e,t,n)=>t*Math.sqrt(1-(r=r/n-1)*r)+e,easeOutCubic:(r,e,t,n)=>t*((r/n-1)**3+1)+e,easeOutElastic:(r,e,t,n)=>{const s=t;let i=0;if(r===0)return e;if((r/=n)===1)return e+t;i||(i=.3*n);const{a:o,s:a,p:l,c}=_h(s,t,i,1.70158);return o*2**(-10*r)*Math.sin((r*n-a)*ls/l)+c+e},easeOutExpo:(r,e,t,n)=>r===n?e+t:t*-(2**(-10*r/n)+1)+e,easeOutQuad:(r,e,t,n)=>-t*(r/=n)*(r-2)+e,easeOutQuart:(r,e,t,n)=>-t*((r=r/n-1)*r**3-1)+e,easeOutQuint:(r,e,t,n)=>t*((r/n-1)**5+1)+e,easeOutSine:(r,e,t,n)=>t*Math.sin(r/n*$s)+e});const OT=()=>!1;class Lf{constructor(e){let{startValue:t,byValue:n,duration:s=500,delay:i=0,easing:o=Ey,onStart:a=wi,onChange:l=wi,onComplete:c=wi,abort:u=OT,target:h}=e;F(this,"_state","pending"),F(this,"durationProgress",0),F(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=s,this.delay=i,this.easing=o,this._onStart=a,this._onChange=l,this._onComplete=c,this._abort=u,this.target=h,this.startValue=t,this.byValue=n,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const e=t=>{this._state==="pending"&&(this.startTime=t||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>ja(e),this.delay):ja(e)}tick(e){const t=(e||+new Date)-this.startTime,n=Math.min(t,this.duration);this.durationProgress=n/this.duration;const{value:s,valueProgress:i}=this.calculate(n);this.value=Object.freeze(s),this.valueProgress=i,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):t>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),ja(this.tick)))}register(){jc.push(this)}unregister(){jc.remove(this)}abort(){this._state="aborted",this.unregister()}}const ET=["startValue","endValue"];class MT extends Lf{constructor(e){let{startValue:t=0,endValue:n=100}=e;super(A(A({},lt(e,ET)),{},{startValue:t,byValue:n-t}))}calculate(e){const t=this.easing(e,this.startValue,this.byValue,this.duration);return{value:t,valueProgress:Math.abs((t-this.startValue)/this.byValue)}}}const PT=["startValue","endValue"];class AT extends Lf{constructor(e){let{startValue:t=[0],endValue:n=[100]}=e;super(A(A({},lt(e,PT)),{},{startValue:t,byValue:n.map((s,i)=>s-t[i])}))}calculate(e){const t=this.startValue.map((n,s)=>this.easing(e,n,this.byValue[s],this.duration,s));return{value:t,valueProgress:Math.abs((t[0]-this.startValue[0])/this.byValue[0])}}}const FT=["startValue","endValue","easing","onChange","onComplete","abort"],kT=(r,e,t,n)=>e+t*(1-Math.cos(r/n*$s)),xh=r=>r&&((e,t,n)=>r(new Ge(e).toRgba(),t,n));class RT extends Lf{constructor(e){let{startValue:t,endValue:n,easing:s=kT,onChange:i,onComplete:o,abort:a}=e,l=lt(e,FT);const c=new Ge(t).getSource(),u=new Ge(n).getSource();super(A(A({},l),{},{startValue:c,byValue:u.map((h,d)=>h-c[d]),easing:s,onChange:xh(i),onComplete:xh(o),abort:xh(a)}))}calculate(e){const[t,n,s,i]=this.startValue.map((a,l)=>this.easing(e,a,this.byValue[l],this.duration,l)),o=[...[t,n,s].map(Math.round),Bi(0,i,1)];return{value:o,valueProgress:o.map((a,l)=>this.byValue[l]!==0?Math.abs((a-this.startValue[l])/this.byValue[l]):0).find(a=>a!==0)||0}}}function Bf(r){const e=(t=>Array.isArray(t.startValue)||Array.isArray(t.endValue))(r)?new AT(r):new MT(r);return e.start(),e}function My(r){const e=new RT(r);return e.start(),e}class ct{constructor(e){this.status=e,this.points=[]}includes(e){return this.points.some(t=>t.eq(e))}append(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.points=this.points.concat(t.filter(s=>!this.includes(s))),this}static isPointContained(e,t,n){let s=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(t.eq(n))return e.eq(t);if(t.x===n.x)return e.x===t.x&&(s||e.y>=Math.min(t.y,n.y)&&e.y<=Math.max(t.y,n.y));if(t.y===n.y)return e.y===t.y&&(s||e.x>=Math.min(t.x,n.x)&&e.x<=Math.max(t.x,n.x));{const i=$c(t,n),o=$c(t,e).divide(i);return s?Math.abs(o.x)===Math.abs(o.y):o.x===o.y&&o.x>=0&&o.x<=1}}static isPointInPolygon(e,t){const n=new j(e).setX(Math.min(e.x-1,...t.map(i=>i.x)));let s=0;for(let i=0;i<t.length;i++){const o=this.intersectSegmentSegment(t[i],t[(i+1)%t.length],e,n);if(o.includes(e))return!0;s+=+(o.status==="Intersection")}return s%2==1}static intersectLineLine(e,t,n,s){let i=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],o=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const a=t.x-e.x,l=t.y-e.y,c=s.x-n.x,u=s.y-n.y,h=e.x-n.x,d=e.y-n.y,f=c*d-u*h,g=a*d-l*h,p=u*a-c*l;if(p!==0){const m=f/p,v=g/p;return(i||0<=m&&m<=1)&&(o||0<=v&&v<=1)?new ct("Intersection").append(new j(e.x+m*a,e.y+m*l)):new ct}if(f===0||g===0){const m=i||o||ct.isPointContained(e,n,s)||ct.isPointContained(t,n,s)||ct.isPointContained(n,e,t)||ct.isPointContained(s,e,t);return new ct(m?"Coincident":void 0)}return new ct("Parallel")}static intersectSegmentLine(e,t,n,s){return ct.intersectLineLine(e,t,n,s,!1,!0)}static intersectSegmentSegment(e,t,n,s){return ct.intersectLineLine(e,t,n,s,!1,!1)}static intersectLinePolygon(e,t,n){let s=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const i=new ct,o=n.length;for(let a,l,c,u=0;u<o;u++){if(a=n[u],l=n[(u+1)%o],c=ct.intersectLineLine(e,t,a,l,s,!1),c.status==="Coincident")return c;i.append(...c.points)}return i.points.length>0&&(i.status="Intersection"),i}static intersectSegmentPolygon(e,t,n){return ct.intersectLinePolygon(e,t,n,!1)}static intersectPolygonPolygon(e,t){const n=new ct,s=e.length,i=[];for(let o=0;o<s;o++){const a=e[o],l=e[(o+1)%s],c=ct.intersectSegmentPolygon(a,l,t);c.status==="Coincident"?(i.push(c),n.append(a,l)):n.append(...c.points)}return i.length>0&&i.length===e.length?new ct("Coincident"):(n.points.length>0&&(n.status="Intersection"),n)}static intersectPolygonRectangle(e,t,n){const s=t.min(n),i=t.max(n),o=new j(i.x,s.y),a=new j(s.x,i.y);return ct.intersectPolygonPolygon(e,[s,o,i,a])}}class DT extends sy{getX(){return this.getXY().x}setX(e){this.setXY(this.getXY().setX(e))}getY(){return this.getXY().y}setY(e){this.setXY(this.getXY().setY(e))}getRelativeX(){return this.left}setRelativeX(e){this.left=e}getRelativeY(){return this.top}setRelativeY(e){this.top=e}getXY(){const e=this.getRelativeXY();return this.group?Jt(e,this.group.calcTransformMatrix()):e}setXY(e,t,n){this.group&&(e=Jt(e,Ln(this.group.calcTransformMatrix()))),this.setRelativeXY(e,t,n)}getRelativeXY(){return new j(this.left,this.top)}setRelativeXY(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(e,t,n)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:e,tr:t,br:n,bl:s}=this.aCoords||(this.aCoords=this.calcACoords()),i=[e,t,n,s];if(this.group){const o=this.group.calcTransformMatrix();return i.map(a=>Jt(a,o))}return i}intersectsWithRect(e,t){return ct.intersectPolygonRectangle(this.getCoords(),e,t).status==="Intersection"}intersectsWithObject(e){const t=ct.intersectPolygonPolygon(this.getCoords(),e.getCoords());return t.status==="Intersection"||t.status==="Coincident"||e.isContainedWithinObject(this)||this.isContainedWithinObject(e)}isContainedWithinObject(e){return this.getCoords().every(t=>e.containsPoint(t))}isContainedWithinRect(e,t){const{left:n,top:s,width:i,height:o}=this.getBoundingRect();return n>=e.x&&n+i<=t.x&&s>=e.y&&s+o<=t.y}isOverlapping(e){return this.intersectsWithObject(e)||this.isContainedWithinObject(e)||e.isContainedWithinObject(this)}containsPoint(e){return ct.isPointInPolygon(e,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return!!this.getCoords().some(n=>n.x<=t.x&&n.x>=e.x&&n.y<=t.y&&n.y>=e.y)||!!this.intersectsWithRect(e,t)||this.containsPoint(e.midPointFrom(t))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return this.intersectsWithRect(e,t)?!0:this.getCoords().every(n=>(n.x>=t.x||n.x<=e.x)&&(n.y>=t.y||n.y<=e.y))&&this.containsPoint(e.midPointFrom(t))}getBoundingRect(){return Ir(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(e){this._set(vn,e),this._set(Nn,e),this.setCoords()}scaleToWidth(e){const t=this.getBoundingRect().width/this.getScaledWidth();return this.scale(e/this.width/t)}scaleToHeight(e){const t=this.getBoundingRect().height/this.getScaledHeight();return this.scale(e/this.height/t)}getCanvasRetinaScaling(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.getRetinaScaling())||1}getTotalAngle(){return this.group?Vs(ly(this.calcTransformMatrix())):this.angle}getViewportTransform(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.viewportTransform)||mn.concat()}calcACoords(){const e=Yo({angle:this.angle}),{x:t,y:n}=this.getRelativeCenterPoint(),s=Wo(t,n),i=pt(s,e),o=this._getTransformedDimensions(),a=o.x/2,l=o.y/2;return{tl:Jt({x:-a,y:-l},i),tr:Jt({x:a,y:-l},i),bl:Jt({x:-a,y:l},i),br:Jt({x:a,y:l},i)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=[];return!e&&this.group&&(t=this.group.transformMatrixKey(e)),t.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,Tt(this.originX),Tt(this.originY)),t}calcTransformMatrix(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=this.calcOwnMatrix();if(e||!this.group)return t;const n=this.transformMatrixKey(e),s=this.matrixCache;return s&&s.key.every((i,o)=>i===n[o])?s.value:(this.group&&(t=pt(this.group.calcTransformMatrix(!1),t)),this.matrixCache={key:n,value:t},t)}calcOwnMatrix(){const e=this.transformMatrixKey(!0),t=this.ownMatrixCache;if(t&&t.key===e)return t.value;const n=this.getRelativeCenterPoint(),s={angle:this.angle,translateX:n.x,translateY:n.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},i=uy(s);return this.ownMatrixCache={key:e,value:i},i}_getNonTransformedDimensions(){return new j(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(e){return this._getTransformedDimensions(e).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=A({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},e),n=t.strokeWidth;let s=n,i=0;this.strokeUniform&&(s=0,i=n);const o=t.width+s,a=t.height+s;let l;return l=t.skewX===0&&t.skewY===0?new j(o*t.scaleX,a*t.scaleY):Fu(o,a,Tl(t)),l.scalarAdd(i)}translateToGivenOrigin(e,t,n,s,i){let o=e.x,a=e.y;const l=Tt(s)-Tt(t),c=Tt(i)-Tt(n);if(l||c){const u=this._getTransformedDimensions();o+=l*u.x,a+=c*u.y}return new j(o,a)}translateToCenterPoint(e,t,n){if(t===Fe&&n===Fe)return e;const s=this.translateToGivenOrigin(e,t,n,Fe,Fe);return this.angle?s.rotate(gt(this.angle),e):s}translateToOriginPoint(e,t,n){const s=this.translateToGivenOrigin(e,Fe,Fe,t,n);return this.angle?s.rotate(gt(this.angle),e):s}getCenterPoint(){const e=this.getRelativeCenterPoint();return this.group?Jt(e,this.group.calcTransformMatrix()):e}getRelativeCenterPoint(){return this.translateToCenterPoint(new j(this.left,this.top),this.originX,this.originY)}getPointByOrigin(e,t){return this.translateToOriginPoint(this.getRelativeCenterPoint(),e,t)}setPositionByOrigin(e,t,n){const s=this.translateToCenterPoint(e,t,n),i=this.translateToOriginPoint(s,this.originX,this.originY);this.set({left:i.x,top:i.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),Xe,Cn)}}const IT=["type"],LT=["extraParam"];let Kr=class fc extends DT{static getDefaults(){return fc.ownDefaults}get type(){const e=this.constructor.type;return e==="FabricObject"?"object":e.toLowerCase()}set type(e){Hs("warn","Setting type has no effect",e)}constructor(e){super(),F(this,"_cacheContext",null),Object.assign(this,fc.ownDefaults),this.setOptions(e)}_createCacheCanvas(){this._cacheCanvas=nr(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(e){const t=e.width,n=e.height,s=He.maxCacheSideLimit,i=He.minCacheSideLimit;if(t<=s&&n<=s&&t*n<=He.perfLimitSizeTotal)return t<i&&(e.width=i),n<i&&(e.height=i),e;const o=t/n,[a,l]=Ba.limitDimsByArea(o),c=Bi(i,a,s),u=Bi(i,l,s);return t>c&&(e.zoomX/=t/c,e.width=c,e.capped=!0),n>u&&(e.zoomY/=n/u,e.height=u,e.capped=!0),e}_getCacheCanvasDimensions(){const e=this.getTotalObjectScaling(),t=this._getTransformedDimensions({skewX:0,skewY:0}),n=t.x*e.x/this.scaleX,s=t.y*e.y/this.scaleY;return{width:Math.ceil(n+2),height:Math.ceil(s+2),zoomX:e.x,zoomY:e.y,x:n,y:s}}_updateCacheCanvas(){const e=this._cacheCanvas,t=this._cacheContext,{width:n,height:s,zoomX:i,zoomY:o,x:a,y:l}=this._limitCacheSize(this._getCacheCanvasDimensions()),c=n!==e.width||s!==e.height,u=this.zoomX!==i||this.zoomY!==o;if(!e||!t)return!1;if(c||u){n!==e.width||s!==e.height?(e.width=n,e.height=s):(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height));const h=a/2,d=l/2;return this.cacheTranslationX=Math.round(e.width/2-h)+h,this.cacheTranslationY=Math.round(e.height/2-d)+d,t.translate(this.cacheTranslationX,this.cacheTranslationY),t.scale(i,o),this.zoomX=i,this.zoomY=o,!0}return!1}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(e)}transform(e){const t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,n=this.calcTransformMatrix(!t);e.transform(n[0],n[1],n[2],n[3],n[4],n[5])}getObjectScaling(){if(!this.group)return new j(Math.abs(this.scaleX),Math.abs(this.scaleY));const e=Po(this.calcTransformMatrix());return new j(Math.abs(e.scaleX),Math.abs(e.scaleY))}getTotalObjectScaling(){const e=this.getObjectScaling();if(this.canvas){const t=this.canvas.getZoom(),n=this.getCanvasRetinaScaling();return e.scalarMultiply(t*n)}return e}getObjectOpacity(){let e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e}_constrainScale(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:e===0?1e-4:e}_set(e,t){e!==vn&&e!==Nn||(t=this._constrainScale(t)),e===vn&&t<0?(this.flipX=!this.flipX,t*=-1):e==="scaleY"&&t<0?(this.flipY=!this.flipY,t*=-1):e!=="shadow"||!t||t instanceof Lr||(t=new Lr(t));const n=this[e]!==t;return this[e]=t,n&&this.constructor.cacheProperties.includes(e)&&(this.dirty=!0),this.parent&&(this.dirty||n&&this.constructor.stateProperties.includes(e))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.drawObject(e,!1,{}),this.dirty=!1),e.restore())}drawSelectionBackground(e){}renderCache(e){if(e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:t,zoomY:n,cacheTranslationX:s,cacheTranslationY:i}=this,{width:o,height:a}=this._cacheCanvas;this.drawObject(this._cacheContext,e.forClipping,{zoomX:t,zoomY:n,cacheTranslationX:s,cacheTranslationY:i,width:o,height:a,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===Sn&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(e,t,n){e.save(),t.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",e.setTransform(1,0,0,1,0,0),e.drawImage(n,0,0),e.restore()}drawObject(e,t,n){const s=this.fill,i=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath,n),this.fill=s,this.stroke=i}createClipPathLayer(e,t){const n=mr(t),s=n.getContext("2d");if(s.translate(t.cacheTranslationX,t.cacheTranslationY),s.scale(t.zoomX,t.zoomY),e._cacheCanvas=n,t.parentClipPaths.forEach(i=>{i.transform(s)}),t.parentClipPaths.push(e),e.absolutePositioned){const i=Ln(this.calcTransformMatrix());s.transform(i[0],i[1],i[2],i[3],i[4],i[5])}return e.transform(s),e.drawObject(s,!0,t),n}_drawClipPath(e,t,n){if(!t)return;t._transformDone=!0;const s=this.createClipPathLayer(t,n);this.drawClipPathOnCache(e,t,s)}drawCacheOnCanvas(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const t=this._cacheCanvas,n=this._cacheContext;return!(!t||!n||e||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(t&&n&&!e&&(n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,t.width,t.height),n.restore()),!0)}_renderBackground(e){if(!this.backgroundColor)return;const t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}_setOpacity(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity}_setStrokeStyles(e,t){const n=t.stroke;n&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,Zn(n)?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?this._applyPatternForTransformedGradient(e,n):(e.strokeStyle=n.toLive(e),this._applyPatternGradientTransform(e,n)):e.strokeStyle=t.stroke)}_setFillStyles(e,t){let{fill:n}=t;n&&(Zn(n)?(e.fillStyle=n.toLive(e),this._applyPatternGradientTransform(e,n)):e.fillStyle=n)}_setClippingProperties(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"}_setLineDash(e,t){t&&t.length!==0&&e.setLineDash(t)}_setShadow(e){if(!this.shadow)return;const t=this.shadow,n=this.canvas,s=this.getCanvasRetinaScaling(),[i,,,o]=(n==null?void 0:n.viewportTransform)||mn,a=i*s,l=o*s,c=t.nonScaling?new j(1,1):this.getObjectScaling();e.shadowColor=t.color,e.shadowBlur=t.blur*He.browserShadowBlurConstant*(a+l)*(c.x+c.y)/4,e.shadowOffsetX=t.offsetX*a*c.x,e.shadowOffsetY=t.offsetY*l*c.y}_removeShadow(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)}_applyPatternGradientTransform(e,t){if(!Zn(t))return{offsetX:0,offsetY:0};const n=t.gradientTransform||t.patternTransform,s=-this.width/2+t.offsetX||0,i=-this.height/2+t.offsetY||0;return t.gradientUnits==="percentage"?e.transform(this.width,0,0,this.height,s,i):e.transform(1,0,0,1,s,i),n&&e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),{offsetX:s,offsetY:i}}_renderPaintInOrder(e){this.paintFirst===Sn?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))}_render(e){}_renderFill(e){this.fill&&(e.save(),this._setFillStyles(e,this),this.fillRule==="evenodd"?e.fill("evenodd"):e.fill(),e.restore())}_renderStroke(e){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform){const t=this.getObjectScaling();e.scale(1/t.x,1/t.y)}this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}}_applyPatternForTransformedGradient(e,t){var n;const s=this._limitCacheSize(this._getCacheCanvasDimensions()),i=this.getCanvasRetinaScaling(),o=s.x/this.scaleX/i,a=s.y/this.scaleY/i,l=mr({width:Math.ceil(o),height:Math.ceil(a)}),c=l.getContext("2d");c&&(c.beginPath(),c.moveTo(0,0),c.lineTo(o,0),c.lineTo(o,a),c.lineTo(0,a),c.closePath(),c.translate(o/2,a/2),c.scale(s.zoomX/this.scaleX/i,s.zoomY/this.scaleY/i),this._applyPatternGradientTransform(c,t),c.fillStyle=t.toLive(e),c.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(i*this.scaleX/s.zoomX,i*this.scaleY/s.zoomY),e.strokeStyle=(n=c.createPattern(l,"no-repeat"))!==null&&n!==void 0?n:"")}_findCenterFromElement(){return new j(this.left+this.width/2,this.top+this.height/2)}clone(e){const t=this.toObject(e);return this.constructor.fromObject(t)}cloneAsImage(e){const t=this.toCanvasElement(e);return new(oe.getClass("image"))(t)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=Ff(this),n=this.group,s=this.shadow,i=Math.abs,o=e.enableRetinaScaling?J0():1,a=(e.multiplier||1)*o,l=e.canvasProvider||(_=>new El(_,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,e.withoutTransform&&yy(this),e.withoutShadow&&(this.shadow=null),e.viewportTransform&&pd(this,this.getViewportTransform()),this.setCoords();const c=nr(),u=this.getBoundingRect(),h=this.shadow,d=new j;if(h){const _=h.blur,x=h.nonScaling?new j(1,1):this.getObjectScaling();d.x=2*Math.round(i(h.offsetX)+_)*i(x.x),d.y=2*Math.round(i(h.offsetY)+_)*i(x.y)}const f=u.width+d.x,g=u.height+d.y;c.width=Math.ceil(f),c.height=Math.ceil(g);const p=l(c);e.format==="jpeg"&&(p.backgroundColor="#fff"),this.setPositionByOrigin(new j(p.width/2,p.height/2),Fe,Fe);const m=this.canvas;p._objects=[this],this.set("canvas",p),this.setCoords();const v=p.toCanvasElement(a||1,e);return this.set("canvas",m),this.shadow=s,n&&(this.group=n),this.set(t),this.setCoords(),p._objects=[],p.destroy(),v}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Of(this.toCanvasElement(e),e.format||"png",e.quality||1)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ef(this.toCanvasElement(e),e.format||"png",e.quality||1)}isType(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.includes(this.constructor.type)||t.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(e){const{centeredRotation:t,originX:n,originY:s}=this;if(t){const{x:i,y:o}=this.getRelativeCenterPoint();this.originX=Fe,this.originY=Fe,this.left=i,this.top=o}if(this.set("angle",e),t){const{x:i,y:o}=this.translateToOriginPoint(this.getRelativeCenterPoint(),n,s);this.left=i,this.top=o,this.originX=n,this.originY=s}}setOnGroup(){}_setupCompositeOperation(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}dispose(){jc.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&Hr().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(e,t){return Object.entries(e).reduce((n,s)=>{let[i,o]=s;return n[i]=this._animate(i,o,t),n},{})}_animate(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=e.split("."),i=this.constructor.colorProperties.includes(s[s.length-1]),{abort:o,startValue:a,onChange:l,onComplete:c}=n,u=A(A({},n),{},{target:this,startValue:a??s.reduce((h,d)=>h[d],this),endValue:t,abort:o==null?void 0:o.bind(this),onChange:(h,d,f)=>{s.reduce((g,p,m)=>(m===s.length-1&&(g[p]=h),g[p]),this),l&&l(h,d,f)},onComplete:(h,d,f)=>{this.setCoords(),c&&c(h,d,f)}});return i?My(u):Bf(u)}isDescendantOf(e){const{parent:t,group:n}=this;return t===e||n===e||!!t&&t.isDescendantOf(e)||!!n&&n!==t&&n.isDescendantOf(e)}getAncestors(){const e=[];let t=this;do t=t.parent,t&&e.push(t);while(t);return e}findCommonAncestors(e){if(this===e)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const t=this.getAncestors(),n=e.getAncestors();if(t.length===0&&n.length>0&&this===n[n.length-1])return{fork:[],otherFork:[e,...n.slice(0,n.length-1)],common:[this]};for(let s,i=0;i<t.length;i++){if(s=t[i],s===e)return{fork:[this,...t.slice(0,i)],otherFork:[],common:t.slice(i)};for(let o=0;o<n.length;o++){if(this===n[o])return{fork:[],otherFork:[e,...n.slice(0,o)],common:[this,...t]};if(s===n[o])return{fork:[this,...t.slice(0,i)],otherFork:[e,...n.slice(0,o)],common:t.slice(i)}}}return{fork:[this,...t],otherFork:[e,...n],common:[]}}hasCommonAncestors(e){const t=this.findCommonAncestors(e);return t&&!!t.common.length}isInFrontOf(e){if(this===e)return;const t=this.findCommonAncestors(e);if(t.fork.includes(e))return!0;if(t.otherFork.includes(this))return!1;const n=t.common[0]||this.canvas;if(!n)return;const s=t.fork.pop(),i=t.otherFork.pop(),o=n._objects.indexOf(s),a=n._objects.indexOf(i);return o>-1&&o>a}toObject(){const e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(fc.customProperties,this.constructor.customProperties||[]);let t;const n=He.NUM_FRACTION_DIGITS,{clipPath:s,fill:i,stroke:o,shadow:a,strokeDashArray:l,left:c,top:u,originX:h,originY:d,width:f,height:g,strokeWidth:p,strokeLineCap:m,strokeDashOffset:v,strokeLineJoin:_,strokeUniform:x,strokeMiterLimit:y,scaleX:C,scaleY:E,angle:b,flipX:w,flipY:S,opacity:$,visible:N,backgroundColor:H,fillRule:U,paintFirst:ee,globalCompositeOperation:re,skewX:te,skewY:z}=this;s&&!s.excludeFromExport&&(t=s.toObject(e.concat("inverted","absolutePositioned")));const R=de=>ot(de,n),ue=A(A({},Ni(this,e)),{},{type:this.constructor.type,version:hd,originX:h,originY:d,left:R(c),top:R(u),width:R(f),height:R(g),fill:Tp(i)?i.toObject():i,stroke:Tp(o)?o.toObject():o,strokeWidth:R(p),strokeDashArray:l&&l.concat(),strokeLineCap:m,strokeDashOffset:v,strokeLineJoin:_,strokeUniform:x,strokeMiterLimit:R(y),scaleX:R(C),scaleY:R(E),angle:R(b),flipX:w,flipY:S,opacity:R($),shadow:a&&a.toObject(),visible:N,backgroundColor:H,fillRule:U,paintFirst:ee,globalCompositeOperation:re,skewX:R(te),skewY:R(z)},t?{clipPath:t}:null);return this.includeDefaultValues?ue:this._removeDefaultValues(ue)}toDatalessObject(e){return this.toObject(e)}_removeDefaultValues(e){const t=this.constructor.getDefaults(),n=Object.keys(t).length>0?t:Object.getPrototypeOf(this);return Af(e,(s,i)=>{if(i===Xe||i===Cn||i==="type")return!0;const o=n[i];return s!==o&&!(Array.isArray(s)&&Array.isArray(o)&&s.length===0&&o.length===0)})}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(e){let t=lt(e,IT),n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:s}=n,i=lt(n,LT);return Ol(t,i).then(o=>s?(delete o[s],new this(t[s],o)):new this(o))}static fromObject(e,t){return this._fromObject(e,t)}};F(Kr,"stateProperties",wT),F(Kr,"cacheProperties",ds),F(Kr,"ownDefaults",ST),F(Kr,"type","FabricObject"),F(Kr,"colorProperties",[Ft,Sn,"backgroundColor"]),F(Kr,"customProperties",[]),oe.setClass(Kr),oe.setClass(Kr,"object");const Zs=(r,e,t)=>(n,s,i,o)=>{const a=e(n,s,i,o);return a&&kf(r,A(A({},Rf(n,s,i,o)),t)),a};function Vi(r){return(e,t,n,s)=>{const{target:i,originX:o,originY:a}=t,l=i.getRelativeCenterPoint(),c=i.translateToOriginPoint(l,o,a),u=r(e,t,n,s);return i.setPositionByOrigin(c,t.originX,t.originY),u}}const yd=Zs(il,Vi((r,e,t,n)=>{const s=ku(e,e.originX,e.originY,t,n);if(Tt(e.originX)===Tt(Fe)||Tt(e.originX)===Tt(_t)&&s.x<0||Tt(e.originX)===Tt(Xe)&&s.x>0){const{target:i}=e,o=i.strokeWidth/(i.strokeUniform?i.scaleX:1),a=_y(e)?2:1,l=i.width,c=Math.abs(s.x*a/i.scaleX)-o;return i.set("width",Math.max(c,1)),l!==i.width}return!1}));function Py(r,e,t,n,s){n=n||{};const i=this.sizeX||n.cornerSize||s.cornerSize,o=this.sizeY||n.cornerSize||s.cornerSize,a=n.transparentCorners!==void 0?n.transparentCorners:s.transparentCorners,l=a?Sn:Ft,c=!a&&(n.cornerStrokeColor||s.cornerStrokeColor);let u,h=e,d=t;r.save(),r.fillStyle=n.cornerColor||s.cornerColor||"",r.strokeStyle=n.cornerStrokeColor||s.cornerStrokeColor||"",i>o?(u=i,r.scale(1,o/i),d=t*i/o):o>i?(u=o,r.scale(i/o,1),h=e*o/i):u=i,r.beginPath(),r.arc(h,d,u/2,0,ls,!1),r[l](),c&&r.stroke(),r.restore()}function Ay(r,e,t,n,s){n=n||{};const i=this.sizeX||n.cornerSize||s.cornerSize,o=this.sizeY||n.cornerSize||s.cornerSize,a=n.transparentCorners!==void 0?n.transparentCorners:s.transparentCorners,l=a?Sn:Ft,c=!a&&(n.cornerStrokeColor||s.cornerStrokeColor),u=i/2,h=o/2;r.save(),r.fillStyle=n.cornerColor||s.cornerColor||"",r.strokeStyle=n.cornerStrokeColor||s.cornerStrokeColor||"",r.translate(e,t);const d=s.getTotalAngle();r.rotate(gt(d)),r["".concat(l,"Rect")](-u,-h,i,o),c&&r.strokeRect(-u,-h,i,o),r.restore()}class bn{constructor(e){F(this,"visible",!0),F(this,"actionName",Mu),F(this,"angle",0),F(this,"x",0),F(this,"y",0),F(this,"offsetX",0),F(this,"offsetY",0),F(this,"sizeX",0),F(this,"sizeY",0),F(this,"touchSizeX",0),F(this,"touchSizeY",0),F(this,"cursorStyle","crosshair"),F(this,"withConnection",!1),Object.assign(this,e)}shouldActivate(e,t,n,s){var i;let{tl:o,tr:a,br:l,bl:c}=s;return((i=t.canvas)===null||i===void 0?void 0:i.getActiveObject())===t&&t.isControlVisible(e)&&ct.isPointInPolygon(n,[o,a,l,c])}getActionHandler(e,t,n){return this.actionHandler}getMouseDownHandler(e,t,n){return this.mouseDownHandler}getMouseUpHandler(e,t,n){return this.mouseUpHandler}cursorStyleHandler(e,t,n){return t.cursorStyle}getActionName(e,t,n){return t.actionName}getVisibility(e,t){var n,s;return(n=(s=e._controlsVisibility)===null||s===void 0?void 0:s[t])!==null&&n!==void 0?n:this.visible}setVisibility(e,t,n){this.visible=e}positionHandler(e,t,n,s){return new j(this.x*e.x+this.offsetX,this.y*e.y+this.offsetY).transform(t)}calcCornerCoords(e,t,n,s,i,o){const a=Pu([Wo(n,s),Yo({angle:e}),Au((i?this.touchSizeX:this.sizeX)||t,(i?this.touchSizeY:this.sizeY)||t)]);return{tl:new j(-.5,-.5).transform(a),tr:new j(.5,-.5).transform(a),br:new j(.5,.5).transform(a),bl:new j(-.5,.5).transform(a)}}render(e,t,n,s,i){((s=s||{}).cornerStyle||i.cornerStyle)==="circle"?Py.call(this,e,t,n,s,i):Ay.call(this,e,t,n,s,i)}}const Fy=(r,e,t)=>t.lockRotation?Hc:e.cursorStyle,ky=Zs(ey,Vi((r,e,t,n)=>{let{target:s,ex:i,ey:o,theta:a,originX:l,originY:c}=e;const u=s.translateToOriginPoint(s.getRelativeCenterPoint(),l,c);if(lr(s,"lockRotation"))return!1;const h=Math.atan2(o-u.y,i-u.x),d=Math.atan2(n-u.y,t-u.x);let f=Vs(d-h+a);if(s.snapAngle&&s.snapAngle>0){const p=s.snapAngle,m=s.snapThreshold||p,v=Math.ceil(f/p)*p,_=Math.floor(f/p)*p;Math.abs(f-_)<m?f=_:Math.abs(f-v)<m&&(f=v)}f<0&&(f=360+f),f%=360;const g=s.angle!==f;return s.angle=f,g}));function Ry(r,e){const t=e.canvas,n=r[t.uniScaleKey];return t.uniformScaling&&!n||!t.uniformScaling&&n}function Dy(r,e,t){const n=lr(r,"lockScalingX"),s=lr(r,"lockScalingY");if(n&&s||!e&&(n||s)&&t||n&&e==="x"||s&&e==="y")return!0;const{width:i,height:o,strokeWidth:a}=r;return i===0&&a===0&&e!=="y"||o===0&&a===0&&e!=="x"}const BT=["e","se","s","sw","w","nw","n","ne","e"],no=(r,e,t)=>{const n=Ry(r,t);if(Dy(t,e.x!==0&&e.y===0?"x":e.x===0&&e.y!==0?"y":"",n))return Hc;const s=xy(t,e);return"".concat(BT[s],"-resize")};function jf(r,e,t,n){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const i=e.target,o=s.by,a=Ry(r,i);let l,c,u,h,d,f;if(Dy(i,o,a))return!1;if(e.gestureScale)c=e.scaleX*e.gestureScale,u=e.scaleY*e.gestureScale;else{if(l=ku(e,e.originX,e.originY,t,n),d=o!=="y"?Math.sign(l.x||e.signX||1):1,f=o!=="x"?Math.sign(l.y||e.signY||1):1,e.signX||(e.signX=d),e.signY||(e.signY=f),lr(i,"lockScalingFlip")&&(e.signX!==d||e.signY!==f))return!1;if(h=i._getTransformedDimensions(),a&&!o){const m=Math.abs(l.x)+Math.abs(l.y),{original:v}=e,_=m/(Math.abs(h.x*v.scaleX/i.scaleX)+Math.abs(h.y*v.scaleY/i.scaleY));c=v.scaleX*_,u=v.scaleY*_}else c=Math.abs(l.x*i.scaleX/h.x),u=Math.abs(l.y*i.scaleY/h.y);_y(e)&&(c*=2,u*=2),e.signX!==d&&o!=="y"&&(e.originX=Mp(e.originX),c*=-1,e.signX=d),e.signY!==f&&o!=="x"&&(e.originY=Mp(e.originY),u*=-1,e.signY=f)}const g=i.scaleX,p=i.scaleY;return o?(o==="x"&&i.set(vn,c),o==="y"&&i.set(Nn,u)):(!lr(i,"lockScalingX")&&i.set(vn,c),!lr(i,"lockScalingY")&&i.set(Nn,u)),g!==i.scaleX||p!==i.scaleY}const ca=Zs(Eu,Vi((r,e,t,n)=>jf(r,e,t,n))),Iy=Zs(Eu,Vi((r,e,t,n)=>jf(r,e,t,n,{by:"x"}))),Ly=Zs(Eu,Vi((r,e,t,n)=>jf(r,e,t,n,{by:"y"}))),jT=["target","ex","ey","skewingSide"],Ch={x:{counterAxis:"y",scale:vn,skew:No,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:Nn,skew:Vo,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},zT=["ns","nesw","ew","nwse"],By=(r,e,t)=>{if(e.x!==0&&lr(t,"lockSkewingY")||e.y!==0&&lr(t,"lockSkewingX"))return Hc;const n=xy(t,e)%4;return"".concat(zT[n],"-resize")};function jy(r,e,t,n,s){const{target:i}=t,{counterAxis:o,origin:a,lockSkewing:l,skew:c,flip:u}=Ch[r];if(lr(i,l))return!1;const{origin:h,flip:d}=Ch[o],f=Tt(t[h])*(i[d]?-1:1),g=-Math.sign(f)*(i[u]?-1:1),p=.5*-((i[c]===0&&ku(t,Fe,Fe,n,s)[r]>0||i[c]>0?1:-1)*g)+.5;return Zs(ty,Vi((v,_,x,y)=>function(C,E,b){let{target:w,ex:S,ey:$,skewingSide:N}=E,H=lt(E,jT);const{skew:U}=Ch[C],ee=b.subtract(new j(S,$)).divide(new j(w.scaleX,w.scaleY))[C],re=w[U],te=H[U],z=Math.tan(gt(te)),R=C==="y"?w._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:w._getTransformedDimensions({scaleX:1,scaleY:1}).y,ue=2*ee*N/Math.max(R,1)+z,de=Vs(Math.atan(ue));w.set(U,de);const Ce=re!==w[U];if(Ce&&C==="y"){const{skewX:fe,scaleX:$e}=w,Te=w._getTransformedDimensions({skewY:re}),De=w._getTransformedDimensions(),ve=fe!==0?Te.x/De.x:1;ve!==1&&w.set(vn,ve*$e)}return Ce}(r,_,new j(x,y))))(e,A(A({},t),{},{[a]:p,skewingSide:g}),n,s)}const zy=(r,e,t,n)=>jy("x",r,e,t,n),Hy=(r,e,t,n)=>jy("y",r,e,t,n);function Iu(r,e){return r[e.canvas.altActionKey]}const ua=(r,e,t)=>{const n=Iu(r,t);return e.x===0?n?No:Nn:e.y===0?n?Vo:vn:""},mi=(r,e,t)=>Iu(r,t)?By(0,e,t):no(r,e,t),bd=(r,e,t,n)=>Iu(r,e.target)?Hy(r,e,t,n):Iy(r,e,t,n),_d=(r,e,t,n)=>Iu(r,e.target)?zy(r,e,t,n):Ly(r,e,t,n),zf=()=>({ml:new bn({x:-.5,y:0,cursorStyleHandler:mi,actionHandler:bd,getActionName:ua}),mr:new bn({x:.5,y:0,cursorStyleHandler:mi,actionHandler:bd,getActionName:ua}),mb:new bn({x:0,y:.5,cursorStyleHandler:mi,actionHandler:_d,getActionName:ua}),mt:new bn({x:0,y:-.5,cursorStyleHandler:mi,actionHandler:_d,getActionName:ua}),tl:new bn({x:-.5,y:-.5,cursorStyleHandler:no,actionHandler:ca}),tr:new bn({x:.5,y:-.5,cursorStyleHandler:no,actionHandler:ca}),bl:new bn({x:-.5,y:.5,cursorStyleHandler:no,actionHandler:ca}),br:new bn({x:.5,y:.5,cursorStyleHandler:no,actionHandler:ca}),mtr:new bn({x:0,y:-.5,actionHandler:ky,cursorStyleHandler:Fy,offsetY:-40,withConnection:!0,actionName:Sf})}),$y=()=>({mr:new bn({x:.5,y:0,actionHandler:yd,cursorStyleHandler:mi,actionName:il}),ml:new bn({x:-.5,y:0,actionHandler:yd,cursorStyleHandler:mi,actionName:il})}),Ny=()=>A(A({},zf()),$y());class Ls extends Kr{static getDefaults(){return A(A({},super.getDefaults()),Ls.ownDefaults)}constructor(e){super(),Object.assign(this,this.constructor.createControls(),Ls.ownDefaults),this.setOptions(e)}static createControls(){return{controls:zf()}}_updateCacheCanvas(){const e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){const t=e._currentTransform,n=t.target,s=t.action;if(this===n&&s&&s.startsWith(Mu))return!1}return super._updateCacheCanvas()}getActiveControl(){const e=this.__corner;return e?{key:e,control:this.controls[e],coord:this.oCoords[e]}:void 0}findControl(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const n=Object.entries(this.oCoords);for(let s=n.length-1;s>=0;s--){const[i,o]=n[s],a=this.controls[i];if(a.shouldActivate(i,this,e,t?o.touchCorner:o.corner))return this.__corner=i,{key:i,control:a,coord:this.oCoords[i]}}}calcOCoords(){const e=this.getViewportTransform(),t=this.getCenterPoint(),n=Wo(t.x,t.y),s=Yo({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),i=pt(n,s),o=pt(e,i),a=pt(o,[1/e[0],0,0,1/e[3],0,0]),l=this.group?Po(this.calcTransformMatrix()):void 0;l&&(l.scaleX=Math.abs(l.scaleX),l.scaleY=Math.abs(l.scaleY));const c=this._calculateCurrentDimensions(l),u={};return this.forEachControl((h,d)=>{const f=h.positionHandler(c,a,this,h);u[d]=Object.assign(f,this._calcCornerCoords(h,f))}),u}_calcCornerCoords(e,t){const n=this.getTotalAngle();return{corner:e.calcCornerCoords(n,this.cornerSize,t.x,t.y,!1,this),touchCorner:e.calcCornerCoords(n,this.touchCornerSize,t.x,t.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(e){for(const t in this.controls)e(this.controls[t],t,this)}drawSelectionBackground(e){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;e.save();const t=this.getRelativeCenterPoint(),n=this._calculateCurrentDimensions(),s=this.getViewportTransform();e.translate(t.x,t.y),e.scale(1/s[0],1/s[3]),e.rotate(gt(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-n.x/2,-n.y/2,n.x,n.y),e.restore()}strokeBorders(e,t){e.strokeRect(-t.x/2,-t.y/2,t.x,t.y)}_drawBorders(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=A({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},n);e.save(),e.strokeStyle=s.borderColor,this._setLineDash(e,s.borderDashArray),this.strokeBorders(e,t),s.hasControls&&this.drawControlsConnectingLines(e,t),e.restore()}_renderControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:n,hasControls:s}=this,i=A({hasBorders:n,hasControls:s},t),o=this.getViewportTransform(),a=i.hasBorders,l=i.hasControls,c=pt(o,this.calcTransformMatrix()),u=Po(c);e.save(),e.translate(u.translateX,u.translateY),e.lineWidth=this.borderScaleFactor,this.group===this.parent&&(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(u.angle-=180),e.rotate(gt(this.group?u.angle:this.angle)),a&&this.drawBorders(e,u,t),l&&this.drawControls(e,t),e.restore()}drawBorders(e,t,n){let s;if(n&&n.forActiveSelection||this.group){const i=Fu(this.width,this.height,Tl(t)),o=this.isStrokeAccountedForInDimensions()?Tf:(this.strokeUniform?new j().scalarAdd(this.canvas?this.canvas.getZoom():1):new j(t.scaleX,t.scaleY)).scalarMultiply(this.strokeWidth);s=i.add(o).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else s=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(e,s,n)}drawControlsConnectingLines(e,t){let n=!1;e.beginPath(),this.forEachControl((s,i)=>{s.withConnection&&s.getVisibility(this,i)&&(n=!0,e.moveTo(s.x*t.x,s.y*t.y),e.lineTo(s.x*t.x+s.offsetX,s.y*t.y+s.offsetY))}),n&&e.stroke()}drawControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.save();const n=this.getCanvasRetinaScaling(),{cornerStrokeColor:s,cornerDashArray:i,cornerColor:o}=this,a=A({cornerStrokeColor:s,cornerDashArray:i,cornerColor:o},t);e.setTransform(n,0,0,n,0,0),e.strokeStyle=e.fillStyle=a.cornerColor,this.transparentCorners||(e.strokeStyle=a.cornerStrokeColor),this._setLineDash(e,a.cornerDashArray),this.forEachControl((l,c)=>{if(l.getVisibility(this,c)){const u=this.oCoords[c];l.render(e,u.x,u.y,a,this)}}),e.restore()}isControlVisible(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)}setControlVisible(e,t){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t}setControlsVisibility(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(e).forEach(t=>{let[n,s]=t;return this.setControlVisible(n,s)})}clearContextTop(e){if(!this.canvas)return;const t=this.canvas.contextTop;if(!t)return;const n=this.canvas.viewportTransform;t.save(),t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this.transform(t);const s=this.width+4,i=this.height+4;return t.clearRect(-s/2,-i/2,s,i),e||t.restore(),t}onDeselect(e){return!1}onSelect(e){return!1}shouldStartDragging(e){return!1}onDragStart(e){return!1}canDrop(e){return!1}renderDragSourceEffect(e){}renderDropTargetEffect(e){}}function Vy(r,e){return e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(n=>{n!=="constructor"&&Object.defineProperty(r.prototype,n,Object.getOwnPropertyDescriptor(t.prototype,n)||Object.create(null))})}),r}F(Ls,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class jt extends Ls{}Vy(jt,[wy]),oe.setClass(jt),oe.setClass(jt,"object");const Wy=(r,e,t,n)=>{const s=2*(n=Math.round(n))+1,{data:i}=r.getImageData(e-n,t-n,s,s);for(let o=3;o<i.length;o+=4)if(i[o]>0)return!1;return!0};class Yy{constructor(e){this.options=e,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new j(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new j(1/this.options.scaleX,1/this.options.scaleY):new j(1,1)}createSideVector(e,t){const n=$c(e,t);return this.options.strokeUniform?n.multiply(this.scale):n}projectOrthogonally(e,t,n){return this.applySkew(e.add(this.calcOrthogonalProjection(e,t,n)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(e){const t=new j(e);return t.y+=t.x*Math.tan(gt(this.options.skewY)),t.x+=t.y*Math.tan(gt(this.options.skewX)),t}scaleUnitVector(e,t){return e.multiply(this.strokeUniformScalar).scalarMultiply(t)}}const HT=new j;class yo extends Yy{static getOrthogonalRotationFactor(e,t){const n=t?Vc(e,t):Ty(e);return Math.abs(n)<$s?-1:1}constructor(e,t,n,s){super(s),F(this,"AB",void 0),F(this,"AC",void 0),F(this,"alpha",void 0),F(this,"bisector",void 0),this.A=new j(e),this.B=new j(t),this.C=new j(n),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=Vc(this.AB,this.AC),this.bisector=Du(Df(this.AB.eq(HT)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const s=this.createSideVector(e,t),i=If(s),o=yo.getOrthogonalRotationFactor(i,this.bisector);return this.scaleUnitVector(i,n*o)}projectBevel(){const e=[];return(this.alpha%ls==0?[this.B]:[this.B,this.C]).forEach(t=>{e.push(this.projectOrthogonally(this.A,t)),e.push(this.projectOrthogonally(this.A,t,-this.strokeProjectionMagnitude))}),e}projectMiter(){const e=[],t=Math.abs(this.alpha),n=1/Math.sin(t/2),s=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*n),i=this.options.strokeUniform?Nc(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return Nc(s)/this.strokeProjectionMagnitude<=i&&e.push(this.applySkew(this.A.add(s))),e.push(...this.projectBevel()),e}projectRoundNoSkew(e,t){const n=[],s=new j(yo.getOrthogonalRotationFactor(this.bisector),yo.getOrthogonalRotationFactor(new j(this.bisector.y,this.bisector.x)));return[new j(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(s),new j(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(s)].forEach(i=>{md(i,e,t)&&n.push(this.A.add(i))}),n}projectRoundWithSkew(e,t){const n=[],{skewX:s,skewY:i,scaleX:o,scaleY:a,strokeUniform:l}=this.options,c=new j(Math.tan(gt(s)),Math.tan(gt(i))),u=this.strokeProjectionMagnitude,h=l?u/a/Math.sqrt(1/a**2+1/o**2*c.y**2):u/Math.sqrt(1+c.y**2),d=new j(Math.sqrt(Math.max(u**2-h**2,0)),h),f=l?u/Math.sqrt(1+c.x**2*(1/a)**2/(1/o+1/o*c.x*c.y)**2):u/Math.sqrt(1+c.x**2/(1+c.x*c.y)**2),g=new j(f,Math.sqrt(Math.max(u**2-f**2,0)));return[g,g.scalarMultiply(-1),d,d.scalarMultiply(-1)].map(p=>this.applySkew(l?p.multiply(this.strokeUniformScalar):p)).forEach(p=>{md(p,e,t)&&n.push(this.applySkew(this.A).add(p))}),n}projectRound(){const e=[];e.push(...this.projectBevel());const t=this.alpha%ls==0,n=this.applySkew(this.A),s=e[t?0:2].subtract(n),i=e[t?1:0].subtract(n),o=t?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),a=vo(s,o)>0,l=a?s:i,c=a?i:s;return this.isSkewed()?e.push(...this.projectRoundWithSkew(l,c)):e.push(...this.projectRoundNoSkew(l,c)),e}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e,angle:this.alpha,bisector:this.bisector}))}}class Ip extends Yy{constructor(e,t,n){super(n),this.A=new j(e),this.T=new j(t)}calcOrthogonalProjection(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const s=this.createSideVector(e,t);return this.scaleUnitVector(If(s),n)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const e=[];if(!this.isSkewed()&&this.A.eq(this.T)){const t=new j(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.applySkew(this.A.add(t)),this.applySkew(this.A.subtract(t)))}else e.push(...new yo(this.A,this.T,this.T,this.options).projectRound());return e}projectSquare(){const e=[];if(this.A.eq(this.T)){const t=new j(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.A.add(t),this.A.subtract(t))}else{const t=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),n=this.scaleUnitVector(Du(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),s=this.A.add(n);e.push(s.add(t),s.subtract(t))}return e.map(t=>this.applySkew(t))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e}))}}const Xy=function(r,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const n=[];if(r.length===0)return n;const s=r.reduce((i,o)=>(i[i.length-1].eq(o)||i.push(new j(o)),i),[new j(r[0])]);if(s.length===1)t=!0;else if(!t){const i=s[0],o=((a,l)=>{for(let c=a.length-1;c>=0;c--)if(l(a[c],c,a))return c;return-1})(s,a=>!a.eq(i));s.splice(o+1)}return s.forEach((i,o,a)=>{let l,c;o===0?(c=a[1],l=t?i:a[a.length-1]):o===a.length-1?(l=a[o-1],c=t?i:a[0]):(l=a[o-1],c=a[o+1]),t&&a.length===1?n.push(...new Ip(i,i,e).project()):!t||o!==0&&o!==a.length-1?n.push(...new yo(i,l,c,e).project()):n.push(...new Ip(i,o===0?c:l,e).project())}),n},Hf=r=>{const e={};return Object.keys(r).forEach(t=>{e[t]={},Object.keys(r[t]).forEach(n=>{e[t][n]=A({},r[t][n])})}),e},Uy=r=>r.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Lu=r=>{const e=[];for(let t,n=0;n<r.length;n++)(t=$T(r,n))!==!1&&e.push(t);return e},$T=(r,e)=>{const t=r.charCodeAt(e);if(isNaN(t))return"";if(t<55296||t>57343)return r.charAt(e);if(55296<=t&&t<=56319){if(r.length<=e+1)throw"High surrogate without following low surrogate";const s=r.charCodeAt(e+1);if(56320>s||s>57343)throw"High surrogate without following low surrogate";return r.charAt(e)+r.charAt(e+1)}if(e===0)throw"Low surrogate without preceding high surrogate";const n=r.charCodeAt(e-1);if(55296>n||n>56319)throw"Low surrogate without preceding high surrogate";return!1};var NT=Object.freeze({__proto__:null,capitalize:function(r){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return"".concat(r.charAt(0).toUpperCase()).concat(e?r.slice(1):r.slice(1).toLowerCase())},escapeXml:Uy,graphemeSplit:Lu});const Bu=function(r,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return r.fill!==e.fill||r.stroke!==e.stroke||r.strokeWidth!==e.strokeWidth||r.fontSize!==e.fontSize||r.fontFamily!==e.fontFamily||r.fontWeight!==e.fontWeight||r.fontStyle!==e.fontStyle||r.textBackgroundColor!==e.textBackgroundColor||r.deltaY!==e.deltaY||t&&(r.overline!==e.overline||r.underline!==e.underline||r.linethrough!==e.linethrough)},Gy=(r,e)=>{const t=e.split(`
`),n=[];let s=-1,i={};r=Hf(r);for(let o=0;o<t.length;o++){const a=Lu(t[o]);if(r[o])for(let l=0;l<a.length;l++){s++;const c=r[o][l];c&&Object.keys(c).length>0&&(Bu(i,c,!0)?n.push({start:s,end:s+1,style:c}):n[n.length-1].end++),i=c||{}}else s+=a.length,i={}}return n},qy=(r,e)=>{if(!Array.isArray(r))return Hf(r);const t=e.split(wf),n={};let s=-1,i=0;for(let o=0;o<t.length;o++){const a=Lu(t[o]);for(let l=0;l<a.length;l++)s++,r[i]&&r[i].start<=s&&s<r[i].end&&(n[o]=n[o]||{},n[o][l]=A({},r[i].style),s===r[i].end-1&&i++)}return n},Js=["display","transform",Ft,"fill-opacity","fill-rule","opacity",Sn,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function Lp(r,e){const t=r.nodeName,n=r.getAttribute("class"),s=r.getAttribute("id"),i="(?![a-zA-Z\\-]+)";let o;if(o=new RegExp("^"+t,"i"),e=e.replace(o,""),s&&e.length&&(o=new RegExp("#"+s+i,"i"),e=e.replace(o,"")),n&&e.length){const a=n.split(" ");for(let l=a.length;l--;)o=new RegExp("\\."+a[l]+i,"i"),e=e.replace(o,"")}return e.length===0}function VT(r,e){let t=!0;const n=Lp(r,e.pop());return n&&e.length&&(t=function(s,i){let o,a=!0;for(;s.parentElement&&s.parentElement.nodeType===1&&i.length;)a&&(o=i.pop()),a=Lp(s=s.parentElement,o);return i.length===0}(r,e)),n&&t&&e.length===0}const WT=r=>{var e;return(e=xT[r])!==null&&e!==void 0?e:r},YT=new RegExp("(".concat(Li,")"),"gi"),XT=r=>r.replace(YT," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var Bp,jp,zp,Hp,$p,Np,Vp;const dn="(".concat(Li,")"),UT=String.raw(Bp||(Bp=Ks(["(skewX)(",")"],["(skewX)\\(","\\)"])),dn),GT=String.raw(jp||(jp=Ks(["(skewY)(",")"],["(skewY)\\(","\\)"])),dn),qT=String.raw(zp||(zp=Ks(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),dn,dn,dn),KT=String.raw(Hp||(Hp=Ks(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),dn,dn),ZT=String.raw($p||($p=Ks(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),dn,dn),JT=String.raw(Np||(Np=Ks(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),dn,dn,dn,dn,dn,dn),$f="(?:".concat(JT,"|").concat(ZT,"|").concat(qT,"|").concat(KT,"|").concat(UT,"|").concat(GT,")"),QT="(?:".concat($f,"*)"),e2=String.raw(Vp||(Vp=Ks(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),QT),t2=new RegExp(e2),n2=new RegExp($f),r2=new RegExp($f,"g");function xd(r){const e=[];if(!(r=XT(r).replace(/\s*([()])\s*/gi,"$1"))||r&&!t2.test(r))return[...mn];for(const t of r.matchAll(r2)){const n=n2.exec(t[0]);if(!n)continue;let s=mn;const i=n.filter(g=>!!g),[,o,...a]=i,[l,c,u,h,d,f]=a.map(g=>parseFloat(g));switch(o){case"translate":s=Wo(l,c);break;case Sf:s=Yo({angle:l},{x:c,y:u});break;case Mu:s=Au(l,c);break;case No:s=Mf(l);break;case Vo:s=Pf(l);break;case"matrix":s=[l,c,u,h,d,f]}e.push(s)}return Pu(e)}function s2(r,e,t,n){const s=Array.isArray(e);let i,o=e;if(r!==Ft&&r!==Sn||e!==wn){if(r==="strokeUniform")return e==="non-scaling-stroke";if(r==="strokeDashArray")o=e===wn?null:e.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(r==="transformMatrix")o=t&&t.transformMatrix?pt(t.transformMatrix,xd(e)):xd(e);else if(r==="visible")o=e!==wn&&e!=="hidden",t&&t.visible===!1&&(o=!1);else if(r==="opacity")o=parseFloat(e),t&&t.opacity!==void 0&&(o*=t.opacity);else if(r==="textAnchor")o=e==="start"?Xe:e==="end"?_t:Fe;else if(r==="charSpacing")i=Si(e,n)/n*1e3;else if(r==="paintFirst"){const a=e.indexOf(Ft),l=e.indexOf(Sn);o=Ft,(a>-1&&l>-1&&l<a||a===-1&&l>-1)&&(o=Sn)}else{if(r==="href"||r==="xlink:href"||r==="font"||r==="id")return e;if(r==="imageSmoothing")return e==="optimizeQuality";i=s?e.map(Si):Si(e,n)}}else o="";return!s&&isNaN(i)?o:i}function i2(r,e){const t=r.match(_T);if(!t)return;const n=t[1],s=t[3],i=t[4],o=t[5],a=t[6];n&&(e.fontStyle=n),s&&(e.fontWeight=isNaN(parseFloat(s))?s:parseFloat(s)),i&&(e.fontSize=Si(i)),a&&(e.fontFamily=a),o&&(e.lineHeight=o==="normal"?1:o)}function o2(r,e){r.replace(/;\s*$/,"").split(";").forEach(t=>{if(!t)return;const[n,s]=t.split(":");e[n.trim().toLowerCase()]=s.trim()})}function a2(r){const e={},t=r.getAttribute("style");return t&&(typeof t=="string"?o2(t,e):function(n,s){Object.entries(n).forEach(i=>{let[o,a]=i;a!==void 0&&(s[o.toLowerCase()]=a)})}(t,e)),e}const l2={stroke:"strokeOpacity",fill:"fillOpacity"};function fs(r,e,t){if(!r)return{};let n,s={},i=Cf;r.parentNode&&Ap.test(r.parentNode.nodeName)&&(s=fs(r.parentElement,e,t),s.fontSize&&(n=i=Si(s.fontSize)));const o=A(A(A({},e.reduce((c,u)=>{const h=r.getAttribute(u);return h&&(c[u]=h),c},{})),function(c){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h={};for(const d in u)VT(c,d.split(" "))&&(h=A(A({},h),u[d]));return h}(r,t)),a2(r));o[bh]&&r.setAttribute(bh,o[bh]),o[yh]&&(n=Si(o[yh],i),o[yh]="".concat(n));const a={};for(const c in o){const u=WT(c),h=s2(u,o[c],s,n);a[u]=h}a&&a.font&&i2(a.font,a);const l=A(A({},s),a);return Ap.test(r.nodeName)?l:function(c){const u=jt.getDefaults();return Object.entries(l2).forEach(h=>{let[d,f]=h;if(c[f]===void 0||c[d]==="")return;if(c[d]===void 0){if(!u[d])return;c[d]=u[d]}if(c[d].indexOf("url(")===0)return;const g=new Ge(c[d]);c[d]=g.setAlpha(ot(g.getAlpha()*c[f],2)).toRgba()}),c}(l)}const c2=["left","top","width","height","visible"],Ky=["rx","ry"];class Kn extends jt{static getDefaults(){return A(A({},super.getDefaults()),Kn.ownDefaults)}constructor(e){super(),Object.assign(this,Kn.ownDefaults),this.setOptions(e),this._initRxRy()}_initRxRy(){const{rx:e,ry:t}=this;e&&!t?this.ry=e:t&&!e&&(this.rx=t)}_render(e){const{width:t,height:n}=this,s=-t/2,i=-n/2,o=this.rx?Math.min(this.rx,t/2):0,a=this.ry?Math.min(this.ry,n/2):0,l=o!==0||a!==0;e.beginPath(),e.moveTo(s+o,i),e.lineTo(s+t-o,i),l&&e.bezierCurveTo(s+t-ys*o,i,s+t,i+ys*a,s+t,i+a),e.lineTo(s+t,i+n-a),l&&e.bezierCurveTo(s+t,i+n-ys*a,s+t-ys*o,i+n,s+t-o,i+n),e.lineTo(s+o,i+n),l&&e.bezierCurveTo(s+ys*o,i+n,s,i+n-ys*a,s,i+n-a),e.lineTo(s,i+a),l&&e.bezierCurveTo(s,i+ys*a,s+ys*o,i,s+o,i),e.closePath(),this._renderPaintInOrder(e)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...Ky,...e])}_toSVG(){const{width:e,height:t,rx:n,ry:s}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-e/2,'" y="').concat(-t/2,'" rx="').concat(n,'" ry="').concat(s,'" width="').concat(e,'" height="').concat(t,`" />
`)]}static async fromElement(e,t,n){const s=fs(e,this.ATTRIBUTE_NAMES,n),{left:i=0,top:o=0,width:a=0,height:l=0,visible:c=!0}=s,u=lt(s,c2);return new this(A(A(A({},t),u),{},{left:i,top:o,width:a,height:l,visible:!!(c&&a&&l)}))}}F(Kn,"type","Rect"),F(Kn,"cacheProperties",[...ds,...Ky]),F(Kn,"ownDefaults",{rx:0,ry:0}),F(Kn,"ATTRIBUTE_NAMES",[...Js,"x","y","rx","ry","width","height"]),oe.setClass(Kn),oe.setSVGClass(Kn);const ss="initialization",Wc="added",Nf="removed",Yc="imperative",Zy=(r,e)=>{const{strokeUniform:t,strokeWidth:n,width:s,height:i,group:o}=e,a=o&&o!==r?Ml(o.calcTransformMatrix(),r.calcTransformMatrix()):null,l=a?e.getRelativeCenterPoint().transform(a):e.getRelativeCenterPoint(),c=!e.isStrokeAccountedForInDimensions(),u=t&&c?by(new j(n,n),void 0,r.calcTransformMatrix()):Tf,h=!t&&c?n:0,d=Fu(s+h,i+h,Pu([a,e.calcOwnMatrix()],!0)).add(u).scalarDivide(2);return[l.subtract(d),l.add(d)]};class ju{calcLayoutResult(e,t){if(this.shouldPerformLayout(e))return this.calcBoundingBox(t,e)}shouldPerformLayout(e){let{type:t,prevStrategy:n,strategy:s}=e;return t===ss||t===Yc||!!n&&s!==n}shouldLayoutClipPath(e){let{type:t,target:{clipPath:n}}=e;return t!==ss&&n&&!n.absolutePositioned}getInitialSize(e,t){return t.size}calcBoundingBox(e,t){const{type:n,target:s}=t;if(n===Yc&&t.overrides)return t.overrides;if(e.length===0)return;const{left:i,top:o,width:a,height:l}=Ir(e.map(h=>Zy(s,h)).reduce((h,d)=>h.concat(d),[])),c=new j(a,l),u=new j(i,o).add(c.scalarDivide(2));if(n===ss){const h=this.getInitialSize(t,{size:c,center:u});return{center:u,relativeCorrection:new j(0,0),size:h}}return{center:u.transform(s.calcOwnMatrix()),size:c}}}F(ju,"type","strategy");class Cd extends ju{shouldPerformLayout(e){return!0}}F(Cd,"type","fit-content"),oe.setClass(Cd);const u2=["strategy"],h2=["target","strategy","bubbles","prevStrategy"],Jy="layoutManager";class ll{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Cd;F(this,"strategy",void 0),this.strategy=e,this._subscriptions=new Map}performLayout(e){const t=A(A({bubbles:!0,strategy:this.strategy},e),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(t);const n=this.getLayoutResult(t);n&&this.commitLayout(t,n),this.onAfterLayout(t,n),this._prevLayoutStrategy=t.strategy}attachHandlers(e,t){const{target:n}=t;return[Bc,Q0,il,ey,Eu,ty,Lc,ny,fT].map(s=>e.on(s,i=>this.performLayout(s===Bc?{type:"object_modified",trigger:s,e:i,target:n}:{type:"object_modifying",trigger:s,e:i,target:n})))}subscribe(e,t){this.unsubscribe(e,t);const n=this.attachHandlers(e,t);this._subscriptions.set(e,n)}unsubscribe(e,t){(this._subscriptions.get(e)||[]).forEach(n=>n()),this._subscriptions.delete(e)}unsubscribeTargets(e){e.targets.forEach(t=>this.unsubscribe(t,e))}subscribeTargets(e){e.targets.forEach(t=>this.subscribe(t,e))}onBeforeLayout(e){const{target:t,type:n}=e,{canvas:s}=t;if(n===ss||n===Wc?this.subscribeTargets(e):n===Nf&&this.unsubscribeTargets(e),t.fire("layout:before",{context:e}),s&&s.fire("object:layout:before",{target:t,context:e}),n===Yc&&e.deep){const i=lt(e,u2);t.forEachObject(o=>o.layoutManager&&o.layoutManager.performLayout(A(A({},i),{},{bubbles:!1,target:o})))}}getLayoutResult(e){const{target:t,strategy:n,type:s}=e,i=n.calcLayoutResult(e,t.getObjects());if(!i)return;const o=s===ss?new j:t.getRelativeCenterPoint(),{center:a,correction:l=new j,relativeCorrection:c=new j}=i,u=o.subtract(a).add(l).transform(s===ss?mn:Ln(t.calcOwnMatrix()),!0).add(c);return{result:i,prevCenter:o,nextCenter:a,offset:u}}commitLayout(e,t){const{target:n}=e,{result:{size:s},nextCenter:i}=t;var o,a;n.set({width:s.x,height:s.y}),this.layoutObjects(e,t),e.type===ss?n.set({left:(o=e.x)!==null&&o!==void 0?o:i.x+s.x*Tt(n.originX),top:(a=e.y)!==null&&a!==void 0?a:i.y+s.y*Tt(n.originY)}):(n.setPositionByOrigin(i,Fe,Fe),n.setCoords(),n.set("dirty",!0))}layoutObjects(e,t){const{target:n}=e;n.forEachObject(s=>{s.group===n&&this.layoutObject(e,t,s)}),e.strategy.shouldLayoutClipPath(e)&&this.layoutObject(e,t,n.clipPath)}layoutObject(e,t,n){let{offset:s}=t;n.set({left:n.left+s.x,top:n.top+s.y})}onAfterLayout(e,t){const{target:n,strategy:s,bubbles:i,prevStrategy:o}=e,a=lt(e,h2),{canvas:l}=n;n.fire("layout:after",{context:e,result:t}),l&&l.fire("object:layout:after",{context:e,result:t,target:n});const c=n.parent;i&&c!=null&&c.layoutManager&&((a.path||(a.path=[])).push(n),c.layoutManager.performLayout(A(A({},a),{},{target:c}))),n.set("dirty",!0)}dispose(){const{_subscriptions:e}=this;e.forEach(t=>t.forEach(n=>n())),e.clear()}toObject(){return{type:Jy,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}oe.setClass(ll,Jy);const d2=["type","objects","layoutManager"];class f2 extends ll{performLayout(){}}class er extends ry(jt){static getDefaults(){return A(A({},super.getDefaults()),er.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),F(this,"_activeObjects",[]),F(this,"__objectSelectionTracker",void 0),F(this,"__objectSelectionDisposer",void 0),Object.assign(this,er.ownDefaults),this.setOptions(t),this.groupInit(e,t)}groupInit(e,t){var n;this._objects=[...e],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(s=>{this.enterGroup(s,!1)}),this.layoutManager=(n=t.layoutManager)!==null&&n!==void 0?n:new ll,this.layoutManager.performLayout({type:ss,target:this,targets:[...e],x:t.left,y:t.top})}canEnterGroup(e){return e===this||this.isDescendantOf(e)?(Hs("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(e)===-1||(Hs("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(e){return e.filter((t,n,s)=>this.canEnterGroup(t)&&s.indexOf(t)===n)}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const s=this._filterObjectsBeforeEnteringGroup(t),i=super.add(...s);return this._onAfterObjectsChange(Wc,s),i}insertAt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];const i=this._filterObjectsBeforeEnteringGroup(n),o=super.insertAt(e,...i);return this._onAfterObjectsChange(Wc,i),o}remove(){const e=super.remove(...arguments);return this._onAfterObjectsChange(Nf,e),e}_onObjectAdded(e){this.enterGroup(e,!0),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e,t){this.exitGroup(e,t),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onAfterObjectsChange(e,t){this.layoutManager.performLayout({type:e,targets:t,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(e,t){const n=this[e];return super._set(e,t),e==="canvas"&&n!==t&&(this._objects||[]).forEach(s=>{s._set(e,t)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(e,t){let{target:n}=t;const s=this._activeObjects;if(e)s.push(n),this._set("dirty",!0);else if(s.length>0){const i=s.indexOf(n);i>-1&&(s.splice(i,1),this._set("dirty",!0))}}_watchObject(e,t){e&&this._watchObject(!1,t),e?(t.on("selected",this.__objectSelectionTracker),t.on("deselected",this.__objectSelectionDisposer)):(t.off("selected",this.__objectSelectionTracker),t.off("deselected",this.__objectSelectionDisposer))}enterGroup(e,t){e.group&&e.group.remove(e),e._set("parent",this),this._enterGroup(e,t)}_enterGroup(e,t){t&&Fo(e,pt(Ln(this.calcTransformMatrix()),e.calcTransformMatrix())),this._shouldSetNestedCoords()&&e.setCoords(),e._set("group",this),e._set("canvas",this.canvas),this._watchObject(!0,e);const n=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();n&&(n===e||e.isDescendantOf(n))&&this._activeObjects.push(e)}exitGroup(e,t){this._exitGroup(e,t),e._set("parent",void 0),e._set("canvas",void 0)}_exitGroup(e,t){e._set("group",void 0),t||(Fo(e,pt(this.calcTransformMatrix(),e.calcTransformMatrix())),e.setCoords()),this._watchObject(!1,e);const n=this._activeObjects.length>0?this._activeObjects.indexOf(e):-1;n>-1&&this._activeObjects.splice(n,1)}shouldCache(){const e=jt.prototype.shouldCache.call(this);if(e){for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return this.ownCaching=!1,!1}return e}willDrawShadow(){if(super.willDrawShadow())return!0;for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(e,t,n){this._renderBackground(e);for(let i=0;i<this._objects.length;i++){var s;const o=this._objects[i];(s=this.canvas)!==null&&s!==void 0&&s.preserveObjectStacking&&o.group!==this?(e.save(),e.transform(...Ln(this.calcTransformMatrix())),o.render(e),e.restore()):o.group===this&&o.render(e)}this._drawClipPath(e,this.clipPath,n)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(e=>e.setCoords())}triggerLayout(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(A({target:this,type:Yc},e))}render(e){this._transformDone=!0,super.render(e),this._transformDone=!1}__serializeObjects(e,t){const n=this.includeDefaultValues;return this._objects.filter(function(s){return!s.excludeFromExport}).map(function(s){const i=s.includeDefaultValues;s.includeDefaultValues=n;const o=s[e||"toObject"](t);return s.includeDefaultValues=i,o})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.layoutManager.toObject();return A(A(A({},super.toObject(["subTargetCheck","interactive",...e])),t.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:t}:{}),{},{objects:this.__serializeObjects("toObject",e)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(e=>{this._watchObject(!1,e),e.dispose()}),super.dispose()}_createSVGBgRect(e){if(!this.backgroundColor)return"";const t=Kn.prototype._toSVG.call(this),n=t.indexOf("COMMON_PARTS");t[n]='for="group" ';const s=t.join("");return e?e(s):s}_toSVG(e){const t=["<g ","COMMON_PARTS",` >
`],n=this._createSVGBgRect(e);n&&t.push("		",n);for(let s=0;s<this._objects.length;s++)t.push("		",this._objects[s].toSVG(e));return t.push(`</g>
`),t}getSvgStyles(){const e=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")}toClipPathSVG(e){const t=[],n=this._createSVGBgRect(e);n&&t.push("	",n);for(let s=0;s<this._objects.length;s++)t.push("	",this._objects[s].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}static fromObject(e,t){let{type:n,objects:s=[],layoutManager:i}=e,o=lt(e,d2);return Promise.all([Ao(s,t),Ol(o,t)]).then(a=>{let[l,c]=a;const u=new this(l,A(A(A({},o),c),{},{layoutManager:new f2}));if(i){const h=oe.getClass(i.type),d=oe.getClass(i.strategy);u.layoutManager=new h(new d)}else u.layoutManager=new ll;return u.layoutManager.subscribeTargets({type:ss,target:u,targets:u.getObjects()}),u.setCoords(),u})}}F(er,"type","Group"),F(er,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),oe.setClass(er);const Qy=(r,e)=>Math.min(e.width/r.width,e.height/r.height),eb=(r,e)=>Math.max(e.width/r.width,e.height/r.height),wd="\\s*,?\\s*",ra="".concat(wd,"(").concat(Li,")"),g2="".concat(ra).concat(ra).concat(ra).concat(wd,"([01])").concat(wd,"([01])").concat(ra).concat(ra),p2={m:"l",M:"L"},m2=(r,e,t,n,s,i,o,a,l,c,u)=>{const h=gr(r),d=pr(r),f=gr(e),g=pr(e),p=t*s*f-n*i*g+o,m=n*s*f+t*i*g+a;return["C",c+l*(-t*s*d-n*i*h),u+l*(-n*s*d+t*i*h),p+l*(t*s*g+n*i*f),m+l*(n*s*g-t*i*f),p,m]},Wp=(r,e,t,n)=>{const s=Math.atan2(e,r),i=Math.atan2(n,t);return i>=s?i-s:2*Math.PI-(s-i)};function Sd(r,e,t,n,s,i,o,a){let l;if(He.cachesBoundsOfCurve&&(l=[...arguments].join(),Ba.boundsOfCurveCache[l]))return Ba.boundsOfCurveCache[l];const c=Math.sqrt,u=Math.abs,h=[],d=[[0,0],[0,0]];let f=6*r-12*t+6*s,g=-3*r+9*t-9*s+3*o,p=3*t-3*r;for(let y=0;y<2;++y){if(y>0&&(f=6*e-12*n+6*i,g=-3*e+9*n-9*i+3*a,p=3*n-3*e),u(g)<1e-12){if(u(f)<1e-12)continue;const S=-p/f;0<S&&S<1&&h.push(S);continue}const C=f*f-4*p*g;if(C<0)continue;const E=c(C),b=(-f+E)/(2*g);0<b&&b<1&&h.push(b);const w=(-f-E)/(2*g);0<w&&w<1&&h.push(w)}let m=h.length;const v=m,_=nb(r,e,t,n,s,i,o,a);for(;m--;){const{x:y,y:C}=_(h[m]);d[0][m]=y,d[1][m]=C}d[0][v]=r,d[1][v]=e,d[0][v+1]=o,d[1][v+1]=a;const x=[new j(Math.min(...d[0]),Math.min(...d[1])),new j(Math.max(...d[0]),Math.max(...d[1]))];return He.cachesBoundsOfCurve&&(Ba.boundsOfCurveCache[l]=x),x}const v2=(r,e,t)=>{let[n,s,i,o,a,l,c,u]=t;const h=((d,f,g,p,m,v,_)=>{if(g===0||p===0)return[];let x=0,y=0,C=0;const E=Math.PI,b=_*xf,w=pr(b),S=gr(b),$=.5*(-S*d-w*f),N=.5*(-S*f+w*d),H=g**2,U=p**2,ee=N**2,re=$**2,te=H*U-H*ee-U*re;let z=Math.abs(g),R=Math.abs(p);if(te<0){const se=Math.sqrt(1-te/(H*U));z*=se,R*=se}else C=(m===v?-1:1)*Math.sqrt(te/(H*ee+U*re));const ue=C*z*N/R,de=-C*R*$/z,Ce=S*ue-w*de+.5*d,fe=w*ue+S*de+.5*f;let $e=Wp(1,0,($-ue)/z,(N-de)/R),Te=Wp(($-ue)/z,(N-de)/R,(-$-ue)/z,(-N-de)/R);v===0&&Te>0?Te-=2*E:v===1&&Te<0&&(Te+=2*E);const De=Math.ceil(Math.abs(Te/E*2)),ve=[],M=Te/De,D=8/3*Math.sin(M/4)*Math.sin(M/4)/Math.sin(M/2);let B=$e+M;for(let se=0;se<De;se++)ve[se]=m2($e,B,S,w,z,R,Ce,fe,D,x,y),x=ve[se][5],y=ve[se][6],$e=B,B+=M;return ve})(c-r,u-e,s,i,a,l,o);for(let d=0,f=h.length;d<f;d++)h[d][1]+=r,h[d][2]+=e,h[d][3]+=r,h[d][4]+=e,h[d][5]+=r,h[d][6]+=e;return h},tb=r=>{let e=0,t=0,n=0,s=0;const i=[];let o,a=0,l=0;for(const c of r){const u=[...c];let h;switch(u[0]){case"l":u[1]+=e,u[2]+=t;case"L":e=u[1],t=u[2],h=["L",e,t];break;case"h":u[1]+=e;case"H":e=u[1],h=["L",e,t];break;case"v":u[1]+=t;case"V":t=u[1],h=["L",e,t];break;case"m":u[1]+=e,u[2]+=t;case"M":e=u[1],t=u[2],n=u[1],s=u[2],h=["M",e,t];break;case"c":u[1]+=e,u[2]+=t,u[3]+=e,u[4]+=t,u[5]+=e,u[6]+=t;case"C":a=u[3],l=u[4],e=u[5],t=u[6],h=["C",u[1],u[2],a,l,e,t];break;case"s":u[1]+=e,u[2]+=t,u[3]+=e,u[4]+=t;case"S":o==="C"?(a=2*e-a,l=2*t-l):(a=e,l=t),e=u[3],t=u[4],h=["C",a,l,u[1],u[2],e,t],a=h[3],l=h[4];break;case"q":u[1]+=e,u[2]+=t,u[3]+=e,u[4]+=t;case"Q":a=u[1],l=u[2],e=u[3],t=u[4],h=["Q",a,l,e,t];break;case"t":u[1]+=e,u[2]+=t;case"T":o==="Q"?(a=2*e-a,l=2*t-l):(a=e,l=t),e=u[1],t=u[2],h=["Q",a,l,e,t];break;case"a":u[6]+=e,u[7]+=t;case"A":v2(e,t,u).forEach(d=>i.push(d)),e=u[6],t=u[7];break;case"z":case"Z":e=n,t=s,h=["Z"]}h?(i.push(h),o=h[0]):o=""}return i},Xc=(r,e,t,n)=>Math.sqrt((t-r)**2+(n-e)**2),nb=(r,e,t,n,s,i,o,a)=>l=>{const c=l**3,u=(f=>3*f**2*(1-f))(l),h=(f=>3*f*(1-f)**2)(l),d=(f=>(1-f)**3)(l);return new j(o*c+s*u+t*h+r*d,a*c+i*u+n*h+e*d)},rb=r=>r**2,sb=r=>2*r*(1-r),ib=r=>(1-r)**2,y2=(r,e,t,n,s,i,o,a)=>l=>{const c=rb(l),u=sb(l),h=ib(l),d=3*(h*(t-r)+u*(s-t)+c*(o-s)),f=3*(h*(n-e)+u*(i-n)+c*(a-i));return Math.atan2(f,d)},b2=(r,e,t,n,s,i)=>o=>{const a=rb(o),l=sb(o),c=ib(o);return new j(s*a+t*l+r*c,i*a+n*l+e*c)},_2=(r,e,t,n,s,i)=>o=>{const a=1-o,l=2*(a*(t-r)+o*(s-t)),c=2*(a*(n-e)+o*(i-n));return Math.atan2(c,l)},Yp=(r,e,t)=>{let n=new j(e,t),s=0;for(let i=1;i<=100;i+=1){const o=r(i/100);s+=Xc(n.x,n.y,o.x,o.y),n=o}return s},x2=(r,e)=>{let t,n=0,s=0,i={x:r.x,y:r.y},o=A({},i),a=.01,l=0;const c=r.iterator,u=r.angleFinder;for(;s<e&&a>1e-4;)o=c(n),l=n,t=Xc(i.x,i.y,o.x,o.y),t+s>e?(n-=a,a/=2):(i=o,n+=a,s+=t);return A(A({},o),{},{angle:u(l)})},Vf=r=>{let e,t,n=0,s=0,i=0,o=0,a=0;const l=[];for(const c of r){const u={x:s,y:i,command:c[0],length:0};switch(c[0]){case"M":t=u,t.x=o=s=c[1],t.y=a=i=c[2];break;case"L":t=u,t.length=Xc(s,i,c[1],c[2]),s=c[1],i=c[2];break;case"C":e=nb(s,i,c[1],c[2],c[3],c[4],c[5],c[6]),t=u,t.iterator=e,t.angleFinder=y2(s,i,c[1],c[2],c[3],c[4],c[5],c[6]),t.length=Yp(e,s,i),s=c[5],i=c[6];break;case"Q":e=b2(s,i,c[1],c[2],c[3],c[4]),t=u,t.iterator=e,t.angleFinder=_2(s,i,c[1],c[2],c[3],c[4]),t.length=Yp(e,s,i),s=c[3],i=c[4];break;case"Z":t=u,t.destX=o,t.destY=a,t.length=Xc(s,i,o,a),s=o,i=a}n+=t.length,l.push(t)}return l.push({length:n,x:s,y:i}),l},ob=function(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Vf(r),n=0;for(;e-t[n].length>0&&n<t.length-2;)e-=t[n].length,n++;const s=t[n],i=e/s.length,o=r[n];switch(s.command){case"M":return{x:s.x,y:s.y,angle:0};case"Z":return A(A({},new j(s.x,s.y).lerp(new j(s.destX,s.destY),i)),{},{angle:Math.atan2(s.destY-s.y,s.destX-s.x)});case"L":return A(A({},new j(s.x,s.y).lerp(new j(o[1],o[2]),i)),{},{angle:Math.atan2(o[2]-s.y,o[1]-s.x)});case"C":case"Q":return x2(s,e)}},C2=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),Xp=new RegExp(g2,"g"),w2=new RegExp(Li,"gi"),S2={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},ab=r=>{var e;const t=[],n=(e=r.match(C2))!==null&&e!==void 0?e:[];for(const s of n){const i=s[0];if(i==="z"||i==="Z"){t.push([i]);continue}const o=S2[i.toLowerCase()];let a=[];if(i==="a"||i==="A"){Xp.lastIndex=0;for(let l=null;l=Xp.exec(s);)a.push(...l.slice(1))}else a=s.match(w2)||[];for(let l=0;l<a.length;l+=o){const c=new Array(o),u=p2[i];c[0]=l>0&&u?u:i;for(let h=0;h<o;h++)c[h+1]=parseFloat(a[l+h]);t.push(c)}}return t},T2=function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=new j(r[0]),n=new j(r[1]),s=1,i=0;const o=[],a=r.length,l=a>2;let c;for(l&&(s=r[2].x<n.x?-1:r[2].x===n.x?0:1,i=r[2].y<n.y?-1:r[2].y===n.y?0:1),o.push(["M",t.x-s*e,t.y-i*e]),c=1;c<a;c++){if(!t.eq(n)){const u=t.midPointFrom(n);o.push(["Q",t.x,t.y,u.x,u.y])}t=r[c],c+1<r.length&&(n=r[c+1])}return l&&(s=t.x>r[c-2].x?1:t.x===r[c-2].x?0:-1,i=t.y>r[c-2].y?1:t.y===r[c-2].y?0:-1),o.push(["L",t.x+s*e,t.y+i*e]),o},lb=(r,e)=>r.map(t=>t.map((n,s)=>s===0||e===void 0?n:ot(n,e)).join(" ")).join(" ");function Uc(r,e){const t=r.style;t&&e&&(typeof e=="string"?t.cssText+=";"+e:Object.entries(e).forEach(n=>{let[s,i]=n;return t.setProperty(s,i)}))}const O2=(r,e)=>Math.floor(Math.random()*(e-r+1))+r;function E2(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const t=e.onComplete||wi,n=new(Ou()).XMLHttpRequest,s=e.signal,i=function(){n.abort()},o=function(){s&&s.removeEventListener("abort",i),n.onerror=n.ontimeout=wi};if(s&&s.aborted)throw new Z0("request");return s&&s.addEventListener("abort",i,{once:!0}),n.onreadystatechange=function(){n.readyState===4&&(o(),t(n),n.onreadystatechange=wi)},n.onerror=n.ontimeout=o,n.open("get",r,!0),n.send(),n}const M2=(r,e)=>{let t=r._findCenterFromElement();r.transformMatrix&&((n=>{if(n.transformMatrix){const{scaleX:s,scaleY:i,angle:o,skewX:a}=Po(n.transformMatrix);n.flipX=!1,n.flipY=!1,n.set(vn,s),n.set(Nn,i),n.angle=o,n.skewX=a,n.skewY=0}})(r),t=t.transform(r.transformMatrix)),delete r.transformMatrix,e&&(r.scaleX*=e.scaleX,r.scaleY*=e.scaleY,r.cropX=e.cropX,r.cropY=e.cropY,t.x+=e.offsetLeft,t.y+=e.offsetTop,r.width=e.width,r.height=e.height),r.setPositionByOrigin(t,Fe,Fe)};var cr=Object.freeze({__proto__:null,addTransformToObject:vy,animate:Bf,animateColor:My,applyTransformToObject:Fo,calcAngleBetweenVectors:Vc,calcDimensionsMatrix:Tl,calcPlaneChangeMatrix:Ml,calcVectorRotation:Ty,cancelAnimFrame:iy,capValue:Bi,composeMatrix:uy,copyCanvasElement:r=>{var e;const t=mr(r);return(e=t.getContext("2d"))===null||e===void 0||e.drawImage(r,0,0),t},cos:gr,createCanvasElement:nr,createImage:oy,createRotateMatrix:Yo,createScaleMatrix:Au,createSkewXMatrix:Mf,createSkewYMatrix:Pf,createTranslateMatrix:Wo,createVector:$c,crossProduct:vo,degreesToRadians:gt,dotProduct:Oy,ease:TT,enlivenObjectEnlivables:Ol,enlivenObjects:Ao,findScaleToCover:eb,findScaleToFit:Qy,getBoundsOfCurve:Sd,getOrthonormalVector:If,getPathSegmentsInfo:Vf,getPointOnPath:ob,getPointer:my,getRandomInt:O2,getRegularPolygonPath:(r,e)=>{const t=2*Math.PI/r;let n=-$s;r%2==0&&(n+=t/2);const s=new Array(r+1);for(let i=0;i<r;i++){const o=i*t+n,{x:a,y:l}=new j(gr(o),pr(o)).scalarMultiply(e);s[i]=[i===0?"M":"L",a,l]}return s[r]=["Z"],s},getSmoothPathFromPoints:T2,getSvgAttributes:r=>{const e=["instantiated_by_use","style","id","class"];switch(r){case"linearGradient":return e.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);case"radialGradient":return e.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);case"stop":return e.concat(["offset","stop-color","stop-opacity"])}return e},getUnitVector:Du,groupSVGElements:(r,e)=>r&&r.length===1?r[0]:new er(r,e),hasStyleChanged:Bu,invertTransform:Ln,isBetweenVectors:md,isIdentityMatrix:ay,isTouchEvent:zc,isTransparent:Wy,joinPath:lb,loadImage:za,magnitude:Nc,makeBoundingBoxFromPoints:Ir,makePathSimpler:tb,matrixToSVG:ol,mergeClipPaths:(r,e)=>{var t;let n=r,s=e;n.inverted&&!s.inverted&&(n=e,s=r),pd(s,(t=s.group)===null||t===void 0?void 0:t.calcTransformMatrix(),n.calcTransformMatrix());const i=n.inverted&&s.inverted;return i&&(n.inverted=s.inverted=!1),new er([n],{clipPath:s,inverted:i})},multiplyTransformMatrices:pt,multiplyTransformMatrixArray:Pu,parsePath:ab,parsePreserveAspectRatioAttribute:hy,parseUnit:Si,pick:Ni,projectStrokeOnPoints:Xy,qrDecompose:Po,radiansToDegrees:Vs,removeFromArray:ui,removeTransformFromObject:(r,e)=>{const t=Ln(e),n=pt(t,r.calcOwnMatrix());Fo(r,n)},removeTransformMatrixForSvgParsing:M2,request:E2,requestAnimFrame:ja,resetObjectTransform:yy,rotatePoint:(r,e,t)=>r.rotate(t,e),rotateVector:Df,saveObjectTransform:Ff,sendObjectToPlane:pd,sendPointToPlane:as,sendVectorToPlane:by,setStyle:Uc,sin:pr,sizeAfterTransform:Fu,string:NT,stylesFromArray:qy,stylesToArray:Gy,toBlob:Ef,toDataURL:Of,toFixed:ot,transformPath:(r,e,t)=>(t&&(e=pt(e,[1,0,0,1,-t.x,-t.y])),r.map(n=>{const s=[...n];for(let i=1;i<n.length-1;i+=2){const{x:o,y:a}=Jt({x:n[i],y:n[i+1]},e);s[i]=o,s[i+1]=a}return s})),transformPoint:Jt});class P2 extends py{constructor(e){let{allowTouchScrolling:t=!1,containerClass:n=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e),F(this,"upper",void 0),F(this,"container",void 0);const{el:s}=this.lower,i=this.createUpperCanvas();this.upper={el:i,ctx:i.getContext("2d")},this.applyCanvasStyle(s,{allowTouchScrolling:t}),this.applyCanvasStyle(i,{allowTouchScrolling:t,styles:{position:"absolute",left:"0",top:"0"}});const o=this.createContainerElement();o.classList.add(n),s.parentNode&&s.parentNode.replaceChild(o,s),o.append(s,i),this.container=o}createUpperCanvas(){const{el:e}=this.lower,t=nr();return t.className=e.className,t.classList.remove("lower-canvas"),t.classList.add("upper-canvas"),t.setAttribute("data-fabric","top"),t.style.cssText=e.style.cssText,t.setAttribute("draggable","true"),t}createContainerElement(){const e=$o().createElement("div");return e.setAttribute("data-fabric","wrapper"),Uc(e,{position:"relative"}),Ep(e),e}applyCanvasStyle(e,t){const{styles:n,allowTouchScrolling:s}=t;Uc(e,A(A({},n),{},{"touch-action":s?"manipulation":wn})),Ep(e)}setDimensions(e,t){super.setDimensions(e,t);const{el:n,ctx:s}=this.upper;gy(n,s,e,t)}setCSSDimensions(e){super.setCSSDimensions(e),fd(this.upper.el,e),fd(this.container,e)}cleanupDOM(e){const t=this.container,{el:n}=this.lower,{el:s}=this.upper;super.cleanupDOM(e),t.removeChild(s),t.removeChild(n),t.parentNode&&t.parentNode.replaceChild(n,t)}dispose(){super.dispose(),Hr().dispose(this.upper.el),delete this.upper,delete this.container}}class zu extends El{constructor(){super(...arguments),F(this,"targets",[]),F(this,"_hoveredTargets",[]),F(this,"_objectsToRender",void 0),F(this,"_currentTransform",null),F(this,"_groupSelector",null),F(this,"contextTopDirty",!1)}static getDefaults(){return A(A({},super.getDefaults()),zu.ownDefaults)}get upperCanvasEl(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.el}get contextTop(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.ctx}get wrapperEl(){return this.elements.container}initElements(e){this.elements=new P2(e,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(e){this._objectsToRender=void 0,super._onObjectAdded(e)}_onObjectRemoved(e){this._objectsToRender=void 0,e===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[e]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[e]}),e.fire("deselected",{target:e})),e===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(e)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const e=this._activeObject;return!this.preserveObjectStacking&&e?this._objects.filter(t=>!t.group&&t!==e).concat(e):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()}renderTop(){const e=this.contextTop;this.clearContext(e),this.renderTopLayer(e),this.fire("after:render",{ctx:e})}setTargetFindTolerance(e){e=Math.round(e),this.targetFindTolerance=e;const t=this.getRetinaScaling(),n=Math.ceil((2*e+1)*t);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=n,this.pixelFindContext.scale(t,t)}isTargetTransparent(e,t,n){const s=this.targetFindTolerance,i=this.pixelFindContext;this.clearContext(i),i.save(),i.translate(-t+s,-n+s),i.transform(...this.viewportTransform);const o=e.selectionBackgroundColor;e.selectionBackgroundColor="",e.render(i),e.selectionBackgroundColor=o,i.restore();const a=Math.round(s*this.getRetinaScaling());return Wy(i,a,a,a)}_isSelectionKeyPressed(e){const t=this.selectionKey;return!!t&&(Array.isArray(t)?!!t.find(n=>!!n&&e[n]===!0):e[t])}_shouldClearSelection(e,t){const n=this.getActiveObjects(),s=this._activeObject;return!!(!t||t&&s&&n.length>1&&n.indexOf(t)===-1&&s!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&s&&s!==t)}_shouldCenterTransform(e,t,n){if(!e)return;let s;return t===Mu||t===vn||t===Nn||t===il?s=this.centeredScaling||e.centeredScaling:t===Sf&&(s=this.centeredRotation||e.centeredRotation),s?!n:n}_getOriginFromCorner(e,t){const n={x:e.originX,y:e.originY};return t&&(["ml","tl","bl"].includes(t)?n.x=_t:["mr","tr","br"].includes(t)&&(n.x=Xe),["tl","mt","tr"].includes(t)?n.y=dd:["bl","mb","br"].includes(t)&&(n.y=Cn)),n}_setupCurrentTransform(e,t,n){var s;const i=t.group?as(this.getScenePoint(e),void 0,t.group.calcTransformMatrix()):this.getScenePoint(e),{key:o="",control:a}=t.getActiveControl()||{},l=n&&a?(s=a.getActionHandler(e,t,a))===null||s===void 0?void 0:s.bind(a):Cy,c=((f,g,p,m)=>{if(!g||!f)return"drag";const v=m.controls[g];return v.getActionName(p,v,m)})(n,o,e,t),u=e[this.centeredKey],h=this._shouldCenterTransform(t,c,u)?{x:Fe,y:Fe}:this._getOriginFromCorner(t,o),d={target:t,action:c,actionHandler:l,actionPerformed:!1,corner:o,scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,offsetX:i.x-t.left,offsetY:i.y-t.top,originX:h.x,originY:h.y,ex:i.x,ey:i.y,lastX:i.x,lastY:i.y,theta:gt(t.angle),width:t.width,height:t.height,shiftKey:e.shiftKey,altKey:u,original:A(A({},Ff(t)),{},{originX:h.x,originY:h.y})};this._currentTransform=d,this.fire("before:transform",{e,transform:d})}setCursor(e){this.upperCanvasEl.style.cursor=e}_drawSelection(e){const{x:t,y:n,deltaX:s,deltaY:i}=this._groupSelector,o=new j(t,n).transform(this.viewportTransform),a=new j(t+s,n+i).transform(this.viewportTransform),l=this.selectionLineWidth/2;let c=Math.min(o.x,a.x),u=Math.min(o.y,a.y),h=Math.max(o.x,a.x),d=Math.max(o.y,a.y);this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(c,u,h-c,d-u)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,c+=l,u+=l,h-=l,d-=l,jt.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(c,u,h-c,d-u))}findTarget(e){if(this.skipTargetFind)return;const t=this.getViewportPoint(e),n=this._activeObject,s=this.getActiveObjects();if(this.targets=[],n&&s.length>=1){if(n.findControl(t,zc(e))||s.length>1&&this.searchPossibleTargets([n],t))return n;if(n===this.searchPossibleTargets([n],t)){if(this.preserveObjectStacking){const i=this.targets;this.targets=[];const o=this.searchPossibleTargets(this._objects,t);return e[this.altSelectionKey]&&o&&o!==n?(this.targets=i,n):o}return n}}return this.searchPossibleTargets(this._objects,t)}_pointIsInObjectSelectionArea(e,t){let n=e.getCoords();const s=this.getZoom(),i=e.padding/s;if(i){const[o,a,l,c]=n,u=Math.atan2(a.y-o.y,a.x-o.x),h=gr(u)*i,d=pr(u)*i,f=h+d,g=h-d;n=[new j(o.x-g,o.y-f),new j(a.x+f,a.y-g),new j(l.x+g,l.y+f),new j(c.x-f,c.y+g)]}return ct.isPointInPolygon(t,n)}_checkTarget(e,t){return!!(e&&e.visible&&e.evented&&this._pointIsInObjectSelectionArea(e,as(t,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing||!this.isTargetTransparent(e,t.x,t.y)))}_searchPossibleTargets(e,t){let n=e.length;for(;n--;){const s=e[n];if(this._checkTarget(s,t)){if(dc(s)&&s.subTargetCheck){const i=this._searchPossibleTargets(s._objects,t);i&&this.targets.push(i)}return s}}}searchPossibleTargets(e,t){const n=this._searchPossibleTargets(e,t);if(n&&dc(n)&&n.interactive&&this.targets[0]){const s=this.targets;for(let i=s.length-1;i>0;i--){const o=s[i];if(!dc(o)||!o.interactive)return o}return s[0]}return n}getViewportPoint(e){return this._pointer?this._pointer:this.getPointer(e,!0)}getScenePoint(e){return this._absolutePointer?this._absolutePointer:this.getPointer(e)}getPointer(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const n=this.upperCanvasEl,s=n.getBoundingClientRect();let i=my(e),o=s.width||0,a=s.height||0;o&&a||(Cn in s&&dd in s&&(a=Math.abs(s.top-s.bottom)),_t in s&&Xe in s&&(o=Math.abs(s.right-s.left))),this.calcOffset(),i.x=i.x-this._offset.left,i.y=i.y-this._offset.top,t||(i=as(i,void 0,this.viewportTransform));const l=this.getRetinaScaling();l!==1&&(i.x/=l,i.y/=l);const c=o===0||a===0?new j(1,1):new j(n.width/o,n.height/a);return i.multiply(c)}_setDimensionsImpl(e,t){this._resetTransformEventData(),super._setDimensionsImpl(e,t),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=nr(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const e=this._activeObject;return hi(e)?e.getObjects():e?[e]:[]}_fireSelectionEvents(e,t){let n=!1,s=!1;const i=this.getActiveObjects(),o=[],a=[];e.forEach(l=>{i.includes(l)||(n=!0,l.fire("deselected",{e:t,target:l}),a.push(l))}),i.forEach(l=>{e.includes(l)||(n=!0,l.fire("selected",{e:t,target:l}),o.push(l))}),e.length>0&&i.length>0?(s=!0,n&&this.fire("selection:updated",{e:t,selected:o,deselected:a})):i.length>0?(s=!0,this.fire("selection:created",{e:t,selected:o})):e.length>0&&(s=!0,this.fire("selection:cleared",{e:t,deselected:a})),s&&(this._objectsToRender=void 0)}setActiveObject(e,t){const n=this.getActiveObjects(),s=this._setActiveObject(e,t);return this._fireSelectionEvents(n,t),s}_setActiveObject(e,t){const n=this._activeObject;return n!==e&&!(!this._discardActiveObject(t,e)&&this._activeObject)&&!e.onSelect({e:t})&&(this._activeObject=e,hi(e)&&n!==e&&e.set("canvas",this),e.setCoords(),!0)}_discardActiveObject(e,t){const n=this._activeObject;return!!n&&!n.onDeselect({e,object:t})&&(this._currentTransform&&this._currentTransform.target===n&&this.endCurrentTransform(e),hi(n)&&n===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(e){const t=this.getActiveObjects(),n=this.getActiveObject();t.length&&this.fire("before:selection:cleared",{e,deselected:[n]});const s=this._discardActiveObject(e);return this._fireSelectionEvents(t,e),s}endCurrentTransform(e){const t=this._currentTransform;this._finalizeCurrentTransform(e),t&&t.target&&(t.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(e){const t=this._currentTransform,n=t.target,s={e,target:n,transform:t,action:t.action};n._scaling&&(n._scaling=!1),n.setCoords(),t.actionPerformed&&(this.fire("object:modified",s),n.fire(Bc,s))}setViewportTransform(e){super.setViewportTransform(e);const t=this._activeObject;t&&t.setCoords()}destroy(){const e=this._activeObject;hi(e)&&(e.removeAll(),e.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(e){const t=this._activeObject;t&&t._renderControls(e)}_toObject(e,t,n){const s=this._realizeGroupTransformOnObject(e),i=super._toObject(e,t,n);return e.set(s),i}_realizeGroupTransformOnObject(e){const{group:t}=e;if(t&&hi(t)&&this._activeObject===t){const n=Ni(e,["angle","flipX","flipY",Xe,vn,Nn,No,Vo,Cn]);return vy(e,t.calcOwnMatrix()),n}return{}}_setSVGObject(e,t,n){const s=this._realizeGroupTransformOnObject(t);super._setSVGObject(e,t,n),t.set(s)}}F(zu,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class A2{constructor(e){F(this,"targets",[]),F(this,"__disposer",void 0);const t=()=>{const{hiddenTextarea:s}=e.getActiveObject()||{};s&&s.focus()},n=e.upperCanvasEl;n.addEventListener("click",t),this.__disposer=()=>n.removeEventListener("click",t)}exitTextEditing(){this.target=void 0,this.targets.forEach(e=>{e.isEditing&&e.exitEditing()})}add(e){this.targets.push(e)}remove(e){this.unregister(e),ui(this.targets,e)}register(e){this.target=e}unregister(e){e===this.target&&(this.target=void 0)}onMouseMove(e){var t;!((t=this.target)===null||t===void 0)&&t.isEditing&&this.target.updateSelectionOnMouseMove(e)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const F2=["target","oldTarget","fireCanvas","e"],Fn={passive:!1},Ji=(r,e)=>{const t=r.getViewportPoint(e),n=r.getScenePoint(e);return{viewportPoint:t,scenePoint:n,pointer:t,absolutePointer:n}},bs=function(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return r.addEventListener(...t)},Un=function(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return r.removeEventListener(...t)},k2={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class cl extends zu{constructor(e){super(e,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),F(this,"_isClick",void 0),F(this,"textEditingManager",new A2(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onDoubleClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(t=>{this[t]=this[t].bind(this)}),this.addOrRemove(bs,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(e,t){const n=this.upperCanvasEl,s=this._getEventPrefix();e(fy(n),"resize",this._onResize),e(n,s+"down",this._onMouseDown),e(n,"".concat(s,"move"),this._onMouseMove,Fn),e(n,"".concat(s,"out"),this._onMouseOut),e(n,"".concat(s,"enter"),this._onMouseEnter),e(n,"wheel",this._onMouseWheel),e(n,"contextmenu",this._onContextMenu),e(n,"dblclick",this._onDoubleClick),e(n,"dragstart",this._onDragStart),e(n,"dragend",this._onDragEnd),e(n,"dragover",this._onDragOver),e(n,"dragenter",this._onDragEnter),e(n,"dragleave",this._onDragLeave),e(n,"drop",this._onDrop),this.enablePointerEvents||e(n,"touchstart",this._onTouchStart,Fn)}removeListeners(){this.addOrRemove(Un,"remove");const e=this._getEventPrefix(),t=ir(this.upperCanvasEl);Un(t,"".concat(e,"up"),this._onMouseUp),Un(t,"touchend",this._onTouchEnd,Fn),Un(t,"".concat(e,"move"),this._onMouseMove,Fn),Un(t,"touchmove",this._onMouseMove,Fn),clearTimeout(this._willAddMouseDown)}_onMouseWheel(e){this.__onMouseWheel(e)}_onMouseOut(e){const t=this._hoveredTarget,n=A({e},Ji(this,e));this.fire("mouse:out",A(A({},n),{},{target:t})),this._hoveredTarget=void 0,t&&t.fire("mouseout",A({},n)),this._hoveredTargets.forEach(s=>{this.fire("mouse:out",A(A({},n),{},{target:s})),s&&s.fire("mouseout",A({},n))}),this._hoveredTargets=[]}_onMouseEnter(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",A({e},Ji(this,e))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(e){this._isClick=!1;const t=this.getActiveObject();if(t&&t.onDragStart(e)){this._dragSource=t;const n={e,target:t};return this.fire("dragstart",n),t.fire("dragstart",n),void bs(this.upperCanvasEl,"drag",this._onDragProgress)}gd(e)}_renderDragEffects(e,t,n){let s=!1;const i=this._dropTarget;i&&i!==t&&i!==n&&(i.clearContextTop(),s=!0),t==null||t.clearContextTop(),n!==t&&(n==null||n.clearContextTop());const o=this.contextTop;o.save(),o.transform(...this.viewportTransform),t&&(o.save(),t.transform(o),t.renderDragSourceEffect(e),o.restore(),s=!0),n&&(o.save(),n.transform(o),n.renderDropTargetEffect(e),o.restore(),s=!0),o.restore(),s&&(this.contextTopDirty=!0)}_onDragEnd(e){const t=!!e.dataTransfer&&e.dataTransfer.dropEffect!==wn,n=t?this._activeObject:void 0,s={e,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:t,dropTarget:n};Un(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",s),this._dragSource&&this._dragSource.fire("dragend",s),delete this._dragSource,this._onMouseUp(e)}_onDragProgress(e){const t={e,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",t),this._dragSource&&this._dragSource.fire("drag",t)}findDragTargets(e){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(e)),targets:[...this.targets]}}_onDragOver(e){const t="dragover",{target:n,targets:s}=this.findDragTargets(e),i=this._dragSource,o={e,target:n,subTargets:s,dragSource:i,canDrop:!1,dropTarget:void 0};let a;this.fire(t,o),this._fireEnterLeaveEvents(n,o),n&&(n.canDrop(e)&&(a=n),n.fire(t,o));for(let l=0;l<s.length;l++){const c=s[l];c.canDrop(e)&&(a=c),c.fire(t,o)}this._renderDragEffects(e,i,a),this._dropTarget=a}_onDragEnter(e){const{target:t,targets:n}=this.findDragTargets(e),s={e,target:t,subTargets:n,dragSource:this._dragSource};this.fire("dragenter",s),this._fireEnterLeaveEvents(t,s)}_onDragLeave(e){const t={e,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",t),this._fireEnterLeaveEvents(void 0,t),this._renderDragEffects(e,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(e){const{target:t,targets:n}=this.findDragTargets(e),s=this._basicEventHandler("drop:before",A({e,target:t,subTargets:n,dragSource:this._dragSource},Ji(this,e)));s.didDrop=!1,s.dropTarget=void 0,this._basicEventHandler("drop",s),this.fire("drop:after",s)}_onContextMenu(e){const t=this.findTarget(e),n=this.targets||[],s=this._basicEventHandler("contextmenu:before",{e,target:t,subTargets:n});return this.stopContextMenu&&gd(e),this._basicEventHandler("contextmenu",s),!1}_onDoubleClick(e){this._cacheTransformEventData(e),this._handleEvent(e,"dblclick"),this._resetTransformEventData()}getPointerId(e){const t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1}_isMainEvent(e){return e.isPrimary===!0||e.isPrimary!==!1&&(e.type==="touchend"&&e.touches.length===0||!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(e){let t=!this.allowTouchScrolling;const n=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e),(this.isDrawingMode||n&&this._target===n)&&(t=!0),t&&e.preventDefault(),this._resetTransformEventData();const s=this.upperCanvasEl,i=this._getEventPrefix(),o=ir(s);bs(o,"touchend",this._onTouchEnd,Fn),t&&bs(o,"touchmove",this._onMouseMove,Fn),Un(s,"".concat(i,"down"),this._onMouseDown)}_onMouseDown(e){this.__onMouseDown(e),this._resetTransformEventData();const t=this.upperCanvasEl,n=this._getEventPrefix();Un(t,"".concat(n,"move"),this._onMouseMove,Fn);const s=ir(t);bs(s,"".concat(n,"up"),this._onMouseUp),bs(s,"".concat(n,"move"),this._onMouseMove,Fn)}_onTouchEnd(e){if(e.touches.length>0)return;this.__onMouseUp(e),this._resetTransformEventData(),delete this.mainTouchId;const t=this._getEventPrefix(),n=ir(this.upperCanvasEl);Un(n,"touchend",this._onTouchEnd,Fn),Un(n,"touchmove",this._onMouseMove,Fn),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{bs(this.upperCanvasEl,"".concat(t,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(e){this.__onMouseUp(e),this._resetTransformEventData();const t=this.upperCanvasEl,n=this._getEventPrefix();if(this._isMainEvent(e)){const s=ir(this.upperCanvasEl);Un(s,"".concat(n,"up"),this._onMouseUp),Un(s,"".concat(n,"move"),this._onMouseMove,Fn),bs(t,"".concat(n,"move"),this._onMouseMove,Fn)}}_onMouseMove(e){const t=this.getActiveObject();!this.allowTouchScrolling&&(!t||!t.shouldStartDragging(e))&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(e){const t=this.getActiveObject();return!!t!=!!e||t&&e&&t!==e}__onMouseUp(e){var t;this._cacheTransformEventData(e),this._handleEvent(e,"up:before");const n=this._currentTransform,s=this._isClick,i=this._target,{button:o}=e;if(o)return(this.fireMiddleClick&&o===1||this.fireRightClick&&o===2)&&this._handleEvent(e,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(e);if(!this._isMainEvent(e))return;let a,l,c=!1;if(n&&(this._finalizeCurrentTransform(e),c=n.actionPerformed),!s){const u=i===this._activeObject;this.handleSelection(e),c||(c=this._shouldRender(i)||!u&&i===this._activeObject)}if(i){const u=i.findControl(this.getViewportPoint(e),zc(e)),{key:h,control:d}=u||{};if(l=h,i.selectable&&i!==this._activeObject&&i.activeOn==="up")this.setActiveObject(i,e),c=!0;else if(d){const f=d.getMouseUpHandler(e,i,d);f&&(a=this.getScenePoint(e),f.call(d,e,n,a.x,a.y))}i.isMoving=!1}if(n&&(n.target!==i||n.corner!==l)){const u=n.target&&n.target.controls[n.corner],h=u&&u.getMouseUpHandler(e,n.target,u);a=a||this.getScenePoint(e),h&&h.call(u,e,n,a.x,a.y)}this._setCursorFromEvent(e,i),this._handleEvent(e,"up"),this._groupSelector=null,this._currentTransform=null,i&&(i.__corner=void 0),c?this.requestRenderAll():s||(t=this._activeObject)!==null&&t!==void 0&&t.isEditing||this.renderTop()}_basicEventHandler(e,t){const{target:n,subTargets:s=[]}=t;this.fire(e,t),n&&n.fire(e,t);for(let i=0;i<s.length;i++)s[i]!==n&&s[i].fire(e,t);return t}_handleEvent(e,t){const n=this._target,s=this.targets||[],i=A(A({e,target:n,subTargets:s},Ji(this,e)),{},{transform:this._currentTransform},t==="up:before"||t==="up"?{isClick:this._isClick,currentTarget:this.findTarget(e),currentSubTargets:this.targets}:{});this.fire("mouse:".concat(t),i),n&&n.fire("mouse".concat(t),i);for(let o=0;o<s.length;o++)s[o]!==n&&s[o].fire("mouse".concat(t),i)}_onMouseDownInDrawingMode(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(e),this.requestRenderAll());const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(t,{e,pointer:t}),this._handleEvent(e,"down")}_onMouseMoveInDrawingMode(e){if(this._isCurrentlyDrawing){const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(t,{e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")}_onMouseUpInDrawingMode(e){const t=this.getScenePoint(e);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e,pointer:t}):this._isCurrentlyDrawing=!1,this._handleEvent(e,"up")}__onMouseDown(e){this._isClick=!0,this._cacheTransformEventData(e),this._handleEvent(e,"down:before");let t=this._target;const{button:n}=e;if(n)return(this.fireMiddleClick&&n===1||this.fireRightClick&&n===2)&&this._handleEvent(e,"down"),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(e);if(!this._isMainEvent(e)||this._currentTransform)return;let s=this._shouldRender(t),i=!1;if(this.handleMultiSelection(e,t)?(t=this._activeObject,i=!0,s=!0):this._shouldClearSelection(e,t)&&this.discardActiveObject(e),this.selection&&(!t||!t.selectable&&!t.isEditing&&t!==this._activeObject)){const o=this.getScenePoint(e);this._groupSelector={x:o.x,y:o.y,deltaY:0,deltaX:0}}if(t){const o=t===this._activeObject;t.selectable&&t.activeOn==="down"&&this.setActiveObject(t,e);const a=t.findControl(this.getViewportPoint(e),zc(e));if(t===this._activeObject&&(a||!i)){this._setupCurrentTransform(e,t,o);const l=a?a.control:void 0,c=this.getScenePoint(e),u=l&&l.getMouseDownHandler(e,t,l);u&&u.call(l,e,this._currentTransform,c.x,c.y)}}s&&(this._objectsToRender=void 0),this._handleEvent(e,"down"),s&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(e){this._resetTransformEventData(),this._pointer=this.getViewportPoint(e),this._absolutePointer=as(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)}__onMouseMove(e){if(this._isClick=!1,this._cacheTransformEventData(e),this._handleEvent(e,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(e);if(!this._isMainEvent(e))return;const t=this._groupSelector;if(t){const n=this.getScenePoint(e);t.deltaX=n.x-t.x,t.deltaY=n.y-t.y,this.renderTop()}else if(this._currentTransform)this._transformObject(e);else{const n=this.findTarget(e);this._setCursorFromEvent(e,n),this._fireOverOutEvents(e,n)}this.textEditingManager.onMouseMove(e),this._handleEvent(e,"move"),this._resetTransformEventData()}_fireOverOutEvents(e,t){const n=this._hoveredTarget,s=this._hoveredTargets,i=this.targets,o=Math.max(s.length,i.length);this.fireSyntheticInOutEvents("mouse",{e,target:t,oldTarget:n,fireCanvas:!0});for(let a=0;a<o;a++)this.fireSyntheticInOutEvents("mouse",{e,target:i[a],oldTarget:s[a]});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(e,t){const n=this._draggedoverTarget,s=this._hoveredTargets,i=this.targets,o=Math.max(s.length,i.length);this.fireSyntheticInOutEvents("drag",A(A({},t),{},{target:e,oldTarget:n,fireCanvas:!0}));for(let a=0;a<o;a++)this.fireSyntheticInOutEvents("drag",A(A({},t),{},{target:i[a],oldTarget:s[a]}));this._draggedoverTarget=e}fireSyntheticInOutEvents(e,t){let{target:n,oldTarget:s,fireCanvas:i,e:o}=t,a=lt(t,F2);const{targetIn:l,targetOut:c,canvasIn:u,canvasOut:h}=k2[e],d=s!==n;if(s&&d){const f=A(A({},a),{},{e:o,target:s,nextTarget:n},Ji(this,o));i&&this.fire(h,f),s.fire(c,f)}if(n&&d){const f=A(A({},a),{},{e:o,target:n,previousTarget:s},Ji(this,o));i&&this.fire(u,f),n.fire(l,f)}}__onMouseWheel(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()}_transformObject(e){const t=this.getScenePoint(e),n=this._currentTransform,s=n.target,i=s.group?as(t,void 0,s.group.calcTransformMatrix()):t;n.shiftKey=e.shiftKey,n.altKey=!!this.centeredKey&&e[this.centeredKey],this._performTransformAction(e,n,i),n.actionPerformed&&this.requestRenderAll()}_performTransformAction(e,t,n){const{action:s,actionHandler:i,target:o}=t,a=!!i&&i(e,t,n.x,n.y);a&&o.setCoords(),s==="drag"&&a&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||a}_setCursorFromEvent(e,t){if(!t)return void this.setCursor(this.defaultCursor);let n=t.hoverCursor||this.hoverCursor;const s=hi(this._activeObject)?this._activeObject:null,i=(!s||t.group!==s)&&t.findControl(this.getViewportPoint(e));if(i){const o=i.control;this.setCursor(o.cursorStyleHandler(e,o,t))}else t.subTargetCheck&&this.targets.concat().reverse().map(o=>{n=o.hoverCursor||n}),this.setCursor(n)}handleMultiSelection(e,t){const n=this._activeObject,s=hi(n);if(n&&this._isSelectionKeyPressed(e)&&this.selection&&t&&t.selectable&&(n!==t||s)&&(s||!t.isDescendantOf(n)&&!n.isDescendantOf(t))&&!t.onSelect({e})&&!n.getActiveControl()){if(s){const i=n.getObjects();if(t===n){const o=this.getViewportPoint(e);if(!(t=this.searchPossibleTargets(i,o)||this.searchPossibleTargets(this._objects,o))||!t.selectable)return!1}t.group===n?(n.remove(t),this._hoveredTarget=t,this._hoveredTargets=[...this.targets],n.size()===1&&this._setActiveObject(n.item(0),e)):(n.multiSelectAdd(t),this._hoveredTarget=n,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(i,e)}else{n.isEditing&&n.exitEditing();const i=new(oe.getClass("ActiveSelection"))([],{canvas:this});i.multiSelectAdd(n,t),this._hoveredTarget=i,this._setActiveObject(i,e),this._fireSelectionEvents([n],e)}return!0}return!1}handleSelection(e){if(!this.selection||!this._groupSelector)return!1;const{x:t,y:n,deltaX:s,deltaY:i}=this._groupSelector,o=new j(t,n),a=o.add(new j(s,i)),l=o.min(a),c=o.max(a).subtract(l),u=this.collectObjects({left:l.x,top:l.y,width:c.x,height:c.y},{includeIntersecting:!this.selectionFullyContained}),h=o.eq(a)?u[0]?[u[0]]:[]:u.length>1?u.filter(d=>!d.onSelect({e})).reverse():u;if(h.length===1)this.setActiveObject(h[0],e);else if(h.length>1){const d=oe.getClass("ActiveSelection");this.setActiveObject(new d(h,{canvas:this}),e)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const cb={x1:0,y1:0,x2:0,y2:0},R2=A(A({},cb),{},{r1:0,r2:0}),ro=(r,e)=>isNaN(r)&&typeof e=="number"?e:r,D2=/^(\d+\.\d+)%|(\d+)%$/;function ub(r){return r&&D2.test(r)}function hb(r,e){const t=typeof r=="number"?r:typeof r=="string"?parseFloat(r)/(ub(r)?100:1):NaN;return Bi(0,ro(t,e),1)}const I2=/\s*;\s*/,L2=/\s*:\s*/;function B2(r,e){let t,n;const s=r.getAttribute("style");if(s){const o=s.split(I2);o[o.length-1]===""&&o.pop();for(let a=o.length;a--;){const[l,c]=o[a].split(L2).map(u=>u.trim());l==="stop-color"?t=c:l==="stop-opacity"&&(n=c)}}const i=new Ge(t||r.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:hb(r.getAttribute("offset"),0),color:i.toRgb(),opacity:ro(parseFloat(n||r.getAttribute("stop-opacity")||""),1)*i.getAlpha()*e}}function j2(r,e){const t=[],n=r.getElementsByTagName("stop"),s=hb(e,1);for(let i=n.length;i--;)t.push(B2(n[i],s));return t}function db(r){return r.nodeName==="linearGradient"||r.nodeName==="LINEARGRADIENT"?"linear":"radial"}function fb(r){return r.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function sr(r,e){return r.getAttribute(e)}function z2(r,e){return function(t,n){let s,{width:i,height:o,gradientUnits:a}=n;return Object.keys(t).reduce((l,c)=>{const u=t[c];return u==="Infinity"?s=1:u==="-Infinity"?s=0:(s=typeof u=="string"?parseFloat(u):u,typeof u=="string"&&ub(u)&&(s*=.01,a==="pixels"&&(c!=="x1"&&c!=="x2"&&c!=="r2"||(s*=i),c!=="y1"&&c!=="y2"||(s*=o)))),l[c]=s,l},{})}(db(r)==="linear"?function(t){return{x1:sr(t,"x1")||0,y1:sr(t,"y1")||0,x2:sr(t,"x2")||"100%",y2:sr(t,"y2")||0}}(r):function(t){return{x1:sr(t,"fx")||sr(t,"cx")||"50%",y1:sr(t,"fy")||sr(t,"cy")||"50%",r1:0,x2:sr(t,"cx")||"50%",y2:sr(t,"cy")||"50%",r2:sr(t,"r")||"50%"}}(r),A(A({},e),{},{gradientUnits:fb(r)}))}class Vl{constructor(e){const{type:t="linear",gradientUnits:n="pixels",coords:s={},colorStops:i=[],offsetX:o=0,offsetY:a=0,gradientTransform:l,id:c}=e||{};Object.assign(this,{type:t,gradientUnits:n,coords:A(A({},t==="radial"?R2:cb),s),colorStops:i,offsetX:o,offsetY:a,gradientTransform:l,id:c?"".concat(c,"_").concat(Ns()):Ns()})}addColorStop(e){for(const t in e){const n=new Ge(e[t]);this.colorStops.push({offset:parseFloat(t),color:n.toRgb(),opacity:n.getAlpha()})}return this}toObject(e){return A(A({},Ni(this,e)),{},{type:this.type,coords:A({},this.coords),colorStops:this.colorStops.map(t=>A({},t)),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(e){let{additionalTransform:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=[],s=this.gradientTransform?this.gradientTransform.concat():mn.concat(),i=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",o=this.colorStops.map(h=>A({},h)).sort((h,d)=>h.offset-d.offset);let a=-this.offsetX,l=-this.offsetY;var c;i==="objectBoundingBox"?(a/=e.width,l/=e.height):(a+=e.width/2,l+=e.height/2),(c=e)&&typeof c._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(a-=e.pathOffset.x,l-=e.pathOffset.y),s[4]-=a,s[5]-=l;const u=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(i,'"'),'gradientTransform="'.concat(t?t+" ":"").concat(ol(s),'"'),""].join(" ");if(this.type==="linear"){const{x1:h,y1:d,x2:f,y2:g}=this.coords;n.push("<linearGradient ",u,' x1="',h,'" y1="',d,'" x2="',f,'" y2="',g,`">
`)}else if(this.type==="radial"){const{x1:h,y1:d,x2:f,y2:g,r1:p,r2:m}=this.coords,v=p>m;n.push("<radialGradient ",u,' cx="',v?h:f,'" cy="',v?d:g,'" r="',v?p:m,'" fx="',v?f:h,'" fy="',v?g:d,`">
`),v&&(o.reverse(),o.forEach(x=>{x.offset=1-x.offset}));const _=Math.min(p,m);if(_>0){const x=_/Math.max(p,m);o.forEach(y=>{y.offset+=x*(1-y.offset)})}}return o.forEach(h=>{let{color:d,offset:f,opacity:g}=h;n.push("<stop ",'offset="',100*f+"%",'" style="stop-color:',d,g!==void 0?";stop-opacity: "+g:";",`"/>
`)}),n.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),n.join("")}toLive(e){const{x1:t,y1:n,x2:s,y2:i,r1:o,r2:a}=this.coords,l=this.type==="linear"?e.createLinearGradient(t,n,s,i):e.createRadialGradient(t,n,o,s,i,a);return this.colorStops.forEach(c=>{let{color:u,opacity:h,offset:d}=c;l.addColorStop(d,h!==void 0?new Ge(u).setAlpha(h).toRgba():u)}),l}static async fromObject(e){const{colorStops:t,gradientTransform:n}=e;return new this(A(A({},e),{},{colorStops:t?t.map(s=>A({},s)):void 0,gradientTransform:n?[...n]:void 0}))}static fromElement(e,t,n){const s=fb(e),i=t._findCenterFromElement();return new this(A({id:e.getAttribute("id")||void 0,type:db(e),coords:z2(e,{width:n.viewBoxWidth||n.width,height:n.viewBoxHeight||n.height}),colorStops:j2(e,n.opacity),gradientUnits:s,gradientTransform:xd(e.getAttribute("gradientTransform")||"")},s==="pixels"?{offsetX:t.width/2-i.x,offsetY:t.height/2-i.y}:{offsetX:0,offsetY:0}))}}F(Vl,"type","Gradient"),oe.setClass(Vl,"gradient"),oe.setClass(Vl,"linear"),oe.setClass(Vl,"radial");const H2=["type","source","patternTransform"];class wh{get type(){return"pattern"}set type(e){Hs("warn","Setting type has no effect",e)}constructor(e){F(this,"repeat","repeat"),F(this,"offsetX",0),F(this,"offsetY",0),F(this,"crossOrigin",""),this.id=Ns(),Object.assign(this,e)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(e){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?e.createPattern(this.source,this.repeat):null}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:t,crossOrigin:n}=this;return A(A({},Ni(this,e)),{},{type:"pattern",source:this.sourceToString(),repeat:t,crossOrigin:n,offsetX:ot(this.offsetX,He.NUM_FRACTION_DIGITS),offsetY:ot(this.offsetY,He.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(e){let{width:t,height:n}=e;const{source:s,repeat:i,id:o}=this,a=ro(this.offsetX/t,0),l=ro(this.offsetY/n,0),c=i==="repeat-y"||i==="no-repeat"?1+Math.abs(a||0):ro(s.width/t,0),u=i==="repeat-x"||i==="no-repeat"?1+Math.abs(l||0):ro(s.height/n,0);return['<pattern id="SVGID_'.concat(o,'" x="').concat(a,'" y="').concat(l,'" width="').concat(c,'" height="').concat(u,'">'),'<image x="0" y="0" width="'.concat(s.width,'" height="').concat(s.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(e,t){let{type:n,source:s,patternTransform:i}=e,o=lt(e,H2);const a=await za(s,A(A({},t),{},{crossOrigin:o.crossOrigin}));return new this(A(A({},o),{},{patternTransform:i&&i.slice(0),source:a}))}}F(wh,"type","Pattern"),oe.setClass(wh),oe.setClass(wh,"pattern");const $2=["path","left","top"],N2=["d"];class di extends jt{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:n,left:s,top:i}=t,o=lt(t,$2);super(),Object.assign(this,di.ownDefaults),this.setOptions(o),this._setPath(e||[],!0),typeof s=="number"&&this.set(Xe,s),typeof i=="number"&&this.set(Cn,i)}_setPath(e,t){this.path=tb(Array.isArray(e)?e:ab(e)),this.setBoundingBox(t)}_findCenterFromElement(){const e=this._calcBoundsFromPath();return new j(e.left+e.width/2,e.top+e.height/2)}_renderPathCommands(e){const t=-this.pathOffset.x,n=-this.pathOffset.y;e.beginPath();for(const s of this.path)switch(s[0]){case"L":e.lineTo(s[1]+t,s[2]+n);break;case"M":e.moveTo(s[1]+t,s[2]+n);break;case"C":e.bezierCurveTo(s[1]+t,s[2]+n,s[3]+t,s[4]+n,s[5]+t,s[6]+n);break;case"Q":e.quadraticCurveTo(s[1]+t,s[2]+n,s[3]+t,s[4]+n);break;case"Z":e.closePath()}}_render(e){this._renderPathCommands(e),this._renderPaintInOrder(e)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return A(A({},super.toObject(e)),{},{path:this.path.map(t=>t.slice())})}toDatalessObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.toObject(e);return this.sourcePath&&(delete t.path,t.sourcePath=this.sourcePath),t}_toSVG(){const e=lb(this.path,He.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(e,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const e=He.NUM_FRACTION_DIGITS;return" translate(".concat(ot(-this.pathOffset.x,e),", ").concat(ot(-this.pathOffset.y,e),")")}toClipPathSVG(e){const t=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}toSVG(e){const t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{width:t,height:n,pathOffset:s}=this._calcDimensions();this.set({width:t,height:n,pathOffset:s}),e&&this.setPositionByOrigin(s,Fe,Fe)}_calcBoundsFromPath(){const e=[];let t=0,n=0,s=0,i=0;for(const o of this.path)switch(o[0]){case"L":s=o[1],i=o[2],e.push({x:t,y:n},{x:s,y:i});break;case"M":s=o[1],i=o[2],t=s,n=i;break;case"C":e.push(...Sd(s,i,o[1],o[2],o[3],o[4],o[5],o[6])),s=o[5],i=o[6];break;case"Q":e.push(...Sd(s,i,o[1],o[2],o[1],o[2],o[3],o[4])),s=o[3],i=o[4];break;case"Z":s=t,i=n}return Ir(e)}_calcDimensions(){const e=this._calcBoundsFromPath();return A(A({},e),{},{pathOffset:new j(e.left+e.width/2,e.top+e.height/2)})}static fromObject(e){return this._fromObject(e,{extraParam:"path"})}static async fromElement(e,t,n){const s=fs(e,this.ATTRIBUTE_NAMES,n),{d:i}=s;return new this(i,A(A(A({},lt(s,N2)),t),{},{left:void 0,top:void 0}))}}F(di,"type","Path"),F(di,"cacheProperties",[...ds,"path","fillRule"]),F(di,"ATTRIBUTE_NAMES",[...Js,"d"]),oe.setClass(di),oe.setSVGClass(di);const V2=["left","top","radius"],gb=["radius","startAngle","endAngle","counterClockwise"];class Mr extends jt{static getDefaults(){return A(A({},super.getDefaults()),Mr.ownDefaults)}constructor(e){super(),Object.assign(this,Mr.ownDefaults),this.setOptions(e)}_set(e,t){return super._set(e,t),e==="radius"&&this.setRadius(t),this}_render(e){e.beginPath(),e.arc(0,0,this.radius,gt(this.startAngle),gt(this.endAngle),this.counterClockwise),this._renderPaintInOrder(e)}getRadiusX(){return this.get("radius")*this.get(vn)}getRadiusY(){return this.get("radius")*this.get(Nn)}setRadius(e){this.radius=e,this.set({width:2*e,height:2*e})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...gb,...e])}_toSVG(){const e=(this.endAngle-this.startAngle)%360;if(e===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:t}=this,n=gt(this.startAngle),s=gt(this.endAngle),i=gr(n)*t,o=pr(n)*t,a=gr(s)*t,l=pr(s)*t,c=e>180?1:0,u=this.counterClockwise?0:1;return['<path d="M '.concat(i," ").concat(o," A ").concat(t," ").concat(t," 0 ").concat(c," ").concat(u," ").concat(a," ").concat(l,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(e,t,n){const s=fs(e,this.ATTRIBUTE_NAMES,n),{left:i=0,top:o=0,radius:a=0}=s;return new this(A(A({},lt(s,V2)),{},{radius:a,left:i-a,top:o-a}))}static fromObject(e){return super._fromObject(e)}}F(Mr,"type","Circle"),F(Mr,"cacheProperties",[...ds,...gb]),F(Mr,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),F(Mr,"ATTRIBUTE_NAMES",["cx","cy","r",...Js]),oe.setClass(Mr),oe.setSVGClass(Mr);const W2=["x1","y1","x2","y2"],Y2=["x1","y1","x2","y2"],Td=["x1","x2","y1","y2"];class Os extends jt{constructor(){let[e,t,n,s]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,Os.ownDefaults),this.setOptions(i),this.x1=e,this.x2=n,this.y1=t,this.y2=s,this._setWidthHeight();const{left:o,top:a}=i;typeof o=="number"&&this.set(Xe,o),typeof a=="number"&&this.set(Cn,a)}_setWidthHeight(){const{x1:e,y1:t,x2:n,y2:s}=this;this.width=Math.abs(n-e),this.height=Math.abs(s-t);const{left:i,top:o,width:a,height:l}=Ir([{x:e,y:t},{x:n,y:s}]),c=new j(i+a/2,o+l/2);this.setPositionByOrigin(c,Fe,Fe)}_set(e,t){return super._set(e,t),Td.includes(e)&&this._setWidthHeight(),this}_render(e){e.beginPath();const t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=this.strokeWidth;const n=e.strokeStyle;var s;Zn(this.stroke)?e.strokeStyle=this.stroke.toLive(e):e.strokeStyle=(s=this.stroke)!==null&&s!==void 0?s:e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=n}_findCenterFromElement(){return new j((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return A(A({},super.toObject(e)),this.calcLinePoints())}_getNonTransformedDimensions(){const e=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(e.y-=this.strokeWidth),this.height===0&&(e.x-=this.strokeWidth)),e}calcLinePoints(){const{x1:e,x2:t,y1:n,y2:s,width:i,height:o}=this,a=e<=t?-1:1,l=n<=s?-1:1;return{x1:a*i/2,x2:a*-i/2,y1:l*o/2,y2:l*-o/2}}_toSVG(){const{x1:e,x2:t,y1:n,y2:s}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(e,'" y1="').concat(n,'" x2="').concat(t,'" y2="').concat(s,`" />
`)]}static async fromElement(e,t,n){const s=fs(e,this.ATTRIBUTE_NAMES,n),{x1:i=0,y1:o=0,x2:a=0,y2:l=0}=s;return new this([i,o,a,l],lt(s,W2))}static fromObject(e){let{x1:t,y1:n,x2:s,y2:i}=e,o=lt(e,Y2);return this._fromObject(A(A({},o),{},{points:[t,n,s,i]}),{extraParam:"points"})}}F(Os,"type","Line"),F(Os,"cacheProperties",[...ds,...Td]),F(Os,"ATTRIBUTE_NAMES",Js.concat(Td)),oe.setClass(Os),oe.setSVGClass(Os);class Es extends jt{static getDefaults(){return A(A({},super.getDefaults()),Es.ownDefaults)}constructor(e){super(),Object.assign(this,Es.ownDefaults),this.setOptions(e)}_render(e){const t=this.width/2,n=this.height/2;e.beginPath(),e.moveTo(-t,n),e.lineTo(0,-n),e.lineTo(t,n),e.closePath(),this._renderPaintInOrder(e)}_toSVG(){const e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-e," ").concat(t,",0 ").concat(-t,",").concat(e," ").concat(t),'" />']}}F(Es,"type","Triangle"),F(Es,"ownDefaults",{width:100,height:100}),oe.setClass(Es),oe.setSVGClass(Es);const pb=["rx","ry"];class Qr extends jt{static getDefaults(){return A(A({},super.getDefaults()),Qr.ownDefaults)}constructor(e){super(),Object.assign(this,Qr.ownDefaults),this.setOptions(e)}_set(e,t){switch(super._set(e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this}getRx(){return this.get("rx")*this.get(vn)}getRy(){return this.get("ry")*this.get(Nn)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...pb,...e])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,ls,!1),e.restore(),this._renderPaintInOrder(e)}static async fromElement(e,t,n){const s=fs(e,this.ATTRIBUTE_NAMES,n);return s.left=(s.left||0)-s.rx,s.top=(s.top||0)-s.ry,new this(s)}}function X2(r){if(!r)return[];const e=r.replace(/,/g," ").trim().split(/\s+/),t=[];for(let n=0;n<e.length;n+=2)t.push({x:parseFloat(e[n]),y:parseFloat(e[n+1])});return t}F(Qr,"type","Ellipse"),F(Qr,"cacheProperties",[...ds,...pb]),F(Qr,"ownDefaults",{rx:0,ry:0}),F(Qr,"ATTRIBUTE_NAMES",[...Js,"cx","cy","rx","ry"]),oe.setClass(Qr),oe.setSVGClass(Qr);const U2=["left","top"],mb={exactBoundingBox:!1};class qn extends jt{static getDefaults(){return A(A({},super.getDefaults()),qn.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),F(this,"strokeDiff",void 0),Object.assign(this,qn.ownDefaults),this.setOptions(t),this.points=e;const{left:n,top:s}=t;this.initialized=!0,this.setBoundingBox(!0),typeof n=="number"&&this.set(Xe,n),typeof s=="number"&&this.set(Cn,s)}isOpen(){return!0}_projectStrokeOnPoints(e){return Xy(this.points,e,this.isOpen())}_calcDimensions(e){e=A({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},e||{});const t=this.exactBoundingBox?this._projectStrokeOnPoints(e).map(c=>c.projectedPoint):this.points;if(t.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new j,strokeOffset:new j,strokeDiff:new j};const n=Ir(t),s=Tl(A(A({},e),{},{scaleX:1,scaleY:1})),i=Ir(this.points.map(c=>Jt(c,s,!0))),o=new j(this.scaleX,this.scaleY);let a=n.left+n.width/2,l=n.top+n.height/2;return this.exactBoundingBox&&(a-=l*Math.tan(gt(this.skewX)),l-=a*Math.tan(gt(this.skewY))),A(A({},n),{},{pathOffset:new j(a,l),strokeOffset:new j(i.left,i.top).subtract(new j(n.left,n.top)).multiply(o),strokeDiff:new j(n.width,n.height).subtract(new j(i.width,i.height)).multiply(o)})}_findCenterFromElement(){const e=Ir(this.points);return new j(e.left+e.width/2,e.top+e.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{left:t,top:n,width:s,height:i,pathOffset:o,strokeOffset:a,strokeDiff:l}=this._calcDimensions();this.set({width:s,height:i,pathOffset:o,strokeOffset:a,strokeDiff:l}),e&&this.setPositionByOrigin(new j(t+s/2,n+i/2),Fe,Fe)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new j(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let o;if(Object.keys(e).some(a=>this.strokeUniform||this.constructor.layoutProperties.includes(a))){var t,n;const{width:a,height:l}=this._calcDimensions(e);o=new j((t=e.width)!==null&&t!==void 0?t:a,(n=e.height)!==null&&n!==void 0?n:l)}else{var s,i;o=new j((s=e.width)!==null&&s!==void 0?s:this.width,(i=e.height)!==null&&i!==void 0?i:this.height)}return o.multiply(new j(e.scaleX||this.scaleX,e.scaleY||this.scaleY))}return super._getTransformedDimensions(e)}_set(e,t){const n=this.initialized&&this[e]!==t,s=super._set(e,t);return this.exactBoundingBox&&n&&((e===vn||e===Nn)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(e))&&this.setDimensions(),s}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return A(A({},super.toObject(e)),{},{points:this.points.map(t=>{let{x:n,y:s}=t;return{x:n,y:s}})})}_toSVG(){const e=[],t=this.pathOffset.x,n=this.pathOffset.y,s=He.NUM_FRACTION_DIGITS;for(let i=0,o=this.points.length;i<o;i++)e.push(ot(this.points[i].x-t,s),",",ot(this.points[i].y-n,s)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(e.join(""),`" />
`)]}_render(e){const t=this.points.length,n=this.pathOffset.x,s=this.pathOffset.y;if(t&&!isNaN(this.points[t-1].y)){e.beginPath(),e.moveTo(this.points[0].x-n,this.points[0].y-s);for(let i=0;i<t;i++){const o=this.points[i];e.lineTo(o.x-n,o.y-s)}!this.isOpen()&&e.closePath(),this._renderPaintInOrder(e)}}complexity(){return this.points.length}static async fromElement(e,t,n){return new this(X2(e.getAttribute("points")),A(A({},lt(fs(e,this.ATTRIBUTE_NAMES,n),U2)),t))}static fromObject(e){return this._fromObject(e,{extraParam:"points"})}}F(qn,"ownDefaults",mb),F(qn,"type","Polyline"),F(qn,"layoutProperties",[No,Vo,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),F(qn,"cacheProperties",[...ds,"points"]),F(qn,"ATTRIBUTE_NAMES",[...Js]),oe.setClass(qn),oe.setSVGClass(qn);class Wl extends qn{isOpen(){return!1}}F(Wl,"ownDefaults",mb),F(Wl,"type","Polygon"),oe.setClass(Wl),oe.setSVGClass(Wl);const vb=["fontSize","fontWeight","fontFamily","fontStyle"],yb=["underline","overline","linethrough"],bb=[...vb,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_b=[...bb,...yb,"textBackgroundColor","direction"],G2=[...vb,...yb,Sn,"strokeWidth",Ft,"deltaY","textBackgroundColor"],q2={_reNewline:wf,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:Xe,fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:Xe,pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2},Pr="justify",Gc="justify-left",Ha="justify-right",$a="justify-center";class xb extends jt{isEmptyStyles(e){if(!this.styles||e!==void 0&&!this.styles[e])return!0;const t=e===void 0?this.styles:{line:this.styles[e]};for(const n in t)for(const s in t[n])for(const i in t[n][s])return!1;return!0}styleHas(e,t){if(!this.styles||t!==void 0&&!this.styles[t])return!1;const n=t===void 0?this.styles:{0:this.styles[t]};for(const s in n)for(const i in n[s])if(n[s][i][e]!==void 0)return!0;return!1}cleanStyle(e){if(!this.styles)return!1;const t=this.styles;let n,s,i=0,o=!0,a=0;for(const l in t){n=0;for(const c in t[l]){const u=t[l][c]||{};i++,u[e]!==void 0?(s?u[e]!==s&&(o=!1):s=u[e],u[e]===this[e]&&delete u[e]):o=!1,Object.keys(u).length!==0?n++:delete t[l][c]}n===0&&delete t[l]}for(let l=0;l<this._textLines.length;l++)a+=this._textLines[l].length;o&&i===a&&(this[e]=s,this.removeStyle(e))}removeStyle(e){if(!this.styles)return;const t=this.styles;let n,s,i;for(s in t){for(i in n=t[s],n)delete n[i][e],Object.keys(n[i]).length===0&&delete n[i];Object.keys(n).length===0&&delete t[s]}}_extendStyles(e,t){const{lineIndex:n,charIndex:s}=this.get2DCursorLocation(e);this._getLineStyle(n)||this._setLineStyle(n);const i=Af(A(A({},this._getStyleDeclaration(n,s)),t),o=>o!==void 0);this._setStyleDeclaration(n,s,i)}getSelectionStyles(e,t,n){const s=[];for(let i=e;i<(t||e);i++)s.push(this.getStyleAtPosition(i,n));return s}getStyleAtPosition(e,t){const{lineIndex:n,charIndex:s}=this.get2DCursorLocation(e);return t?this.getCompleteStyleDeclaration(n,s):this._getStyleDeclaration(n,s)}setSelectionStyles(e,t,n){for(let s=t;s<(n||t);s++)this._extendStyles(s,e);this._forceClearCache=!0}_getStyleDeclaration(e,t){var n;const s=this.styles&&this.styles[e];return s&&(n=s[t])!==null&&n!==void 0?n:{}}getCompleteStyleDeclaration(e,t){return A(A({},Ni(this,this.constructor._styleProperties)),this._getStyleDeclaration(e,t))}_setStyleDeclaration(e,t,n){this.styles[e][t]=n}_deleteStyleDeclaration(e,t){delete this.styles[e][t]}_getLineStyle(e){return!!this.styles[e]}_setLineStyle(e){this.styles[e]={}}_deleteLineStyle(e){delete this.styles[e]}}F(xb,"_styleProperties",G2);const K2=/  +/g,Z2=/"/g;function Sh(r,e,t,n,s){return"		".concat(function(i,o){let{left:a,top:l,width:c,height:u}=o,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:He.NUM_FRACTION_DIGITS;const d=al(Ft,i,!1),[f,g,p,m]=[a,l,c,u].map(v=>ot(v,h));return"<rect ".concat(d,' x="').concat(f,'" y="').concat(g,'" width="').concat(p,'" height="').concat(m,'"></rect>')}(r,{left:e,top:t,width:n,height:s}),`
`)}const J2=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let Th;class Zt extends xb{static getDefaults(){return A(A({},super.getDefaults()),Zt.ownDefaults)}constructor(e,t){super(),F(this,"__charBounds",[]),Object.assign(this,Zt.ownDefaults),this.setOptions(t),this.styles||(this.styles={}),this.text=e,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const e=this.path;e&&(e.segmentsInfo=Vf(e.path))}_splitText(){const e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(Pr)&&this.enlargeSpaces()}enlargeSpaces(){let e,t,n,s,i,o,a;for(let l=0,c=this._textLines.length;l<c;l++)if((this.textAlign===Pr||l!==c-1&&!this.isEndOfWrapping(l))&&(s=0,i=this._textLines[l],t=this.getLineWidth(l),t<this.width&&(a=this.textLines[l].match(this._reSpacesAndTabs)))){n=a.length,e=(this.width-t)/n;for(let u=0;u<=i.length;u++)o=this.__charBounds[l][u],this._reSpaceAndTab.test(i[u])?(o.width+=e,o.kernedWidth+=e,o.left+=s,s+=e):o.left+=s}}isEndOfWrapping(e){return e===this._textLines.length-1}missingNewlineOffset(e){return 1}get2DCursorLocation(e,t){const n=t?this._unwrappedTextLines:this._textLines;let s;for(s=0;s<n.length;s++){if(e<=n[s].length)return{lineIndex:s,charIndex:e};e-=n[s].length+this.missingNewlineOffset(s,t)}return{lineIndex:s-1,charIndex:n[s-1].length<e?n[s-1].length:e}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const e=super._getCacheCanvasDimensions(),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e}_render(e){const t=this.path;t&&!t.isNotVisible()&&t._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")}_renderText(e){this.paintFirst===Sn?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))}_setTextStyles(e,t,n){if(e.textBaseline="alphabetic",this.path)switch(this.pathAlign){case Fe:e.textBaseline="middle";break;case"ascender":e.textBaseline=Cn;break;case"descender":e.textBaseline=dd}e.font=this._getFontDeclaration(t,n)}calcTextWidth(){let e=this.getLineWidth(0);for(let t=1,n=this._textLines.length;t<n;t++){const s=this.getLineWidth(t);s>e&&(e=s)}return e}_renderTextLine(e,t,n,s,i,o){this._renderChars(e,t,n,s,i,o)}_renderTextLinesBackground(e){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const t=e.fillStyle,n=this._getLeftOffset();let s=this._getTopOffset();for(let i=0,o=this._textLines.length;i<o;i++){const a=this.getHeightOfLine(i);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",i)){s+=a;continue}const l=this._textLines[i].length,c=this._getLineLeftOffset(i);let u,h,d=0,f=0,g=this.getValueOfPropertyAt(i,0,"textBackgroundColor");for(let p=0;p<l;p++){const m=this.__charBounds[i][p];h=this.getValueOfPropertyAt(i,p,"textBackgroundColor"),this.path?(e.save(),e.translate(m.renderLeft,m.renderTop),e.rotate(m.angle),e.fillStyle=h,h&&e.fillRect(-m.width/2,-a/this.lineHeight*(1-this._fontSizeFraction),m.width,a/this.lineHeight),e.restore()):h!==g?(u=n+c+f,this.direction==="rtl"&&(u=this.width-u-d),e.fillStyle=g,g&&e.fillRect(u,s,d,a/this.lineHeight),f=m.left,d=m.width,g=h):d+=m.kernedWidth}h&&!this.path&&(u=n+c+f,this.direction==="rtl"&&(u=this.width-u-d),e.fillStyle=h,e.fillRect(u,s,d,a/this.lineHeight)),s+=a}e.fillStyle=t,this._removeShadow(e)}_measureChar(e,t,n,s){const i=Ba.getFontCache(t),o=this._getFontDeclaration(t),a=n+e,l=n&&o===this._getFontDeclaration(s),c=t.fontSize/this.CACHE_FONT_SIZE;let u,h,d,f;if(n&&i[n]!==void 0&&(d=i[n]),i[e]!==void 0&&(f=u=i[e]),l&&i[a]!==void 0&&(h=i[a],f=h-d),u===void 0||d===void 0||h===void 0){const g=function(){return Th||(Th=mr({width:0,height:0}).getContext("2d")),Th}();this._setTextStyles(g,t,!0),u===void 0&&(f=u=g.measureText(e).width,i[e]=u),d===void 0&&l&&n&&(d=g.measureText(n).width,i[n]=d),l&&h===void 0&&(h=g.measureText(a).width,i[a]=h,f=h-d)}return{width:u*c,kernedWidth:f*c}}getHeightOfChar(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")}measureLine(e){const t=this._measureLine(e);return this.charSpacing!==0&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t}_measureLine(e){let t,n,s=0;const i=this.pathSide===_t,o=this.path,a=this._textLines[e],l=a.length,c=new Array(l);this.__charBounds[e]=c;for(let u=0;u<l;u++){const h=a[u];n=this._getGraphemeBox(h,e,u,t),c[u]=n,s+=n.kernedWidth,t=h}if(c[l]={left:n?n.left+n.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},o&&o.segmentsInfo){let u=0;const h=o.segmentsInfo[o.segmentsInfo.length-1].length;switch(this.textAlign){case Xe:u=i?h-s:0;break;case Fe:u=(h-s)/2;break;case _t:u=i?0:h-s}u+=this.pathStartOffset*(i?-1:1);for(let d=i?l-1:0;i?d>=0:d<l;i?d--:d++)n=c[d],u>h?u%=h:u<0&&(u+=h),this._setGraphemeOnPath(u,n),u+=n.kernedWidth}return{width:s,numOfSpaces:0}}_setGraphemeOnPath(e,t){const n=e+t.kernedWidth/2,s=this.path,i=ob(s.path,n,s.segmentsInfo);t.renderLeft=i.x-s.pathOffset.x,t.renderTop=i.y-s.pathOffset.y,t.angle=i.angle+(this.pathSide===_t?Math.PI:0)}_getGraphemeBox(e,t,n,s,i){const o=this.getCompleteStyleDeclaration(t,n),a=s?this.getCompleteStyleDeclaration(t,n-1):{},l=this._measureChar(e,o,s,a);let c,u=l.kernedWidth,h=l.width;this.charSpacing!==0&&(c=this._getWidthOfCharSpacing(),h+=c,u+=c);const d={width:h,left:0,height:o.fontSize,kernedWidth:u,deltaY:o.deltaY};if(n>0&&!i){const f=this.__charBounds[t][n-1];d.left=f.left+f.width+l.kernedWidth-l.width}return d}getHeightOfLine(e){if(this.__lineHeights[e])return this.__lineHeights[e];let t=this.getHeightOfChar(e,0);for(let n=1,s=this._textLines[e].length;n<s;n++)t=Math.max(this.getHeightOfChar(e,n),t);return this.__lineHeights[e]=t*this.lineHeight*this._fontSizeMult}calcTextHeight(){let e,t=0;for(let n=0,s=this._textLines.length;n<s;n++)e=this.getHeightOfLine(n),t+=n===s-1?e/this.lineHeight:e;return t}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(e,t){e.save();let n=0;const s=this._getLeftOffset(),i=this._getTopOffset();for(let o=0,a=this._textLines.length;o<a;o++){const l=this.getHeightOfLine(o),c=l/this.lineHeight,u=this._getLineLeftOffset(o);this._renderTextLine(t,e,this._textLines[o],s+u,i+n+c,o),n+=l}e.restore()}_renderTextFill(e){(this.fill||this.styleHas(Ft))&&this._renderTextCommon(e,"fillText")}_renderTextStroke(e){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())}_renderChars(e,t,n,s,i,o){const a=this.getHeightOfLine(o),l=this.textAlign.includes(Pr),c=this.path,u=!l&&this.charSpacing===0&&this.isEmptyStyles(o)&&!c,h=this.direction==="ltr",d=this.direction==="ltr"?1:-1,f=t.direction;let g,p,m,v,_,x="",y=0;if(t.save(),f!==this.direction&&(t.canvas.setAttribute("dir",h?"ltr":"rtl"),t.direction=h?"ltr":"rtl",t.textAlign=h?Xe:_t),i-=a*this._fontSizeFraction/this.lineHeight,u)return this._renderChar(e,t,o,0,n.join(""),s,i),void t.restore();for(let C=0,E=n.length-1;C<=E;C++)v=C===E||this.charSpacing||c,x+=n[C],m=this.__charBounds[o][C],y===0?(s+=d*(m.kernedWidth-m.width),y+=m.width):y+=m.kernedWidth,l&&!v&&this._reSpaceAndTab.test(n[C])&&(v=!0),v||(g=g||this.getCompleteStyleDeclaration(o,C),p=this.getCompleteStyleDeclaration(o,C+1),v=Bu(g,p,!1)),v&&(c?(t.save(),t.translate(m.renderLeft,m.renderTop),t.rotate(m.angle),this._renderChar(e,t,o,C,x,-y/2,0),t.restore()):(_=s,this._renderChar(e,t,o,C,x,_,i)),x="",g=p,s+=d*y,y=0);t.restore()}_applyPatternGradientTransformText(e){const t=this.width+this.strokeWidth,n=this.height+this.strokeWidth,s=mr({width:t,height:n}),i=s.getContext("2d");return s.width=t,s.height=n,i.beginPath(),i.moveTo(0,0),i.lineTo(t,0),i.lineTo(t,n),i.lineTo(0,n),i.closePath(),i.translate(t/2,n/2),i.fillStyle=e.toLive(i),this._applyPatternGradientTransform(i,e),i.fill(),i.createPattern(s,"no-repeat")}handleFiller(e,t,n){let s,i;return Zn(n)?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?(s=-this.width/2,i=-this.height/2,e.translate(s,i),e[t]=this._applyPatternGradientTransformText(n),{offsetX:s,offsetY:i}):(e[t]=n.toLive(e),this._applyPatternGradientTransform(e,n)):(e[t]=n,{offsetX:0,offsetY:0})}_setStrokeStyles(e,t){let{stroke:n,strokeWidth:s}=t;return e.lineWidth=s,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",n)}_setFillStyles(e,t){let{fill:n}=t;return this.handleFiller(e,"fillStyle",n)}_renderChar(e,t,n,s,i,o,a){const l=this._getStyleDeclaration(n,s),c=this.getCompleteStyleDeclaration(n,s),u=e==="fillText"&&c.fill,h=e==="strokeText"&&c.stroke&&c.strokeWidth;if(h||u){if(t.save(),t.font=this._getFontDeclaration(c),l.textBackgroundColor&&this._removeShadow(t),l.deltaY&&(a+=l.deltaY),u){const d=this._setFillStyles(t,c);t.fillText(i,o-d.offsetX,a-d.offsetY)}if(h){const d=this._setStrokeStyles(t,c);t.strokeText(i,o-d.offsetX,a-d.offsetY)}t.restore()}}setSuperscript(e,t){this._setScript(e,t,this.superscript)}setSubscript(e,t){this._setScript(e,t,this.subscript)}_setScript(e,t,n){const s=this.get2DCursorLocation(e,!0),i=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"fontSize"),o=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"deltaY"),a={fontSize:i*n.size,deltaY:o+i*n.baseline};this.setSelectionStyles(a,e,t)}_getLineLeftOffset(e){const t=this.getLineWidth(e),n=this.width-t,s=this.textAlign,i=this.direction,o=this.isEndOfWrapping(e);let a=0;return s===Pr||s===$a&&!o||s===Ha&&!o||s===Gc&&!o?0:(s===Fe&&(a=n/2),s===_t&&(a=n),s===$a&&(a=n/2),s===Ha&&(a=n),i==="rtl"&&(s===_t||s===Pr||s===Ha?a=0:s===Xe||s===Gc?a=-n:s!==Fe&&s!==$a||(a=-n/2)),a)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(e){if(this.__lineWidths[e]!==void 0)return this.__lineWidths[e];const{width:t}=this.measureLine(e);return this.__lineWidths[e]=t,t}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(e,t,n){var s;return(s=this._getStyleDeclaration(e,t)[n])!==null&&s!==void 0?s:this[n]}_renderTextDecoration(e,t){if(!this[t]&&!this.styleHas(t))return;let n=this._getTopOffset();const s=this._getLeftOffset(),i=this.path,o=this._getWidthOfCharSpacing(),a=this.offsets[t];for(let l=0,c=this._textLines.length;l<c;l++){const u=this.getHeightOfLine(l);if(!this[t]&&!this.styleHas(t,l)){n+=u;continue}const h=this._textLines[l],d=u/this.lineHeight,f=this._getLineLeftOffset(l);let g,p,m=0,v=0,_=this.getValueOfPropertyAt(l,0,t),x=this.getValueOfPropertyAt(l,0,Ft);const y=n+d*(1-this._fontSizeFraction);let C=this.getHeightOfChar(l,0),E=this.getValueOfPropertyAt(l,0,"deltaY");for(let w=0,S=h.length;w<S;w++){const $=this.__charBounds[l][w];g=this.getValueOfPropertyAt(l,w,t),p=this.getValueOfPropertyAt(l,w,Ft);const N=this.getHeightOfChar(l,w),H=this.getValueOfPropertyAt(l,w,"deltaY");if(i&&g&&p)e.save(),e.fillStyle=x,e.translate($.renderLeft,$.renderTop),e.rotate($.angle),e.fillRect(-$.kernedWidth/2,a*N+H,$.kernedWidth,this.fontSize/15),e.restore();else if((g!==_||p!==x||N!==C||H!==E)&&v>0){let U=s+f+m;this.direction==="rtl"&&(U=this.width-U-v),_&&x&&(e.fillStyle=x,e.fillRect(U,y+a*C+E,v,this.fontSize/15)),m=$.left,v=$.width,_=g,x=p,C=N,E=H}else v+=$.kernedWidth}let b=s+f+m;this.direction==="rtl"&&(b=this.width-b-v),e.fillStyle=p,g&&p&&e.fillRect(b,y+a*C+E,v-o,this.fontSize/15),n+=u}this._removeShadow(e)}_getFontDeclaration(){let{fontFamily:e=this.fontFamily,fontStyle:t=this.fontStyle,fontWeight:n=this.fontWeight,fontSize:s=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;const o=e.includes("'")||e.includes('"')||e.includes(",")||Zt.genericFonts.includes(e.toLowerCase())?e:'"'.concat(e,'"');return[t,n,"".concat(i?this.CACHE_FONT_SIZE:s,"px"),o].join(" ")}render(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(e)))}graphemeSplit(e){return Lu(e)}_splitTextIntoLines(e){const t=e.split(this._reNewline),n=new Array(t.length),s=[`
`];let i=[];for(let o=0;o<t.length;o++)n[o]=this.graphemeSplit(t[o]),i=i.concat(n[o],s);return i.pop(),{_unwrappedLines:n,lines:t,graphemeText:i,graphemeLines:n}}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return A(A({},super.toObject([..._b,...e])),{},{styles:Gy(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(e,t){const{textLayoutProperties:n}=this.constructor;super.set(e,t);let s=!1,i=!1;if(typeof e=="object")for(const o in e)o==="path"&&this.setPathInfo(),s=s||n.includes(o),i=i||o==="path";else s=n.includes(e),i=e==="path";return i&&this.setPathInfo(),s&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(e,t,n){const s=fs(e,Zt.ATTRIBUTE_NAMES,n),i=A(A({},t),s),{textAnchor:o=Xe,textDecoration:a="",dx:l=0,dy:c=0,top:u=0,left:h=0,fontSize:d=Cf,strokeWidth:f=1}=i,g=lt(i,J2),p=new this((e.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),A({left:h+l,top:u+c,underline:a.includes("underline"),overline:a.includes("overline"),linethrough:a.includes("line-through"),strokeWidth:0,fontSize:d},g)),m=p.getScaledHeight()/p.height,v=((p.height+p.strokeWidth)*p.lineHeight-p.height)*m,_=p.getScaledHeight()+v;let x=0;return o===Fe&&(x=p.getScaledWidth()/2),o===_t&&(x=p.getScaledWidth()),p.set({left:p.left-x,top:p.top-(_-p.fontSize*(.07+p._fontSizeFraction))/p.lineHeight,strokeWidth:f}),p}static fromObject(e){return this._fromObject(A(A({},e),{},{styles:qy(e.styles||{},e.text)}),{extraParam:"text"})}}F(Zt,"textLayoutProperties",bb),F(Zt,"cacheProperties",[...ds,..._b]),F(Zt,"ownDefaults",q2),F(Zt,"type","Text"),F(Zt,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),F(Zt,"ATTRIBUTE_NAMES",Js.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),Vy(Zt,[class extends wy{_toSVG(){const r=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(r.textTop,r.textLeft);return this._wrapSVGTextAndBg(e)}toSVG(r){return this._createBaseSVGMarkup(this._toSVG(),{reviver:r,noStyle:!0,withShadow:!0})}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(r){let{textBgRects:e,textSpans:t}=r;const n=this.getSvgTextDecoration(this);return[e.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'.concat(this.fontFamily.replace(Z2,"'"),'" '):"",this.fontSize?'font-size="'.concat(this.fontSize,'" '):"",this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",n?'text-decoration="'.concat(n,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",t.join(""),`</text>
`]}_getSVGTextAndBg(r,e){const t=[],n=[];let s,i=r;this.backgroundColor&&n.push(...Sh(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let o=0,a=this._textLines.length;o<a;o++)s=this._getLineLeftOffset(o),this.direction==="rtl"&&(s+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",o))&&this._setSVGTextLineBg(n,o,e+s,i),this._setSVGTextLineText(t,o,e+s,i),i+=this.getHeightOfLine(o);return{textSpans:t,textBgRects:n}}_createTextCharSpan(r,e,t,n){const s=this.getSvgSpanStyles(e,r!==r.trim()||!!r.match(K2)),i=s?'style="'.concat(s,'"'):"",o=e.deltaY,a=o?' dy="'.concat(ot(o,He.NUM_FRACTION_DIGITS),'" '):"";return'<tspan x="'.concat(ot(t,He.NUM_FRACTION_DIGITS),'" y="').concat(ot(n,He.NUM_FRACTION_DIGITS),'" ').concat(a).concat(i,">").concat(Uy(r),"</tspan>")}_setSVGTextLineText(r,e,t,n){const s=this.getHeightOfLine(e),i=this.textAlign.includes(Pr),o=this._textLines[e];let a,l,c,u,h,d="",f=0;n+=s*(1-this._fontSizeFraction)/this.lineHeight;for(let g=0,p=o.length-1;g<=p;g++)h=g===p||this.charSpacing,d+=o[g],c=this.__charBounds[e][g],f===0?(t+=c.kernedWidth-c.width,f+=c.width):f+=c.kernedWidth,i&&!h&&this._reSpaceAndTab.test(o[g])&&(h=!0),h||(a=a||this.getCompleteStyleDeclaration(e,g),l=this.getCompleteStyleDeclaration(e,g+1),h=Bu(a,l,!0)),h&&(u=this._getStyleDeclaration(e,g),r.push(this._createTextCharSpan(d,u,t,n)),d="",a=l,this.direction==="rtl"?t-=f:t+=f,f=0)}_setSVGTextLineBg(r,e,t,n){const s=this._textLines[e],i=this.getHeightOfLine(e)/this.lineHeight;let o,a=0,l=0,c=this.getValueOfPropertyAt(e,0,"textBackgroundColor");for(let u=0;u<s.length;u++){const{left:h,width:d,kernedWidth:f}=this.__charBounds[e][u];o=this.getValueOfPropertyAt(e,u,"textBackgroundColor"),o!==c?(c&&r.push(...Sh(c,t+l,n,a,i)),l=h,a=d,c=o):a+=f}o&&r.push(...Sh(c,t+l,n,a,i))}_getSVGLineTopOffset(r){let e,t=0;for(e=0;e<r;e++)t+=this.getHeightOfLine(e);const n=this.getHeightOfLine(e);return{lineTop:t,offset:(this._fontSizeMult-this._fontSizeFraction)*n/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(r){return"".concat(super.getSvgStyles(r)," white-space: pre;")}getSvgSpanStyles(r,e){const{fontFamily:t,strokeWidth:n,stroke:s,fill:i,fontSize:o,fontStyle:a,fontWeight:l,deltaY:c}=r,u=this.getSvgTextDecoration(r);return[s?al(Sn,s):"",n?"stroke-width: ".concat(n,"; "):"",t?"font-family: ".concat(t.includes("'")||t.includes('"')?t:"'".concat(t,"'"),"; "):"",o?"font-size: ".concat(o,"px; "):"",a?"font-style: ".concat(a,"; "):"",l?"font-weight: ".concat(l,"; "):"",u&&"text-decoration: ".concat(u,"; "),i?al(Ft,i):"",c?"baseline-shift: ".concat(-c,"; "):"",e?"white-space: pre; ":""].join("")}getSvgTextDecoration(r){return["overline","underline","line-through"].filter(e=>r[e.replace("-","")]).join(" ")}}]),oe.setClass(Zt),oe.setSVGClass(Zt);class Q2{constructor(e){F(this,"target",void 0),F(this,"__mouseDownInPlace",!1),F(this,"__dragStartFired",!1),F(this,"__isDraggingOver",!1),F(this,"__dragStartSelection",void 0),F(this,"__dragImageDisposer",void 0),F(this,"_dispose",void 0),this.target=e;const t=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{t.forEach(n=>n()),this._dispose=void 0}}isPointerOverSelection(e){const t=this.target,n=t.getSelectionStartFromPointer(e);return t.isEditing&&n>=t.selectionStart&&n<=t.selectionEnd&&t.selectionStart<t.selectionEnd}start(e){return this.__mouseDownInPlace=this.isPointerOverSelection(e)}isActive(){return this.__mouseDownInPlace}end(e){const t=this.isActive();return t&&!this.__dragStartFired&&(this.target.setCursorByClick(e),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,t}getDragStartSelection(){return this.__dragStartSelection}setDragImage(e,t){var n;let{selectionStart:s,selectionEnd:i}=t;const o=this.target,a=o.canvas,l=new j(o.flipX?-1:1,o.flipY?-1:1),c=o._getCursorBoundaries(s),u=new j(c.left+c.leftOffset,c.top+c.topOffset).multiply(l).transform(o.calcTransformMatrix()),h=a.getScenePoint(e).subtract(u),d=o.getCanvasRetinaScaling(),f=o.getBoundingRect(),g=u.subtract(new j(f.left,f.top)),p=a.viewportTransform,m=g.add(h).transform(p,!0),v=o.backgroundColor,_=Hf(o.styles);o.backgroundColor="";const x={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};o.setSelectionStyles(x,0,s),o.setSelectionStyles(x,i,o.text.length),o.dirty=!0;const y=o.toCanvasElement({enableRetinaScaling:a.enableRetinaScaling,viewportTransform:!0});o.backgroundColor=v,o.styles=_,o.dirty=!0,Uc(y,{position:"fixed",left:"".concat(-y.width,"px"),border:wn,width:"".concat(y.width/d,"px"),height:"".concat(y.height/d,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{y.remove()},ir(e.target||this.target.hiddenTextarea).body.appendChild(y),(n=e.dataTransfer)===null||n===void 0||n.setDragImage(y,m.x,m.y)}onDragStart(e){this.__dragStartFired=!0;const t=this.target,n=this.isActive();if(n&&e.dataTransfer){const s=this.__dragStartSelection={selectionStart:t.selectionStart,selectionEnd:t.selectionEnd},i=t._text.slice(s.selectionStart,s.selectionEnd).join(""),o=A({text:t.text,value:i},s);e.dataTransfer.setData("text/plain",i),e.dataTransfer.setData("application/fabric",JSON.stringify({value:i,styles:t.getSelectionStyles(s.selectionStart,s.selectionEnd,!0)})),e.dataTransfer.effectAllowed="copyMove",this.setDragImage(e,o)}return t.abortCursorAnimation(),n}canDrop(e){if(this.target.editable&&!this.target.getActiveControl()&&!e.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const t=this.target.getSelectionStartFromPointer(e),n=this.__dragStartSelection;return t<n.selectionStart||t>n.selectionEnd}return!0}return!1}targetCanDrop(e){return this.target.canDrop(e)}dragEnterHandler(e){let{e:t}=e;const n=this.targetCanDrop(t);!this.__isDraggingOver&&n&&(this.__isDraggingOver=!0)}dragOverHandler(e){const{e:t}=e,n=this.targetCanDrop(t);!this.__isDraggingOver&&n?this.__isDraggingOver=!0:this.__isDraggingOver&&!n&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(t.preventDefault(),e.canDrop=!0,e.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(e){var t;const{e:n}=e,s=n.defaultPrevented;this.__isDraggingOver=!1,n.preventDefault();let i=(t=n.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain");if(i&&!s){const o=this.target,a=o.canvas;let l=o.getSelectionStartFromPointer(n);const{styles:c}=n.dataTransfer.types.includes("application/fabric")?JSON.parse(n.dataTransfer.getData("application/fabric")):{},u=i[Math.max(0,i.length-1)],h=0;if(this.__dragStartSelection){const d=this.__dragStartSelection.selectionStart,f=this.__dragStartSelection.selectionEnd;l>d&&l<=f?l=d:l>f&&(l-=f-d),o.removeChars(d,f),delete this.__dragStartSelection}o._reNewline.test(u)&&(o._reNewline.test(o._text[l])||l===o._text.length)&&(i=i.trimEnd()),e.didDrop=!0,e.dropTarget=o,o.insertChars(i,c,l),a.setActiveObject(o),o.enterEditing(n),o.selectionStart=Math.min(l+h,o._text.length),o.selectionEnd=Math.min(o.selectionStart+i.length,o._text.length),o.hiddenTextarea.value=o.text,o._updateTextarea(),o.hiddenTextarea.focus(),o.fire(Lc,{index:l+h,action:"drop"}),a.fire("text:changed",{target:o}),a.contextTopDirty=!0,a.requestRenderAll()}}dragEndHandler(e){let{e:t}=e;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var n;const s=this.target,i=this.target.canvas,{selectionStart:o,selectionEnd:a}=this.__dragStartSelection,l=((n=t.dataTransfer)===null||n===void 0?void 0:n.dropEffect)||wn;l===wn?(s.selectionStart=o,s.selectionEnd=a,s._updateTextarea(),s.hiddenTextarea.focus()):(s.clearContextTop(),l==="move"&&(s.removeChars(o,a),s.selectionStart=s.selectionEnd=o,s.hiddenTextarea&&(s.hiddenTextarea.value=s.text),s._updateTextarea(),s.fire(Lc,{index:o,action:"dragend"}),i.fire("text:changed",{target:s}),i.requestRenderAll()),s.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const Up=/[ \n\.,;!\?\-]/;class eO extends Zt{constructor(){super(...arguments),F(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(e){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(e)}_animateCursor(e){let{toValue:t,duration:n,delay:s,onComplete:i}=e;return Bf({startValue:this._currentCursorOpacity,endValue:t,duration:n,delay:s,onComplete:i,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:o=>{this._currentCursorOpacity=o,this.renderCursorOrSelection()}})}_tick(e){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(e||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var e;(e=this._currentTickCompleteState)===null||e===void 0||e.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(e){this.abortCursorAnimation(),this._tick(e?0:this.cursorDelay)}abortCursorAnimation(){let e=!1;[this._currentTickState,this._currentTickCompleteState].forEach(t=>{t&&!t.isDone()&&(e=!0,t.abort())}),this._currentCursorOpacity=1,e&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(e=>!e||e.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(e){let t=0,n=e-1;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)t++,n--;for(;/\S/.test(this._text[n])&&n>-1;)t++,n--;return e-t}findWordBoundaryRight(e){let t=0,n=e;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)t++,n++;for(;/\S/.test(this._text[n])&&n<this._text.length;)t++,n++;return e+t}findLineBoundaryLeft(e){let t=0,n=e-1;for(;!/\n/.test(this._text[n])&&n>-1;)t++,n--;return e-t}findLineBoundaryRight(e){let t=0,n=e;for(;!/\n/.test(this._text[n])&&n<this._text.length;)t++,n++;return e+t}searchWordBoundary(e,t){const n=this._text;let s=e>0&&this._reSpace.test(n[e])&&(t===-1||!wf.test(n[e-1]))?e-1:e,i=n[s];for(;s>0&&s<n.length&&!Up.test(i);)s+=t,i=n[s];return t===-1&&Up.test(i)&&s++,s}selectWord(e){e=e||this.selectionStart;const t=this.searchWordBoundary(e,-1),n=Math.max(t,this.searchWordBoundary(e,1));this.selectionStart=t,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(e){e=e||this.selectionStart;const t=this.findLineBoundaryLeft(e),n=this.findLineBoundaryRight(e);return this.selectionStart=t,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this}enterEditing(e){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",e?{e}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(e){if(this.getActiveControl())return;const t=this.hiddenTextarea;ir(t).activeElement!==t&&t.focus();const n=this.getSelectionStartFromPointer(e),s=this.selectionStart,i=this.selectionEnd;(n===this.__selectionStartOnMouseDown&&s!==i||s!==n&&i!==n)&&(n>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=n):(this.selectionStart=n,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===s&&this.selectionEnd===i||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(e,t,n){const s=n.slice(0,e),i=this.graphemeSplit(s).length;if(e===t)return{selectionStart:i,selectionEnd:i};const o=n.slice(e,t);return{selectionStart:i,selectionEnd:i+this.graphemeSplit(o).length}}fromGraphemeToStringSelection(e,t,n){const s=n.slice(0,e).join("").length;return e===t?{selectionStart:s,selectionEnd:s}:{selectionStart:s,selectionEnd:s+n.slice(e,t).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const e=this.hiddenTextarea;this.text=e.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const t=this.fromStringToGraphemeSelection(e.selectionStart,e.selectionEnd,e.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),n=this.get2DCursorLocation(e),s=n.lineIndex,i=n.charIndex,o=this.getValueOfPropertyAt(s,i,"fontSize")*this.lineHeight,a=t.leftOffset,l=this.getCanvasRetinaScaling(),c=this.canvas.upperCanvasEl,u=c.width/l,h=c.height/l,d=u-o,f=h-o,g=new j(t.left+a,t.top+t.topOffset+o).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new j(c.clientWidth/u,c.clientHeight/h));return g.x<0&&(g.x=0),g.x>d&&(g.x=d),g.y<0&&(g.y=0),g.y>f&&(g.y=f),g.x+=this.canvas._offset.left,g.y+=this.canvas._offset.top,{left:"".concat(g.x,"px"),top:"".concat(g.y,"px"),fontSize:"".concat(o,"px"),charHeight:o}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const e=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const e=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),e&&this.fire(Bc),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const e in this.styles)this._textLines[e]||delete this.styles[e]}removeStyleFromTo(e,t){const{lineIndex:n,charIndex:s}=this.get2DCursorLocation(e,!0),{lineIndex:i,charIndex:o}=this.get2DCursorLocation(t,!0);if(n!==i){if(this.styles[n])for(let a=s;a<this._unwrappedTextLines[n].length;a++)delete this.styles[n][a];if(this.styles[i])for(let a=o;a<this._unwrappedTextLines[i].length;a++){const l=this.styles[i][a];l&&(this.styles[n]||(this.styles[n]={}),this.styles[n][s+a-o]=l)}for(let a=n+1;a<=i;a++)delete this.styles[a];this.shiftLineStyles(i,n-i)}else if(this.styles[n]){const a=this.styles[n],l=o-s;for(let c=s;c<o;c++)delete a[c];for(const c in this.styles[n]){const u=parseInt(c,10);u>=o&&(a[u-l]=a[c],delete a[c])}}}shiftLineStyles(e,t){const n=Object.assign({},this.styles);for(const s in this.styles){const i=parseInt(s,10);i>e&&(this.styles[i+t]=n[i],n[i-t]||delete this.styles[i])}}insertNewlineStyleObject(e,t,n,s){const i={},o=this._unwrappedTextLines[e].length,a=o===t;let l=!1;n||(n=1),this.shiftLineStyles(e,n);const c=this.styles[e]?this.styles[e][t===0?t:t-1]:void 0;for(const h in this.styles[e]){const d=parseInt(h,10);d>=t&&(l=!0,i[d-t]=this.styles[e][h],a&&t===0||delete this.styles[e][h])}let u=!1;for(l&&!a&&(this.styles[e+n]=i,u=!0),(u||o>t)&&n--;n>0;)s&&s[n-1]?this.styles[e+n]={0:A({},s[n-1])}:c?this.styles[e+n]={0:A({},c)}:delete this.styles[e+n],n--;this._forceClearCache=!0}insertCharStyleObject(e,t,n,s){this.styles||(this.styles={});const i=this.styles[e],o=i?A({},i):{};n||(n=1);for(const l in o){const c=parseInt(l,10);c>=t&&(i[c+n]=o[c],o[c-n]||delete i[c])}if(this._forceClearCache=!0,s){for(;n--;)Object.keys(s[n]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][t+n]=A({},s[n]));return}if(!i)return;const a=i[t?t-1:1];for(;a&&n--;)this.styles[e][t+n]=A({},a)}insertNewStyleBlock(e,t,n){const s=this.get2DCursorLocation(t,!0),i=[0];let o,a=0;for(let l=0;l<e.length;l++)e[l]===`
`?(a++,i[a]=0):i[a]++;for(i[0]>0&&(this.insertCharStyleObject(s.lineIndex,s.charIndex,i[0],n),n=n&&n.slice(i[0]+1)),a&&this.insertNewlineStyleObject(s.lineIndex,s.charIndex+i[0],a),o=1;o<a;o++)i[o]>0?this.insertCharStyleObject(s.lineIndex+o,0,i[o],n):n&&this.styles[s.lineIndex+o]&&n[0]&&(this.styles[s.lineIndex+o][0]=n[0]),n=n&&n.slice(i[o]+1);i[o]>0&&this.insertCharStyleObject(s.lineIndex+o,0,i[o],n)}removeChars(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e+1;this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(e,t,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n;s>n&&this.removeStyleFromTo(n,s);const i=this.graphemeSplit(e);this.insertNewStyleBlock(i,n,t),this._text=[...this._text.slice(0,n),...i,...this._text.slice(s)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(e,t,n){n<=e?(t===e?this._selectionDirection=Xe:this._selectionDirection===_t&&(this._selectionDirection=Xe,this.selectionEnd=e),this.selectionStart=n):n>e&&n<t?this._selectionDirection===_t?this.selectionEnd=n:this.selectionStart=n:(t===e?this._selectionDirection=_t:this._selectionDirection===Xe&&(this._selectionDirection=_t,this.selectionStart=t),this.selectionEnd=n)}}class tO extends eO{initHiddenTextarea(){const e=this.canvas&&ir(this.canvas.getElement())||$o(),t=e.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(o=>{let[a,l]=o;return t.setAttribute(a,l)});const{top:n,left:s,fontSize:i}=this._calcTextareaPosition();t.style.cssText="position: absolute; top: ".concat(n,"; left: ").concat(s,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(i,";"),(this.hiddenTextareaContainer||e.body).appendChild(t),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(o=>{let[a,l]=o;return t.addEventListener(a,this[l].bind(this))}),this.hiddenTextarea=t}blur(){this.abortCursorAnimation()}onKeyDown(e){if(!this.isEditing)return;const t=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(e){const t=this.fromPaste;if(this.fromPaste=!1,e&&e.stopPropagation(),!this.isEditing)return;const n=()=>{this.updateFromTextArea(),this.fire(Lc),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void n();const s=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,i=this._text.length,o=s.length,a=this.selectionStart,l=this.selectionEnd,c=a!==l;let u,h,d,f,g=o-i;const p=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),m=a>p.selectionStart;c?(h=this._text.slice(a,l),g+=l-a):o<i&&(h=m?this._text.slice(l+g,l):this._text.slice(a,a-g));const v=s.slice(p.selectionEnd-g,p.selectionEnd);if(h&&h.length&&(v.length&&(u=this.getSelectionStyles(a,a+1,!1),u=v.map(()=>u[0])),c?(d=a,f=l):m?(d=l-h.length,f=l):(d=l,f=l+h.length),this.removeStyleFromTo(d,f)),v.length){const{copyPasteData:_}=Hr();t&&v.join("")===_.copiedText&&!He.disableStyleCopyPaste&&(u=_.copiedTextStyle),this.insertNewStyleBlock(v,a,u)}n()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(e){let{target:t}=e;const{selectionStart:n,selectionEnd:s}=t;this.compositionStart=n,this.compositionEnd=s,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:e}=Hr();e.copiedText=this.getSelectedText(),He.disableStyleCopyPaste?e.copiedTextStyle=void 0:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(e,t){let n,s=this._getLineLeftOffset(e);return t>0&&(n=this.__charBounds[e][t-1],s+=n.left+n.width),s}getDownCursorOffset(e,t){const n=this._getSelectionForOffset(e,t),s=this.get2DCursorLocation(n),i=s.lineIndex;if(i===this._textLines.length-1||e.metaKey||e.keyCode===34)return this._text.length-n;const o=s.charIndex,a=this._getWidthBeforeCursor(i,o),l=this._getIndexOnLine(i+1,a);return this._textLines[i].slice(o).length+l+1+this.missingNewlineOffset(i)}_getSelectionForOffset(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart}getUpCursorOffset(e,t){const n=this._getSelectionForOffset(e,t),s=this.get2DCursorLocation(n),i=s.lineIndex;if(i===0||e.metaKey||e.keyCode===33)return-n;const o=s.charIndex,a=this._getWidthBeforeCursor(i,o),l=this._getIndexOnLine(i-1,a),c=this._textLines[i].slice(0,o),u=this.missingNewlineOffset(i-1);return-this._textLines[i-1].length+l-c.length+(1-u)}_getIndexOnLine(e,t){const n=this._textLines[e];let s,i,o=this._getLineLeftOffset(e),a=0;for(let l=0,c=n.length;l<c;l++)if(s=this.__charBounds[e][l].width,o+=s,o>t){i=!0;const u=o-s,h=o,d=Math.abs(u-t);a=Math.abs(h-t)<d?l:l-1;break}return i||(a=n.length-1),a}moveCursorDown(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)}moveCursorUp(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",e)}_moveCursorUpOrDown(e,t){const n=this["get".concat(e,"CursorOffset")](t,this._selectionDirection===_t);if(t.shiftKey?this.moveCursorWithShift(n):this.moveCursorWithoutShift(n),n!==0){const s=this.text.length;this.selectionStart=Bi(0,this.selectionStart,s),this.selectionEnd=Bi(0,this.selectionEnd,s),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(e){const t=this._selectionDirection===Xe?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),e!==0}moveCursorWithoutShift(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),e!==0}moveCursorLeft(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",e)}_move(e,t,n){let s;if(e.altKey)s=this["findWordBoundary".concat(n)](this[t]);else{if(!e.metaKey&&e.keyCode!==35&&e.keyCode!==36)return this[t]+=n==="Left"?-1:1,!0;s=this["findLineBoundary".concat(n)](this[t])}return s!==void 0&&this[t]!==s&&(this[t]=s,!0)}_moveLeft(e,t){return this._move(e,t,"Left")}_moveRight(e,t){return this._move(e,t,"Right")}moveCursorLeftWithoutShift(e){let t=!0;return this._selectionDirection=Xe,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t}moveCursorLeftWithShift(e){return this._selectionDirection===_t&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=Xe,this._moveLeft(e,"selectionStart")):void 0}moveCursorRight(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)}_moveCursorLeftOrRight(e,t){const n="moveCursor".concat(e).concat(t.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[n](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(e){return this._selectionDirection===Xe&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=_t,this._moveRight(e,"selectionEnd")):void 0}moveCursorRightWithoutShift(e){let t=!0;return this._selectionDirection=_t,this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t}}const Oh=r=>!!r.button;class nO extends tO{constructor(){super(...arguments),F(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler),this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown),this.draggableTextDelegate=new Q2(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(e){return this.draggableTextDelegate.onDragStart(e)}canDrop(e){return this.draggableTextDelegate.canDrop(e)}onMouseDown(e){if(!this.canvas)return;this.__newClickTime=+new Date;const t=e.pointer;this.isTripleClick(t)&&(this.fire("tripleclick",e),gd(e.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=t,this.__lastSelected=this.selected&&!this.getActiveControl()}isTripleClick(e){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===e.x&&this.__lastPointer.y===e.y}doubleClickHandler(e){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(e.e))}tripleClickHandler(e){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(e.e))}_mouseDownHandler(e){let{e:t}=e;this.canvas&&this.editable&&!Oh(t)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(t)||(this.canvas.textEditingManager.register(this),this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(t)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection())))}_mouseDownHandlerBefore(e){let{e:t}=e;this.canvas&&this.editable&&!Oh(t)&&(this.selected=this===this.canvas._activeObject)}mouseUpHandler(e){let{e:t,transform:n}=e;const s=this.draggableTextDelegate.end(t);if(this.canvas){this.canvas.textEditingManager.unregister(this);const i=this.canvas._activeObject;if(i&&i!==this)return}!this.editable||this.group&&!this.group.interactive||n&&n.actionPerformed||Oh(t)||s||(this.__lastSelected&&!this.getActiveControl()?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(t),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0)}setCursorByClick(e){const t=this.getSelectionStartFromPointer(e),n=this.selectionStart,s=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(n,s,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(e){const t=this.canvas.getScenePoint(e).transform(Ln(this.calcTransformMatrix())).add(new j(-this._getLeftOffset(),-this._getTopOffset()));let n=0,s=0,i=0;for(let c=0;c<this._textLines.length&&n<=t.y;c++)n+=this.getHeightOfLine(c),i=c,c>0&&(s+=this._textLines[c-1].length+this.missingNewlineOffset(c-1));let o=Math.abs(this._getLineLeftOffset(i));const a=this._textLines[i].length,l=this.__charBounds[i];for(let c=0;c<a;c++){const u=o+l[c].kernedWidth;if(t.x<=u){Math.abs(t.x-u)<=Math.abs(t.x-o)&&s++;break}o=u,s++}return Math.min(this.flipX?a-s:s,this._text.length)}}const Yl="moveCursorUp",Xl="moveCursorDown",Ul="moveCursorLeft",Gl="moveCursorRight",ql="exitEditing",rO=A({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:ql,27:ql,33:Yl,34:Xl,35:Gl,36:Ul,37:Ul,38:Yl,39:Gl,40:Xl},keysMapRtl:{9:ql,27:ql,33:Yl,34:Xl,35:Ul,36:Gl,37:Gl,38:Yl,39:Ul,40:Xl},ctrlKeysMapDown:{65:"selectAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class kr extends nO{static getDefaults(){return A(A({},super.getDefaults()),kr.ownDefaults)}get type(){const e=super.type;return e==="itext"?"i-text":e}constructor(e,t){super(e,A(A({},kr.ownDefaults),t)),this.initBehavior()}_set(e,t){return this.isEditing&&this._savedProps&&e in this._savedProps?(this._savedProps[e]=t,this):(e==="canvas"&&(this.canvas instanceof cl&&this.canvas.textEditingManager.remove(this),t instanceof cl&&t.textEditingManager.add(this)),super._set(e,t))}setSelectionStart(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)}setSelectionEnd(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)}_updateAndFire(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,n=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(e,t,n)}setSelectionStyles(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(e,t,n)}get2DCursorLocation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(e,t)}render(e){super.render(e),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(e){const t=this.isEditing;this.isEditing=!1;const n=super.toCanvasElement(e);return this.isEditing=t,n}renderCursorOrSelection(){if(!this.isEditing)return;const e=this.clearContextTop(!0);if(!e)return;const t=this._getCursorBoundaries();this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(e,t):this.renderCursor(e,t),this.canvas.contextTopDirty=!0,e.restore()}_getCursorBoundaries(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;const n=this._getLeftOffset(),s=this._getTopOffset(),i=this._getCursorBoundariesOffsets(e,t);return{left:n,top:s,leftOffset:i.left,topOffset:i.top}}_getCursorBoundariesOffsets(e,t){return t?this.__getCursorBoundariesOffsets(e):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(e)}__getCursorBoundariesOffsets(e){let t=0,n=0;const{charIndex:s,lineIndex:i}=this.get2DCursorLocation(e);for(let c=0;c<i;c++)t+=this.getHeightOfLine(c);const o=this._getLineLeftOffset(i),a=this.__charBounds[i][s];a&&(n=a.left),this.charSpacing!==0&&s===this._textLines[i].length&&(n-=this._getWidthOfCharSpacing());const l={top:t,left:o+(n>0?n:0)};return this.direction==="rtl"&&(this.textAlign===_t||this.textAlign===Pr||this.textAlign===Ha?l.left*=-1:this.textAlign===Xe||this.textAlign===Gc?l.left=o-(n>0?n:0):this.textAlign!==Fe&&this.textAlign!==$a||(l.left=o-(n>0?n:0))),l}renderCursorAt(e){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(e,!0),e)}renderCursor(e,t){this._renderCursor(e,t,this.selectionStart)}getCursorRenderingData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(e);const n=this.get2DCursorLocation(e),s=n.lineIndex,i=n.charIndex>0?n.charIndex-1:0,o=this.getValueOfPropertyAt(s,i,"fontSize"),a=this.getObjectScaling().x*this.canvas.getZoom(),l=this.cursorWidth/a,c=this.getValueOfPropertyAt(s,i,"deltaY"),u=t.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(s)/this.lineHeight-o*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(s,i,"fill"),opacity:this._currentCursorOpacity,left:t.left+t.leftOffset-l/2,top:u+t.top+c,width:l,height:o}}_renderCursor(e,t,n){const{color:s,opacity:i,left:o,top:a,width:l,height:c}=this.getCursorRenderingData(n,t);e.fillStyle=s,e.globalAlpha=i,e.fillRect(o,a,l,c)}renderSelection(e,t){const n={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(e,n,t)}renderDragSourceEffect(){const e=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,e,this._getCursorBoundaries(e.selectionStart,!0))}renderDropTargetEffect(e){const t=this.getSelectionStartFromPointer(e);this.renderCursorAt(t)}_renderSelection(e,t,n){const s=t.selectionStart,i=t.selectionEnd,o=this.textAlign.includes(Pr),a=this.get2DCursorLocation(s),l=this.get2DCursorLocation(i),c=a.lineIndex,u=l.lineIndex,h=a.charIndex<0?0:a.charIndex,d=l.charIndex<0?0:l.charIndex;for(let f=c;f<=u;f++){const g=this._getLineLeftOffset(f)||0;let p=this.getHeightOfLine(f),m=0,v=0,_=0;if(f===c&&(v=this.__charBounds[c][h].left),f>=c&&f<u)_=o&&!this.isEndOfWrapping(f)?this.width:this.getLineWidth(f)||5;else if(f===u)if(d===0)_=this.__charBounds[u][d].left;else{const b=this._getWidthOfCharSpacing();_=this.__charBounds[u][d-1].left+this.__charBounds[u][d-1].width-b}m=p,(this.lineHeight<1||f===u&&this.lineHeight>1)&&(p/=this.lineHeight);let x=n.left+g+v,y=p,C=0;const E=_-v;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",y=1,C=p):e.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===_t||this.textAlign===Pr||this.textAlign===Ha?x=this.width-x-E:this.textAlign===Xe||this.textAlign===Gc?x=n.left+g-_:this.textAlign!==Fe&&this.textAlign!==$a||(x=n.left+g-_)),e.fillRect(x,n.top+n.topOffset+C,E,y),n.topOffset+=m}}getCurrentCharFontSize(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")}getCurrentCharColor(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,Ft)}_getCurrentCharIndex(){const e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}F(kr,"ownDefaults",rO),F(kr,"type","IText"),oe.setClass(kr),oe.setClass(kr,"i-text");class Ms extends kr{static getDefaults(){return A(A({},super.getDefaults()),Ms.ownDefaults)}constructor(e,t){super(e,A(A({},Ms.ownDefaults),t))}static createControls(){return{controls:Ny()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(Pr)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(e){let t=0,n=0,s=0;const i={};for(let o=0;o<e.graphemeLines.length;o++)e.graphemeText[s]===`
`&&o>0?(n=0,s++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[s])&&o>0&&(n++,s++),i[o]={line:t,offset:n},s+=e.graphemeLines[o].length,n+=e.graphemeLines[o].length;return i}styleHas(e,t){if(this._styleMap&&!this.isWrapping){const n=this._styleMap[t];n&&(t=n.line)}return super.styleHas(e,t)}isEmptyStyles(e){if(!this.styles)return!0;let t,n=0,s=e+1,i=!1;const o=this._styleMap[e],a=this._styleMap[e+1];o&&(e=o.line,n=o.offset),a&&(s=a.line,i=s===e,t=a.offset);const l=e===void 0?this.styles:{line:this.styles[e]};for(const c in l)for(const u in l[c]){const h=parseInt(u,10);if(h>=n&&(!i||h<t))for(const d in l[c][u])return!1}return!0}_getStyleDeclaration(e,t){if(this._styleMap&&!this.isWrapping){const n=this._styleMap[e];if(!n)return{};e=n.line,t=n.offset+t}return super._getStyleDeclaration(e,t)}_setStyleDeclaration(e,t,n){const s=this._styleMap[e];super._setStyleDeclaration(s.line,s.offset+t,n)}_deleteStyleDeclaration(e,t){const n=this._styleMap[e];super._deleteStyleDeclaration(n.line,n.offset+t)}_getLineStyle(e){const t=this._styleMap[e];return!!this.styles[t.line]}_setLineStyle(e){const t=this._styleMap[e];super._setLineStyle(t.line)}_wrapText(e,t){this.isWrapping=!0;const n=this.getGraphemeDataForRender(e),s=[];for(let i=0;i<n.wordsData.length;i++)s.push(...this._wrapLine(i,t,n));return this.isWrapping=!1,s}getGraphemeDataForRender(e){const t=this.splitByGrapheme,n=t?"":" ";let s=0;return{wordsData:e.map((i,o)=>{let a=0;const l=t?this.graphemeSplit(i):this.wordSplit(i);return l.length===0?[{word:[],width:0}]:l.map(c=>{const u=t?[c]:this.graphemeSplit(c),h=this._measureWord(u,o,a);return s=Math.max(h,s),a+=u.length+n.length,{word:u,width:h}})}),largestWordWidth:s}}_measureWord(e,t){let n,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=0;for(let o=0,a=e.length;o<a;o++)i+=this._getGraphemeBox(e[o],t,o+s,n,!0).kernedWidth,n=e[o];return i}wordSplit(e){return e.split(this._wordJoiners)}_wrapLine(e,t,n){let{largestWordWidth:s,wordsData:i}=n,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const a=this._getWidthOfCharSpacing(),l=this.splitByGrapheme,c=[],u=l?"":" ";let h=0,d=[],f=0,g=0,p=!0;t-=o;const m=Math.max(t,s,this.dynamicMinWidth),v=i[e];let _;for(f=0,_=0;_<v.length;_++){const{word:x,width:y}=v[_];f+=x.length,h+=g+y-a,h>m&&!p?(c.push(d),d=[],h=y,p=!0):h+=a,p||l||d.push(u),d=d.concat(x),g=l?0:this._measureWord([u],e,f),f++,p=!1}return _&&c.push(d),s+o>this.dynamicMinWidth&&(this.dynamicMinWidth=s-a+o),c}isEndOfWrapping(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line}missingNewlineOffset(e,t){return this.splitByGrapheme&&!t?this.isEndOfWrapping(e)?1:0:1}_splitTextIntoLines(e){const t=super._splitTextIntoLines(e),n=this._wrapText(t.lines,this.width),s=new Array(n.length);for(let i=0;i<n.length;i++)s[i]=n[i].join("");return t.lines=s,t.graphemeLines=n,t}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const e=new Map;for(const t in this._styleMap){const n=parseInt(t,10);if(this._textLines[n]){const s=this._styleMap[t].line;e.set("".concat(s),!0)}}for(const t in this.styles)e.has(t)||delete this.styles[t]}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...e])}}F(Ms,"type","Textbox"),F(Ms,"textLayoutProperties",[...kr.textLayoutProperties,"width"]),F(Ms,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),oe.setClass(Ms);class Gp extends ju{shouldPerformLayout(e){return!!e.target.clipPath&&super.shouldPerformLayout(e)}shouldLayoutClipPath(){return!1}calcLayoutResult(e,t){const{target:n}=e,{clipPath:s,group:i}=n;if(!s||!this.shouldPerformLayout(e))return;const{width:o,height:a}=Ir(Zy(n,s)),l=new j(o,a);if(s.absolutePositioned)return{center:as(s.getRelativeCenterPoint(),void 0,i?i.calcTransformMatrix():void 0),size:l};{const c=s.getRelativeCenterPoint().transform(n.calcOwnMatrix(),!0);if(this.shouldPerformLayout(e)){const{center:u=new j,correction:h=new j}=this.calcBoundingBox(t,e)||{};return{center:u.add(c),correction:h.subtract(c),size:l}}return{center:n.getRelativeCenterPoint().add(c),size:l}}}}F(Gp,"type","clip-path"),oe.setClass(Gp);class qp extends ju{getInitialSize(e,t){let{target:n}=e,{size:s}=t;return new j(n.width||s.x,n.height||s.y)}}F(qp,"type","fixed"),oe.setClass(qp);class sO extends ll{subscribeTargets(e){const t=e.target;e.targets.reduce((n,s)=>(s.parent&&n.add(s.parent),n),new Set).forEach(n=>{n.layoutManager.subscribeTargets({target:n,targets:[t]})})}unsubscribeTargets(e){const t=e.target,n=t.getObjects();e.targets.reduce((s,i)=>(i.parent&&s.add(i.parent),s),new Set).forEach(s=>{!n.some(i=>i.parent===s)&&s.layoutManager.unsubscribeTargets({target:s,targets:[t]})})}}class Ps extends er{static getDefaults(){return A(A({},super.getDefaults()),Ps.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,Ps.ownDefaults),this.setOptions(t);const{left:n,top:s,layoutManager:i}=t;this.groupInit(e,{left:n,top:s,layoutManager:i??new sO})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.multiSelectionStacking==="selection-order"?this.add(...t):t.forEach(s=>{const i=this._objects.findIndex(a=>a.isInFrontOf(s)),o=i===-1?this.size():i;this.insertAt(o,s)})}canEnterGroup(e){return this.getObjects().some(t=>t.isDescendantOf(e)||e.isDescendantOf(t))?(Hs("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(e)}enterGroup(e,t){e.parent&&e.parent===e.group?e.parent._exitGroup(e):e.group&&e.parent!==e.group&&e.group.remove(e),this._enterGroup(e,t)}exitGroup(e,t){this._exitGroup(e,t),e.parent&&e.parent._enterGroup(e,!0)}_onAfterObjectsChange(e,t){super._onAfterObjectsChange(e,t);const n=new Set;t.forEach(s=>{const{parent:i}=s;i&&n.add(i)}),e===Nf?n.forEach(s=>{s._onAfterObjectsChange(Wc,t)}):n.forEach(s=>{s._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(e,t,n){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const s=A(A({hasControls:!1},n),{},{forActiveSelection:!0});for(let i=0;i<this._objects.length;i++)this._objects[i]._renderControls(e,s);super._renderControls(e,t),e.restore()}}F(Ps,"type","ActiveSelection"),F(Ps,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),oe.setClass(Ps),oe.setClass(Ps,"activeSelection");class iO{constructor(){F(this,"resources",{})}applyFilters(e,t,n,s,i){const o=i.getContext("2d");if(!o)return;o.drawImage(t,0,0,n,s);const a={sourceWidth:n,sourceHeight:s,imageData:o.getImageData(0,0,n,s),originalEl:t,originalImageData:o.getImageData(0,0,n,s),canvasEl:i,ctx:o,filterBackend:this};e.forEach(c=>{c.applyTo(a)});const{imageData:l}=a;return l.width===n&&l.height===s||(i.width=l.width,i.height=l.height),o.putImageData(l,0,0),a}}class Cb{constructor(){let{tileSize:e=He.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};F(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),F(this,"resources",{}),this.tileSize=e,this.setupGLContext(e,e),this.captureGPUInfo()}setupGLContext(e,t){this.dispose(),this.createWebGLCanvas(e,t)}createWebGLCanvas(e,t){const n=mr({width:e,height:t}),s=n.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});s&&(s.clearColor(0,0,0,0),this.canvas=n,this.gl=s)}applyFilters(e,t,n,s,i,o){const a=this.gl,l=i.getContext("2d");if(!a||!l)return;let c;o&&(c=this.getCachedTexture(o,t));const u={originalWidth:t.width||t.naturalWidth||0,originalHeight:t.height||t.naturalHeight||0,sourceWidth:n,sourceHeight:s,destinationWidth:n,destinationHeight:s,context:a,sourceTexture:this.createTexture(a,n,s,c?void 0:t),targetTexture:this.createTexture(a,n,s),originalTexture:c||this.createTexture(a,n,s,c?void 0:t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:i},h=a.createFramebuffer();return a.bindFramebuffer(a.FRAMEBUFFER,h),e.forEach(d=>{d&&d.applyTo(u)}),function(d){const f=d.targetCanvas,g=f.width,p=f.height,m=d.destinationWidth,v=d.destinationHeight;g===m&&p===v||(f.width=m,f.height=v)}(u),this.copyGLTo2D(a,u),a.bindTexture(a.TEXTURE_2D,null),a.deleteTexture(u.sourceTexture),a.deleteTexture(u.targetTexture),a.deleteFramebuffer(h),l.setTransform(1,0,0,1,0,0),u}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(e,t,n,s,i){const{NEAREST:o,TEXTURE_2D:a,RGBA:l,UNSIGNED_BYTE:c,CLAMP_TO_EDGE:u,TEXTURE_MAG_FILTER:h,TEXTURE_MIN_FILTER:d,TEXTURE_WRAP_S:f,TEXTURE_WRAP_T:g}=e,p=e.createTexture();return e.bindTexture(a,p),e.texParameteri(a,h,i||o),e.texParameteri(a,d,i||o),e.texParameteri(a,f,u),e.texParameteri(a,g,u),s?e.texImage2D(a,0,l,l,c,s):e.texImage2D(a,0,l,t,n,0,l,c,null),p}getCachedTexture(e,t,n){const{textureCache:s}=this;if(s[e])return s[e];{const i=this.createTexture(this.gl,t.width,t.height,t,n);return i&&(s[e]=i),i}}evictCachesForKey(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])}copyGLTo2D(e,t){const n=e.canvas,s=t.targetCanvas,i=s.getContext("2d");if(!i)return;i.translate(0,s.height),i.scale(1,-1);const o=n.height-s.height;i.drawImage(n,0,o,s.width,s.height,0,0,s.width,s.height)}copyGLTo2DPutImageData(e,t){const n=t.targetCanvas.getContext("2d"),s=t.destinationWidth,i=t.destinationHeight,o=s*i*4;if(!n)return;const a=new Uint8Array(this.imageBuffer,0,o),l=new Uint8ClampedArray(this.imageBuffer,0,o);e.readPixels(0,0,s,i,e.RGBA,e.UNSIGNED_BYTE,a);const c=new ImageData(l,s,i);n.putImageData(c,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const e=this.gl,t={renderer:"",vendor:""};if(!e)return t;const n=e.getExtension("WEBGL_debug_renderer_info");if(n){const s=e.getParameter(n.UNMASKED_RENDERER_WEBGL),i=e.getParameter(n.UNMASKED_VENDOR_WEBGL);s&&(t.renderer=s.toLowerCase()),i&&(t.vendor=i.toLowerCase())}return this.gpuInfo=t,t}}let Eh;function oO(){const{WebGLProbe:r}=Hr();return r.queryWebGL(nr()),He.enableGLFiltering&&r.isSupported(He.textureSize)?new Cb({tileSize:He.textureSize}):new iO}function Mh(){return!Eh&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(Eh=oO()),Eh}const aO=["filters","resizeFilter","src","crossOrigin","type"],wb=["cropX","cropY"];class un extends jt{static getDefaults(){return A(A({},super.getDefaults()),un.ownDefaults)}constructor(e,t){super(),F(this,"_lastScaleX",1),F(this,"_lastScaleY",1),F(this,"_filterScalingX",1),F(this,"_filterScalingY",1),this.filters=[],Object.assign(this,un.ownDefaults),this.setOptions(t),this.cacheKey="texture".concat(Ns()),this.setElement(typeof e=="string"?(this.canvas&&ir(this.canvas.getElement())||$o()).getElementById(e):e,t)}getElement(){return this._element}setElement(e){var t;let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=e,this._originalElement=e,this._setWidthHeight(n),(t=e.classList)===null||t===void 0||t.add(un.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(e){const t=Mh(!1);t instanceof Cb&&t.evictCachesForKey(e)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(e=>{const t=this[e];t&&Hr().dispose(t),this[e]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const e=this.getElement();return e?{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}:{width:0,height:0}}_stroke(e){if(!this.stroke||this.strokeWidth===0)return;const t=this.width/2,n=this.height/2;e.beginPath(),e.moveTo(-t,-n),e.lineTo(t,-n),e.lineTo(t,n),e.lineTo(-t,n),e.lineTo(-t,-n),e.closePath()}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=[];return this.filters.forEach(n=>{n&&t.push(n.toObject())}),A(A({},super.toObject([...wb,...e])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:t},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const e=[],t=this._element,n=-this.width/2,s=-this.height/2;let i=[],o=[],a="",l="";if(!t)return[];if(this.hasCrop()){const c=Ns();i.push('<clipPath id="imageCrop_'+c+`">
`,'	<rect x="'+n+'" y="'+s+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),a=' clip-path="url(#imageCrop_'+c+')" '}if(this.imageSmoothing||(l=' image-rendering="optimizeSpeed"'),e.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(n-this.cropX,'" y="').concat(s-this.cropY,'" width="').concat(t.width||t.naturalWidth,'" height="').concat(t.height||t.naturalHeight,'"').concat(l).concat(a,`></image>
`)),this.stroke||this.strokeDashArray){const c=this.fill;this.fill=null,o=['	<rect x="'.concat(n,'" y="').concat(s,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=c}return i=this.paintFirst!==Ft?i.concat(o,e):i.concat(e,o),i}getSrc(e){const t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src")||"":t.src:this.src||""}getSvgSrc(e){return this.getSrc(e)}setSrc(e){let{crossOrigin:t,signal:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return za(e,{crossOrigin:t,signal:n}).then(s=>{t!==void 0&&this.set({crossOrigin:t}),this.setElement(s)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const e=this.resizeFilter,t=this.minimumScaleTrigger,n=this.getTotalObjectScaling(),s=n.x,i=n.y,o=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||s>t&&i>t)return this._element=o,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=s,void(this._lastScaleY=i);const a=mr(o),{width:l,height:c}=o;this._element=a,this._lastScaleX=e.scaleX=s,this._lastScaleY=e.scaleY=i,Mh().applyFilters([e],o,l,c,this._element),this._filterScalingX=a.width/this._originalElement.width,this._filterScalingY=a.height/this._originalElement.height}applyFilters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(e=e.filter(i=>i&&!i.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),e.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const t=this._originalElement,n=t.naturalWidth||t.width,s=t.naturalHeight||t.height;if(this._element===this._originalElement){const i=mr({width:n,height:s});this._element=i,this._filteredEl=i}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,n,s),this._lastScaleX=1,this._lastScaleY=1);Mh().applyFilters(e,this._originalElement,n,s,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(e){e.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)}drawCacheOnCanvas(e){e.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(e)}shouldCache(){return this.needsItsOwnCache()}_renderFill(e){const t=this._element;if(!t)return;const n=this._filterScalingX,s=this._filterScalingY,i=this.width,o=this.height,a=Math.max(this.cropX,0),l=Math.max(this.cropY,0),c=t.naturalWidth||t.width,u=t.naturalHeight||t.height,h=a*n,d=l*s,f=Math.min(i*n,c-h),g=Math.min(o*s,u-d),p=-i/2,m=-o/2,v=Math.min(i,c/n-a),_=Math.min(o,u/s-l);t&&e.drawImage(t,h,d,f,g,p,m,v,_)}_needsResize(){const e=this.getTotalObjectScaling();return e.x!==this._lastScaleX||e.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:e,height:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this.getOriginalSize();this.width=e||n.width,this.height=t||n.height}parsePreserveAspectRatioAttribute(){const e=hy(this.preserveAspectRatio||""),t=this.width,n=this.height,s={width:t,height:n};let i,o=this._element.width,a=this._element.height,l=1,c=1,u=0,h=0,d=0,f=0;return!e||e.alignX===wn&&e.alignY===wn?(l=t/o,c=n/a):(e.meetOrSlice==="meet"&&(l=c=Qy(this._element,s),i=(t-o*l)/2,e.alignX==="Min"&&(u=-i),e.alignX==="Max"&&(u=i),i=(n-a*c)/2,e.alignY==="Min"&&(h=-i),e.alignY==="Max"&&(h=i)),e.meetOrSlice==="slice"&&(l=c=eb(this._element,s),i=o-t/l,e.alignX==="Mid"&&(d=i/2),e.alignX==="Max"&&(d=i),i=a-n/c,e.alignY==="Mid"&&(f=i/2),e.alignY==="Max"&&(f=i),o=t/l,a=n/c)),{width:o,height:a,scaleX:l,scaleY:c,offsetLeft:u,offsetTop:h,cropX:d,cropY:f}}static fromObject(e,t){let{filters:n,resizeFilter:s,src:i,crossOrigin:o,type:a}=e,l=lt(e,aO);return Promise.all([za(i,A(A({},t),{},{crossOrigin:o})),n&&Ao(n,t),s&&Ao([s],t),Ol(l,t)]).then(c=>{let[u,h=[],[d]=[],f={}]=c;return new this(u,A(A({},l),{},{src:i,filters:h,resizeFilter:d},f))})}static fromURL(e){let{crossOrigin:t=null,signal:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;return za(e,{crossOrigin:t,signal:n}).then(i=>new this(i,s))}static async fromElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const s=fs(e,this.ATTRIBUTE_NAMES,n);return this.fromURL(s["xlink:href"],t,s).catch(i=>(Hs("log","Unable to parse Image",i),null))}}F(un,"type","Image"),F(un,"cacheProperties",[...ds,...wb]),F(un,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),F(un,"CSS_CANVAS","canvas-img"),F(un,"ATTRIBUTE_NAMES",[...Js,"x","y","width","height","preserveAspectRatio","xlink:href","crossOrigin","image-rendering"]),oe.setClass(un),oe.setSVGClass(un);Ru(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const Sb=ny,Kp=r=>function(e,t,n){const{points:s,pathOffset:i}=n;return new j(s[r]).subtract(i).transform(pt(n.getViewportTransform(),n.calcTransformMatrix()))},Tb=(r,e,t,n)=>{const{target:s,pointIndex:i}=e,o=s,a=as(new j(t,n),void 0,o.calcOwnMatrix());return o.points[i]=a.add(o.pathOffset),o.setDimensions(),!0},Ob=(r,e)=>function(t,n,s,i){const o=n.target,a=new j(o.points[(r>0?r:o.points.length)-1]),l=a.subtract(o.pathOffset).transform(o.calcOwnMatrix()),c=e(t,A(A({},n),{},{pointIndex:r}),s,i),u=a.subtract(o.pathOffset).transform(o.calcOwnMatrix()).subtract(l);return o.left-=u.x,o.top-=u.y,c},Zp=r=>Zs(Sb,Ob(r,Tb)),Od=(r,e,t)=>{const{path:n,pathOffset:s}=r,i=n[e];return new j(i[t]-s.x,i[t+1]-s.y).transform(pt(r.getViewportTransform(),r.calcTransformMatrix()))};function lO(r,e,t){const{commandIndex:n,pointIndex:s}=this;return Od(t,n,s)}function cO(r,e,t,n){const{target:s}=e,{commandIndex:i,pointIndex:o}=this,a=((l,c,u,h,d)=>{const{path:f,pathOffset:g}=l,p=f[(h>0?h:f.length)-1],m=new j(p[d],p[d+1]),v=m.subtract(g).transform(l.calcOwnMatrix()),_=as(new j(c,u),void 0,l.calcOwnMatrix());f[h][d]=_.x+g.x,f[h][d+1]=_.y+g.y,l.setDimensions();const x=m.subtract(l.pathOffset).transform(l.calcOwnMatrix()).subtract(v);return l.left-=x.x,l.top-=x.y,l.set("dirty",!0),!0})(s,t,n,i,o);return kf(this.actionName,A(A({},Rf(r,e,t,n)),{},{commandIndex:i,pointIndex:o})),a}class Eb extends bn{constructor(e){super(e)}render(e,t,n,s,i){const o=A(A({},s),{},{cornerColor:this.controlFill,cornerStrokeColor:this.controlStroke,transparentCorners:!this.controlFill});super.render(e,t,n,o,i)}}class uO extends Eb{constructor(e){super(e)}render(e,t,n,s,i){const{path:o}=i,{commandIndex:a,pointIndex:l,connectToCommandIndex:c,connectToPointIndex:u}=this;e.save(),e.strokeStyle=this.controlStroke,this.connectionDashArray&&e.setLineDash(this.connectionDashArray);const[h]=o[a],d=Od(i,c,u);if(h==="Q"){const f=Od(i,a,l+2);e.moveTo(f.x,f.y),e.lineTo(t,n)}else e.moveTo(t,n);e.lineTo(d.x,d.y),e.stroke(),e.restore(),super.render(e,t,n,s,i)}}const Kl=(r,e,t,n,s,i)=>new(t?uO:Eb)(A(A({commandIndex:r,pointIndex:e,actionName:"modifyPath",positionHandler:lO,actionHandler:cO,connectToCommandIndex:s,connectToPointIndex:i},n),t?n.controlPointStyle:n.pointStyle));var Mb=Object.freeze({__proto__:null,changeWidth:yd,createObjectDefaultControls:zf,createPathControls:function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const t={};let n="M";return r.path.forEach((s,i)=>{const o=s[0];switch(o!=="Z"&&(t["c_".concat(i,"_").concat(o)]=Kl(i,s.length-2,!1,e)),o){case"C":t["c_".concat(i,"_C_CP_1")]=Kl(i,1,!0,e,i-1,(a=>a==="C"?5:a==="Q"?3:1)(n)),t["c_".concat(i,"_C_CP_2")]=Kl(i,3,!0,e,i,5);break;case"Q":t["c_".concat(i,"_Q_CP_1")]=Kl(i,1,!0,e,i,3)}n=o}),t},createPolyActionHandler:Zp,createPolyControls:function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const t={};for(let n=0;n<(typeof r=="number"?r:r.points.length);n++)t["p".concat(n)]=new bn(A({actionName:Sb,positionHandler:Kp(n),actionHandler:Zp(n)},e));return t},createPolyPositionHandler:Kp,createResizeControls:$y,createTextboxDefaultControls:Ny,dragHandler:Cy,factoryPolyActionHandler:Ob,getLocalPoint:ku,polyActionHandler:Tb,renderCircleControl:Py,renderSquareControl:Ay,rotationStyleHandler:Fy,rotationWithSnapping:ky,scaleCursorStyleHandler:no,scaleOrSkewActionName:ua,scaleSkewCursorStyleHandler:mi,scalingEqually:ca,scalingX:Iy,scalingXOrSkewingY:bd,scalingY:Ly,scalingYOrSkewingX:_d,skewCursorStyleHandler:By,skewHandlerX:zy,skewHandlerY:Hy,wrapWithFireEvent:Zs,wrapWithFixedAnchor:Vi});const Hu=r=>r.webgl!==void 0,Wf="precision highp float",hO=`
    `.concat(Wf,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),dO=["type"],fO=["type"],gO=new RegExp(Wf,"g");class Mt{get type(){return this.constructor.type}constructor(){let e=lt(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},dO);Object.assign(this,this.constructor.defaults,e)}getFragmentSource(){return hO}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:s="highp"}}=Hr();s!=="highp"&&(t=t.replace(gO,Wf.replace("highp",s)));const i=e.createShader(e.VERTEX_SHADER),o=e.createShader(e.FRAGMENT_SHADER),a=e.createProgram();if(!i||!o||!a)throw new Fr("Vertex, fragment shader or program creation error");if(e.shaderSource(i,n),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))throw new Fr("Vertex shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(i)));if(e.shaderSource(o,t),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS))throw new Fr("Fragment shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(o)));if(e.attachShader(a,i),e.attachShader(a,o),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS))throw new Fr('Shader link error for "'.concat(this.type,'" ').concat(e.getProgramInfoLog(a)));const l=this.getUniformLocations(e,a)||{};return l.uStepW=e.getUniformLocation(a,"uStepW"),l.uStepH=e.getUniformLocation(a,"uStepH"),{program:a,attributeLocations:this.getAttributeLocations(e,a),uniformLocations:l}}getAttributeLocations(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}}getUniformLocations(e,t){const n=this.constructor.uniformLocations,s={};for(let i=0;i<n.length;i++)s[n[i]]=e.getUniformLocation(t,n[i]);return s}sendAttributeData(e,t,n){const s=t.aPosition,i=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,i),e.enableVertexAttribArray(s),e.vertexAttribPointer(s,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)}_setupFrameBuffer(e){const t=e.context;if(e.passes>1){const n=e.destinationWidth,s=e.destinationHeight;e.sourceWidth===n&&e.sourceHeight===s||(t.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(t,n,s)),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.targetTexture,0)}else t.bindFramebuffer(t.FRAMEBUFFER,null),t.finish()}_swapTextures(e){e.passes--,e.pass++;const t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t}isNeutralState(e){return!1}applyTo(e){Hu(e)?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){}getCacheKey(){return this.type}retrieveShader(e){const t=this.getCacheKey();return e.programCache[t]||(e.programCache[t]=this.createProgram(e.context)),e.programCache[t]}applyToWebGL(e){const t=e.context,n=this.retrieveShader(e);e.pass===0&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(n.program),this.sendAttributeData(t,n.attributeLocations,e.aPosition),t.uniform1f(n.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(n.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,n.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(e,t,n){e.activeTexture(n),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)}unbindAdditionalTexture(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)}sendUniformData(e,t){}createHelpLayer(e){if(!e.helpLayer){const{sourceWidth:t,sourceHeight:n}=e,s=mr({width:t,height:n});e.helpLayer=s}}toObject(){const e=Object.keys(this.constructor.defaults||{});return A({type:this.type},e.reduce((t,n)=>(t[n]=this[n],t),{}))}toJSON(){return this.toObject()}static async fromObject(e,t){return new this(lt(e,fO))}}F(Mt,"type","BaseFilter"),F(Mt,"uniformLocations",[]);const pO={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class ha extends Mt{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(pO[this.mode],`
        }
      }
      `)}applyTo2d(e){let{imageData:{data:t}}=e;const n=new Ge(this.color).getSource(),s=this.alpha,i=n[0]*s,o=n[1]*s,a=n[2]*s,l=1-s;for(let c=0;c<t.length;c+=4){const u=t[c],h=t[c+1],d=t[c+2];let f,g,p;switch(this.mode){case"multiply":f=u*i/255,g=h*o/255,p=d*a/255;break;case"screen":f=255-(255-u)*(255-i)/255,g=255-(255-h)*(255-o)/255,p=255-(255-d)*(255-a)/255;break;case"add":f=u+i,g=h+o,p=d+a;break;case"difference":f=Math.abs(u-i),g=Math.abs(h-o),p=Math.abs(d-a);break;case"subtract":f=u-i,g=h-o,p=d-a;break;case"darken":f=Math.min(u,i),g=Math.min(h,o),p=Math.min(d,a);break;case"lighten":f=Math.max(u,i),g=Math.max(h,o),p=Math.max(d,a);break;case"overlay":f=i<128?2*u*i/255:255-2*(255-u)*(255-i)/255,g=o<128?2*h*o/255:255-2*(255-h)*(255-o)/255,p=a<128?2*d*a/255:255-2*(255-d)*(255-a)/255;break;case"exclusion":f=i+u-2*i*u/255,g=o+h-2*o*h/255,p=a+d-2*a*d/255;break;case"tint":f=i+u*l,g=o+h*l,p=a+d*l}t[c]=f,t[c+1]=g,t[c+2]=p}}sendUniformData(e,t){const n=new Ge(this.color).getSource();n[0]=this.alpha*n[0]/255,n[1]=this.alpha*n[1]/255,n[2]=this.alpha*n[2]/255,n[3]=this.alpha,e.uniform4fv(t.uColor,n)}}F(ha,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),F(ha,"type","BlendColor"),F(ha,"uniformLocations",["uColor"]),oe.setClass(ha);const mO={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},vO=["type","image"];class da extends Mt{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return mO[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(e){const t=e.context,n=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,n,t.TEXTURE1),super.applyToWebGL(e),this.unbindAdditionalTexture(t,t.TEXTURE1)}createTexture(e,t){return e.getCachedTexture(t.cacheKey,t.getElement())}calculateMatrix(){const e=this.image,{width:t,height:n}=e.getElement();return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/n,1]}applyTo2d(e){let{imageData:{data:t,width:n,height:s},filterBackend:{resources:i}}=e;const o=this.image;i.blendImage||(i.blendImage=nr());const a=i.blendImage,l=a.getContext("2d");a.width!==n||a.height!==s?(a.width=n,a.height=s):l.clearRect(0,0,n,s),l.setTransform(o.scaleX,0,0,o.scaleY,o.left,o.top),l.drawImage(o.getElement(),0,0,n,s);const c=l.getImageData(0,0,n,s).data;for(let u=0;u<t.length;u+=4){const h=t[u],d=t[u+1],f=t[u+2],g=t[u+3],p=c[u],m=c[u+1],v=c[u+2],_=c[u+3];switch(this.mode){case"multiply":t[u]=h*p/255,t[u+1]=d*m/255,t[u+2]=f*v/255,t[u+3]=g*_/255;break;case"mask":t[u+3]=_}}}sendUniformData(e,t){const n=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,n)}toObject(){return A(A({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(e,t){let{type:n,image:s}=e,i=lt(e,vO);return un.fromObject(s,t).then(o=>new this(A(A({},i),{},{image:o})))}}F(da,"type","BlendImage"),F(da,"defaults",{mode:"multiply",alpha:1}),F(da,"uniformLocations",["uTransformMatrix","uImage"]),oe.setClass(da);class fa extends Mt{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float total = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        float weight = 1.0 - abs(percent);
        color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
        total += weight;
      }
      gl_FragColor = color / total;
    }
  `}applyTo(e){Hu(e)?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){e.imageData=this.simpleBlur(e)}simpleBlur(e){let{ctx:t,imageData:n,filterBackend:{resources:s}}=e;const{width:i,height:o}=n;s.blurLayer1||(s.blurLayer1=nr(),s.blurLayer2=nr());const a=s.blurLayer1,l=s.blurLayer2;a.width===i&&a.height===o||(l.width=a.width=i,l.height=a.height=o);const c=a.getContext("2d"),u=l.getContext("2d"),h=15,d=.06*this.blur*.5;let f,g,p,m;for(c.putImageData(n,0,0),u.clearRect(0,0,i,o),m=-15;m<=h;m++)f=(Math.random()-.5)/4,g=m/h,p=d*g*i+f,u.globalAlpha=1-Math.abs(g),u.drawImage(a,p,f),c.drawImage(l,0,0),u.globalAlpha=1,u.clearRect(0,0,l.width,l.height);for(m=-15;m<=h;m++)f=(Math.random()-.5)/4,g=m/h,p=d*g*o+f,u.globalAlpha=1-Math.abs(g),u.drawImage(a,f,p),c.drawImage(l,0,0),u.globalAlpha=1,u.clearRect(0,0,l.width,l.height);t.drawImage(a,0,0);const v=t.getImageData(0,0,a.width,a.height);return c.globalAlpha=1,c.clearRect(0,0,a.width,a.height),v}sendUniformData(e,t){const n=this.chooseRightDelta();e.uniform2fv(t.uDelta,n)}isNeutralState(){return this.blur===0}chooseRightDelta(){let e=1;const t=[0,0];this.horizontal?this.aspectRatio>1&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectRatio);const n=e*this.blur*.12;return this.horizontal?t[0]=n:t[1]=n,t}}F(fa,"type","Blur"),F(fa,"defaults",{blur:0}),F(fa,"uniformLocations",["uDelta"]),oe.setClass(fa);class ga extends Mt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=Math.round(255*this.brightness);for(let s=0;s<t.length;s+=4)t[s]+=n,t[s+1]+=n,t[s+2]+=n}isNeutralState(){return this.brightness===0}sendUniformData(e,t){e.uniform1f(t.uBrightness,this.brightness)}}F(ga,"type","Brightness"),F(ga,"defaults",{brightness:0}),F(ga,"uniformLocations",["uBrightness"]),oe.setClass(ga);const Pb={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class vi extends Mt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(e){const t=e.imageData.data,n=this.matrix,s=this.colorsOnly;for(let i=0;i<t.length;i+=4){const o=t[i],a=t[i+1],l=t[i+2];if(t[i]=o*n[0]+a*n[1]+l*n[2]+255*n[4],t[i+1]=o*n[5]+a*n[6]+l*n[7]+255*n[9],t[i+2]=o*n[10]+a*n[11]+l*n[12]+255*n[14],!s){const c=t[i+3];t[i]+=c*n[3],t[i+1]+=c*n[8],t[i+2]+=c*n[13],t[i+3]=o*n[15]+a*n[16]+l*n[17]+c*n[18]+255*n[19]}}}sendUniformData(e,t){const n=this.matrix,s=[n[0],n[1],n[2],n[3],n[5],n[6],n[7],n[8],n[10],n[11],n[12],n[13],n[15],n[16],n[17],n[18]],i=[n[4],n[9],n[14],n[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,s),e.uniform4fv(t.uConstants,i)}toObject(){return A(A({},super.toObject()),{},{matrix:[...this.matrix]})}}function Wi(r,e){var t;const n=(F(t=class extends vi{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",r),F(t,"defaults",{colorsOnly:!1,matrix:e}),t);return oe.setClass(n,r),n}F(vi,"type","ColorMatrix"),F(vi,"defaults",Pb),F(vi,"uniformLocations",["uColorMatrix","uConstants"]),oe.setClass(vi);const yO=Wi("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]),bO=Wi("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]),_O=Wi("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]),xO=Wi("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]),CO=Wi("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]),wO=Wi("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]),SO=Wi("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class Ed extends Mt{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.subFilters=e.subFilters||[]}applyTo(e){Hu(e)&&(e.passes+=this.subFilters.length-1),this.subFilters.forEach(t=>{t.applyTo(e)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(e=>e.toObject())}}isNeutralState(){return!this.subFilters.some(e=>!e.isNeutralState())}static fromObject(e,t){return Promise.all((e.subFilters||[]).map(n=>oe.getClass(n.type).fromObject(n,t))).then(n=>new this({subFilters:n}))}}F(Ed,"type","Composed"),oe.setClass(Ed);class pa extends Mt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(e){let{imageData:{data:t}}=e;const n=Math.floor(255*this.contrast),s=259*(n+255)/(255*(259-n));for(let i=0;i<t.length;i+=4)t[i]=s*(t[i]-128)+128,t[i+1]=s*(t[i+1]-128)+128,t[i+2]=s*(t[i+2]-128)+128}sendUniformData(e,t){e.uniform1f(t.uContrast,this.contrast)}}F(pa,"type","Contrast"),F(pa,"defaults",{contrast:0}),F(pa,"uniformLocations",["uContrast"]),oe.setClass(pa);const TO={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class ma extends Mt{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return TO[this.getCacheKey()]}applyTo2d(e){const t=e.imageData,n=t.data,s=this.matrix,i=Math.round(Math.sqrt(s.length)),o=Math.floor(i/2),a=t.width,l=t.height,c=e.ctx.createImageData(a,l),u=c.data,h=this.opaque?1:0;let d,f,g,p,m,v,_,x,y,C,E,b,w;for(E=0;E<l;E++)for(C=0;C<a;C++){for(m=4*(E*a+C),d=0,f=0,g=0,p=0,w=0;w<i;w++)for(b=0;b<i;b++)_=E+w-o,v=C+b-o,_<0||_>=l||v<0||v>=a||(x=4*(_*a+v),y=s[w*i+b],d+=n[x]*y,f+=n[x+1]*y,g+=n[x+2]*y,h||(p+=n[x+3]*y));u[m]=d,u[m+1]=f,u[m+2]=g,u[m+3]=h?n[m+3]:p}e.imageData=c}sendUniformData(e,t){e.uniform1fv(t.uMatrix,this.matrix)}toObject(){return A(A({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}F(ma,"type","Convolute"),F(ma,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),F(ma,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),oe.setClass(ma);const Ab="Gamma";class va extends Mt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.gamma=e.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(e){let{imageData:{data:t}}=e;const n=this.gamma,s=1/n[0],i=1/n[1],o=1/n[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const a=this.rgbValues;for(let l=0;l<256;l++)a.r[l]=255*Math.pow(l/255,s),a.g[l]=255*Math.pow(l/255,i),a.b[l]=255*Math.pow(l/255,o);for(let l=0;l<t.length;l+=4)t[l]=a.r[t[l]],t[l+1]=a.g[t[l+1]],t[l+2]=a.b[t[l+2]]}sendUniformData(e,t){e.uniform3fv(t.uGamma,this.gamma)}isNeutralState(){const{gamma:e}=this;return e[0]===1&&e[1]===1&&e[2]===1}toObject(){return{type:Ab,gamma:this.gamma.concat()}}}F(va,"type",Ab),F(va,"defaults",{gamma:[1,1,1]}),F(va,"uniformLocations",["uGamma"]),oe.setClass(va);const OO={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class ya extends Mt{applyTo2d(e){let{imageData:{data:t}}=e;for(let n,s=0;s<t.length;s+=4){const i=t[s],o=t[s+1],a=t[s+2];switch(this.mode){case"average":n=(i+o+a)/3;break;case"lightness":n=(Math.min(i,o,a)+Math.max(i,o,a))/2;break;case"luminosity":n=.21*i+.72*o+.07*a}t[s+2]=t[s+1]=t[s]=n}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return OO[this.mode]}sendUniformData(e,t){e.uniform1i(t.uMode,1)}isNeutralState(){return!1}}F(ya,"type","Grayscale"),F(ya,"defaults",{mode:"average"}),F(ya,"uniformLocations",["uMode"]),oe.setClass(ya);const EO=A(A({},Pb),{},{rotation:0});class gc extends vi{calculateMatrix(){const e=this.rotation*Math.PI,t=gr(e),n=pr(e),s=1/3,i=Math.sqrt(s)*n,o=1-t;this.matrix=[t+o/3,s*o-i,s*o+i,0,0,s*o+i,t+s*o,s*o-i,0,0,s*o-i,s*o+i,t+s*o,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(e){this.calculateMatrix(),super.applyTo(e)}toObject(){return{type:this.type,rotation:this.rotation}}}F(gc,"type","HueRotation"),F(gc,"defaults",EO),oe.setClass(gc);class ba extends Mt{applyTo2d(e){let{imageData:{data:t}}=e;for(let n=0;n<t.length;n+=4)t[n]=255-t[n],t[n+1]=255-t[n+1],t[n+2]=255-t[n+2],this.alpha&&(t[n+3]=255-t[n+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(e,t){e.uniform1i(t.uInvert,Number(this.invert)),e.uniform1i(t.uAlpha,Number(this.alpha))}}F(ba,"type","Invert"),F(ba,"defaults",{alpha:!1,invert:!0}),F(ba,"uniformLocations",["uInvert","uAlpha"]),oe.setClass(ba);class _a extends Mt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=this.noise;for(let s=0;s<t.length;s+=4){const i=(.5-Math.random())*n;t[s]+=i,t[s+1]+=i,t[s+2]+=i}}sendUniformData(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())}isNeutralState(){return this.noise===0}}F(_a,"type","Noise"),F(_a,"defaults",{noise:0}),F(_a,"uniformLocations",["uNoise","uSeed"]),oe.setClass(_a);class xa extends Mt{applyTo2d(e){let{imageData:{data:t,width:n,height:s}}=e;for(let i=0;i<s;i+=this.blocksize)for(let o=0;o<n;o+=this.blocksize){const a=4*i*n+4*o,l=t[a],c=t[a+1],u=t[a+2],h=t[a+3];for(let d=i;d<Math.min(i+this.blocksize,s);d++)for(let f=o;f<Math.min(o+this.blocksize,n);f++){const g=4*d*n+4*f;t[g]=l,t[g+1]=c,t[g+2]=u,t[g+3]=h}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}F(xa,"type","Pixelate"),F(xa,"defaults",{blocksize:4}),F(xa,"uniformLocations",["uBlocksize"]),oe.setClass(xa);class Ca extends Mt{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=255*this.distance,s=new Ge(this.color).getSource(),i=[s[0]-n,s[1]-n,s[2]-n],o=[s[0]+n,s[1]+n,s[2]+n];for(let a=0;a<t.length;a+=4){const l=t[a],c=t[a+1],u=t[a+2];l>i[0]&&c>i[1]&&u>i[2]&&l<o[0]&&c<o[1]&&u<o[2]&&(t[a+3]=0)}}sendUniformData(e,t){const n=new Ge(this.color).getSource(),s=this.distance,i=[0+n[0]/255-s,0+n[1]/255-s,0+n[2]/255-s,1],o=[n[0]/255+s,n[1]/255+s,n[2]/255+s,1];e.uniform4fv(t.uLow,i),e.uniform4fv(t.uHigh,o)}}F(Ca,"type","RemoveColor"),F(Ca,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),F(Ca,"uniformLocations",["uLow","uHigh"]),oe.setClass(Ca);class wa extends Mt{sendUniformData(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)}getFilterWindow(){const e=this.tempScale;return Math.ceil(this.lanczosLobes/e)}getCacheKey(){const e=this.getFilterWindow();return"".concat(this.type,"_").concat(e)}getFragmentSource(){const e=this.getFilterWindow();return this.generateShader(e)}getTaps(){const e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,n=this.getFilterWindow(),s=new Array(n);for(let i=1;i<=n;i++)s[i-1]=e(i*t);return s}generateShader(e){const t=new Array(e);for(let n=1;n<=e;n++)t[n-1]="".concat(n,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(e,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(t.map((n,s)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(n,") * uTaps[").concat(s,"] + texture2D(uTexture, vTexCoord - ").concat(n,") * uTaps[").concat(s,`];
              sum += 2.0 * uTaps[`).concat(s,`];
            `)).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(e){e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,super.applyTo(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,super.applyTo(e),e.sourceHeight=e.destinationHeight}applyTo(e){Hu(e)?this.applyToForWebgl(e):this.applyTo2d(e)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(e){return t=>{if(t>=e||t<=-e)return 0;if(t<11920929e-14&&t>-11920929e-14)return 1;const n=(t*=Math.PI)/e;return Math.sin(t)/t*Math.sin(n)/n}}applyTo2d(e){const t=e.imageData,n=this.scaleX,s=this.scaleY;this.rcpScaleX=1/n,this.rcpScaleY=1/s;const i=t.width,o=t.height,a=Math.round(i*n),l=Math.round(o*s);let c;c=this.resizeType==="sliceHack"?this.sliceByTwo(e,i,o,a,l):this.resizeType==="hermite"?this.hermiteFastResize(e,i,o,a,l):this.resizeType==="bilinear"?this.bilinearFiltering(e,i,o,a,l):this.resizeType==="lanczos"?this.lanczosResize(e,i,o,a,l):new ImageData(a,l),e.imageData=c}sliceByTwo(e,t,n,s,i){const o=e.imageData,a=.5;let l=!1,c=!1,u=t*a,h=n*a;const d=e.filterBackend.resources;let f=0,g=0;const p=t;let m=0;d.sliceByTwo||(d.sliceByTwo=nr());const v=d.sliceByTwo;(v.width<1.5*t||v.height<n)&&(v.width=1.5*t,v.height=n);const _=v.getContext("2d");for(_.clearRect(0,0,1.5*t,n),_.putImageData(o,0,0),s=Math.floor(s),i=Math.floor(i);!l||!c;)t=u,n=h,s<Math.floor(u*a)?u=Math.floor(u*a):(u=s,l=!0),i<Math.floor(h*a)?h=Math.floor(h*a):(h=i,c=!0),_.drawImage(v,f,g,t,n,p,m,u,h),f=p,g=m,m+=h;return _.getImageData(f,g,s,i)}lanczosResize(e,t,n,s,i){const o=e.imageData.data,a=e.ctx.createImageData(s,i),l=a.data,c=this.lanczosCreate(this.lanczosLobes),u=this.rcpScaleX,h=this.rcpScaleY,d=2/this.rcpScaleX,f=2/this.rcpScaleY,g=Math.ceil(u*this.lanczosLobes/2),p=Math.ceil(h*this.lanczosLobes/2),m={},v={x:0,y:0},_={x:0,y:0};return function x(y){let C,E,b,w,S,$,N,H,U,ee,re;for(v.x=(y+.5)*u,_.x=Math.floor(v.x),C=0;C<i;C++){for(v.y=(C+.5)*h,_.y=Math.floor(v.y),S=0,$=0,N=0,H=0,U=0,E=_.x-g;E<=_.x+g;E++)if(!(E<0||E>=t)){ee=Math.floor(1e3*Math.abs(E-v.x)),m[ee]||(m[ee]={});for(let te=_.y-p;te<=_.y+p;te++)te<0||te>=n||(re=Math.floor(1e3*Math.abs(te-v.y)),m[ee][re]||(m[ee][re]=c(Math.sqrt(Math.pow(ee*d,2)+Math.pow(re*f,2))/1e3)),b=m[ee][re],b>0&&(w=4*(te*t+E),S+=b,$+=b*o[w],N+=b*o[w+1],H+=b*o[w+2],U+=b*o[w+3]))}w=4*(C*s+y),l[w]=$/S,l[w+1]=N/S,l[w+2]=H/S,l[w+3]=U/S}return++y<s?x(y):a}(0)}bilinearFiltering(e,t,n,s,i){let o,a,l,c,u,h,d,f,g,p,m,v,_,x=0;const y=this.rcpScaleX,C=this.rcpScaleY,E=4*(t-1),b=e.imageData.data,w=e.ctx.createImageData(s,i),S=w.data;for(d=0;d<i;d++)for(f=0;f<s;f++)for(u=Math.floor(y*f),h=Math.floor(C*d),g=y*f-u,p=C*d-h,_=4*(h*t+u),m=0;m<4;m++)o=b[_+m],a=b[_+4+m],l=b[_+E+m],c=b[_+E+4+m],v=o*(1-g)*(1-p)+a*g*(1-p)+l*p*(1-g)+c*g*p,S[x++]=v;return w}hermiteFastResize(e,t,n,s,i){const o=this.rcpScaleX,a=this.rcpScaleY,l=Math.ceil(o/2),c=Math.ceil(a/2),u=e.imageData.data,h=e.ctx.createImageData(s,i),d=h.data;for(let f=0;f<i;f++)for(let g=0;g<s;g++){const p=4*(g+f*s);let m=0,v=0,_=0,x=0,y=0,C=0,E=0;const b=(f+.5)*a;for(let w=Math.floor(f*a);w<(f+1)*a;w++){const S=Math.abs(b-(w+.5))/c,$=(g+.5)*o,N=S*S;for(let H=Math.floor(g*o);H<(g+1)*o;H++){let U=Math.abs($-(H+.5))/l;const ee=Math.sqrt(N+U*U);ee>1&&ee<-1||(m=2*ee*ee*ee-3*ee*ee+1,m>0&&(U=4*(H+w*t),E+=m*u[U+3],_+=m,u[U+3]<255&&(m=m*u[U+3]/250),x+=m*u[U],y+=m*u[U+1],C+=m*u[U+2],v+=m))}}d[p]=x/v,d[p+1]=y/v,d[p+2]=C/v,d[p+3]=E/_}return h}}F(wa,"type","Resize"),F(wa,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),F(wa,"uniformLocations",["uDelta","uTaps"]),oe.setClass(wa);class Sa extends Mt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=-this.saturation;for(let s=0;s<t.length;s+=4){const i=t[s],o=t[s+1],a=t[s+2],l=Math.max(i,o,a);t[s]+=l!==i?(l-i)*n:0,t[s+1]+=l!==o?(l-o)*n:0,t[s+2]+=l!==a?(l-a)*n:0}}sendUniformData(e,t){e.uniform1f(t.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}F(Sa,"type","Saturation"),F(Sa,"defaults",{saturation:0}),F(Sa,"uniformLocations",["uSaturation"]),oe.setClass(Sa);class Ta extends Mt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=-this.vibrance;for(let s=0;s<t.length;s+=4){const i=t[s],o=t[s+1],a=t[s+2],l=Math.max(i,o,a),c=(i+o+a)/3,u=2*Math.abs(l-c)/255*n;t[s]+=l!==i?(l-i)*u:0,t[s+1]+=l!==o?(l-o)*u:0,t[s+2]+=l!==a?(l-a)*u:0}}sendUniformData(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}F(Ta,"type","Vibrance"),F(Ta,"defaults",{vibrance:0}),F(Ta,"uniformLocations",["uVibrance"]),oe.setClass(Ta);var xr=Object.freeze({__proto__:null,BaseFilter:Mt,BlackWhite:SO,BlendColor:ha,BlendImage:da,Blur:fa,Brightness:ga,Brownie:yO,ColorMatrix:vi,Composed:Ed,Contrast:pa,Convolute:ma,Gamma:va,Grayscale:ya,HueRotation:gc,Invert:ba,Kodachrome:_O,Noise:_a,Pixelate:xa,Polaroid:CO,RemoveColor:Ca,Resize:wa,Saturation:Sa,Sepia:wO,Technicolor:xO,Vibrance:Ta,Vintage:bO});const Zl={FRAME:{WIDTH:426.67,HEIGHT:240},PAGE_FRAME:{WIDTH:1280,HEIGHT:720}},Lt={PRIMARY:"#3564FF",TRANSPARENT:"transparent",TEXT:"#333333",BORDER:{DEFAULT:"transparent",HOVER:"#3564FF",SLIDES_HOVER:"#2ecc71",SLIDES_SELECTED:"#2ecc71",SELECTED:"#3564FF",UNSELECTED:"#747C87"},BACKGROUND:{DEFAULT:"#ffffff",HOVER:"#f0f0f0"}},Rr={PADDING_0:0,CORNER_SIZE:8,STROKE_WIDTH:1,BORDER_LINE_WIDTH_TEXT:1.5,BORDER_SCALE_FACTOR:1,MIN_ZOOM:.1,MAX_ZOOM:100},As={CORNER:{STYLE:"circle",COLOR:Lt.PRIMARY,SLIDES_COLOR:Lt.BORDER.SLIDES_SELECTED,SIZE:Rr.CORNER_SIZE,TRANSPARENT:!1}},cn=class cn{static getRandomColor(e=cn.FRAME_COLORS){return e[Math.floor(Math.random()*e.length)]}static generateRandomColor(e=1){const t=Math.floor(Math.random()*256),n=Math.floor(Math.random()*256),s=Math.floor(Math.random()*256);return e===1?`#${t.toString(16).padStart(2,"0")}${n.toString(16).padStart(2,"0")}${s.toString(16).padStart(2,"0")}`:`rgba(${t}, ${n}, ${s}, ${e})`}static generateSoftRandomColor(){const e=Math.floor(Math.random()*360),t=Math.floor(Math.random()*30)+70,n=Math.floor(Math.random()*15)+80;return`hsl(${e}, ${t}%, ${n}%)`}static getColorByIndex(e,t=cn.FRAME_COLORS){return t[e%t.length]}static setColorOpacity(e,t){if(e.startsWith("#")){const n=parseInt(e.slice(1,3),16),s=parseInt(e.slice(3,5),16),i=parseInt(e.slice(5,7),16);return`rgba(${n}, ${s}, ${i}, ${t})`}if(e.startsWith("rgb(")){const n=e.match(/\d+/g);if(n&&n.length>=3)return`rgba(${n[0]}, ${n[1]}, ${n[2]}, ${t})`}return e}static rgbToHex(e,t,n){return`#${e.toString(16).padStart(2,"0")}${t.toString(16).padStart(2,"0")}${n.toString(16).padStart(2,"0")}`}static hexToRgb(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}static shadeColor(e,t){const n=cn.hexToRgb(e);if(!n)return e;const{r:s,g:i,b:o}=n,a=Math.max(0,Math.min(255,s+t)),l=Math.max(0,Math.min(255,i+t)),c=Math.max(0,Math.min(255,o+t));return cn.rgbToHex(a,l,c)}static getColorPickerHtml(e,t="#1890ff"){return`
      <div class="color-picker-container" style="margin: 10px 0;">
        <label for="${e}" style="display: block; margin-bottom: 5px;">:</label>
        <input type="color" id="${e}" value="${t}" style="width: 50px; height: 30px;">
        <input type="text" id="${e}-text" value="${t}" style="margin-left: 10px; width: 80px;">
        <div class="color-presets" style="margin-top: 5px; display: flex; flex-wrap: wrap;">
          ${cn.THEME_COLORS.map(n=>`<div class="color-preset" data-color="${n}" style="width: 20px; height: 20px; background-color: ${n}; margin: 2px; cursor: pointer; border-radius: 2px;"></div>`).join("")}
        </div>
      </div>
    `}static initColorPicker(e,t){if(typeof document>"u")return;const n=document.getElementById(e),s=document.getElementById(`${e}-text`),i=document.querySelectorAll(`#${e}-container .color-preset`);n&&s&&(n.addEventListener("input",()=>{s.value=n.value,t==null||t(n.value)}),s.addEventListener("input",()=>{/^#[0-9A-F]{6}$/i.test(s.value)&&(n.value=s.value,t==null||t(s.value))}),i.forEach(o=>{o.addEventListener("click",a=>{const l=a.currentTarget.getAttribute("data-color")||"#1890ff";n.value=l,s.value=l,t==null||t(l)})}))}};X(cn,"FRAME_COLORS",["#FFE5E5","#E5FFE5","#E5E5FF","#FFFFE5","#FFE5FF","#E5FFFF","#F5E6D3","#E6E6FA","#F0FFF0","#F5F5DC"]),X(cn,"THEME_COLORS",["#1890ff","#52c41a","#faad14","#f5222d","#722ed1","#eb2f96","#fa8c16","#13c2c2"]),X(cn,"FLAT_UI_COLORS",["#1abc9c","#2ecc71","#3498db","#9b59b6","#34495e","#16a085","#27ae60","#2980b9","#8e44ad","#2c3e50"]),X(cn,"MATERIAL_COLORS",["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50"]),X(cn,"GRADIENT_COLORS",["#a18cd1","#fbc2eb","#84fab0","#8fd3f4","#d4fc79","#96e6a1","#fda085","#f6d365","#fad0c4","#ffecd2"]),X(cn,"NORDIC_COLORS",["#f9f9f9","#e8e8e8","#d9e2ec","#b3c2cf","#4a5568","#2d3748","#e2e8f0","#edf2f7","#f7fafc","#cbd5e0"]),X(cn,"TECH_COLORS",["#00b8d4","#00bfa5","#00c853","#2979ff","#3d5afe","#651fff","#d500f9","#f50057","#ff3d00","#1a237e"]),X(cn,"TRADITIONAL_CHINESE_COLORS",["#e4c6d0","#789262","#493131","#a98175","#1c1c1c","#9d2933","#d4f2e7","#f2be45","#61649f","#8d4bbb","#d71345","#45b97c","#4b5cc4","#f05654","#8e453f","#ffb3a7","#e0eee8","#96c37d","#9b4400","#f35336"]);let Na=cn;const MO={fill:"rgba(255, 255, 255, 0)",customBorderColor:"rgba(0, 0, 0, 0.4)",rx:3,ry:3,shadow:new Lr({color:"rgba(0, 0, 0, 0.1)",blur:15,offsetX:0,offsetY:0}),opacity:.8,backgroundColor:"rgba(255, 255, 255, 0)"},$t=[];for(let r=0;r<256;++r)$t.push((r+256).toString(16).slice(1));function PO(r,e=0){return($t[r[e+0]]+$t[r[e+1]]+$t[r[e+2]]+$t[r[e+3]]+"-"+$t[r[e+4]]+$t[r[e+5]]+"-"+$t[r[e+6]]+$t[r[e+7]]+"-"+$t[r[e+8]]+$t[r[e+9]]+"-"+$t[r[e+10]]+$t[r[e+11]]+$t[r[e+12]]+$t[r[e+13]]+$t[r[e+14]]+$t[r[e+15]]).toLowerCase()}let Ph;const AO=new Uint8Array(16);function FO(){if(!Ph){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Ph=crypto.getRandomValues.bind(crypto)}return Ph(AO)}const kO=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Jp={randomUUID:kO};function RO(r,e,t){var s;if(Jp.randomUUID&&!r)return Jp.randomUUID();r=r||{};const n=r.random??((s=r.rng)==null?void 0:s.call(r))??FO();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,PO(n)}let Fb=null;function DO(r){Fb=r}function Yf(){return Fb}function Qp(r,e){const t=new Zt("...",{left:r.getWidth()/2,top:r.getHeight()/2,originX:"center",originY:"center",fill:"#666",fontSize:20,selectable:!1,evented:!1});r.add(t),r.requestRenderAll(),un.fromURL(e,{crossOrigin:"anonymous"}).then(n=>{const s=r.getWidth(),i=r.getHeight(),o=Math.max(s/n.width,i/n.height);n.scale(o),n.set({left:s/2,top:i/2,originX:"center",originY:"center",selectable:!1,evented:!1}),r.backgroundImage=n,r.remove(t),r.requestRenderAll(),Ae.emit(ye.CANVAS.BACKGROUND_IMAGE_CHANGE,{canvas:r,image:n})})}function IO(r,e){r.backgroundColor=e,r.requestRenderAll(),Ae.emit(ye.CANVAS.CANVAS_UPDATE,{type:"change",target:r}),Ae.emit(ye.CANVAS.BACKGROUND_COLOR_CHANGE,{canvas:r,color:e})}function LO(r,e){const t=r.getObjects(),n=[],s=r.viewportTransform,i=r.getZoom(),o=cr.transformPoint(new j(e.x,e.y),cr.invertTransform(s)),a={left:-s[4]/i,top:-s[5]/i,width:r.width/i,height:r.height/i};for(let l=t.length-1;l>=0;l--){const c=t[l];if(!c.visible)continue;const u=c.getBoundingRect();u.left>a.left+a.width||u.left+u.width<a.left||u.top>a.top+a.height||u.top+u.height<a.top||o.x<u.left||o.x>u.left+u.width||o.y<u.top||o.y>u.top+u.height||c.containsPoint(o)&&n.push(c)}return n}function BO(r,e,t,n=10){const s=r.viewportTransform,i=r.getZoom(),o=cr.transformPoint(new j(e.x,e.y),cr.invertTransform(s)),a=t.left+t.width,l=t.top+t.height,u=n/i/2,h=.5,d=t.left-u+h,f=t.top-u+h,g=a+u+h,p=l+u+h,m=t.left+u+h,v=t.top+u+h,_=a-u+h,x=l-u+h,y=o.x>=d&&o.x<=g&&o.y>=f&&o.y<=p,C=o.x>=m&&o.x<=_&&o.y>=v&&o.y<=x;return y&&!C}function Ah(r,e){const t=LO(r,e),n=t.find(i=>{const o=BO(r,e,i,10);return i instanceof xt&&o});let s=null;return n||(s=t.find(i=>i.type!==xt.type&&!(i instanceof xt))),{target:s||n,targets:t}}let Fh=!1;const pc=[];async function jO(r,e,t){const n=async()=>{var a;if(!r)return;const s={waitForRender:!0};if(!r)return;const i=((a=r.viewportTransform)==null?void 0:a.slice())||[1,0,0,1,0,0],o=r.getZoom();try{const l=fi(r,t),c=e.getContext("2d");if(!c)return;r.setViewportTransform(l.transform),await new Promise(d=>{s.waitForRender&&requestAnimationFrame(()=>{r.renderAll(),requestAnimationFrame(()=>{setTimeout(d,500)})})});const u=r.getWidth(),h=r.getHeight();e.width=u,e.height=h,c.clearRect(0,0,e.width,e.height),c.drawImage(r.lowerCanvasEl,0,0,u,h,0,0,e.width,e.height)}catch(l){console.error(":",l);return}finally{r.setViewportTransform(i),r.setZoom(o)}};return new Promise((s,i)=>{pc.push(async()=>{try{await n(),s()}catch(o){i(o)}}),kb()})}async function kb(){if(!(Fh||pc.length===0)){Fh=!0;try{const r=pc.shift();r&&await r()}finally{Fh=!1,pc.length>0&&kb()}}}function fi(r,e,t=0,n=0,s=!1){const i=r.viewportTransform;r.setViewportTransform([1,0,0,1,0,0]);const o=e.getCenterPoint(),a=o.x,l=o.y;let c=r.getWidth(),u=r.getHeight();s?(c=window.screen.width*window.devicePixelRatio,c=window.screen.height*window.devicePixelRatio):(c=r.getWidth()||window.innerWidth-t,u=(r.getHeight()||window.innerHeight)-n);const h=e.getBoundingRect(),d=h.width,f=h.height,g=c*.99/d,p=u*.99/f,m=Math.min(g,p),v=c/2-a*m,_=u/2-l*m,x=h.left*m+v,y=h.top*m+_,C=d*m,E=f*m;return{transform:[m,0,0,m,v,_],scale:m,centerX:a,centerY:l,width:d,height:f,left:h.left,top:h.top,right:h.left+d,bottom:h.top+f,scaledLeft:x,scaledTop:y,scaledWidth:C,scaledHeight:E,currentTransform:i}}const ou=class ou extends Kn{constructor(t){t={...MO,...t,strokeUniform:!0};super(t);X(this,"thumbnail",async t=>{if(!t.getContext("2d"))return null;const s=Yf();await jO(s.getPresentationCanvas(),t,this)});this.id=t.id||RO(),this.initializeControls(),this.initEventHandlers(),this.customBorderColor=t.customBorderColor,this.customControls=t.customControls||[],this.controlsVisibilityMap=t.controlsVisibilityMap||{},this.objectCaching=!0,this.noScaleCache=!1,this.set("willReadFrequently",!1),this.set("cacheProperties",["fill","stroke","strokeWidth"]),this.strokeUniform=!0}initializeControls(){this.cornerSize=As.CORNER.SIZE,this.cornerColor=As.CORNER.SLIDES_COLOR,this.cornerStyle=As.CORNER.STYLE,this.transparentCorners=As.CORNER.TRANSPARENT,this.setControlsVisibility({mtr:!1}),this.lockRotation=!0}containsPoint(t){const s=this.getBoundingRect();return t.x>=s.left&&t.x<=s.left+10||t.x<=s.left+s.width&&t.x>=s.left+s.width-10||t.y>=s.top&&t.y<=s.top+10||t.y<=s.top+s.height&&t.y>=s.top+s.height-10}initEventHandlers(){}requestRender(){this.canvas&&requestAnimationFrame(()=>{this.canvas.requestRenderAll()})}setCu1stomBorderColor(t){this.customBorderColor=t,this.requestRender()}setControlVisibility(t,n){const s={[t]:n};super.setControlsVisibility(s),this.controlsVisibilityMap[t]=n,n?this.customControls.includes(t)||this.customControls.push(t):this.customControls=this.customControls.filter(i=>i!==t),this.requestRender()}setControlsVisibilityBatch(t){Object.entries(t).forEach(([n,s])=>{this.setControlVisibility(n,s)})}render(t){super.render(t),this.drawCustomBorder(t),this.canvas&&this.canvas.getActiveObject()===this?this.drawCustomControls(t):this.shouldRenderCustomControlsWhenInactive()&&this.renderCustomControlsWhenInactive(t)}shouldRenderCustomControlsWhenInactive(){return!1}renderCustomControlsWhenInactive(t){t.save();const n=this.getViewportTransform(),s=cr.multiplyTransformMatrices(n,this.calcTransformMatrix()),i=cr.qrDecompose(s),{tl:o}=this.oCoords||{};o?t.translate(o.x,o.y):t.translate(i.translateX,i.translateY),t.rotate(cr.degreesToRadians(i.angle)),this.drawCustomControls(t),t.restore()}getCustomControlsToShow(){return this.customControls.filter(t=>this.controlsVisibilityMap[t]!==!1)}drawCustomControls(t,n={}){t.save();const s=this.getCanvasRetinaScaling(),{cornerStrokeColor:i,cornerDashArray:o,cornerColor:a}=this,l={cornerStrokeColor:i,cornerDashArray:o,cornerColor:a,...n};t.setTransform(s,0,0,s,0,0),t.strokeStyle=t.fillStyle=l.cornerColor,this.transparentCorners||(t.strokeStyle=l.cornerStrokeColor),this._setLineDash(t,l.cornerDashArray);const c=this.getCustomControlsToShow();this.forEachControl((u,h)=>{if(c.includes(h)&&u.getVisibility(this,h)&&this.controls[h].visible!==!1){const f=this.oCoords[h];u.render(t,f.x,f.y,l,this)}}),t.restore()}drawCustomBorder(t){if(!this.canvas)return;t.save();const n=this.canvas.getZoom();t.lineWidth=1/n,t.strokeStyle=this.customBorderColor;const s=this.calcTransformMatrix();t.transform(s[0],s[1],s[2],s[3],s[4],s[5]);const i=this.width,o=this.height,a=this.rx?Math.min(this.rx,i/2):0,l=this.ry?Math.min(this.ry,o/2):0;t.beginPath(),t.moveTo(-i/2+a,-o/2),t.lineTo(i/2-a,-o/2),t.quadraticCurveTo(i/2,-o/2,i/2,-o/2+l),t.lineTo(i/2,o/2-l),t.quadraticCurveTo(i/2,o/2,i/2-a,o/2),t.lineTo(-i/2+a,o/2),t.quadraticCurveTo(-i/2,o/2,-i/2,o/2-l),t.lineTo(-i/2,-o/2+l),t.quadraticCurveTo(-i/2,-o/2,-i/2+a,-o/2),t.stroke(),t.restore()}toJSON(){return{...super.toJSON(),type:ou.type,id:this.id,customBorderColor:this.customBorderColor,customControls:this.customControls,controlsVisibilityMap:this.controlsVisibilityMap}}toObject(t=[]){return super.toObject([...t,"type","id","customBorderColor","customControls","controlsVisibilityMap"])}};X(ou,"type","slides");let xt=ou;oe.setClass(xt,xt.type);oe.setSVGClass(xt,xt.type);class at extends xt{constructor(t){const n={...t};super(n);X(this,"renderCustomCorner",(t,n,s,i,o)=>{this.canvas&&this.canvas.getZoom();const a=18;t.save(),t.translate(n,s),t.rotate(cr.degreesToRadians(o.angle)),t.beginPath(),t.arc(0,0,a/2,0,2*Math.PI),t.fillStyle=this.isCurrentSelected?Lt.BORDER.SLIDES_HOVER:Lt.BORDER.UNSELECTED,t.fill(),t.fillStyle="white",t.font="14px Arial",t.textAlign="center",t.textBaseline="middle",t.fillText(this.order.toString(),0,0),t.restore()});this.parentPage=t.parentPage,this.contents=new Set,this._originalLeft=t.left,this._originalTop=t.top,this.order=t.order||0,this.initFrameNumberControl()}initFrameNumberControl(){const t=this.controls.tl;this.controls.frameNumberCorner=new bn({x:-.5,y:-.5,offsetX:3,offsetY:3,cursorStyle:"nwse-resize",render:this.renderCustomCorner,mouseDownHandler:function(n,s,i,o){var a;return s.originX="right",s.originY="bottom",s.corner="tl",(a=t.mouseDownHandler)==null?void 0:a.call(t,n,s,i,o)},actionHandler:function(n,s,i,o){return Mb.scalingEqually(n,s,i,o)}})}setNumberControlVisibility(t){this.setControlVisibility("frameNumberCorner",t)}shouldRenderCustomControlsWhenInactive(){return!0}getCustomControlsToShow(){return["frameNumberCorner"]}updateContents(){if(this.contents.size>0){const{scaleX:t,scaleY:n,left:s,top:i,angle:o}=this;this.contents.forEach(a=>{if(a&&a.set){a.objectCaching||(a.objectCaching=!0,a.statefull=!1,a.noScaleCache=!1,a.set("willReadFrequently",!1),a.set("cacheProperties",["fill","stroke","strokeWidth"]));const l=a.left-s,c=a.top-i;a._originalLeft=l,a._originalTop=c,a.set({left:a.left+(this.left-a._prevFrameLeft||0),top:a.top+(this.top-a._prevFrameTop||0),angle:o+(a.angle||0)},{statefull:!1,skipRender:!0}),a._prevFrameLeft=this.left,a._prevFrameTop=this.top,a.setCoords()}}),this.canvas&&requestAnimationFrame(()=>{this.canvas.requestRenderAll()})}}addContent(t){console.log("Frame addContent",t),t._originalLeft=t.left-this.left,t._originalTop=t.top-this.top,t._originalAngle=t.angle||0,t.objectCaching=!0,t.statefull=!1,t.noScaleCache=!1,t.set("willReadFrequently",!1),t.set("cacheProperties",["fill","stroke","strokeWidth"]),this.contents.add(t)}removeContent(t){this.contents.delete(t)}clearContents(){this.canvas&&this.contents.forEach(t=>{this.canvas.remove(t)}),this.contents.clear()}toggleContentSelectable(t){this.contents.forEach(n=>{n&&n.set&&n.set({selectable:t,evented:t})})}toJSON(){return{...super.toJSON(),id:this.id,parentPage:this.parentPage,contents:Array.from(this.contents),order:this.order}}toObject(t=[]){return super.toObject([...t,"parentPage","contents","order","isCurrentSelected"])}}X(at,"type","frame");oe.setClass(at,at.type);oe.setSVGClass(at,at.type);class zt extends xt{constructor(t){const n={...t};super(n);X(this,"initialLeft");X(this,"initialTop");this.initialLeft=t.left,this.initialTop=t.top}initializeControls(){super.initializeControls(),this.setControlsVisibility({mtr:!1,bl:!0,br:!0,tl:!0,tr:!0,mb:!1,ml:!1,mr:!1,mt:!1})}toJSON(){return{...super.toJSON(),initialLeft:this.initialLeft,initialTop:this.initialTop}}}X(zt,"type","pageframe");oe.setClass(zt,zt.type);oe.setSVGClass(zt,zt.type);class zO{constructor(e,t){X(this,"canvas");X(this,"frameManager");this.canvas=e,this.frameManager=t}setupFrameEvents(e){e.off("moving"),e.off("rotating"),e.off("scaling"),e.on("moving",()=>this.handleFrameMoving(e)),e.on("rotating",()=>this.handleFrameRotating(e)),e.on("scaling",()=>this.handleFrameScaling(e)),this.frameManager&&(e.on("moving",()=>this.updateFrameNumberPosition(e)),e.on("rotating",()=>this.updateFrameNumberPosition(e)),e.on("scaling",()=>this.updateFrameNumberPosition(e)))}handleFrameMoving(e){e.updateContents()}handleFrameRotating(e){e.updateContents()}handleFrameScaling(e){e.updateContents()}updateFrameNumberPosition(e){this.frameManager&&this.frameManager.updateNumberPositionForFrame(e)}bringFrameToFront(e){const t=this.canvas.getObjects();t.indexOf(e)!==t.length-1&&(this.canvas.bringObjectToFront(e),e.contents.forEach(s=>{this.canvas.bringObjectToFront(s)}),this.canvas.requestRenderAll())}}class HO{constructor(e){X(this,"frames",new Map);X(this,"canvas");X(this,"frameEventHandler");X(this,"currentFrame",null);this.canvas=e,this.frameEventHandler=new zO(e,this)}createFrame(e){const t=this.frames.size+1;console.log("Creating frame with order:",t);const n=new at({...e,order:t});return this.frameEventHandler.setupFrameEvents(n),this.frames.set(n.id,n),this.canvas.add(n),this.canvas.requestRenderAll(),Ae.emit(ye.FRAME.FRAME_ADDED,{frameId:n.id,frame:n,framesCount:this.frames.size,frames:this.getAllFrames()}),n}updateNumberPositionForFrame(e){}deleteFrame(e){const t=this.frames.get(e);t&&(t.clearContents(),this.canvas.remove(t),this.frames.delete(e),Ae.emit(ye.FRAME.FRAME_REMOVED,{frameId:e,framesCount:this.frames.size,frames:this.getAllFrames()})),this.updateFrameOrder()}getFrame(e){return this.frames.get(e)}getAllFrames(){return Array.from(this.frames.values()).sort((e,t)=>e.order-t.order)}setCurrentFrame(e){this.currentFrame=e,e&&Ae.emit(ye.FRAME.FRAME_UPDATED,{frameId:e.id,frame:e,isCurrent:!0})}getCurrentFrame(){return this.currentFrame}updateFrameOrder(){const e=Array.from(this.frames.values());e.sort((t,n)=>t.order-n.order),e.forEach((t,n)=>{const s=n+1;t.order=s}),Ae.emit(ye.FRAME.FRAMES_REORDERED,{frames:this.getAllFrames()})}updateReferences(){const n=this.canvas.getObjects().filter(s=>s.type===at.type);this.frames.clear(),n.forEach(s=>{this.frames.set(s.id,s),Ae.emit(ye.CANVAS.CANVAS_UPDATE,{type:ye.CANVAS.CANVAS_UPDATE,target:s})}),!this.currentFrame&&n.length>0&&(this.currentFrame=n[0])}moveFrameUp(e){const t=this.frames.get(e);if(t&&t.order>1){const n=this.findFrameByOrder(t.order-1);if(n){const s=t.order;t.order=n.order,n.order=s,this.canvas.requestRenderAll(),this.updateFrameOrder()}}}moveFrameDown(e){const t=this.frames.get(e);if(t&&t.order<this.frames.size){const n=this.findFrameByOrder(t.order+1);if(n){const s=t.order;t.order=n.order,n.order=s,this.canvas.requestRenderAll(),this.updateFrameOrder()}}}findFrameByOrder(e){return Array.from(this.frames.values()).find(t=>t.order===e)}findParentFrame(e){return this.canvas.getObjects().filter(t=>t instanceof at).find(t=>t.contents.has(e))||null}clear(){this.frames.forEach(e=>{this.canvas.remove(e)}),this.frames.clear(),this.currentFrame=null,Ae.emit(ye.FRAME.FRAMES_CLEARED,{framesCount:0})}}class $O{constructor(e,t){X(this,"canvas");X(this,"pageFrameManager");this.canvas=e,this.pageFrameManager=t}setupPageFrameEvents(e){e.off("moving"),e.off("scaling"),e.on("moving",t=>this.handlePageFrameMoving(e,t)),e.on("scaling",t=>this.handlePageFrameScaling(e,t))}handlePageFrameMoving(e,t){if(!t||!t.target)return;const n=t.target;n.left-n.initialLeft,n.top-n.initialTop,n.initialLeft=n.left,n.initialTop=n.top,this.canvas.requestRenderAll()}handlePageFrameScaling(e,t){}}class NO{constructor(e){X(this,"canvas");X(this,"pageFrame");X(this,"frameManager");X(this,"pageFrameEventHandler");this.canvas=e,this.frameManager=new HO(e),this.pageFrameEventHandler=new $O(e,this),this.initializeCanvas()}initializeCanvas(){this.createDefaultPage()}createDefaultPage(){const{width:e,height:t}=this.calculatePageDimensions(),n=this.calculatePagePosition(e,t);return this.pageFrame=new zt({...n,width:e,height:t}),this.pageFrameEventHandler.setupPageFrameEvents(this.pageFrame),this.pageFrame}calculatePageDimensions(){const e=this.canvas.getZoom();return{width:Zl.PAGE_FRAME.WIDTH/e,height:Zl.PAGE_FRAME.HEIGHT/e}}calculatePagePosition(e,t){const n=this.canvas.getVpCenter();return{left:n.x-e/2,top:n.y-t/2}}addNewFrame(){if(!this.pageFrame)return console.error("No active page"),null;const e=this.createFrame();return e?(this.arrangeFrameInCanvas(e),e):null}createFrame(){const{width:e,height:t}=this.calculateFrameDimensions(),n=this.calculateFramePosition(e,t);return this.frameManager.createFrame({...n,width:e,height:t,parentPage:this.pageFrame})}calculateFrameDimensions(){const e=this.canvas.getZoom();return{width:Zl.FRAME.WIDTH/e,height:Zl.FRAME.HEIGHT/e}}calculateFramePosition(e,t){const n=this.canvas.getVpCenter();return{left:n.x-e/2,top:n.y-t/2}}arrangeFrameInCanvas(e){if(!this.pageFrame)return;this.canvas.sendObjectToBack(this.pageFrame),this.canvas.getObjects().filter(n=>n instanceof at).forEach(n=>{n!==e&&this.canvas.bringObjectToFront(n)}),this.canvas.bringObjectToFront(e),this.canvas.setActiveObject(e)}updateReferences(){const n=this.canvas.getObjects().find(s=>s.type===zt);n&&(this.pageFrame=n),this.frameManager.updateReferences()}getPageFrame(){return this.pageFrame}deleteFrame(e){const t=this.frameManager.getFrame(e);t&&this.pageFrame&&(this.pageFrame.removeFrame(t),this.frameManager.deleteFrame(e))}getCurrentFrame(){return this.frameManager.getCurrentFrame()}getFrameManager(){return this.frameManager}setPageSize(e,t){this.pageFrame&&(this.pageFrame.set({width:e,height:t}),this.canvas.requestRenderAll())}clear(){this.pageFrame&&this.canvas.remove(this.pageFrame),this.frameManager.clear(),this.canvas.requestRenderAll()}destroy(){this.clear()}}const pi=class pi extends kr{constructor(t,n){const s={fill:"#333333",cornerSize:Rr.CORNER_SIZE,cornerColor:Lt.PRIMARY,cornerStyle:"circle",transparentCorners:!1,lockRotation:!0,hasRotatingPoint:!1,splitByGrapheme:!0,editable:!0,padding:8,textAlign:"left",lockScalingFlip:!0,...n};super(t,s);X(this,"_showBorder",!1);X(this,"_hoverBorderColor",Lt.BORDER.HOVER);X(this,"lineWidth",1);X(this,"preventDistortion",!0);X(this,"_originalWidth",0);X(this,"_originalHeight",0);X(this,"_skipDimension",!1);X(this,"_minFontSize",1);X(this,"_originalFontSize",this.fontSize);X(this,"_isMoving",!1);X(this,"listStyle","none");X(this,"_listItemPrefix","");X(this,"handleEditingKeyDown",t=>{this.isEditing&&(t.ctrlKey&&t.code==="KeyC"&&this.handleCopy(t),t.ctrlKey&&t.code==="KeyV"&&this.handlePaste(t),(t.code==="Enter"||t.code==="NumpadEnter"||t.key==="Enter"||t.keyCode===13)&&this.handleEnterKey(t))});n&&n.listStyle&&(this.listStyle=n.listStyle,this._applyListStyle()),this._hoverBorderColor=n.hoverBorderColor||Lt.BORDER.HOVER,this.lineWidth=n.lineWidth||1,Object.defineProperty(this,"type",{value:pi.type,configurable:!1,writable:!1}),this.setControlsVisibility({mtr:!1}),this._originalWidth=this.width,this._originalHeight=this.height,this._originalFontSize=this.fontSize||40,this._minFontSize=this._minFontSize,this.on("scaling",this.handleScaling.bind(this)),this.on("editing:entered",this.handleEditingEntered.bind(this)),this.on("editing:exited",this.handleEditingExited.bind(this)),this.on("moving",this.handleMoving.bind(this)),this.on("mouseup",this.handleMoveEnd.bind(this)),this.on("deselected",this.handleMoveEnd.bind(this)),this.on("removed",this.handleRemoved.bind(this))}handleEditingEntered(){document.addEventListener("keydown",this.handleEditingKeyDown)}handleEditingExited(){document.removeEventListener("keydown",this.handleEditingKeyDown)}_applyListStyle(){this.listStyle==="none"?this._removeListPrefix():this._addListPrefix()}_addListPrefix(t=!1){const n=this.selectionStart,s=this.text.split(`
`);let i=0;const o=s.map((a,l)=>{const c=a.replace(/^(\d+\.\s|\\s)/,"");return this.listStyle==="ordered"?(i+=`${l+1}. `.length,`${l+1}. ${c}`):this.listStyle==="unordered"?(i+=2,` ${c}`):c});this.text=o.join(`
`),t&&(this.selectionStart=n+i,this.selectionEnd=n+i),this.updateTextDimensions()}_removeListPrefix(){const n=this.text.split(`
`).map(s=>s.replace(/^(\d+\.\s|\\s)/,""));this.text=n.join(`
`)}_render(t){if(this.backgroundColor){t.save(),t.fillStyle=this.backgroundColor;const i=this.width+this.padding*2,o=this.height+this.padding*2;t.fillRect(-i/2,-o/2,i,o),t.restore()}if(super._render(t),this.selected)return;t.save(),this._showBorder?t.strokeStyle=this._hoverBorderColor:t.strokeStyle=Lt.BORDER.DEFAULT,t.lineWidth=this.lineWidth,t.setLineDash([]);const n=this.width+this.padding*2,s=this.height+this.padding*2;t.strokeRect(-n/2,-s/2,n,s),t.restore()}_renderText(t){super._renderText(t)}initDimensions(){if(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),!this._skipDimension){if(this._splitText(),this._clearCache(),this.path)this.width=this.path.width,this.height=this.path.height;else{const t=this.width,n=this.calcTextWidth();n>t?this.width=n:this.width=t,this.height=this.height||this.calcTextHeight();const s=this.calcTextHeight();this.isEditing&&s>this.height&&(this.height=s)}this.textAlign&&this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.dirty=!0,this.canvas&&this.canvas.requestRenderAll()}}handlePaste(t){t.preventDefault(),navigator.clipboard.readText().then(n=>{if(!n){console.error("");return}this.insertTextAtCursor(n),this.styles={},this.updateTextDimensions()}).catch(n=>{console.error(":",n)})}handleCopy(t){const n=this.getSelectedText();n&&navigator.clipboard.writeText(n).then(()=>{console.log(":",n)}).catch(s=>{console.error(":",s)})}handleEnterKey(t){t.preventDefault();const n=this.selectionStart||0,s=this.text.split(`
`);let i=0,o=0;for(let a=0;a<s.length;a++)if(o+=s[a].length+1,o>n){i=a;break}if(this.insertTextAtCursor(`
`),this.listStyle!=="none"){const a=this.listStyle==="ordered"?`${i+2}. `:" ";this.insertTextAtCursor(a)}this.updateTextDimensions()}insertTextAtCursor(t){const n=this.selectionStart||0,s=this.selectionEnd||0,i=this.text.slice(0,n)+t+this.text.slice(s);this.text=i,this.selectionStart=n+t.length,this.selectionEnd=n+t.length,this.hiddenTextarea&&(this.hiddenTextarea.value=this.text,this.hiddenTextarea.selectionStart=this.selectionStart,this.hiddenTextarea.selectionEnd=this.selectionEnd),this.updateTextDimensions()}updateFromTextArea(){super.updateFromTextArea()}updateTextDimensions(){var t;this._skipDimension=!1,this.initDimensions(),this.setCoords(),this.dirty=!0,(t=this.canvas)==null||t.requestRenderAll()}showBorder(t){var n;this._showBorder!==t&&(this._showBorder=t,this.dirty=!0,(n=this.canvas)==null||n.requestRenderAll())}increaseFontSize(t=.5){const n=Math.min((this.fontSize||16)+t,720);this.setFontSize(n,!0)}decreaseFontSize(t=.5){const n=Math.max((this.fontSize||16)-t,this._minFontSize);this.setFontSize(n,!0)}setFontSize(t,n=!1){var l;const s=Math.max(Math.min(t,720),this._minFontSize),i=this.width;this.height,this.set("fontSize",s),n&&(this._originalFontSize=s),this._skipDimension=!1;const o=this.calcTextWidth(),a=this.calcTextHeight();(o>i||s>this.fontSize)&&this.set("width",o),this.set("height",a),this.initDimensions(),this.setCoords(),this.dirty=!0,(l=this.canvas)==null||l.requestRenderAll()}setHoverBorderColor(t){this._hoverBorderColor=t,this._showBorder&&this.showBorder(!0)}adjustTextSize(t,n,s){if(!this.canvas)return;const i=this.calcTextWidth(),o=this.calcTextHeight(),a=this.width,l=this.height,c=a/i,u=l/o;if(c<1||u<1){const h=Math.min(c,u),d=Math.max(Number((this.fontSize*h).toFixed(3)),this._minFontSize);this.set("fontSize",d)}else if(t&&n&&s){const h=t.width?t.width/n:1,d=t.height?t.height/s:1,f=Math.max(h,d);if(f>1){const g=Math.min(Number((this.fontSize*f).toFixed(3)),this._originalFontSize);this.set("fontSize",g)}else if(f<1&&(c<1||u<1)){const g=Math.max(Number((this.fontSize*f).toFixed(3)),this._minFontSize);this.set("fontSize",g)}}}handleScaling(){if(!this.preventDistortion||!this.canvas)return;let t=!1;const n={},s=this.width,i=this.height;if(this.scaleX!==1&&(n.scaleX=1,n.width=this.width*this.scaleX,t=!0),this.scaleY!==1){n.scaleY=1;const o=this.calcTextHeight()*(this._minFontSize/this.fontSize);n.height=Math.max(this.height*this.scaleY,o),t=!0}t&&(this.set(n),this.setCoords(),this.adjustTextSize(n,s,i))}handleMoving(){this._isMoving=!0,Ae.emit(ye.CONTROL_PANEL.HIDE_TEXT_SETTING_TOOLBAR)}handleMoveEnd(){this._isMoving=!1,Ae.emit(ye.CONTROL_PANEL.SHOW_TEXT_SETTING_TOOLBAR,{target:this,canvas:this.canvas,canvasManager:Yf()})}isObjMoving(){return this._isMoving}handleRemoved(){Ae.emit(ye.CONTROL_PANEL.HIDE_TEXT_SETTING_TOOLBAR)}setText(t){return this.set("text",t),this.listStyle!=="none"&&this._applyListStyle(),this.updateTextDimensions(),this}setListStyle(t){this.listStyle!==t&&(this.listStyle=t,this._applyListStyle())}toJSON(){return{...super.toJSON(),type:pi.type,_showBorder:this._showBorder,_hoverBorderColor:this._hoverBorderColor,lineWidth:this.lineWidth,preventDistortion:this.preventDistortion,_originalWidth:this._originalWidth,_originalHeight:this._originalHeight,_skipDimension:this._skipDimension,_minFontSize:this._minFontSize,_originalFontSize:this._originalFontSize,_isMoving:this._isMoving}}toObject(t=[]){return super.toObject([...t,"_showBorder","_hoverBorderColor","lineWidth","preventDistortion","_originalWidth","_originalHeight","_skipDimension","_minFontSize","_originalFontSize","_isMoving"])}fromObject(t,n){const s=new pi(t.text,t);Object.setPrototypeOf(s,pi.prototype),n&&n(s)}};X(pi,"type","TextControl");let At=pi;oe.setClass(At,At.type);oe.setSVGClass(At,At.type);const Ga=class Ga extends un{constructor(t,n){const s={cornerSize:Rr.CORNER_SIZE,cornerColor:Lt.PRIMARY,cornerStyle:"circle",transparentCorners:!1,hasRotatingPoint:!1,padding:0,borderColor:Lt.PRIMARY,lockRotation:!0,lockScalingX:!1,lockScalingY:!1,lockUniScaling:!1,...n};super(t,s);X(this,"_fillColor",null);X(this,"_fillOpacity",.5);X(this,"_cornerRadius",{topLeft:0,topRight:0,bottomRight:0,bottomLeft:0});X(this,"_isMoving",!1);if(n&&n.fillColor&&(this._fillColor=n.fillColor),n&&n.fillOpacity!==void 0&&(this._fillOpacity=n.fillOpacity),n&&n.cornerRadius)this._cornerRadius={...this._cornerRadius,...n.cornerRadius};else if(n&&n.rx!==void 0){const i=n.rx;this._cornerRadius={topLeft:i,topRight:i,bottomRight:i,bottomLeft:i}}this.setControlsVisibility({mtr:!1}),Object.defineProperty(this,"type",{value:Ga.type,configurable:!1,writable:!1}),this.on("moving",this.handleMoving.bind(this)),this.on("mouseup",this.handleMoveEnd.bind(this)),this.on("deselected",this.handleMoveEnd.bind(this))}static async create(t,n){return new Promise((s,i)=>{const o={originX:"center",originY:"center",padding:0,...n};Ga.fromURL(t,{crossOrigin:"anonymous"},o).then(a=>{if(n.fillColor!==void 0&&(a._fillColor=n.fillColor),n.fillOpacity!==void 0&&(a._fillOpacity=n.fillOpacity),n.cornerRadius)a._cornerRadius={...a._cornerRadius,...n.cornerRadius};else if(n.rx!==void 0){const l=n.rx;a._cornerRadius={topLeft:l,topRight:l,bottomRight:l,bottomLeft:l}}s(a)}).catch(a=>{i(a)})})}handleMoving(){this._isMoving=!0,Ae.emit(ye.CONTROL_PANEL.HIDE_IMAGE_SETTING_TOOLBAR)}handleMoveEnd(){this._isMoving=!1,Ae.emit(ye.CONTROL_PANEL.SHOW_IMAGE_SETTING_TOOLBAR,{target:this,canvas:this.canvas,canvasManager:Yf()})}_render(t){const n=Object.values(this._cornerRadius).some(s=>s>0);if(!n)super._render(t);else{t.save();const s=this.width||0,i=this.height||0;this._renderRoundedRectWithDifferentCorners(t,-s/2,-i/2,s,i),t.clip(),super._render(t),t.restore()}if(this._fillColor){t.save(),t.fillStyle=this._fillColor,t.globalAlpha=this._fillOpacity;const s=this.width||0,i=this.height||0;n?(this._renderRoundedRectWithDifferentCorners(t,-s/2,-i/2,s,i),t.fill()):t.fillRect(-s/2,-i/2,s,i),t.restore()}}_renderRoundedRectWithDifferentCorners(t,n,s,i,o){const{topLeft:a,topRight:l,bottomRight:c,bottomLeft:u}=this._cornerRadius,h=i/2,d=o/2,f=Math.min(a,h,d),g=Math.min(l,h,d),p=Math.min(c,h,d),m=Math.min(u,h,d);t.beginPath(),f>0?(t.moveTo(n+f,s),t.arcTo(n,s,n,s+f,f)):t.moveTo(n,s),m>0?(t.lineTo(n,s+o-m),t.arcTo(n,s+o,n+m,s+o,m)):t.lineTo(n,s+o),p>0?(t.lineTo(n+i-p,s+o),t.arcTo(n+i,s+o,n+i,s+o-p,p)):t.lineTo(n+i,s+o),g>0?(t.lineTo(n+i,s+g),t.arcTo(n+i,s,n+i-g,s,g)):t.lineTo(n+i,s),t.lineTo(n+f,s),t.closePath()}_renderRoundedRect(t,n,s,i,o,a,l){t.beginPath(),t.moveTo(n+a,s),t.lineTo(n+i-a,s),t.quadraticCurveTo(n+i,s,n+i,s+l),t.lineTo(n+i,s+o-l),t.quadraticCurveTo(n+i,s+o,n+i-a,s+o),t.lineTo(n+a,s+o),t.quadraticCurveTo(n,s+o,n,s+o-l),t.lineTo(n,s+l),t.quadraticCurveTo(n,s,n+a,s),t.closePath()}setCornerRadius(t){return this._cornerRadius={topLeft:Math.max(0,t),topRight:Math.max(0,t),bottomRight:Math.max(0,t),bottomLeft:Math.max(0,t)},this.dirty=!0,this.canvas&&this.canvas.requestRenderAll(),this}setCornerRadiusForCorner(t,n){return this._cornerRadius[t]=Math.max(0,n),this.dirty=!0,this.canvas&&this.canvas.requestRenderAll(),this}setCornerRadii(t){return this._cornerRadius={...this._cornerRadius,...t},this.dirty=!0,this.canvas&&this.canvas.requestRenderAll(),this}getCornerRadius(){return{...this._cornerRadius}}setFillColor(t,n){return this._fillColor=t,n!==void 0&&(this._fillOpacity=Math.max(0,Math.min(1,n))),this.dirty=!0,this.canvas&&this.canvas.requestRenderAll(),this}getFillColor(){return{color:this._fillColor,opacity:this._fillOpacity}}replaceImage(t){return new Promise((n,s)=>{cr.loadImage(t,{crossOrigin:"anonymous"}).then(i=>{const o=this.width,a=this.height,l=this.scaleX,c=this.scaleY;this.setElement(i),o&&a&&(this.scaleX=o/this.width*l,this.scaleY=a/this.height*c),this.filters&&this.filters.length>0&&this.applyFilters(),this.dirty=!0,this.canvas&&this.canvas.requestRenderAll(),n(this)}).catch(i=>{s(new Error(`: ${i.message}`))})})}toObject(t=[]){return super.toObject([...t,"_fillColor","_fillOpacity","_cornerRadius"])}toJSON(){return{...super.toJSON(),_fillColor:this._fillColor,_fillOpacity:this._fillOpacity,_cornerRadius:this._cornerRadius}}};X(Ga,"type","ImageControl");let ji=Ga;const au=class au extends jt{static create(e,t){let n;const s={cornerSize:8,cornerColor:"#1890ff",cornerStyle:"circle",transparentCorners:!1,lockRotation:!0,hasRotatingPoint:!1,padding:0,borderColor:"#1890ff",...t};switch(e){case"square":case"rect":n=new Kn(s),n.type="Control_Rect";break;case"circle":n=new Mr(s),n.type="Control_Circle";break;case"triangle":n=new Es(s),n.type="Control_Triangle";break;case"line":n=new Os([0,0,s.width,0],{...s,stroke:s.stroke||"#333",strokeWidth:s.strokeWidth||2}),n.type="Control_Line";break;case"arrow":const i=s.width||100,o=20,a=[{x:0,y:0},{x:i-o,y:0},{x:i-o,y:-10},{x:i,y:0},{x:i-o,y:10},{x:i-o,y:0}];n=new qn(a,{...s,fill:"transparent",stroke:s.stroke||"#333",strokeWidth:s.strokeWidth||2,strokeLineJoin:"round",strokeLineCap:"round"}),n.type="Control_Arrow";break}return n&&(Object.defineProperty(n,"type",{value:au.type,configurable:!1,writable:!1}),n.setControlsVisibility({mtr:!1})),n}};X(au,"type","ShapeControl");let ul=au;class VO{constructor(e,t){X(this,"canvas");X(this,"canvasManager");this.canvas=e,this.canvasManager=t,this.initPageFrame()}initPageFrame(){console.warn("initPageFrame",this.canvasManager.getPageFrameManager())}getTargetFrame(){const e=this.canvas.getVpCenter(),t={x:e.x,y:e.y};return this.getFrameContainingPoint(t)}getFrameContainingPoint(e){const t=this.canvasManager.getAllFrames();for(const s of t){const i=s.getBoundingRect();if(e.x>=i.left&&e.x<=i.left+i.width&&e.y>=i.top&&e.y<=i.top+i.height)return s}return this.canvasManager.getPageFrame()}getVisibleCenter(){const e=this.canvas.getVpCenter();return{x:e.x,y:e.y}}async addControl(e,t={}){const n=this.getTargetFrame();if(!n)return console.warn("No active frame and no page frame found"),null;console.log("addControl targetFrame:",n);try{const s=await e(t);return console.log("addControl control:",s),s.set("_originalLeft",s.left-n.left),s.set("_originalTop",s.top-n.top),s.set("_originalAngle",s.angle||0),n instanceof at&&n.addContent(s),this.canvas.add(Iv(s)),this.canvas.setActiveObject(s),s}catch(s){return console.error("Failed to add control:",s),null}}addText(e={}){const t=this.getVisibleCenter(),n=40,s=this.canvas.getZoom(),i=o=>new At("",{left:o.left!==void 0?o.left:t.x,top:o.top!==void 0?o.top:t.y,borderWidth:1/s,lineWidth:Rr.BORDER_LINE_WIDTH_TEXT/s,fontSize:Math.round(n/s),...o});return this.addControl(i,e)}addImage(e,t={}){const n=this.getVisibleCenter(),s=this.canvas.getZoom(),i=async o=>await ji.create(e,{left:o.left!==void 0?o.left:n.x,top:o.top!==void 0?o.top:n.y,scaleX:.5/s,scaleY:.5/s,...o});return this.addControl(i,t)}addShape(e,t={}){const n=this.getVisibleCenter();this.canvas.getZoom();const s=i=>{const o={left:i.left!==void 0?i.left:n.x,top:i.top!==void 0?i.top:n.y,...i};console.warn("addShape active frame",ul);const a=ul.create(e,o);if(!a)throw new Error(`Failed to create shape of type: ${e}`);return a};return this.addControl(s,t)}async addClonedObject(e,t={}){const n=this.getVisibleCenter(),s=e.type;if(e instanceof ji){const o=e.getElement().src;return this.addImage(o,{left:t.left!==void 0?t.left:n.x,top:t.top!==void 0?t.top:n.y,scaleX:e.scaleX,scaleY:e.scaleY,angle:e.angle,flipX:e.flipX,flipY:e.flipY,opacity:e.opacity,...t})}else if(s===At.type||e instanceof At){const i=e;return this.addText({left:t.left!==void 0?t.left:n.x,top:t.top!==void 0?t.top:n.y,text:i.text,fontSize:i.fontSize,fontFamily:i.fontFamily,fontWeight:i.fontWeight,fontStyle:i.fontStyle,textAlign:i.textAlign,fill:i.fill,...t})}else{if(["rect","circle","triangle"].includes(s))return this.addShape(s,{left:t.left!==void 0?t.left:n.x,top:t.top!==void 0?t.top:n.y,width:e.width,height:e.height,fill:e.fill,stroke:e.stroke,strokeWidth:e.strokeWidth,rx:e.rx,ry:e.ry,...t});{console.warn(`: ${s}`);const i=async o=>{try{const a=await e.clone();return a.set({left:o.left!==void 0?o.left:n.x,top:o.top!==void 0?o.top:n.y,...o}),a}catch(a){throw console.error(":",a),a}};return this.addControl(i,t)}}}}class bo extends cl{constructor(t,n){super(t,{...n,...{enableRetinaScaling:!0,renderOnAddRemove:!0,webgl:!0,webglPrecision:"highp"}});X(this,"pageFrameIndex",-1);this.isDraggingObject=!1,this.contextContainer instanceof WebGLRenderingContext?console.log("WebGL "):console.log(" Canvas 2D ")}add(...t){let n=0;for(const s of t)s instanceof zt&&(super.insertAt(0,s),this.pageFrameIndex=0,n++),s instanceof at&&(this.pageFrameIndex>=0?(super.insertAt(this.pageFrameIndex+1,s),n++):(super.add(s),n++)),s instanceof xt||(this.pageFrameIndex>=0?(super.insertAt(this.pageFrameIndex,s),n++):(super.add(s),n++));return this.updatePageFrameIndex(),n}updatePageFrameIndex(){const t=this.getObjects();this.pageFrameIndex=t.findIndex(n=>n instanceof zt)}remove(...t){return super.remove(...t)}bringObjectToFront(t){return t instanceof xt?!1:(this.pageFrameIndex>0&&super.moveObjectTo(t,this.pageFrameIndex-1),console.log("[CustomCanvas] bringObjectToFront ",this._objects),!0)}sendObjectToBack(t){return t instanceof xt?!1:(super.sendObjectToBack(t),console.log("[CustomCanvas] sendObjectToBack ",this._objects),!0)}bringObjectForward(t,n){if(t instanceof xt)return console.warn("Slides"),!1;const s=this._objects.indexOf(t);return this.item(s+1)instanceof xt?(console.warn("Slides"),!1):(console.log("[CustomCanvas] bringObjectForward ",this._objects),super.bringObjectForward(t,!1))}sendObjectBackwards(t,n){return t instanceof xt?(console.warn("Slides"),!1):(console.log("[CustomCanvas] sendObjectBackwards ",this._objects),super.sendObjectBackwards(t,n))}}X(bo,"type","CustomCanvas");class WO{static getPageFrameMenuItems(e){return[{label:"",action:e.insertFrame},{label:"",action:e.changeBackground},{label:"",action:e.changeColorScheme},{label:"",action:e.insertText},{label:"",action:e.insertImage}]}static getCanvasMenuItems(e){return[{label:"",action:e.insertFrame},{label:"",action:e.paste},{label:"",action:e.changeBackground},{label:"",action:e.changeColorScheme},{label:"",action:e.insertText},{label:"",action:e.insertImage},{separator:!0,label:"",action:()=>{}},{label:"",action:e.startPresentation}]}static getFrameMenuItems(e){return[{label:"",action:()=>e.moveLayer("up")},{label:"",action:()=>e.moveLayer("down")},{label:"",action:()=>e.moveLayer("top")},{label:"",action:()=>e.moveLayer("bottom")},{separator:!0,label:"",action:()=>{}},{label:"",action:e.insertText},{label:"",action:e.insertImage},{label:"",action:e.insertShape},{separator:!0,label:"",action:()=>{}},{label:"",action:e.copyObject},{label:"",action:e.cutObject},{label:"",action:e.deleteObject}]}static getContentMenuItems(e){return[{label:"",action:()=>e.moveLayer("up")},{label:"",action:()=>e.moveLayer("down")},{label:"",action:()=>e.moveLayer("top")},{label:"",action:()=>e.moveLayer("bottom")},{separator:!0,label:"",action:()=>{}},{label:"",action:e.copyObject},{label:"",action:e.cutObject},{label:"",action:e.deleteObject}]}static getAllMenuItems(e){const t=new Map;return t.set(zt.type,this.getPageFrameMenuItems(e)),t.set(bo.type,this.getCanvasMenuItems(e)),t.set(at.type,this.getFrameMenuItems(e)),t.set(At.type,this.getContentMenuItems(e)),t.set(ji.type,this.getContentMenuItems(e)),t.set(ul.type,this.getContentMenuItems(e)),t}}class YO{constructor(e){X(this,"context");this.context=e}handleInsertFrame(e){e.position}handleDeleteFrame(e){if(!e.target)return;const t=e.target;this.context.canvasManager.getFrameManager().deleteFrame(t.id)}}class XO{constructor(e){X(this,"context");this.context=e}handleChangeBackground(e){Ae.emit(ye.CONTROL_PANEL.OPEN,{type:ye.PANEL_TYPE.BACKGROUND_IMAGE,canvas:this.context.canvas,target:e.target,position:e.position})}handleChangeColorScheme(e){console.log("",e),Ae.emit(ye.CONTROL_PANEL.OPEN,{type:ye.PANEL_TYPE.BACKGROUND_COLOR,canvas:this.context.canvas,target:e.target,position:e.position})}}class UO{constructor(e){X(this,"context");this.context=e}handleInsertText(e){var t,n;e.position&&((n=(t=this.context.canvasManager)==null?void 0:t.getControlsManager())==null||n.addText({left:e.position.x,top:e.position.y}))}handleInsertImage(e){Ae.emit(ye.CONTROL_PANEL.OPEN,{type:ye.PANEL_TYPE.INSERT_IMAGE,canvas:this.context.canvas,canvasManager:this.context.canvasManager,target:e.target,position:e.position})}handleCopyObject(e){if(!e.target)return;const t=new KeyboardEvent("keydown",{key:"c",code:"KeyC",ctrlKey:!0,bubbles:!0});document.dispatchEvent(t)}handleCutObject(e){e.target}handlePaste(e){if(!e.position)return;console.log(" ");const t=new KeyboardEvent("keydown",{key:"v",code:"KeyV",ctrlKey:!0,bubbles:!0});document.dispatchEvent(t)}handleDeleteObject(e){e.target&&this.context.canvasManager.removeObject(e.target)}handleInsertShape(e){}}class GO{constructor(e){X(this,"context");this.context=e}handleMoveLayer(e,t){e.target&&this.moveActiveObject(t,e.target)}moveActiveObject(e,t){const n=t;if(n)switch(e){case"up":this.context.canvas.bringObjectForward(n,!1);break;case"down":this.context.canvas.sendObjectBackwards(n,!1);break;case"top":this.context.canvas.bringObjectToFront(n);break;case"bottom":this.context.canvas.sendObjectToBack(n);break}}}class qO{constructor(e){X(this,"context");this.context=e}handleStartPresentation(e){}}class KO{constructor(e){X(this,"frame");X(this,"background");X(this,"content");X(this,"layer");X(this,"presentation");this.frame=new YO(e),this.background=new XO(e),this.content=new UO(e),this.layer=new GO(e),this.presentation=new qO(e)}}class ZO{constructor(e,t){X(this,"canvas");X(this,"menuElement");X(this,"menuItems");X(this,"handlerManager");X(this,"canvasManager");X(this,"lastEvent",null);X(this,"handleMouseDown",e=>{if(e.button===2){this.lastEvent=e,e.preventDefault();let t=this.canvas.findTarget(e);t||(t=this.canvas),t?(t instanceof bo||this.canvas.setActiveObject(t),this.showContextMenu(e,t)):this.showCanvasContextMenu(e)}});this.canvas=e,this.canvasManager=t,this.menuElement=this.createMenuElement(),this.menuItems=this.initializeMenuItems(),this.handlerManager=new KO({canvas:e,canvasManager:t,contextMenuManager:this}),this.initializeEventListeners()}createMenuElement(){const e=document.createElement("div");return e.style.position="fixed",e.style.display="none",e.style.backgroundColor="#ffffff",e.style.boxShadow="0 2px 8px rgba(0,0,0,0.15)",e.style.borderRadius="4px",e.style.padding="4px 0",e.style.zIndex="1000",document.body.appendChild(e),e}initializeMenuItems(){const e={insertFrame:()=>this.insertFrame(),changeBackground:()=>this.changeBackground(),changeColorScheme:()=>this.changeColorScheme(),insertText:()=>this.insertText(),insertImage:()=>this.insertImage(),paste:()=>this.paste(),copyObject:()=>this.copyObject(),cutObject:()=>this.cutObject(),deleteObject:()=>this.deleteObject(),moveLayer:t=>this.moveActiveObject(t),startPresentation:()=>this.startPresentation(),insertShape:()=>this.insertShape()};return WO.getAllMenuItems(e)}createMenuItem(e){if(e.separator){const n=document.createElement("div");return n.style.height="1px",n.style.backgroundColor="#e8e8e8",n.style.margin="4px 0",n}const t=document.createElement("div");if(t.textContent=e.label,t.style.padding="8px 16px",t.style.cursor=e.disabled?"not-allowed":"pointer",t.style.fontSize="14px",t.style.userSelect="none",t.style.color=e.disabled?"#bfbfbf":"#000000",t.style.display="flex",t.style.alignItems="center",e.icon){const n=document.createElement("span");n.innerHTML=e.icon,n.style.marginRight="8px",t.prepend(n)}return e.disabled||(t.addEventListener("mouseover",()=>{t.style.backgroundColor="#f5f5f5"}),t.addEventListener("mouseout",()=>{t.style.backgroundColor="transparent"}),t.addEventListener("click",e.action)),t}initializeEventListeners(){const e=this.canvas.upperCanvasEl;e.addEventListener("contextmenu",t=>(t.preventDefault(),!1),!1),e.addEventListener("mousedown",this.handleMouseDown),document.addEventListener("click",()=>{this.hideContextMenu()}),document.addEventListener("keydown",t=>{t.key==="Escape"&&this.hideContextMenu()})}showCanvasContextMenu(e){const t=this.menuItems.get("canvas")||[];this.renderContextMenu(e,t)}showContextMenu(e,t){let n;t instanceof zt?n=zt.type:t instanceof at?n=at.type:t instanceof bo?n=bo.type:n=At.type;const s=this.menuItems.get(n)||[];this.renderContextMenu(e,s)}renderContextMenu(e,t){this.menuElement.innerHTML="",t.forEach(l=>{this.menuElement.appendChild(this.createMenuItem(l))});const n=e.clientX,s=e.clientY;this.menuElement.style.left=`${n}px`,this.menuElement.style.top=`${s}px`,this.menuElement.style.display="block";const i=this.menuElement.getBoundingClientRect(),o=window.innerWidth,a=window.innerHeight;i.right>o&&(this.menuElement.style.left=`${n-i.width}px`),i.bottom>a&&(this.menuElement.style.top=`${s-i.height}px`)}hideContextMenu(){this.menuElement.style.display="none"}getCurrentPosition(){if(this.lastEvent)return this.canvas.getPointer(this.lastEvent)}moveActiveObject(e){const t=this.canvas.getActiveObject();if(!t)return;const n=this.getCurrentPosition(),s={canvas:this.canvas,target:t,position:n};this.handlerManager.layer.handleMoveLayer(s,e),this.hideContextMenu()}insertFrame(){const e=this.getCurrentPosition();if(!e)return;const t={canvas:this.canvas,position:e,target:this.canvas.getActiveObject()};this.handlerManager.frame.handleInsertFrame(t),this.hideContextMenu()}changeBackground(){const e={canvas:this.canvas,target:this.canvas.getActiveObject(),position:this.getCurrentPosition()};this.handlerManager.background.handleChangeBackground(e),this.hideContextMenu()}changeColorScheme(){const e={canvas:this.canvas,target:this.canvas.getActiveObject(),position:this.getCurrentPosition()};this.handlerManager.background.handleChangeColorScheme(e),this.hideContextMenu()}insertText(){const e=this.getCurrentPosition();if(!e)return;const t={canvas:this.canvas,target:this.canvas.getActiveObject(),position:e};this.handlerManager.content.handleInsertText(t),this.hideContextMenu()}insertImage(){const e={canvas:this.canvas,target:this.canvas.getActiveObject(),position:this.getCurrentPosition()};this.handlerManager.content.handleInsertImage(e),this.hideContextMenu()}insertShape(){const e={canvas:this.canvas,target:this.canvas.getActiveObject(),position:this.getCurrentPosition()};this.handlerManager.content.handleInsertShape(e),this.hideContextMenu()}paste(){const e=this.getCurrentPosition();if(!e)return;const t={canvas:this.canvas,target:this.canvas.getActiveObject(),position:e};this.handlerManager.content.handlePaste(t),this.hideContextMenu()}copyObject(){const e=this.canvas.getActiveObject();if(!e)return;const t={canvas:this.canvas,target:e,position:this.getCurrentPosition()};this.handlerManager.content.handleCopyObject(t),this.hideContextMenu()}cutObject(){const e=this.canvas.getActiveObject();if(!e)return;const t={canvas:this.canvas,target:e,position:this.getCurrentPosition()};this.handlerManager.content.handleCutObject(t),this.hideContextMenu()}deleteObject(){const e=this.canvas.getActiveObject();if(!e)return;const t={canvas:this.canvas,target:e,position:this.getCurrentPosition()};e instanceof at?this.handlerManager.frame.handleDeleteFrame(t):this.handlerManager.content.handleDeleteObject(t),this.hideContextMenu()}startPresentation(){const e={canvas:this.canvas,target:this.canvas.getActiveObject(),position:this.getCurrentPosition()};this.handlerManager.presentation.handleStartPresentation(e),this.hideContextMenu()}destroy(){const e=this.canvas.upperCanvasEl;e.removeEventListener("contextmenu",t=>t.preventDefault()),e.removeEventListener("mousedown",this.handleMouseDown),document.removeEventListener("click",this.hideContextMenu),this.menuElement&&this.menuElement.parentNode&&this.menuElement.parentNode.removeChild(this.menuElement)}}const Xo={margin:4,width:1,color:"rgb(255,0,0,0.9)"};function Rb(r,e){return Math.abs(r-e)}function JO(r,e,t){const n=r.translateToCenterPoint(e,"center","center"),s=r.translateToOriginPoint(n,r.originX,r.originY);t=="x"?r.setX(s.x):r.setY(s.y)}const QO=["left","center","right"],eE=["top","center","bottom"];function tE(r){var x;const e=Xo.margin,{activeObject:t,isScale:n,index:s,point:i,list:o}=r,{dis:a,arr:l}=Db(i,o,"x"),c=e/(((x=t.canvas)==null?void 0:x.getZoom())??1);if(a>c)return[];let u=l[l.length-1].x-i.x;const h=s==0||s==3?-1:1;u*=h;const{width:d,scaleX:f,left:g}=t,p=t._getTransformedDimensions(),m=(u+p.x)/p.x;n?t.set("scaleX",f*m):t.set("width",d*m);const v=[0,u/2*h,u*h];h<0&&v.reverse();const _=v[QO.indexOf(t.originX)];return t.set("left",g+_),t.setCoords(),l.map(y=>({x:y.x,y1:y.y,y2:i.y}))}function nE(r){var x;const e=Xo.margin,{activeObject:t,isScale:n,index:s,point:i,list:o}=r,{dis:a,arr:l}=Db(i,o,"y"),c=e/(((x=t.canvas)==null?void 0:x.getZoom())??1);if(a>c)return[];let u=l[l.length-1].y-i.y;const h=s<2?-1:1;u*=h;const{height:d,scaleY:f,top:g}=t,p=t._getTransformedDimensions(),m=(u+p.y)/p.y;n?t.set("scaleY",f*m):t.set("height",d*m);const v=[0,u/2*h,u*h];h<0&&v.reverse();const _=v[eE.indexOf(t.originY)];return t.set("top",g+_),t.setCoords(),l.map(y=>({y:y.y,x1:y.x,x2:i.x}))}function Db(r,e,t){let n=1/0,s=[];for(const i of e){const o=Rb(r[t],i[t]);n>o&&(s=[],n=o),n==o&&s.push(i)}return{dis:n,arr:s}}function Ib(r,e,t){const{width:n,color:s}=Xo,i=r.getSelectionContext(),o=r.viewportTransform,a=r.getZoom();i.save(),i.transform(...o),i.lineWidth=n/a,i.strokeStyle=s,i.beginPath(),i.moveTo(e.x,e.y),i.lineTo(t.x,t.y),i.stroke(),Md(i,a,e),Md(i,a,t),i.restore()}const rE=2.4;function Md(r,e,t){const n=rE/e;r.save(),r.translate(t.x,t.y),r.beginPath(),r.moveTo(-n,-n),r.lineTo(n,n),r.moveTo(n,-n),r.lineTo(-n,n),r.stroke(),r.restore()}function sE(r,e){const{width:t,color:n}=Xo,s=r.getSelectionContext(),i=r.viewportTransform,o=r.getZoom();s.save(),s.transform(...i),s.lineWidth=t/o,s.strokeStyle=n;for(const a of e)Md(s,o,a);s.restore()}function iE(r,e){const t=e.map(n=>{const s="y2"in n,i=s?n.x:n.x1,o=s?n.y1:n.y;return new j(i,o)});sE(r,t)}function oE(r,e){const t=e.x,n=new j(t,e.y1),s=new j(t,e.y2);Ib(r,n,s)}function aE(r,e){const t=e.y,n=new j(e.x1,t),s=new j(e.x2,t);Ib(r,n,s)}function em(r){const e=new Set,t=r.canvas;if(!t)return e;const n=r instanceof Ps?r.getObjects():[r];return t.forEachObject(s=>{if(s.isOnScreen()&&s.visible){if(s.constructor==er){Bb(e,s);return}e.add(s)}}),Lb(e,n),e}function Lb(r,e){for(const t of e)t.constructor==er?Lb(r,t.getObjects()):r.delete(t)}function Bb(r,e){const t=e.getObjects();for(const n of t)if(n.visible){if(n.constructor==er){Bb(r,n);continue}r.add(n)}}function lE(r){var h;const e=Xo.margin,{activeObject:t,activeObjectRect:n,objectRect:s}=r,i=tm(s),o=tm(n),a=e/(((h=t.canvas)==null?void 0:h.getZoom())??1),l={target:t,list:i,aList:o,margin:a},c=cE(l),u=uE(l);return{vLines:c,hLines:u}}function cE(r){const{target:e,list:t,aList:n,margin:s}=r,i=n.map(h=>jb(h,t,"x")),o=Math.min(...i.map(h=>h.dis));if(o>s)return[];const a=[],l=n[0].x2-n[0].x,c=n[0].y2-n[0].y;let u=!1;for(let h=0;h<i.length;h++){const d=i[h];if(o==d.dis){const f=t[d.index],g=n[d.index],p=f.x,m=g.y,v=Math.min(f.y,f.y2,m,g.y2),_=Math.max(f.y,f.y2,m,g.y2);if(a.push({x:p,y1:v,y2:_}),u)continue;u=!0,zb({target:e,x:p,y:m,centerX:h-1,centerY:d.index-1,width:l,height:c,dir:"x"});const x=o*d.dir;n.forEach(y=>y.x-=x)}}return a}function uE(r){const{target:e,list:t,aList:n,margin:s}=r,i=n.map(h=>jb(h,t,"y")),o=Math.min(...i.map(h=>h.dis));if(o>s)return[];const a=[],l=n[0].x2-n[0].x,c=n[0].y2-n[0].y;let u=!1;for(let h=0;h<i.length;h++){const d=i[h];if(o==d.dis){const f=t[d.index],g=n[d.index],p=f.y,m=g.x,v=Math.min(f.x,f.x2,m,g.x2),_=Math.max(f.x,f.x2,m,g.x2);if(a.push({y:p,x1:v,x2:_}),u)continue;u=!0,zb({target:e,x:m,y:p,centerX:d.index-1,centerY:h-1,width:l,height:c,dir:"y"});const x=o*d.dir;n.forEach(y=>y.y-=x)}}return a}function jb(r,e,t){let n=1/0,s=-1,i=1;for(let o=0;o<e.length;o++){const a=Rb(r[t],e[o][t]);n>a&&(s=o,n=a,i=r[t]>e[o][t]?1:-1)}return{dis:n,index:s,dir:i}}function tm(r){const{left:e,top:t,width:n,height:s}=r,i={x:e,y:t,x2:e+n,y2:t+s},o=e+n/2,a=t+s/2,l={x:o,y:a,x2:o,y2:a},c={x:e+n,x2:e,y:t+s,y2:t};return[i,l,c]}function zb(r){const{target:e,centerX:t,centerY:n,width:s,height:i,dir:o}=r;let{x:a,y:l}=r;a-=t*s/2,l-=n*i/2,JO(e,new j(a,l),o),e.setCoords()}function hE(r,e={}){Object.assign(Xo,e);const t=new Set,n=new Set;let s=!1;const i=new Map,o=d=>{const f=[d.calcTransformMatrix().toString(),d.width,d.height].join(),g=i.get(f);if(g)return g;const p=d.getCoords(),v=[cr.makeBoundingBoxFromPoints(p),p];return i.set(f,v),v};function a(d){const f=d.target;f.setCoords(),s=!1,n.clear(),t.clear();const g=em(f),p=f.getBoundingRect();for(const m of g){const v=o(m)[0],{vLines:_,hLines:x}=lE({activeObject:f,activeObjectRect:p,objectRect:v});_.forEach(y=>{n.add(JSON.stringify(y))}),x.forEach(y=>{t.add(JSON.stringify(y))})}}function l(d){const f=d.target;f.setCoords();const g=String(d.transform.action).startsWith("scale");n.clear(),t.clear();const p=em(f);let m=d.transform.corner;f.flipX&&(m=m.replace("l","r").replace("r","l")),f.flipY&&(m=m.replace("t","b").replace("b","t"));let v=["tl","tr","br","bl","mt","mr","mb","ml"].indexOf(m);if(v==-1)return;if(s=v>3,s){if(f.getTotalAngle()%90!=0)return;v-=4}let _=f.getCoords()[v];for(const x of p){const[y,C]=o(x),E=new j(y.left+y.width/2,y.top+y.height/2),b=[...C,E],w={activeObject:f,point:_,list:b,isScale:g,index:v},S=tE(w),$=nE(w);S.forEach(N=>{n.add(JSON.stringify(N))}),$.forEach(N=>{t.add(JSON.stringify(N))}),(S.length||$.length)&&(_=f.getCoords()[v])}}function c(){r.clearContext(r.contextTop)}function u(){if(s){const d=[];for(const f of n)d.push(JSON.parse(f));for(const f of t)d.push(JSON.parse(f));iE(r,d)}else{for(const d of n)oE(r,JSON.parse(d));for(const d of t)aE(r,JSON.parse(d))}}function h(){n.clear(),t.clear(),i.clear(),r.requestRenderAll()}return r.on("object:resizing",l),r.on("object:scaling",l),r.on("object:moving",a),r.on("before:render",c),r.on("after:render",u),r.on("mouse:up",h),()=>{r.off("object:resizing",l),r.off("object:scaling",l),r.off("object:moving",a),r.off("before:render",c),r.off("after:render",u),r.off("mouse:up",h)}}function Jr(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Hb(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}/*!
 * GSAP 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var $n={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},ko={duration:.5,overwrite:!1,delay:0},Xf,Wt,it,Br=1e8,on=1/Br,Pd=Math.PI*2,dE=Pd/4,fE=0,$b=Math.sqrt,gE=Math.cos,pE=Math.sin,Ht=function(e){return typeof e=="string"},mt=function(e){return typeof e=="function"},cs=function(e){return typeof e=="number"},Uf=function(e){return typeof e>"u"},$r=function(e){return typeof e=="object"},Tn=function(e){return e!==!1},Gf=function(){return typeof window<"u"},Jl=function(e){return mt(e)||Ht(e)},Nb=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},an=Array.isArray,Ad=/(?:-?\.?\d|\.)+/gi,Vb=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,so=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,kh=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Wb=/[+-]=-?[.\d]+/,Yb=/[^,'"\[\]\s]+/gi,mE=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,ut,Tr,Fd,qf,Vn={},qc={},Xb,Ub=function(e){return(qc=Ro(e,Vn))&&Pn},Kf=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},hl=function(e,t){return!t&&console.warn(e)},Gb=function(e,t){return e&&(Vn[e]=t)&&qc&&(qc[e]=t)||Vn},dl=function(){return 0},vE={suppressEvents:!0,isStart:!0,kill:!1},mc={suppressEvents:!0,kill:!1},yE={suppressEvents:!0},Zf={},Bs=[],kd={},qb,Dn={},Rh={},nm=30,vc=[],Jf="",Qf=function(e){var t=e[0],n,s;if($r(t)||mt(t)||(e=[e]),!(n=(t._gsap||{}).harness)){for(s=vc.length;s--&&!vc[s].targetTest(t););n=vc[s]}for(s=e.length;s--;)e[s]&&(e[s]._gsap||(e[s]._gsap=new b_(e[s],n)))||e.splice(s,1);return e},Ti=function(e){return e._gsap||Qf(Jn(e))[0]._gsap},Kb=function(e,t,n){return(n=e[t])&&mt(n)?e[t]():Uf(n)&&e.getAttribute&&e.getAttribute(t)||n},On=function(e,t){return(e=e.split(",")).forEach(t)||e},bt=function(e){return Math.round(e*1e5)/1e5||0},St=function(e){return Math.round(e*1e7)/1e7||0},_o=function(e,t){var n=t.charAt(0),s=parseFloat(t.substr(2));return e=parseFloat(e),n==="+"?e+s:n==="-"?e-s:n==="*"?e*s:e/s},bE=function(e,t){for(var n=t.length,s=0;e.indexOf(t[s])<0&&++s<n;);return s<n},Kc=function(){var e=Bs.length,t=Bs.slice(0),n,s;for(kd={},Bs.length=0,n=0;n<e;n++)s=t[n],s&&s._lazy&&(s.render(s._lazy[0],s._lazy[1],!0)._lazy=0)},Zb=function(e,t,n,s){Bs.length&&!Wt&&Kc(),e.render(t,n,Wt&&t<0&&(e._initted||e._startAt)),Bs.length&&!Wt&&Kc()},Jb=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(Yb).length<2?t:Ht(e)?e.trim():e},Qb=function(e){return e},Wn=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},_E=function(e){return function(t,n){for(var s in n)s in t||s==="duration"&&e||s==="ease"||(t[s]=n[s])}},Ro=function(e,t){for(var n in t)e[n]=t[n];return e},rm=function r(e,t){for(var n in t)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(e[n]=$r(t[n])?r(e[n]||(e[n]={}),t[n]):t[n]);return e},Zc=function(e,t){var n={},s;for(s in e)s in t||(n[s]=e[s]);return n},Va=function(e){var t=e.parent||ut,n=e.keyframes?_E(an(e.keyframes)):Wn;if(Tn(e.inherit))for(;t;)n(e,t.vars.defaults),t=t.parent||t._dp;return e},xE=function(e,t){for(var n=e.length,s=n===t.length;s&&n--&&e[n]===t[n];);return n<0},e_=function(e,t,n,s,i){var o=e[s],a;if(i)for(a=t[i];o&&o[i]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[s]=t,t._prev=o,t.parent=t._dp=e,t},$u=function(e,t,n,s){n===void 0&&(n="_first"),s===void 0&&(s="_last");var i=t._prev,o=t._next;i?i._next=o:e[n]===t&&(e[n]=o),o?o._prev=i:e[s]===t&&(e[s]=i),t._next=t._prev=t.parent=null},Ws=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Oi=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},CE=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},Rd=function(e,t,n,s){return e._startAt&&(Wt?e._startAt.revert(mc):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,s))},wE=function r(e){return!e||e._ts&&r(e.parent)},sm=function(e){return e._repeat?Do(e._tTime,e=e.duration()+e._rDelay)*e:0},Do=function(e,t){var n=Math.floor(e=St(e/t));return e&&n===e?n-1:n},Jc=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Nu=function(e){return e._end=St(e._start+(e._tDur/Math.abs(e._ts||e._rts||on)||0))},Vu=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=St(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Nu(e),n._dirty||Oi(n,e)),e},t_=function(e,t){var n;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(n=Jc(e.rawTime(),t),(!t._dur||Pl(0,t.totalDuration(),n)-t._tTime>on)&&t.render(n,!0)),Oi(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-1e-8}},Ar=function(e,t,n,s){return t.parent&&Ws(t),t._start=St((cs(n)?n:n||e!==ut?Gn(e,n,t):e._time)+t._delay),t._end=St(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),e_(e,t,"_first","_last",e._sort?"_start":0),Dd(t)||(e._recent=t),s||t_(e,t),e._ts<0&&Vu(e,e._tTime),e},n_=function(e,t){return(Vn.ScrollTrigger||Kf("scrollTrigger",t))&&Vn.ScrollTrigger.create(t,e)},r_=function(e,t,n,s,i){if(tg(e,t,i),!e._initted)return 1;if(!n&&e._pt&&!Wt&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&qb!==In.frame)return Bs.push(e),e._lazy=[i,s],1},SE=function r(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||r(t))},Dd=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},TE=function(e,t,n,s){var i=e.ratio,o=t<0||!t&&(!e._start&&SE(e)&&!(!e._initted&&Dd(e))||(e._ts<0||e._dp._ts<0)&&!Dd(e))?0:1,a=e._rDelay,l=0,c,u,h;if(a&&e._repeat&&(l=Pl(0,e._tDur,t),u=Do(l,a),e._yoyo&&u&1&&(o=1-o),u!==Do(e._tTime,a)&&(i=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==i||Wt||s||e._zTime===on||!t&&e._zTime){if(!e._initted&&r_(e,t,s,n,l))return;for(h=e._zTime,e._zTime=t||(n?on:0),n||(n=t&&!h),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,c=e._pt;c;)c.r(o,c.d),c=c._next;t<0&&Rd(e,t,n,!0),e._onUpdate&&!n&&Bn(e,"onUpdate"),l&&e._repeat&&!n&&e.parent&&Bn(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&Ws(e,1),!n&&!Wt&&(Bn(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},OE=function(e,t,n){var s;if(n>t)for(s=e._first;s&&s._start<=n;){if(s.data==="isPause"&&s._start>t)return s;s=s._next}else for(s=e._last;s&&s._start>=n;){if(s.data==="isPause"&&s._start<t)return s;s=s._prev}},Io=function(e,t,n,s){var i=e._repeat,o=St(t)||0,a=e._tTime/e._tDur;return a&&!s&&(e._time*=o/e._dur),e._dur=o,e._tDur=i?i<0?1e10:St(o*(i+1)+e._rDelay*i):o,a>0&&!s&&Vu(e,e._tTime=e._tDur*a),e.parent&&Nu(e),n||Oi(e.parent,e),e},im=function(e){return e instanceof fn?Oi(e):Io(e,e._dur)},EE={_start:0,endTime:dl,totalDuration:dl},Gn=function r(e,t,n){var s=e.labels,i=e._recent||EE,o=e.duration()>=Br?i.endTime(!1):e._dur,a,l,c;return Ht(t)&&(isNaN(t)||t in s)?(l=t.charAt(0),c=t.substr(-1)==="%",a=t.indexOf("="),l==="<"||l===">"?(a>=0&&(t=t.replace(/=/,"")),(l==="<"?i._start:i.endTime(i._repeat>=0))+(parseFloat(t.substr(1))||0)*(c?(a<0?i:n).totalDuration()/100:1)):a<0?(t in s||(s[t]=o),s[t]):(l=parseFloat(t.charAt(a-1)+t.substr(a+1)),c&&n&&(l=l/100*(an(n)?n[0]:n).totalDuration()),a>1?r(e,t.substr(0,a-1),n)+l:o+l)):t==null?o:+t},Wa=function(e,t,n){var s=cs(t[1]),i=(s?2:1)+(e<2?0:1),o=t[i],a,l;if(s&&(o.duration=t[1]),o.parent=n,e){for(a=o,l=n;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=Tn(l.vars.inherit)&&l.parent;o.immediateRender=Tn(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[i-1]}return new wt(t[0],o,t[i+1])},Qs=function(e,t){return e||e===0?t(e):t},Pl=function(e,t,n){return n<e?e:n>t?t:n},rn=function(e,t){return!Ht(e)||!(t=mE.exec(e))?"":t[1]},ME=function(e,t,n){return Qs(n,function(s){return Pl(e,t,s)})},Id=[].slice,s_=function(e,t){return e&&$r(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&$r(e[0]))&&!e.nodeType&&e!==Tr},PE=function(e,t,n){return n===void 0&&(n=[]),e.forEach(function(s){var i;return Ht(s)&&!t||s_(s,1)?(i=n).push.apply(i,Jn(s)):n.push(s)})||n},Jn=function(e,t,n){return it&&!t&&it.selector?it.selector(e):Ht(e)&&!n&&(Fd||!Lo())?Id.call((t||qf).querySelectorAll(e),0):an(e)?PE(e,n):s_(e)?Id.call(e,0):e?[e]:[]},Ld=function(e){return e=Jn(e)[0]||hl("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return Jn(t,n.querySelectorAll?n:n===e?hl("Invalid scope")||qf.createElement("div"):e)}},i_=function(e){return e.sort(function(){return .5-Math.random()})},o_=function(e){if(mt(e))return e;var t=$r(e)?e:{each:e},n=Ei(t.ease),s=t.from||0,i=parseFloat(t.base)||0,o={},a=s>0&&s<1,l=isNaN(s)||a,c=t.axis,u=s,h=s;return Ht(s)?u=h={center:.5,edges:.5,end:1}[s]||0:!a&&l&&(u=s[0],h=s[1]),function(d,f,g){var p=(g||t).length,m=o[p],v,_,x,y,C,E,b,w,S;if(!m){if(S=t.grid==="auto"?0:(t.grid||[1,Br])[1],!S){for(b=-1e8;b<(b=g[S++].getBoundingClientRect().left)&&S<p;);S<p&&S--}for(m=o[p]=[],v=l?Math.min(S,p)*u-.5:s%S,_=S===Br?0:l?p*h/S-.5:s/S|0,b=0,w=Br,E=0;E<p;E++)x=E%S-v,y=_-(E/S|0),m[E]=C=c?Math.abs(c==="y"?y:x):$b(x*x+y*y),C>b&&(b=C),C<w&&(w=C);s==="random"&&i_(m),m.max=b-w,m.min=w,m.v=p=(parseFloat(t.amount)||parseFloat(t.each)*(S>p?p-1:c?c==="y"?p/S:S:Math.max(S,p/S))||0)*(s==="edges"?-1:1),m.b=p<0?i-p:i,m.u=rn(t.amount||t.each)||0,n=n&&p<0?m_(n):n}return p=(m[d]-m.min)/m.max||0,St(m.b+(n?n(p):p)*m.v)+m.u}},Bd=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var s=St(Math.round(parseFloat(n)/e)*e*t);return(s-s%1)/t+(cs(n)?0:rn(n))}},a_=function(e,t){var n=an(e),s,i;return!n&&$r(e)&&(s=n=e.radius||Br,e.values?(e=Jn(e.values),(i=!cs(e[0]))&&(s*=s)):e=Bd(e.increment)),Qs(t,n?mt(e)?function(o){return i=e(o),Math.abs(i-o)<=s?i:o}:function(o){for(var a=parseFloat(i?o.x:o),l=parseFloat(i?o.y:0),c=Br,u=0,h=e.length,d,f;h--;)i?(d=e[h].x-a,f=e[h].y-l,d=d*d+f*f):d=Math.abs(e[h]-a),d<c&&(c=d,u=h);return u=!s||c<=s?e[u]:o,i||u===o||cs(o)?u:u+rn(o)}:Bd(e))},l_=function(e,t,n,s){return Qs(an(e)?!t:n===!0?!!(n=0):!s,function(){return an(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(s=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+n*.99))/n)*n*s)/s})},AE=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(s){return t.reduce(function(i,o){return o(i)},s)}},FE=function(e,t){return function(n){return e(parseFloat(n))+(t||rn(n))}},kE=function(e,t,n){return u_(e,t,0,1,n)},c_=function(e,t,n){return Qs(n,function(s){return e[~~t(s)]})},RE=function r(e,t,n){var s=t-e;return an(e)?c_(e,r(0,e.length),t):Qs(n,function(i){return(s+(i-e)%s)%s+e})},DE=function r(e,t,n){var s=t-e,i=s*2;return an(e)?c_(e,r(0,e.length-1),t):Qs(n,function(o){return o=(i+(o-e)%i)%i||0,e+(o>s?i-o:o)})},fl=function(e){for(var t=0,n="",s,i,o,a;~(s=e.indexOf("random(",t));)o=e.indexOf(")",s),a=e.charAt(s+7)==="[",i=e.substr(s+7,o-s-7).match(a?Yb:Ad),n+=e.substr(t,s-t)+l_(a?i:+i[0],a?0:+i[1],+i[2]||1e-5),t=o+1;return n+e.substr(t,e.length-t)},u_=function(e,t,n,s,i){var o=t-e,a=s-n;return Qs(i,function(l){return n+((l-e)/o*a||0)})},IE=function r(e,t,n,s){var i=isNaN(e+t)?0:function(f){return(1-f)*e+f*t};if(!i){var o=Ht(e),a={},l,c,u,h,d;if(n===!0&&(s=1)&&(n=null),o)e={p:e},t={p:t};else if(an(e)&&!an(t)){for(u=[],h=e.length,d=h-2,c=1;c<h;c++)u.push(r(e[c-1],e[c]));h--,i=function(g){g*=h;var p=Math.min(d,~~g);return u[p](g-p)},n=t}else s||(e=Ro(an(e)?[]:{},e));if(!u){for(l in t)eg.call(a,e,l,"get",t[l]);i=function(g){return sg(g,a)||(o?e.p:e)}}}return Qs(n,i)},om=function(e,t,n){var s=e.labels,i=Br,o,a,l;for(o in s)a=s[o]-t,a<0==!!n&&a&&i>(a=Math.abs(a))&&(l=o,i=a);return l},Bn=function(e,t,n){var s=e.vars,i=s[t],o=it,a=e._ctx,l,c,u;if(i)return l=s[t+"Params"],c=s.callbackScope||e,n&&Bs.length&&Kc(),a&&(it=a),u=l?i.apply(c,l):i.call(c),it=o,u},Oa=function(e){return Ws(e),e.scrollTrigger&&e.scrollTrigger.kill(!!Wt),e.progress()<1&&Bn(e,"onInterrupt"),e},io,h_=[],d_=function(e){if(e)if(e=!e.name&&e.default||e,Gf()||e.headless){var t=e.name,n=mt(e),s=t&&!n&&e.init?function(){this._props=[]}:e,i={init:dl,render:sg,add:eg,kill:ZE,modifier:KE,rawVars:0},o={targetTest:0,get:0,getSetter:rg,aliases:{},register:0};if(Lo(),e!==s){if(Dn[t])return;Wn(s,Wn(Zc(e,i),o)),Ro(s.prototype,Ro(i,Zc(e,o))),Dn[s.prop=t]=s,e.targetTest&&(vc.push(s),Zf[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}Gb(t,s),e.register&&e.register(Pn,s,En)}else h_.push(e)},Je=255,Ea={aqua:[0,Je,Je],lime:[0,Je,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Je],navy:[0,0,128],white:[Je,Je,Je],olive:[128,128,0],yellow:[Je,Je,0],orange:[Je,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Je,0,0],pink:[Je,192,203],cyan:[0,Je,Je],transparent:[Je,Je,Je,0]},Dh=function(e,t,n){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(n-t)*e*6:e<.5?n:e*3<2?t+(n-t)*(2/3-e)*6:t)*Je+.5|0},f_=function(e,t,n){var s=e?cs(e)?[e>>16,e>>8&Je,e&Je]:0:Ea.black,i,o,a,l,c,u,h,d,f,g;if(!s){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),Ea[e])s=Ea[e];else if(e.charAt(0)==="#"){if(e.length<6&&(i=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+i+i+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return s=parseInt(e.substr(1,6),16),[s>>16,s>>8&Je,s&Je,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),s=[e>>16,e>>8&Je,e&Je]}else if(e.substr(0,3)==="hsl"){if(s=g=e.match(Ad),!t)l=+s[0]%360/360,c=+s[1]/100,u=+s[2]/100,o=u<=.5?u*(c+1):u+c-u*c,i=u*2-o,s.length>3&&(s[3]*=1),s[0]=Dh(l+1/3,i,o),s[1]=Dh(l,i,o),s[2]=Dh(l-1/3,i,o);else if(~e.indexOf("="))return s=e.match(Vb),n&&s.length<4&&(s[3]=1),s}else s=e.match(Ad)||Ea.transparent;s=s.map(Number)}return t&&!g&&(i=s[0]/Je,o=s[1]/Je,a=s[2]/Je,h=Math.max(i,o,a),d=Math.min(i,o,a),u=(h+d)/2,h===d?l=c=0:(f=h-d,c=u>.5?f/(2-h-d):f/(h+d),l=h===i?(o-a)/f+(o<a?6:0):h===o?(a-i)/f+2:(i-o)/f+4,l*=60),s[0]=~~(l+.5),s[1]=~~(c*100+.5),s[2]=~~(u*100+.5)),n&&s.length<4&&(s[3]=1),s},g_=function(e){var t=[],n=[],s=-1;return e.split(js).forEach(function(i){var o=i.match(so)||[];t.push.apply(t,o),n.push(s+=o.length+1)}),t.c=n,t},am=function(e,t,n){var s="",i=(e+s).match(js),o=t?"hsla(":"rgba(",a=0,l,c,u,h;if(!i)return e;if(i=i.map(function(d){return(d=f_(d,t,1))&&o+(t?d[0]+","+d[1]+"%,"+d[2]+"%,"+d[3]:d.join(","))+")"}),n&&(u=g_(e),l=n.c,l.join(s)!==u.c.join(s)))for(c=e.replace(js,"1").split(so),h=c.length-1;a<h;a++)s+=c[a]+(~l.indexOf(a)?i.shift()||o+"0,0,0,0)":(u.length?u:i.length?i:n).shift());if(!c)for(c=e.split(js),h=c.length-1;a<h;a++)s+=c[a]+i[a];return s+c[h]},js=function(){var r="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in Ea)r+="|"+e+"\\b";return new RegExp(r+")","gi")}(),LE=/hsl[a]?\(/,p_=function(e){var t=e.join(" "),n;if(js.lastIndex=0,js.test(t))return n=LE.test(t),e[1]=am(e[1],n),e[0]=am(e[0],n,g_(e[1])),!0},gl,In=function(){var r=Date.now,e=500,t=33,n=r(),s=n,i=1e3/240,o=i,a=[],l,c,u,h,d,f,g=function p(m){var v=r()-s,_=m===!0,x,y,C,E;if((v>e||v<0)&&(n+=v-t),s+=v,C=s-n,x=C-o,(x>0||_)&&(E=++h.frame,d=C-h.time*1e3,h.time=C=C/1e3,o+=x+(x>=i?4:i-x),y=1),_||(l=c(p)),y)for(f=0;f<a.length;f++)a[f](C,d,E,m)};return h={time:0,frame:0,tick:function(){g(!0)},deltaRatio:function(m){return d/(1e3/(m||60))},wake:function(){Xb&&(!Fd&&Gf()&&(Tr=Fd=window,qf=Tr.document||{},Vn.gsap=Pn,(Tr.gsapVersions||(Tr.gsapVersions=[])).push(Pn.version),Ub(qc||Tr.GreenSockGlobals||!Tr.gsap&&Tr||{}),h_.forEach(d_)),u=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&h.sleep(),c=u||function(m){return setTimeout(m,o-h.time*1e3+1|0)},gl=1,g(2))},sleep:function(){(u?cancelAnimationFrame:clearTimeout)(l),gl=0,c=dl},lagSmoothing:function(m,v){e=m||1/0,t=Math.min(v||33,e)},fps:function(m){i=1e3/(m||240),o=h.time*1e3+i},add:function(m,v,_){var x=v?function(y,C,E,b){m(y,C,E,b),h.remove(x)}:m;return h.remove(m),a[_?"unshift":"push"](x),Lo(),x},remove:function(m,v){~(v=a.indexOf(m))&&a.splice(v,1)&&f>=v&&f--},_listeners:a},h}(),Lo=function(){return!gl&&In.wake()},Le={},BE=/^[\d.\-M][\d.\-,\s]/,jE=/["']/g,zE=function(e){for(var t={},n=e.substr(1,e.length-3).split(":"),s=n[0],i=1,o=n.length,a,l,c;i<o;i++)l=n[i],a=i!==o-1?l.lastIndexOf(","):l.length,c=l.substr(0,a),t[s]=isNaN(c)?c.replace(jE,"").trim():+c,s=l.substr(a+1).trim();return t},HE=function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),s=e.indexOf("(",t);return e.substring(t,~s&&s<n?e.indexOf(")",n+1):n)},$E=function(e){var t=(e+"").split("("),n=Le[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[zE(t[1])]:HE(e).split(",").map(Jb)):Le._CE&&BE.test(e)?Le._CE("",e):n},m_=function(e){return function(t){return 1-e(1-t)}},v_=function r(e,t){for(var n=e._first,s;n;)n instanceof fn?r(n,t):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==t&&(n.timeline?r(n.timeline,t):(s=n._ease,n._ease=n._yEase,n._yEase=s,n._yoyo=t)),n=n._next},Ei=function(e,t){return e&&(mt(e)?e:Le[e]||$E(e))||t},Yi=function(e,t,n,s){n===void 0&&(n=function(l){return 1-t(1-l)}),s===void 0&&(s=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var i={easeIn:t,easeOut:n,easeInOut:s},o;return On(e,function(a){Le[a]=Vn[a]=i,Le[o=a.toLowerCase()]=n;for(var l in i)Le[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=Le[a+"."+l]=i[l]}),i},y_=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},Ih=function r(e,t,n){var s=t>=1?t:1,i=(n||(e?.3:.45))/(t<1?t:1),o=i/Pd*(Math.asin(1/s)||0),a=function(u){return u===1?1:s*Math.pow(2,-10*u)*pE((u-o)*i)+1},l=e==="out"?a:e==="in"?function(c){return 1-a(1-c)}:y_(a);return i=Pd/i,l.config=function(c,u){return r(e,c,u)},l},Lh=function r(e,t){t===void 0&&(t=1.70158);var n=function(o){return o?--o*o*((t+1)*o+t)+1:0},s=e==="out"?n:e==="in"?function(i){return 1-n(1-i)}:y_(n);return s.config=function(i){return r(e,i)},s};On("Linear,Quad,Cubic,Quart,Quint,Strong",function(r,e){var t=e<5?e+1:e;Yi(r+",Power"+(t-1),e?function(n){return Math.pow(n,t)}:function(n){return n},function(n){return 1-Math.pow(1-n,t)},function(n){return n<.5?Math.pow(n*2,t)/2:1-Math.pow((1-n)*2,t)/2})});Le.Linear.easeNone=Le.none=Le.Linear.easeIn;Yi("Elastic",Ih("in"),Ih("out"),Ih());(function(r,e){var t=1/e,n=2*t,s=2.5*t,i=function(a){return a<t?r*a*a:a<n?r*Math.pow(a-1.5/e,2)+.75:a<s?r*(a-=2.25/e)*a+.9375:r*Math.pow(a-2.625/e,2)+.984375};Yi("Bounce",function(o){return 1-i(1-o)},i)})(7.5625,2.75);Yi("Expo",function(r){return Math.pow(2,10*(r-1))*r+r*r*r*r*r*r*(1-r)});Yi("Circ",function(r){return-($b(1-r*r)-1)});Yi("Sine",function(r){return r===1?1:-gE(r*dE)+1});Yi("Back",Lh("in"),Lh("out"),Lh());Le.SteppedEase=Le.steps=Vn.SteppedEase={config:function(e,t){e===void 0&&(e=1);var n=1/e,s=e+(t?0:1),i=t?1:0,o=1-on;return function(a){return((s*Pl(0,o,a)|0)+i)*n}}};ko.ease=Le["quad.out"];On("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(r){return Jf+=r+","+r+"Params,"});var b_=function(e,t){this.id=fE++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:Kb,this.set=t?t.getSetter:rg},pl=function(){function r(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Io(this,+t.duration,1,1),this.data=t.data,it&&(this._ctx=it,it.data.push(this)),gl||In.wake()}var e=r.prototype;return e.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},e.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},e.totalDuration=function(n){return arguments.length?(this._dirty=0,Io(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(n,s){if(Lo(),!arguments.length)return this._tTime;var i=this._dp;if(i&&i.smoothChildTiming&&this._ts){for(Vu(this,n),!i._dp||i.parent||t_(i,this);i&&i.parent;)i.parent._time!==i._start+(i._ts>=0?i._tTime/i._ts:(i.totalDuration()-i._tTime)/-i._ts)&&i.totalTime(i._tTime,!0),i=i.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&Ar(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!s||this._initted&&Math.abs(this._zTime)===on||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),Zb(this,n,s)),this},e.time=function(n,s){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+sm(this))%(this._dur+this._rDelay)||(n?this._dur:0),s):this._time},e.totalProgress=function(n,s){return arguments.length?this.totalTime(this.totalDuration()*n,s):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(n,s){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+sm(this),s):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(n,s){var i=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*i,s):this._repeat?Do(this._tTime,i)+1:1},e.timeScale=function(n,s){if(!arguments.length)return this._rts===-1e-8?0:this._rts;if(this._rts===n)return this;var i=this.parent&&this._ts?Jc(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-1e-8?0:this._rts,this.totalTime(Pl(-Math.abs(this._delay),this._tDur,i),s!==!1),Nu(this),CE(this)},e.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Lo(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==on&&(this._tTime-=on)))),this):this._ps},e.startTime=function(n){if(arguments.length){this._start=n;var s=this.parent||this._dp;return s&&(s._sort||!this.parent)&&Ar(s,this,n-this._delay),this}return this._start},e.endTime=function(n){return this._start+(Tn(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(n){var s=this.parent||this._dp;return s?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Jc(s.rawTime(n),this):this._tTime:this._tTime},e.revert=function(n){n===void 0&&(n=yE);var s=Wt;return Wt=n,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),Wt=s,this},e.globalTime=function(n){for(var s=this,i=arguments.length?n:s.rawTime();s;)i=s._start+i/(Math.abs(s._ts)||1),s=s._dp;return!this.parent&&this._sat?this._sat.globalTime(n):i},e.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,im(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(n){if(arguments.length){var s=this._time;return this._rDelay=n,im(this),s?this.time(s):this}return this._rDelay},e.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},e.seek=function(n,s){return this.totalTime(Gn(this,n),Tn(s))},e.restart=function(n,s){return this.play().totalTime(n?-this._delay:0,Tn(s)),this._dur||(this._zTime=-1e-8),this},e.play=function(n,s){return n!=null&&this.seek(n,s),this.reversed(!1).paused(!1)},e.reverse=function(n,s){return n!=null&&this.seek(n||this.totalDuration(),s),this.reversed(!0).paused(!1)},e.pause=function(n,s){return n!=null&&this.seek(n,s),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var n=this.parent||this._dp,s=this._start,i;return!!(!n||this._ts&&this._initted&&n.isActive()&&(i=n.rawTime(!0))>=s&&i<this.endTime(!0)-on)},e.eventCallback=function(n,s,i){var o=this.vars;return arguments.length>1?(s?(o[n]=s,i&&(o[n+"Params"]=i),n==="onUpdate"&&(this._onUpdate=s)):delete o[n],this):o[n]},e.then=function(n){var s=this;return new Promise(function(i){var o=mt(n)?n:Qb,a=function(){var c=s.then;s.then=null,mt(o)&&(o=o(s))&&(o.then||o===s)&&(s.then=c),i(o),s.then=c};s._initted&&s.totalProgress()===1&&s._ts>=0||!s._tTime&&s._ts<0?a():s._prom=a})},e.kill=function(){Oa(this)},r}();Wn(pl.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var fn=function(r){Hb(e,r);function e(n,s){var i;return n===void 0&&(n={}),i=r.call(this,n)||this,i.labels={},i.smoothChildTiming=!!n.smoothChildTiming,i.autoRemoveChildren=!!n.autoRemoveChildren,i._sort=Tn(n.sortChildren),ut&&Ar(n.parent||ut,Jr(i),s),n.reversed&&i.reverse(),n.paused&&i.paused(!0),n.scrollTrigger&&n_(Jr(i),n.scrollTrigger),i}var t=e.prototype;return t.to=function(s,i,o){return Wa(0,arguments,this),this},t.from=function(s,i,o){return Wa(1,arguments,this),this},t.fromTo=function(s,i,o,a){return Wa(2,arguments,this),this},t.set=function(s,i,o){return i.duration=0,i.parent=this,Va(i).repeatDelay||(i.repeat=0),i.immediateRender=!!i.immediateRender,new wt(s,i,Gn(this,o),1),this},t.call=function(s,i,o){return Ar(this,wt.delayedCall(0,s,i),o)},t.staggerTo=function(s,i,o,a,l,c,u){return o.duration=i,o.stagger=o.stagger||a,o.onComplete=c,o.onCompleteParams=u,o.parent=this,new wt(s,o,Gn(this,l)),this},t.staggerFrom=function(s,i,o,a,l,c,u){return o.runBackwards=1,Va(o).immediateRender=Tn(o.immediateRender),this.staggerTo(s,i,o,a,l,c,u)},t.staggerFromTo=function(s,i,o,a,l,c,u,h){return a.startAt=o,Va(a).immediateRender=Tn(a.immediateRender),this.staggerTo(s,i,a,l,c,u,h)},t.render=function(s,i,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,u=s<=0?0:St(s),h=this._zTime<0!=s<0&&(this._initted||!c),d,f,g,p,m,v,_,x,y,C,E,b;if(this!==ut&&u>l&&s>=0&&(u=l),u!==this._tTime||o||h){if(a!==this._time&&c&&(u+=this._time-a,s+=this._time-a),d=u,y=this._start,x=this._ts,v=!x,h&&(c||(a=this._zTime),(s||!i)&&(this._zTime=s)),this._repeat){if(E=this._yoyo,m=c+this._rDelay,this._repeat<-1&&s<0)return this.totalTime(m*100+s,i,o);if(d=St(u%m),u===l?(p=this._repeat,d=c):(C=St(u/m),p=~~C,p&&p===C&&(d=c,p--),d>c&&(d=c)),C=Do(this._tTime,m),!a&&this._tTime&&C!==p&&this._tTime-C*m-this._dur<=0&&(C=p),E&&p&1&&(d=c-d,b=1),p!==C&&!this._lock){var w=E&&C&1,S=w===(E&&p&1);if(p<C&&(w=!w),a=w?0:u%c?c:u,this._lock=1,this.render(a||(b?0:St(p*m)),i,!c)._lock=0,this._tTime=u,!i&&this.parent&&Bn(this,"onRepeat"),this.vars.repeatRefresh&&!b&&(this.invalidate()._lock=1),a&&a!==this._time||v!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,S&&(this._lock=2,a=w?c:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!b&&this.invalidate()),this._lock=0,!this._ts&&!v)return this;v_(this,b)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(_=OE(this,St(a),St(d)),_&&(u-=d-(d=_._start))),this._tTime=u,this._time=d,this._act=!x,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=s,a=0),!a&&d&&!i&&!p&&(Bn(this,"onStart"),this._tTime!==u))return this;if(d>=a&&s>=0)for(f=this._first;f;){if(g=f._next,(f._act||d>=f._start)&&f._ts&&_!==f){if(f.parent!==this)return this.render(s,i,o);if(f.render(f._ts>0?(d-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(d-f._start)*f._ts,i,o),d!==this._time||!this._ts&&!v){_=0,g&&(u+=this._zTime=-1e-8);break}}f=g}else{f=this._last;for(var $=s<0?s:d;f;){if(g=f._prev,(f._act||$<=f._end)&&f._ts&&_!==f){if(f.parent!==this)return this.render(s,i,o);if(f.render(f._ts>0?($-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+($-f._start)*f._ts,i,o||Wt&&(f._initted||f._startAt)),d!==this._time||!this._ts&&!v){_=0,g&&(u+=this._zTime=$?-1e-8:on);break}}f=g}}if(_&&!i&&(this.pause(),_.render(d>=a?0:-1e-8)._zTime=d>=a?1:-1,this._ts))return this._start=y,Nu(this),this.render(s,i,o);this._onUpdate&&!i&&Bn(this,"onUpdate",!0),(u===l&&this._tTime>=this.totalDuration()||!u&&a)&&(y===this._start||Math.abs(x)!==Math.abs(this._ts))&&(this._lock||((s||!c)&&(u===l&&this._ts>0||!u&&this._ts<0)&&Ws(this,1),!i&&!(s<0&&!a)&&(u||a||!l)&&(Bn(this,u===l&&s>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(s,i){var o=this;if(cs(i)||(i=Gn(this,i,s)),!(s instanceof pl)){if(an(s))return s.forEach(function(a){return o.add(a,i)}),this;if(Ht(s))return this.addLabel(s,i);if(mt(s))s=wt.delayedCall(0,s);else return this}return this!==s?Ar(this,s,i):this},t.getChildren=function(s,i,o,a){s===void 0&&(s=!0),i===void 0&&(i=!0),o===void 0&&(o=!0),a===void 0&&(a=-1e8);for(var l=[],c=this._first;c;)c._start>=a&&(c instanceof wt?i&&l.push(c):(o&&l.push(c),s&&l.push.apply(l,c.getChildren(!0,i,o)))),c=c._next;return l},t.getById=function(s){for(var i=this.getChildren(1,1,1),o=i.length;o--;)if(i[o].vars.id===s)return i[o]},t.remove=function(s){return Ht(s)?this.removeLabel(s):mt(s)?this.killTweensOf(s):(s.parent===this&&$u(this,s),s===this._recent&&(this._recent=this._last),Oi(this))},t.totalTime=function(s,i){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=St(In.time-(this._ts>0?s/this._ts:(this.totalDuration()-s)/-this._ts))),r.prototype.totalTime.call(this,s,i),this._forcing=0,this):this._tTime},t.addLabel=function(s,i){return this.labels[s]=Gn(this,i),this},t.removeLabel=function(s){return delete this.labels[s],this},t.addPause=function(s,i,o){var a=wt.delayedCall(0,i||dl,o);return a.data="isPause",this._hasPause=1,Ar(this,a,Gn(this,s))},t.removePause=function(s){var i=this._first;for(s=Gn(this,s);i;)i._start===s&&i.data==="isPause"&&Ws(i),i=i._next},t.killTweensOf=function(s,i,o){for(var a=this.getTweensOf(s,o),l=a.length;l--;)Fs!==a[l]&&a[l].kill(s,i);return this},t.getTweensOf=function(s,i){for(var o=[],a=Jn(s),l=this._first,c=cs(i),u;l;)l instanceof wt?bE(l._targets,a)&&(c?(!Fs||l._initted&&l._ts)&&l.globalTime(0)<=i&&l.globalTime(l.totalDuration())>i:!i||l.isActive())&&o.push(l):(u=l.getTweensOf(a,i)).length&&o.push.apply(o,u),l=l._next;return o},t.tweenTo=function(s,i){i=i||{};var o=this,a=Gn(o,s),l=i,c=l.startAt,u=l.onStart,h=l.onStartParams,d=l.immediateRender,f,g=wt.to(o,Wn({ease:i.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:i.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale())||on,onStart:function(){if(o.pause(),!f){var m=i.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale());g._dur!==m&&Io(g,m,0,1).render(g._time,!0,!0),f=1}u&&u.apply(g,h||[])}},i));return d?g.render(0):g},t.tweenFromTo=function(s,i,o){return this.tweenTo(i,Wn({startAt:{time:Gn(this,s)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(s){return s===void 0&&(s=this._time),om(this,Gn(this,s))},t.previousLabel=function(s){return s===void 0&&(s=this._time),om(this,Gn(this,s),1)},t.currentLabel=function(s){return arguments.length?this.seek(s,!0):this.previousLabel(this._time+on)},t.shiftChildren=function(s,i,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,c;a;)a._start>=o&&(a._start+=s,a._end+=s),a=a._next;if(i)for(c in l)l[c]>=o&&(l[c]+=s);return Oi(this)},t.invalidate=function(s){var i=this._first;for(this._lock=0;i;)i.invalidate(s),i=i._next;return r.prototype.invalidate.call(this,s)},t.clear=function(s){s===void 0&&(s=!0);for(var i=this._first,o;i;)o=i._next,this.remove(i),i=o;return this._dp&&(this._time=this._tTime=this._pTime=0),s&&(this.labels={}),Oi(this)},t.totalDuration=function(s){var i=0,o=this,a=o._last,l=Br,c,u,h;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-s:s));if(o._dirty){for(h=o.parent;a;)c=a._prev,a._dirty&&a.totalDuration(),u=a._start,u>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,Ar(o,a,u-a._delay,1)._lock=0):l=u,u<0&&a._ts&&(i-=u,(!h&&!o._dp||h&&h.smoothChildTiming)&&(o._start+=u/o._ts,o._time-=u,o._tTime-=u),o.shiftChildren(-u,!1,-1/0),l=0),a._end>i&&a._ts&&(i=a._end),a=c;Io(o,o===ut&&o._time>i?o._time:i,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(s){if(ut._ts&&(Zb(ut,Jc(s,ut)),qb=In.frame),In.frame>=nm){nm+=$n.autoSleep||120;var i=ut._first;if((!i||!i._ts)&&$n.autoSleep&&In._listeners.length<2){for(;i&&!i._ts;)i=i._next;i||In.sleep()}}},e}(pl);Wn(fn.prototype,{_lock:0,_hasPause:0,_forcing:0});var NE=function(e,t,n,s,i,o,a){var l=new En(this._pt,e,t,0,1,T_,null,i),c=0,u=0,h,d,f,g,p,m,v,_;for(l.b=n,l.e=s,n+="",s+="",(v=~s.indexOf("random("))&&(s=fl(s)),o&&(_=[n,s],o(_,e,t),n=_[0],s=_[1]),d=n.match(kh)||[];h=kh.exec(s);)g=h[0],p=s.substring(c,h.index),f?f=(f+1)%5:p.substr(-5)==="rgba("&&(f=1),g!==d[u++]&&(m=parseFloat(d[u-1])||0,l._pt={_next:l._pt,p:p||u===1?p:",",s:m,c:g.charAt(1)==="="?_o(m,g)-m:parseFloat(g)-m,m:f&&f<4?Math.round:0},c=kh.lastIndex);return l.c=c<s.length?s.substring(c,s.length):"",l.fp=a,(Wb.test(s)||v)&&(l.e=0),this._pt=l,l},eg=function(e,t,n,s,i,o,a,l,c,u){mt(s)&&(s=s(i||0,e,o));var h=e[t],d=n!=="get"?n:mt(h)?c?e[t.indexOf("set")||!mt(e["get"+t.substr(3)])?t:"get"+t.substr(3)](c):e[t]():h,f=mt(h)?c?UE:w_:ng,g;if(Ht(s)&&(~s.indexOf("random(")&&(s=fl(s)),s.charAt(1)==="="&&(g=_o(d,s)+(rn(d)||0),(g||g===0)&&(s=g))),!u||d!==s||jd)return!isNaN(d*s)&&s!==""?(g=new En(this._pt,e,t,+d||0,s-(d||0),typeof h=="boolean"?qE:S_,0,f),c&&(g.fp=c),a&&g.modifier(a,this,e),this._pt=g):(!h&&!(t in e)&&Kf(t,s),NE.call(this,e,t,d,s,f,l||$n.stringFilter,c))},VE=function(e,t,n,s,i){if(mt(e)&&(e=Ya(e,i,t,n,s)),!$r(e)||e.style&&e.nodeType||an(e)||Nb(e))return Ht(e)?Ya(e,i,t,n,s):e;var o={},a;for(a in e)o[a]=Ya(e[a],i,t,n,s);return o},__=function(e,t,n,s,i,o){var a,l,c,u;if(Dn[e]&&(a=new Dn[e]).init(i,a.rawVars?t[e]:VE(t[e],s,i,o,n),n,s,o)!==!1&&(n._pt=l=new En(n._pt,i,e,0,1,a.render,a,0,a.priority),n!==io))for(c=n._ptLookup[n._targets.indexOf(i)],u=a._props.length;u--;)c[a._props[u]]=l;return a},Fs,jd,tg=function r(e,t,n){var s=e.vars,i=s.ease,o=s.startAt,a=s.immediateRender,l=s.lazy,c=s.onUpdate,u=s.runBackwards,h=s.yoyoEase,d=s.keyframes,f=s.autoRevert,g=e._dur,p=e._startAt,m=e._targets,v=e.parent,_=v&&v.data==="nested"?v.vars.targets:m,x=e._overwrite==="auto"&&!Xf,y=e.timeline,C,E,b,w,S,$,N,H,U,ee,re,te,z;if(y&&(!d||!i)&&(i="none"),e._ease=Ei(i,ko.ease),e._yEase=h?m_(Ei(h===!0?i:h,ko.ease)):0,h&&e._yoyo&&!e._repeat&&(h=e._yEase,e._yEase=e._ease,e._ease=h),e._from=!y&&!!s.runBackwards,!y||d&&!s.stagger){if(H=m[0]?Ti(m[0]).harness:0,te=H&&s[H.prop],C=Zc(s,Zf),p&&(p._zTime<0&&p.progress(1),t<0&&u&&a&&!f?p.render(-1,!0):p.revert(u&&g?mc:vE),p._lazy=0),o){if(Ws(e._startAt=wt.set(m,Wn({data:"isStart",overwrite:!1,parent:v,immediateRender:!0,lazy:!p&&Tn(l),startAt:null,delay:0,onUpdate:c&&function(){return Bn(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Wt||!a&&!f)&&e._startAt.revert(mc),a&&g&&t<=0&&n<=0){t&&(e._zTime=t);return}}else if(u&&g&&!p){if(t&&(a=!1),b=Wn({overwrite:!1,data:"isFromStart",lazy:a&&!p&&Tn(l),immediateRender:a,stagger:0,parent:v},C),te&&(b[H.prop]=te),Ws(e._startAt=wt.set(m,b)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Wt?e._startAt.revert(mc):e._startAt.render(-1,!0)),e._zTime=t,!a)r(e._startAt,on,on);else if(!t)return}for(e._pt=e._ptCache=0,l=g&&Tn(l)||l&&!g,E=0;E<m.length;E++){if(S=m[E],N=S._gsap||Qf(m)[E]._gsap,e._ptLookup[E]=ee={},kd[N.id]&&Bs.length&&Kc(),re=_===m?E:_.indexOf(S),H&&(U=new H).init(S,te||C,e,re,_)!==!1&&(e._pt=w=new En(e._pt,S,U.name,0,1,U.render,U,0,U.priority),U._props.forEach(function(R){ee[R]=w}),U.priority&&($=1)),!H||te)for(b in C)Dn[b]&&(U=__(b,C,e,re,S,_))?U.priority&&($=1):ee[b]=w=eg.call(e,S,b,"get",C[b],re,_,0,s.stringFilter);e._op&&e._op[E]&&e.kill(S,e._op[E]),x&&e._pt&&(Fs=e,ut.killTweensOf(S,ee,e.globalTime(t)),z=!e.parent,Fs=0),e._pt&&l&&(kd[N.id]=1)}$&&O_(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!z,d&&t<=0&&y.render(Br,!0,!0)},WE=function(e,t,n,s,i,o,a,l){var c=(e._pt&&e._ptCache||(e._ptCache={}))[t],u,h,d,f;if(!c)for(c=e._ptCache[t]=[],d=e._ptLookup,f=e._targets.length;f--;){if(u=d[f][t],u&&u.d&&u.d._pt)for(u=u.d._pt;u&&u.p!==t&&u.fp!==t;)u=u._next;if(!u)return jd=1,e.vars[t]="+=0",tg(e,a),jd=0,l?hl(t+" not eligible for reset"):1;c.push(u)}for(f=c.length;f--;)h=c[f],u=h._pt||h,u.s=(s||s===0)&&!i?s:u.s+(s||0)+o*u.c,u.c=n-u.s,h.e&&(h.e=bt(n)+rn(h.e)),h.b&&(h.b=u.s+rn(h.b))},YE=function(e,t){var n=e[0]?Ti(e[0]).harness:0,s=n&&n.aliases,i,o,a,l;if(!s)return t;i=Ro({},t);for(o in s)if(o in i)for(l=s[o].split(","),a=l.length;a--;)i[l[a]]=i[o];return i},XE=function(e,t,n,s){var i=t.ease||s||"power1.inOut",o,a;if(an(t))a=n[e]||(n[e]=[]),t.forEach(function(l,c){return a.push({t:c/(t.length-1)*100,v:l,e:i})});else for(o in t)a=n[o]||(n[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:t[o],e:i})},Ya=function(e,t,n,s,i){return mt(e)?e.call(t,n,s,i):Ht(e)&&~e.indexOf("random(")?fl(e):e},x_=Jf+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",C_={};On(x_+",id,stagger,delay,duration,paused,scrollTrigger",function(r){return C_[r]=1});var wt=function(r){Hb(e,r);function e(n,s,i,o){var a;typeof s=="number"&&(i.duration=s,s=i,i=null),a=r.call(this,o?s:Va(s))||this;var l=a.vars,c=l.duration,u=l.delay,h=l.immediateRender,d=l.stagger,f=l.overwrite,g=l.keyframes,p=l.defaults,m=l.scrollTrigger,v=l.yoyoEase,_=s.parent||ut,x=(an(n)||Nb(n)?cs(n[0]):"length"in s)?[n]:Jn(n),y,C,E,b,w,S,$,N;if(a._targets=x.length?Qf(x):hl("GSAP target "+n+" not found. https://gsap.com",!$n.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=f,g||d||Jl(c)||Jl(u)){if(s=a.vars,y=a.timeline=new fn({data:"nested",defaults:p||{},targets:_&&_.data==="nested"?_.vars.targets:x}),y.kill(),y.parent=y._dp=Jr(a),y._start=0,d||Jl(c)||Jl(u)){if(b=x.length,$=d&&o_(d),$r(d))for(w in d)~x_.indexOf(w)&&(N||(N={}),N[w]=d[w]);for(C=0;C<b;C++)E=Zc(s,C_),E.stagger=0,v&&(E.yoyoEase=v),N&&Ro(E,N),S=x[C],E.duration=+Ya(c,Jr(a),C,S,x),E.delay=(+Ya(u,Jr(a),C,S,x)||0)-a._delay,!d&&b===1&&E.delay&&(a._delay=u=E.delay,a._start+=u,E.delay=0),y.to(S,E,$?$(C,S,x):0),y._ease=Le.none;y.duration()?c=u=0:a.timeline=0}else if(g){Va(Wn(y.vars.defaults,{ease:"none"})),y._ease=Ei(g.ease||s.ease||"none");var H=0,U,ee,re;if(an(g))g.forEach(function(te){return y.to(x,te,">")}),y.duration();else{E={};for(w in g)w==="ease"||w==="easeEach"||XE(w,g[w],E,g.easeEach);for(w in E)for(U=E[w].sort(function(te,z){return te.t-z.t}),H=0,C=0;C<U.length;C++)ee=U[C],re={ease:ee.e,duration:(ee.t-(C?U[C-1].t:0))/100*c},re[w]=ee.v,y.to(x,re,H),H+=re.duration;y.duration()<c&&y.to({},{duration:c-y.duration()})}}c||a.duration(c=y.duration())}else a.timeline=0;return f===!0&&!Xf&&(Fs=Jr(a),ut.killTweensOf(x),Fs=0),Ar(_,Jr(a),i),s.reversed&&a.reverse(),s.paused&&a.paused(!0),(h||!c&&!g&&a._start===St(_._time)&&Tn(h)&&wE(Jr(a))&&_.data!=="nested")&&(a._tTime=-1e-8,a.render(Math.max(0,-u)||0)),m&&n_(Jr(a),m),a}var t=e.prototype;return t.render=function(s,i,o){var a=this._time,l=this._tDur,c=this._dur,u=s<0,h=s>l-on&&!u?l:s<on?0:s,d,f,g,p,m,v,_,x,y;if(!c)TE(this,s,i,o);else if(h!==this._tTime||!s||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u||this._lazy){if(d=h,x=this.timeline,this._repeat){if(p=c+this._rDelay,this._repeat<-1&&u)return this.totalTime(p*100+s,i,o);if(d=St(h%p),h===l?(g=this._repeat,d=c):(m=St(h/p),g=~~m,g&&g===m?(d=c,g--):d>c&&(d=c)),v=this._yoyo&&g&1,v&&(y=this._yEase,d=c-d),m=Do(this._tTime,p),d===a&&!o&&this._initted&&g===m)return this._tTime=h,this;g!==m&&(x&&this._yEase&&v_(x,v),this.vars.repeatRefresh&&!v&&!this._lock&&d!==p&&this._initted&&(this._lock=o=1,this.render(St(p*g),!0).invalidate()._lock=0))}if(!this._initted){if(r_(this,u?s:d,o,i,h))return this._tTime=0,this;if(a!==this._time&&!(o&&this.vars.repeatRefresh&&g!==m))return this;if(c!==this._dur)return this.render(s,i,o)}if(this._tTime=h,this._time=d,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=_=(y||this._ease)(d/c),this._from&&(this.ratio=_=1-_),d&&!a&&!i&&!g&&(Bn(this,"onStart"),this._tTime!==h))return this;for(f=this._pt;f;)f.r(_,f.d),f=f._next;x&&x.render(s<0?s:x._dur*x._ease(d/this._dur),i,o)||this._startAt&&(this._zTime=s),this._onUpdate&&!i&&(u&&Rd(this,s,i,o),Bn(this,"onUpdate")),this._repeat&&g!==m&&this.vars.onRepeat&&!i&&this.parent&&Bn(this,"onRepeat"),(h===this._tDur||!h)&&this._tTime===h&&(u&&!this._onUpdate&&Rd(this,s,!0,!0),(s||!c)&&(h===this._tDur&&this._ts>0||!h&&this._ts<0)&&Ws(this,1),!i&&!(u&&!a)&&(h||a||v)&&(Bn(this,h===l?"onComplete":"onReverseComplete",!0),this._prom&&!(h<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(s){return(!s||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(s),r.prototype.invalidate.call(this,s)},t.resetTo=function(s,i,o,a,l){gl||In.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),u;return this._initted||tg(this,c),u=this._ease(c/this._dur),WE(this,s,i,o,a,u,c,l)?this.resetTo(s,i,o,a,1):(Vu(this,0),this.parent||e_(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(s,i){if(i===void 0&&(i="all"),!s&&(!i||i==="all"))return this._lazy=this._pt=0,this.parent?Oa(this):this.scrollTrigger&&this.scrollTrigger.kill(!!Wt),this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(s,i,Fs&&Fs.vars.overwrite!==!0)._first||Oa(this),this.parent&&o!==this.timeline.totalDuration()&&Io(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=s?Jn(s):a,c=this._ptLookup,u=this._pt,h,d,f,g,p,m,v;if((!i||i==="all")&&xE(a,l))return i==="all"&&(this._pt=0),Oa(this);for(h=this._op=this._op||[],i!=="all"&&(Ht(i)&&(p={},On(i,function(_){return p[_]=1}),i=p),i=YE(a,i)),v=a.length;v--;)if(~l.indexOf(a[v])){d=c[v],i==="all"?(h[v]=i,g=d,f={}):(f=h[v]=h[v]||{},g=i);for(p in g)m=d&&d[p],m&&((!("kill"in m.d)||m.d.kill(p)===!0)&&$u(this,m,"_pt"),delete d[p]),f!=="all"&&(f[p]=1)}return this._initted&&!this._pt&&u&&Oa(this),this},e.to=function(s,i){return new e(s,i,arguments[2])},e.from=function(s,i){return Wa(1,arguments)},e.delayedCall=function(s,i,o,a){return new e(i,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:s,onComplete:i,onReverseComplete:i,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(s,i,o){return Wa(2,arguments)},e.set=function(s,i){return i.duration=0,i.repeatDelay||(i.repeat=0),new e(s,i)},e.killTweensOf=function(s,i,o){return ut.killTweensOf(s,i,o)},e}(pl);Wn(wt.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});On("staggerTo,staggerFrom,staggerFromTo",function(r){wt[r]=function(){var e=new fn,t=Id.call(arguments,0);return t.splice(r==="staggerFromTo"?5:4,0,0),e[r].apply(e,t)}});var ng=function(e,t,n){return e[t]=n},w_=function(e,t,n){return e[t](n)},UE=function(e,t,n,s){return e[t](s.fp,n)},GE=function(e,t,n){return e.setAttribute(t,n)},rg=function(e,t){return mt(e[t])?w_:Uf(e[t])&&e.setAttribute?GE:ng},S_=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},qE=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},T_=function(e,t){var n=t._pt,s="";if(!e&&t.b)s=t.b;else if(e===1&&t.e)s=t.e;else{for(;n;)s=n.p+(n.m?n.m(n.s+n.c*e):Math.round((n.s+n.c*e)*1e4)/1e4)+s,n=n._next;s+=t.c}t.set(t.t,t.p,s,t)},sg=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},KE=function(e,t,n,s){for(var i=this._pt,o;i;)o=i._next,i.p===s&&i.modifier(e,t,n),i=o},ZE=function(e){for(var t=this._pt,n,s;t;)s=t._next,t.p===e&&!t.op||t.op===e?$u(this,t,"_pt"):t.dep||(n=1),t=s;return!n},JE=function(e,t,n,s){s.mSet(e,t,s.m.call(s.tween,n,s.mt),s)},O_=function(e){for(var t=e._pt,n,s,i,o;t;){for(n=t._next,s=i;s&&s.pr>t.pr;)s=s._next;(t._prev=s?s._prev:o)?t._prev._next=t:i=t,(t._next=s)?s._prev=t:o=t,t=n}e._pt=i},En=function(){function r(t,n,s,i,o,a,l,c,u){this.t=n,this.s=i,this.c=o,this.p=s,this.r=a||S_,this.d=l||this,this.set=c||ng,this.pr=u||0,this._next=t,t&&(t._prev=this)}var e=r.prototype;return e.modifier=function(n,s,i){this.mSet=this.mSet||this.set,this.set=JE,this.m=n,this.mt=i,this.tween=s},r}();On(Jf+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(r){return Zf[r]=1});Vn.TweenMax=Vn.TweenLite=wt;Vn.TimelineLite=Vn.TimelineMax=fn;ut=new fn({sortChildren:!1,defaults:ko,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});$n.stringFilter=p_;var Mi=[],yc={},QE=[],lm=0,eM=0,Bh=function(e){return(yc[e]||QE).map(function(t){return t()})},zd=function(){var e=Date.now(),t=[];e-lm>2&&(Bh("matchMediaInit"),Mi.forEach(function(n){var s=n.queries,i=n.conditions,o,a,l,c;for(a in s)o=Tr.matchMedia(s[a]).matches,o&&(l=1),o!==i[a]&&(i[a]=o,c=1);c&&(n.revert(),l&&t.push(n))}),Bh("matchMediaRevert"),t.forEach(function(n){return n.onMatch(n,function(s){return n.add(null,s)})}),lm=e,Bh("matchMedia"))},E_=function(){function r(t,n){this.selector=n&&Ld(n),this.data=[],this._r=[],this.isReverted=!1,this.id=eM++,t&&this.add(t)}var e=r.prototype;return e.add=function(n,s,i){mt(n)&&(i=s,s=n,n=mt);var o=this,a=function(){var c=it,u=o.selector,h;return c&&c!==o&&c.data.push(o),i&&(o.selector=Ld(i)),it=o,h=s.apply(o,arguments),mt(h)&&o._r.push(h),it=c,o.selector=u,o.isReverted=!1,h};return o.last=a,n===mt?a(o,function(l){return o.add(null,l)}):n?o[n]=a:a},e.ignore=function(n){var s=it;it=null,n(this),it=s},e.getTweens=function(){var n=[];return this.data.forEach(function(s){return s instanceof r?n.push.apply(n,s.getTweens()):s instanceof wt&&!(s.parent&&s.parent.data==="nested")&&n.push(s)}),n},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(n,s){var i=this;if(n?function(){for(var a=i.getTweens(),l=i.data.length,c;l--;)c=i.data[l],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(u){return a.splice(a.indexOf(u),1)}));for(a.map(function(u){return{g:u._dur||u._delay||u._sat&&!u._sat.vars.immediateRender?u.globalTime(0):-1/0,t:u}}).sort(function(u,h){return h.g-u.g||-1/0}).forEach(function(u){return u.t.revert(n)}),l=i.data.length;l--;)c=i.data[l],c instanceof fn?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof wt)&&c.revert&&c.revert(n);i._r.forEach(function(u){return u(n,i)}),i.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),s)for(var o=Mi.length;o--;)Mi[o].id===this.id&&Mi.splice(o,1)},e.revert=function(n){this.kill(n||{})},r}(),tM=function(){function r(t){this.contexts=[],this.scope=t,it&&it.data.push(this)}var e=r.prototype;return e.add=function(n,s,i){$r(n)||(n={matches:n});var o=new E_(0,i||this.scope),a=o.conditions={},l,c,u;it&&!o.selector&&(o.selector=it.selector),this.contexts.push(o),s=o.add("onMatch",s),o.queries=n;for(c in n)c==="all"?u=1:(l=Tr.matchMedia(n[c]),l&&(Mi.indexOf(o)<0&&Mi.push(o),(a[c]=l.matches)&&(u=1),l.addListener?l.addListener(zd):l.addEventListener("change",zd)));return u&&s(o,function(h){return o.add(null,h)}),this},e.revert=function(n){this.kill(n||{})},e.kill=function(n){this.contexts.forEach(function(s){return s.kill(n,!0)})},r}(),Qc={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(s){return d_(s)})},timeline:function(e){return new fn(e)},getTweensOf:function(e,t){return ut.getTweensOf(e,t)},getProperty:function(e,t,n,s){Ht(e)&&(e=Jn(e)[0]);var i=Ti(e||{}).get,o=n?Qb:Jb;return n==="native"&&(n=""),e&&(t?o((Dn[t]&&Dn[t].get||i)(e,t,n,s)):function(a,l,c){return o((Dn[a]&&Dn[a].get||i)(e,a,l,c))})},quickSetter:function(e,t,n){if(e=Jn(e),e.length>1){var s=e.map(function(u){return Pn.quickSetter(u,t,n)}),i=s.length;return function(u){for(var h=i;h--;)s[h](u)}}e=e[0]||{};var o=Dn[t],a=Ti(e),l=a.harness&&(a.harness.aliases||{})[t]||t,c=o?function(u){var h=new o;io._pt=0,h.init(e,n?u+n:u,io,0,[e]),h.render(1,h),io._pt&&sg(1,io)}:a.set(e,l);return o?c:function(u){return c(e,l,n?u+n:u,a,1)}},quickTo:function(e,t,n){var s,i=Pn.to(e,Wn((s={},s[t]="+=0.1",s.paused=!0,s.stagger=0,s),n||{})),o=function(l,c,u){return i.resetTo(t,l,c,u)};return o.tween=i,o},isTweening:function(e){return ut.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Ei(e.ease,ko.ease)),rm(ko,e||{})},config:function(e){return rm($n,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,s=e.plugins,i=e.defaults,o=e.extendTimeline;(s||"").split(",").forEach(function(a){return a&&!Dn[a]&&!Vn[a]&&hl(t+" effect requires "+a+" plugin.")}),Rh[t]=function(a,l,c){return n(Jn(a),Wn(l||{},i),c)},o&&(fn.prototype[t]=function(a,l,c){return this.add(Rh[t](a,$r(l)?l:(c=l)&&{},this),c)})},registerEase:function(e,t){Le[e]=Ei(t)},parseEase:function(e,t){return arguments.length?Ei(e,t):Le},getById:function(e){return ut.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var n=new fn(e),s,i;for(n.smoothChildTiming=Tn(e.smoothChildTiming),ut.remove(n),n._dp=0,n._time=n._tTime=ut._time,s=ut._first;s;)i=s._next,(t||!(!s._dur&&s instanceof wt&&s.vars.onComplete===s._targets[0]))&&Ar(n,s,s._start-s._delay),s=i;return Ar(ut,n,0),n},context:function(e,t){return e?new E_(e,t):it},matchMedia:function(e){return new tM(e)},matchMediaRefresh:function(){return Mi.forEach(function(e){var t=e.conditions,n,s;for(s in t)t[s]&&(t[s]=!1,n=1);n&&e.revert()})||zd()},addEventListener:function(e,t){var n=yc[e]||(yc[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=yc[e],s=n&&n.indexOf(t);s>=0&&n.splice(s,1)},utils:{wrap:RE,wrapYoyo:DE,distribute:o_,random:l_,snap:a_,normalize:kE,getUnit:rn,clamp:ME,splitColor:f_,toArray:Jn,selector:Ld,mapRange:u_,pipe:AE,unitize:FE,interpolate:IE,shuffle:i_},install:Ub,effects:Rh,ticker:In,updateRoot:fn.updateRoot,plugins:Dn,globalTimeline:ut,core:{PropTween:En,globals:Gb,Tween:wt,Timeline:fn,Animation:pl,getCache:Ti,_removeLinkedListItem:$u,reverting:function(){return Wt},context:function(e){return e&&it&&(it.data.push(e),e._ctx=it),it},suppressOverwrites:function(e){return Xf=e}}};On("to,from,fromTo,delayedCall,set,killTweensOf",function(r){return Qc[r]=wt[r]});In.add(fn.updateRoot);io=Qc.to({},{duration:0});var nM=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},rM=function(e,t){var n=e._targets,s,i,o;for(s in t)for(i=n.length;i--;)o=e._ptLookup[i][s],o&&(o=o.d)&&(o._pt&&(o=nM(o,s)),o&&o.modifier&&o.modifier(t[s],e,n[i],s))},jh=function(e,t){return{name:e,rawVars:1,init:function(s,i,o){o._onInit=function(a){var l,c;if(Ht(i)&&(l={},On(i,function(u){return l[u]=1}),i=l),t){l={};for(c in i)l[c]=t(i[c]);i=l}rM(a,i)}}}},Pn=Qc.registerPlugin({name:"attr",init:function(e,t,n,s,i){var o,a,l;this.tween=n;for(o in t)l=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(l||0)+"",t[o],s,i,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(e,t){for(var n=t._pt;n;)Wt?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},jh("roundProps",Bd),jh("modifiers"),jh("snap",a_))||Qc;wt.version=fn.version=Pn.version="3.12.7";Xb=1;Gf()&&Lo();Le.Power0;Le.Power1;Le.Power2;Le.Power3;Le.Power4;Le.Linear;Le.Quad;Le.Cubic;Le.Quart;Le.Quint;Le.Strong;Le.Elastic;Le.Back;Le.SteppedEase;Le.Bounce;Le.Sine;Le.Expo;Le.Circ;/*!
 * CSSPlugin 3.12.7
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var cm,ks,xo,ig,yi,um,og,sM=function(){return typeof window<"u"},us={},ai=180/Math.PI,Co=Math.PI/180,Qi=Math.atan2,hm=1e8,ag=/([A-Z])/g,iM=/(left|right|width|margin|padding|x)/i,oM=/[\s,\(]\S/,Dr={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Hd=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},aM=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},lM=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},cM=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},M_=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},P_=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},uM=function(e,t,n){return e.style[t]=n},hM=function(e,t,n){return e.style.setProperty(t,n)},dM=function(e,t,n){return e._gsap[t]=n},fM=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},gM=function(e,t,n,s,i){var o=e._gsap;o.scaleX=o.scaleY=n,o.renderTransform(i,o)},pM=function(e,t,n,s,i){var o=e._gsap;o[t]=n,o.renderTransform(i,o)},ht="transform",Mn=ht+"Origin",mM=function r(e,t){var n=this,s=this.target,i=s.style,o=s._gsap;if(e in us&&i){if(this.tfm=this.tfm||{},e!=="transform")e=Dr[e]||e,~e.indexOf(",")?e.split(",").forEach(function(a){return n.tfm[a]=es(s,a)}):this.tfm[e]=o.x?o[e]:es(s,e),e===Mn&&(this.tfm.zOrigin=o.zOrigin);else return Dr.transform.split(",").forEach(function(a){return r.call(n,a,t)});if(this.props.indexOf(ht)>=0)return;o.svg&&(this.svgo=s.getAttribute("data-svg-origin"),this.props.push(Mn,t,"")),e=ht}(i||t)&&this.props.push(e,t,i[e])},A_=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},vM=function(){var e=this.props,t=this.target,n=t.style,s=t._gsap,i,o;for(i=0;i<e.length;i+=3)e[i+1]?e[i+1]===2?t[e[i]](e[i+2]):t[e[i]]=e[i+2]:e[i+2]?n[e[i]]=e[i+2]:n.removeProperty(e[i].substr(0,2)==="--"?e[i]:e[i].replace(ag,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)s[o]=this.tfm[o];s.svg&&(s.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),i=og(),(!i||!i.isStart)&&!n[ht]&&(A_(n),s.zOrigin&&n[Mn]&&(n[Mn]+=" "+s.zOrigin+"px",s.zOrigin=0,s.renderTransform()),s.uncache=1)}},F_=function(e,t){var n={target:e,props:[],revert:vM,save:mM};return e._gsap||Pn.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(s){return n.save(s)}),n},k_,$d=function(e,t){var n=ks.createElementNS?ks.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):ks.createElement(e);return n&&n.style?n:ks.createElement(e)},jr=function r(e,t,n){var s=getComputedStyle(e);return s[t]||s.getPropertyValue(t.replace(ag,"-$1").toLowerCase())||s.getPropertyValue(t)||!n&&r(e,Bo(t)||t,1)||""},dm="O,Moz,ms,Ms,Webkit".split(","),Bo=function(e,t,n){var s=t||yi,i=s.style,o=5;if(e in i&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(dm[o]+e in i););return o<0?null:(o===3?"ms":o>=0?dm[o]:"")+e},Nd=function(){sM()&&window.document&&(cm=window,ks=cm.document,xo=ks.documentElement,yi=$d("div")||{style:{}},$d("div"),ht=Bo(ht),Mn=ht+"Origin",yi.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",k_=!!Bo("perspective"),og=Pn.core.reverting,ig=1)},fm=function(e){var t=e.ownerSVGElement,n=$d("svg",t&&t.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),s=e.cloneNode(!0),i;s.style.display="block",n.appendChild(s),xo.appendChild(n);try{i=s.getBBox()}catch{}return n.removeChild(s),xo.removeChild(n),i},gm=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},R_=function(e){var t,n;try{t=e.getBBox()}catch{t=fm(e),n=1}return t&&(t.width||t.height)||n||(t=fm(e)),t&&!t.width&&!t.x&&!t.y?{x:+gm(e,["x","cx","x1"])||0,y:+gm(e,["y","cy","y1"])||0,width:0,height:0}:t},D_=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&R_(e))},zi=function(e,t){if(t){var n=e.style,s;t in us&&t!==Mn&&(t=ht),n.removeProperty?(s=t.substr(0,2),(s==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),n.removeProperty(s==="--"?t:t.replace(ag,"-$1").toLowerCase())):n.removeAttribute(t)}},Rs=function(e,t,n,s,i,o){var a=new En(e._pt,t,n,0,1,o?P_:M_);return e._pt=a,a.b=s,a.e=i,e._props.push(n),a},pm={deg:1,rad:1,turn:1},yM={grid:1,flex:1},Ys=function r(e,t,n,s){var i=parseFloat(n)||0,o=(n+"").trim().substr((i+"").length)||"px",a=yi.style,l=iM.test(t),c=e.tagName.toLowerCase()==="svg",u=(c?"client":"offset")+(l?"Width":"Height"),h=100,d=s==="px",f=s==="%",g,p,m,v;if(s===o||!i||pm[s]||pm[o])return i;if(o!=="px"&&!d&&(i=r(e,t,n,"px")),v=e.getCTM&&D_(e),(f||o==="%")&&(us[t]||~t.indexOf("adius")))return g=v?e.getBBox()[l?"width":"height"]:e[u],bt(f?i/g*h:i/100*g);if(a[l?"width":"height"]=h+(d?o:s),p=s!=="rem"&&~t.indexOf("adius")||s==="em"&&e.appendChild&&!c?e:e.parentNode,v&&(p=(e.ownerSVGElement||{}).parentNode),(!p||p===ks||!p.appendChild)&&(p=ks.body),m=p._gsap,m&&f&&m.width&&l&&m.time===In.time&&!m.uncache)return bt(i/m.width*h);if(f&&(t==="height"||t==="width")){var _=e.style[t];e.style[t]=h+s,g=e[u],_?e.style[t]=_:zi(e,t)}else(f||o==="%")&&!yM[jr(p,"display")]&&(a.position=jr(e,"position")),p===e&&(a.position="static"),p.appendChild(yi),g=yi[u],p.removeChild(yi),a.position="absolute";return l&&f&&(m=Ti(p),m.time=In.time,m.width=p[u]),bt(d?g*i/h:g&&i?h/g*i:0)},es=function(e,t,n,s){var i;return ig||Nd(),t in Dr&&t!=="transform"&&(t=Dr[t],~t.indexOf(",")&&(t=t.split(",")[0])),us[t]&&t!=="transform"?(i=vl(e,s),i=t!=="transformOrigin"?i[t]:i.svg?i.origin:tu(jr(e,Mn))+" "+i.zOrigin+"px"):(i=e.style[t],(!i||i==="auto"||s||~(i+"").indexOf("calc("))&&(i=eu[t]&&eu[t](e,t,n)||jr(e,t)||Kb(e,t)||(t==="opacity"?1:0))),n&&!~(i+"").trim().indexOf(" ")?Ys(e,t,i,n)+n:i},bM=function(e,t,n,s){if(!n||n==="none"){var i=Bo(t,e,1),o=i&&jr(e,i,1);o&&o!==n?(t=i,n=o):t==="borderColor"&&(n=jr(e,"borderTopColor"))}var a=new En(this._pt,e.style,t,0,1,T_),l=0,c=0,u,h,d,f,g,p,m,v,_,x,y,C;if(a.b=n,a.e=s,n+="",s+="",s==="auto"&&(p=e.style[t],e.style[t]=s,s=jr(e,t)||s,p?e.style[t]=p:zi(e,t)),u=[n,s],p_(u),n=u[0],s=u[1],d=n.match(so)||[],C=s.match(so)||[],C.length){for(;h=so.exec(s);)m=h[0],_=s.substring(l,h.index),g?g=(g+1)%5:(_.substr(-5)==="rgba("||_.substr(-5)==="hsla(")&&(g=1),m!==(p=d[c++]||"")&&(f=parseFloat(p)||0,y=p.substr((f+"").length),m.charAt(1)==="="&&(m=_o(f,m)+y),v=parseFloat(m),x=m.substr((v+"").length),l=so.lastIndex-x.length,x||(x=x||$n.units[t]||y,l===s.length&&(s+=x,a.e+=x)),y!==x&&(f=Ys(e,t,p,x)||0),a._pt={_next:a._pt,p:_||c===1?_:",",s:f,c:v-f,m:g&&g<4||t==="zIndex"?Math.round:0});a.c=l<s.length?s.substring(l,s.length):""}else a.r=t==="display"&&s==="none"?P_:M_;return Wb.test(s)&&(a.e=0),this._pt=a,a},mm={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},_M=function(e){var t=e.split(" "),n=t[0],s=t[1]||"50%";return(n==="top"||n==="bottom"||s==="left"||s==="right")&&(e=n,n=s,s=e),t[0]=mm[n]||n,t[1]=mm[s]||s,t.join(" ")},xM=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n=t.t,s=n.style,i=t.u,o=n._gsap,a,l,c;if(i==="all"||i===!0)s.cssText="",l=1;else for(i=i.split(","),c=i.length;--c>-1;)a=i[c],us[a]&&(l=1,a=a==="transformOrigin"?Mn:ht),zi(n,a);l&&(zi(n,ht),o&&(o.svg&&n.removeAttribute("transform"),s.scale=s.rotate=s.translate="none",vl(n,1),o.uncache=1,A_(s)))}},eu={clearProps:function(e,t,n,s,i){if(i.data!=="isFromStart"){var o=e._pt=new En(e._pt,t,n,0,0,xM);return o.u=s,o.pr=-10,o.tween=i,e._props.push(n),1}}},ml=[1,0,0,1,0,0],I_={},L_=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},vm=function(e){var t=jr(e,ht);return L_(t)?ml:t.substr(7).match(Vb).map(bt)},lg=function(e,t){var n=e._gsap||Ti(e),s=e.style,i=vm(e),o,a,l,c;return n.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,i=[l.a,l.b,l.c,l.d,l.e,l.f],i.join(",")==="1,0,0,1,0,0"?ml:i):(i===ml&&!e.offsetParent&&e!==xo&&!n.svg&&(l=s.display,s.display="block",o=e.parentNode,(!o||!e.offsetParent&&!e.getBoundingClientRect().width)&&(c=1,a=e.nextElementSibling,xo.appendChild(e)),i=vm(e),l?s.display=l:zi(e,"display"),c&&(a?o.insertBefore(e,a):o?o.appendChild(e):xo.removeChild(e))),t&&i.length>6?[i[0],i[1],i[4],i[5],i[12],i[13]]:i)},Vd=function(e,t,n,s,i,o){var a=e._gsap,l=i||lg(e,!0),c=a.xOrigin||0,u=a.yOrigin||0,h=a.xOffset||0,d=a.yOffset||0,f=l[0],g=l[1],p=l[2],m=l[3],v=l[4],_=l[5],x=t.split(" "),y=parseFloat(x[0])||0,C=parseFloat(x[1])||0,E,b,w,S;n?l!==ml&&(b=f*m-g*p)&&(w=y*(m/b)+C*(-p/b)+(p*_-m*v)/b,S=y*(-g/b)+C*(f/b)-(f*_-g*v)/b,y=w,C=S):(E=R_(e),y=E.x+(~x[0].indexOf("%")?y/100*E.width:y),C=E.y+(~(x[1]||x[0]).indexOf("%")?C/100*E.height:C)),s||s!==!1&&a.smooth?(v=y-c,_=C-u,a.xOffset=h+(v*f+_*p)-v,a.yOffset=d+(v*g+_*m)-_):a.xOffset=a.yOffset=0,a.xOrigin=y,a.yOrigin=C,a.smooth=!!s,a.origin=t,a.originIsAbsolute=!!n,e.style[Mn]="0px 0px",o&&(Rs(o,a,"xOrigin",c,y),Rs(o,a,"yOrigin",u,C),Rs(o,a,"xOffset",h,a.xOffset),Rs(o,a,"yOffset",d,a.yOffset)),e.setAttribute("data-svg-origin",y+" "+C)},vl=function(e,t){var n=e._gsap||new b_(e);if("x"in n&&!t&&!n.uncache)return n;var s=e.style,i=n.scaleX<0,o="px",a="deg",l=getComputedStyle(e),c=jr(e,Mn)||"0",u,h,d,f,g,p,m,v,_,x,y,C,E,b,w,S,$,N,H,U,ee,re,te,z,R,ue,de,Ce,fe,$e,Te,De;return u=h=d=p=m=v=_=x=y=0,f=g=1,n.svg=!!(e.getCTM&&D_(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(s[ht]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[ht]!=="none"?l[ht]:"")),s.scale=s.rotate=s.translate="none"),b=lg(e,n.svg),n.svg&&(n.uncache?(R=e.getBBox(),c=n.xOrigin-R.x+"px "+(n.yOrigin-R.y)+"px",z=""):z=!t&&e.getAttribute("data-svg-origin"),Vd(e,z||c,!!z||n.originIsAbsolute,n.smooth!==!1,b)),C=n.xOrigin||0,E=n.yOrigin||0,b!==ml&&(N=b[0],H=b[1],U=b[2],ee=b[3],u=re=b[4],h=te=b[5],b.length===6?(f=Math.sqrt(N*N+H*H),g=Math.sqrt(ee*ee+U*U),p=N||H?Qi(H,N)*ai:0,_=U||ee?Qi(U,ee)*ai+p:0,_&&(g*=Math.abs(Math.cos(_*Co))),n.svg&&(u-=C-(C*N+E*U),h-=E-(C*H+E*ee))):(De=b[6],$e=b[7],de=b[8],Ce=b[9],fe=b[10],Te=b[11],u=b[12],h=b[13],d=b[14],w=Qi(De,fe),m=w*ai,w&&(S=Math.cos(-w),$=Math.sin(-w),z=re*S+de*$,R=te*S+Ce*$,ue=De*S+fe*$,de=re*-$+de*S,Ce=te*-$+Ce*S,fe=De*-$+fe*S,Te=$e*-$+Te*S,re=z,te=R,De=ue),w=Qi(-U,fe),v=w*ai,w&&(S=Math.cos(-w),$=Math.sin(-w),z=N*S-de*$,R=H*S-Ce*$,ue=U*S-fe*$,Te=ee*$+Te*S,N=z,H=R,U=ue),w=Qi(H,N),p=w*ai,w&&(S=Math.cos(w),$=Math.sin(w),z=N*S+H*$,R=re*S+te*$,H=H*S-N*$,te=te*S-re*$,N=z,re=R),m&&Math.abs(m)+Math.abs(p)>359.9&&(m=p=0,v=180-v),f=bt(Math.sqrt(N*N+H*H+U*U)),g=bt(Math.sqrt(te*te+De*De)),w=Qi(re,te),_=Math.abs(w)>2e-4?w*ai:0,y=Te?1/(Te<0?-Te:Te):0),n.svg&&(z=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!L_(jr(e,ht)),z&&e.setAttribute("transform",z))),Math.abs(_)>90&&Math.abs(_)<270&&(i?(f*=-1,_+=p<=0?180:-180,p+=p<=0?180:-180):(g*=-1,_+=_<=0?180:-180)),t=t||n.uncache,n.x=u-((n.xPercent=u&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-u)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+o,n.y=h-((n.yPercent=h&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-h)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+o,n.z=d+o,n.scaleX=bt(f),n.scaleY=bt(g),n.rotation=bt(p)+a,n.rotationX=bt(m)+a,n.rotationY=bt(v)+a,n.skewX=_+a,n.skewY=x+a,n.transformPerspective=y+o,(n.zOrigin=parseFloat(c.split(" ")[2])||!t&&n.zOrigin||0)&&(s[Mn]=tu(c)),n.xOffset=n.yOffset=0,n.force3D=$n.force3D,n.renderTransform=n.svg?wM:k_?B_:CM,n.uncache=0,n},tu=function(e){return(e=e.split(" "))[0]+" "+e[1]},zh=function(e,t,n){var s=rn(t);return bt(parseFloat(t)+parseFloat(Ys(e,"x",n+"px",s)))+s},CM=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,B_(e,t)},ri="0deg",sa="0px",si=") ",B_=function(e,t){var n=t||this,s=n.xPercent,i=n.yPercent,o=n.x,a=n.y,l=n.z,c=n.rotation,u=n.rotationY,h=n.rotationX,d=n.skewX,f=n.skewY,g=n.scaleX,p=n.scaleY,m=n.transformPerspective,v=n.force3D,_=n.target,x=n.zOrigin,y="",C=v==="auto"&&e&&e!==1||v===!0;if(x&&(h!==ri||u!==ri)){var E=parseFloat(u)*Co,b=Math.sin(E),w=Math.cos(E),S;E=parseFloat(h)*Co,S=Math.cos(E),o=zh(_,o,b*S*-x),a=zh(_,a,-Math.sin(E)*-x),l=zh(_,l,w*S*-x+x)}m!==sa&&(y+="perspective("+m+si),(s||i)&&(y+="translate("+s+"%, "+i+"%) "),(C||o!==sa||a!==sa||l!==sa)&&(y+=l!==sa||C?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+si),c!==ri&&(y+="rotate("+c+si),u!==ri&&(y+="rotateY("+u+si),h!==ri&&(y+="rotateX("+h+si),(d!==ri||f!==ri)&&(y+="skew("+d+", "+f+si),(g!==1||p!==1)&&(y+="scale("+g+", "+p+si),_.style[ht]=y||"translate(0, 0)"},wM=function(e,t){var n=t||this,s=n.xPercent,i=n.yPercent,o=n.x,a=n.y,l=n.rotation,c=n.skewX,u=n.skewY,h=n.scaleX,d=n.scaleY,f=n.target,g=n.xOrigin,p=n.yOrigin,m=n.xOffset,v=n.yOffset,_=n.forceCSS,x=parseFloat(o),y=parseFloat(a),C,E,b,w,S;l=parseFloat(l),c=parseFloat(c),u=parseFloat(u),u&&(u=parseFloat(u),c+=u,l+=u),l||c?(l*=Co,c*=Co,C=Math.cos(l)*h,E=Math.sin(l)*h,b=Math.sin(l-c)*-d,w=Math.cos(l-c)*d,c&&(u*=Co,S=Math.tan(c-u),S=Math.sqrt(1+S*S),b*=S,w*=S,u&&(S=Math.tan(u),S=Math.sqrt(1+S*S),C*=S,E*=S)),C=bt(C),E=bt(E),b=bt(b),w=bt(w)):(C=h,w=d,E=b=0),(x&&!~(o+"").indexOf("px")||y&&!~(a+"").indexOf("px"))&&(x=Ys(f,"x",o,"px"),y=Ys(f,"y",a,"px")),(g||p||m||v)&&(x=bt(x+g-(g*C+p*b)+m),y=bt(y+p-(g*E+p*w)+v)),(s||i)&&(S=f.getBBox(),x=bt(x+s/100*S.width),y=bt(y+i/100*S.height)),S="matrix("+C+","+E+","+b+","+w+","+x+","+y+")",f.setAttribute("transform",S),_&&(f.style[ht]=S)},SM=function(e,t,n,s,i){var o=360,a=Ht(i),l=parseFloat(i)*(a&&~i.indexOf("rad")?ai:1),c=l-s,u=s+c+"deg",h,d;return a&&(h=i.split("_")[1],h==="short"&&(c%=o,c!==c%(o/2)&&(c+=c<0?o:-360)),h==="cw"&&c<0?c=(c+o*hm)%o-~~(c/o)*o:h==="ccw"&&c>0&&(c=(c-o*hm)%o-~~(c/o)*o)),e._pt=d=new En(e._pt,t,n,s,c,aM),d.e=u,d.u="deg",e._props.push(n),d},ym=function(e,t){for(var n in t)e[n]=t[n];return e},TM=function(e,t,n){var s=ym({},n._gsap),i="perspective,force3D,transformOrigin,svgOrigin",o=n.style,a,l,c,u,h,d,f,g;s.svg?(c=n.getAttribute("transform"),n.setAttribute("transform",""),o[ht]=t,a=vl(n,1),zi(n,ht),n.setAttribute("transform",c)):(c=getComputedStyle(n)[ht],o[ht]=t,a=vl(n,1),o[ht]=c);for(l in us)c=s[l],u=a[l],c!==u&&i.indexOf(l)<0&&(f=rn(c),g=rn(u),h=f!==g?Ys(n,l,c,g):parseFloat(c),d=parseFloat(u),e._pt=new En(e._pt,a,l,h,d-h,Hd),e._pt.u=g||0,e._props.push(l));ym(a,s)};On("padding,margin,Width,Radius",function(r,e){var t="Top",n="Right",s="Bottom",i="Left",o=(e<3?[t,n,s,i]:[t+i,t+n,s+n,s+i]).map(function(a){return e<2?r+a:"border"+a+r});eu[e>1?"border"+r:r]=function(a,l,c,u,h){var d,f;if(arguments.length<4)return d=o.map(function(g){return es(a,g,c)}),f=d.join(" "),f.split(d[0]).length===5?d[0]:f;d=(u+"").split(" "),f={},o.forEach(function(g,p){return f[g]=d[p]=d[p]||d[(p-1)/2|0]}),a.init(l,f,h)}});var j_={name:"css",register:Nd,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,s,i){var o=this._props,a=e.style,l=n.vars.startAt,c,u,h,d,f,g,p,m,v,_,x,y,C,E,b,w;ig||Nd(),this.styles=this.styles||F_(e),w=this.styles.props,this.tween=n;for(p in t)if(p!=="autoRound"&&(u=t[p],!(Dn[p]&&__(p,t,n,s,e,i)))){if(f=typeof u,g=eu[p],f==="function"&&(u=u.call(n,s,e,i),f=typeof u),f==="string"&&~u.indexOf("random(")&&(u=fl(u)),g)g(this,e,p,u,n)&&(b=1);else if(p.substr(0,2)==="--")c=(getComputedStyle(e).getPropertyValue(p)+"").trim(),u+="",js.lastIndex=0,js.test(c)||(m=rn(c),v=rn(u)),v?m!==v&&(c=Ys(e,p,c,v)+v):m&&(u+=m),this.add(a,"setProperty",c,u,s,i,0,0,p),o.push(p),w.push(p,0,a[p]);else if(f!=="undefined"){if(l&&p in l?(c=typeof l[p]=="function"?l[p].call(n,s,e,i):l[p],Ht(c)&&~c.indexOf("random(")&&(c=fl(c)),rn(c+"")||c==="auto"||(c+=$n.units[p]||rn(es(e,p))||""),(c+"").charAt(1)==="="&&(c=es(e,p))):c=es(e,p),d=parseFloat(c),_=f==="string"&&u.charAt(1)==="="&&u.substr(0,2),_&&(u=u.substr(2)),h=parseFloat(u),p in Dr&&(p==="autoAlpha"&&(d===1&&es(e,"visibility")==="hidden"&&h&&(d=0),w.push("visibility",0,a.visibility),Rs(this,a,"visibility",d?"inherit":"hidden",h?"inherit":"hidden",!h)),p!=="scale"&&p!=="transform"&&(p=Dr[p],~p.indexOf(",")&&(p=p.split(",")[0]))),x=p in us,x){if(this.styles.save(p),y||(C=e._gsap,C.renderTransform&&!t.parseTransform||vl(e,t.parseTransform),E=t.smoothOrigin!==!1&&C.smooth,y=this._pt=new En(this._pt,a,ht,0,1,C.renderTransform,C,0,-1),y.dep=1),p==="scale")this._pt=new En(this._pt,C,"scaleY",C.scaleY,(_?_o(C.scaleY,_+h):h)-C.scaleY||0,Hd),this._pt.u=0,o.push("scaleY",p),p+="X";else if(p==="transformOrigin"){w.push(Mn,0,a[Mn]),u=_M(u),C.svg?Vd(e,u,0,E,0,this):(v=parseFloat(u.split(" ")[2])||0,v!==C.zOrigin&&Rs(this,C,"zOrigin",C.zOrigin,v),Rs(this,a,p,tu(c),tu(u)));continue}else if(p==="svgOrigin"){Vd(e,u,1,E,0,this);continue}else if(p in I_){SM(this,C,p,d,_?_o(d,_+u):u);continue}else if(p==="smoothOrigin"){Rs(this,C,"smooth",C.smooth,u);continue}else if(p==="force3D"){C[p]=u;continue}else if(p==="transform"){TM(this,u,e);continue}}else p in a||(p=Bo(p)||p);if(x||(h||h===0)&&(d||d===0)&&!oM.test(u)&&p in a)m=(c+"").substr((d+"").length),h||(h=0),v=rn(u)||(p in $n.units?$n.units[p]:m),m!==v&&(d=Ys(e,p,c,v)),this._pt=new En(this._pt,x?C:a,p,d,(_?_o(d,_+h):h)-d,!x&&(v==="px"||p==="zIndex")&&t.autoRound!==!1?cM:Hd),this._pt.u=v||0,m!==v&&v!=="%"&&(this._pt.b=c,this._pt.r=lM);else if(p in a)bM.call(this,e,p,c,_?_+u:u);else if(p in e)this.add(e,p,c||e[p],_?_+u:u,s,i);else if(p!=="parseTransform"){Kf(p,u);continue}x||(p in a?w.push(p,0,a[p]):typeof e[p]=="function"?w.push(p,2,e[p]()):w.push(p,1,c||e[p])),o.push(p)}}b&&O_(this)},render:function(e,t){if(t.tween._time||!og())for(var n=t._pt;n;)n.r(e,n.d),n=n._next;else t.styles.revert()},get:es,aliases:Dr,getSetter:function(e,t,n){var s=Dr[t];return s&&s.indexOf(",")<0&&(t=s),t in us&&t!==Mn&&(e._gsap.x||es(e,"x"))?n&&um===n?t==="scale"?fM:dM:(um=n||{})&&(t==="scale"?gM:pM):e.style&&!Uf(e.style[t])?uM:~t.indexOf("-")?hM:rg(e,t)},core:{_removeProperty:zi,_getMatrix:lg}};Pn.utils.checkPrefix=Bo;Pn.core.getStyleSaver=F_;(function(r,e,t,n){var s=On(r+","+e+","+t,function(i){us[i]=1});On(e,function(i){$n.units[i]="deg",I_[i]=1}),Dr[s[13]]=r+","+e,On(n,function(i){var o=i.split(":");Dr[o[1]]=s[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");On("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(r){$n.units[r]="px"});Pn.registerPlugin(j_);var Ma=Pn.registerPlugin(j_)||Pn;Ma.core.Tween;function OM(){return{zoomToFrame:(s,i={})=>{const{duration:o=2.5,viewportTransform:a,onComplete:l,ease:c="power3.inOut",exitEffect:u=!0,exitScale:h=.9,transitionType:d="zoom-pan"}=i;if(d==="initial"){s.setViewportTransform(a),s.requestRenderAll(),l&&l();return}const f=[...s.viewportTransform];console.log(" - :",f),console.log(" - :",a);const g=f[0],p=f[4],m=f[5],v=a[0],_=a[4],x=a[5],y={scale:g,translateX:p,translateY:m,progress:0,opacity:1},C=Ma.timeline({onComplete:()=>{console.log(" - :",s.viewportTransform),l&&l()}}),E=window.screen.width*window.devicePixelRatio,b=window.screen.height*window.devicePixelRatio,w=E/2,S=b/2,$=(w-p)/g,N=(S-m)/g,H=(w-_)/v,U=(S-x)/v;d==="zoom-in"?C.to(y,{duration:o,scale:v,translateX:_,translateY:x,ease:c,onUpdate:ee}):d==="pan"?C.to(y,{duration:o,translateX:_,translateY:x,ease:c,onUpdate:ee}):(u&&C.to(y,{duration:o*.3,scale:g*h,opacity:.95,ease:"power2.in",onUpdate:function(){const z=this.progress(),R=$+(H-$)*z*.3,ue=N+(U-N)*z*.3,de=w-R*y.scale,Ce=S-ue*y.scale,fe=[y.scale,0,0,y.scale,de,Ce];s.setViewportTransform(fe),y.translateX=de,y.translateY=Ce,re(s,y.opacity),s.requestRenderAll()}}),C.to(y,{duration:o*(u?.7:1),scale:v,translateX:_,translateY:x,progress:1,opacity:1,ease:c,onUpdate:ee}));function ee(){const z=[y.scale,0,0,y.scale,y.translateX,y.translateY];s.setViewportTransform(z),y.opacity<1?re(s,y.opacity):te(s),s.requestRenderAll()}function re(z,R){z.getObjects().forEach(ue=>{ue._originalOpacity===void 0&&(ue._originalOpacity=ue.opacity),ue.set("opacity",ue._originalOpacity*R)})}function te(z){z.getObjects().forEach(R=>{R._originalOpacity!==void 0&&(R.set("opacity",R._originalOpacity),delete R._originalOpacity)})}return C},fadeIn:(s,i=.5)=>{const o=s.opacity||1,a=s.scaleX||1;return s.set({opacity:0,scaleX:a*.9,scaleY:a*.9}),Ma.to(s,{duration:i,opacity:o,scaleX:a,scaleY:a,ease:"power2.out"})},fadeOut:(s,i=.5)=>Ma.to(s,{duration:i,opacity:0,scaleX:s.scaleX*.9,scaleY:s.scaleY*.9,ease:"power2.in"}),rotateZoom:(s,i={})=>{const{duration:o=1.5,viewportTransform:a,rotation:l=0,onComplete:c,ease:u="power3.inOut"}=i,h=[...s.viewportTransform],d=h[0],f=h[4],g=h[5],p=a[0],m=a[4],v=a[5],_={scale:d,translateX:f,translateY:g,rotation:0};return Ma.to(_,{duration:o,scale:p,translateX:m,translateY:v,rotation:l,ease:u,onUpdate:function(){const x=_.rotation*Math.PI/180,y=Math.cos(x),C=Math.sin(x),E=[_.scale*y,_.scale*C,-_.scale*C,_.scale*y,_.translateX,_.translateY];s.setViewportTransform(E),s.requestRenderAll()},onComplete:c})}}}class EM{constructor(e){X(this,"canvas");X(this,"actions",[]);X(this,"currentActionIndex",G(-1));X(this,"animation",OM());this.canvas=e,this.initializeEventHandlers()}initializeEventHandlers(){window.addEventListener("keydown",this.handleKeyDown.bind(this))}play(e){console.log("PresentPlayManager play actions:",e),this.actions=e,this.currentActionIndex.value=0,this.showInitialView()}showInitialView(){if(this.actions.length===0)return;const e=this.actions[0];if(e.type!=="pageframe")return;const t=fi(this.canvas,e.target),{zoomToFrame:n}=this.animation;n(this.canvas,{viewportTransform:t.transform,duration:1})}handleKeyDown(e){switch(console.log("handleKeyDown:",e.key),e.key){case"ArrowDown":case"ArrowRight":case" ":this.nextFrame();break;case"ArrowUp":case"ArrowLeft":this.previousFrame();break}}determineTransitionType(e,t){if(!e)return"initial";const n=fi(this.canvas,e.target),s=fi(this.canvas,t.target),i=s.left>=n.left&&s.top>=n.top&&s.right<=n.right&&s.bottom<=n.bottom,o=Math.abs(s.width-n.width)/n.width<.02&&Math.abs(s.height-n.height)/n.height<.02;return i?"zoom-in":o?"pan":"zoom-pan"}navigateToFrame(e){const t=this.currentActionIndex.value,n=t>=0?this.actions[t]:null,s=fi(this.canvas,e.target),{zoomToFrame:i}=this.animation,o=this.determineTransitionType(n,e);console.log(":",o);let a=2,l=.9;if(n){const u=fi(this.canvas,n.target);this.canvas.setViewportTransform(s.currentTransform);const h=this.canvas.viewportTransform,d=u.centerX*h[0]+h[4],f=u.centerY*h[3]+h[5],g=s.centerX,p=s.centerY,m=Math.sqrt(Math.pow(d-g,2)+Math.pow(f-p,2)),v=5e3,_=1;a=_+(3-_)*Math.min(m/v,1),console.log(":",m,":",a),o==="zoom-pan"&&(l=.8-(.8-.4)*Math.min(m/v,1),console.log(":",l))}const c={viewportTransform:s.transform,duration:o==="initial"?0:a,exitEffect:o!=="pan",exitScale:l,ease:"power3.inOut",transitionType:o,onComplete:()=>{console.log("Frame")}};i(this.canvas,c)}nextFrame(){this.currentActionIndex.value>=this.actions.length-1||(this.currentActionIndex.value++,this.navigateToFrame(this.actions[this.currentActionIndex.value]))}previousFrame(){if(this.currentActionIndex.value<=0){this.currentActionIndex.value=0,this.showInitialView();return}this.currentActionIndex.value--,this.navigateToFrame(this.actions[this.currentActionIndex.value])}destroy(){window.removeEventListener("keydown",this.handleKeyDown.bind(this)),this.actions=[],this.currentActionIndex.value=-1}}class MM{constructor(e,t){X(this,"currentMode",G("edit"));X(this,"canvas");X(this,"presentationCanvas");X(this,"presentPlayManager",null);X(this,"lastPosX",0);X(this,"lastPosY",0);X(this,"isDragging",!1);this.canvas=e,this.presentationCanvas=t,this.initPresentationMode(),this.initPresentationEvents(),document.addEventListener("fullscreenchange",this.handleFullscreenChange.bind(this)),window.addEventListener("keydown",this.handleKeyDown.bind(this)),window.addEventListener("resize",this.handleResize.bind(this))}initPresentationMode(){}handleFullscreenChange(){!document.fullscreenElement&&this.currentMode.value==="present"&&this.exitPresentMode()}initPresentationEvents(){this.presentationCanvas.on("mouse:down",e=>{this.isDragging=!0,this.lastPosX=e.e.clientX,this.lastPosY=e.e.clientY,this.presentationCanvas.defaultCursor="grabbing"}),this.presentationCanvas.on("mouse:move",e=>{if(this.isDragging){const t=e.e.clientX-this.lastPosX,n=e.e.clientY-this.lastPosY,s=this.presentationCanvas.viewportTransform;s[4]+=t,s[5]+=n,this.presentationCanvas.setViewportTransform(s),this.lastPosX=e.e.clientX,this.lastPosY=e.e.clientY}}),this.presentationCanvas.on("mouse:up",()=>{this.isDragging=!1,this.presentationCanvas.defaultCursor="default"}),this.presentationCanvas.on("mouse:wheel",e=>{const t=e.e.deltaY;let n=this.presentationCanvas.getZoom();n*=.999**t,n=Math.min(Math.max(.1,n),20);const s={x:e.e.offsetX,y:e.e.offsetY};this.presentationCanvas.zoomToPoint(new j(s.x,s.y),n),e.e.preventDefault(),e.e.stopPropagation()})}async enterPresentMode(){this.currentMode.value="present",this.showPresentationCanvas(),this.presentPlayManager=new EM(this.presentationCanvas);const e=[];this.presentationCanvas.forEachObject(s=>{s.selectable=!0,s.lockMovementX=!0,s.lockMovementY=!0,s.lockRotation=!0,s.lockScalingX=!0,s.lockScalingY=!0,s.hasControls=!1,s.hasBorders=!0}),console.log("enterPresentMode:",this.presentationCanvas.getObjects());const t=this.presentationCanvas.getObjects().find(s=>s.type===zt.type);t&&e.push({type:"pageframe",target:t});const n=this.presentationCanvas.getObjects().filter(s=>s.type===at.type);n.sort((s,i)=>(s.order||0)-(i.order||0)),n.forEach(s=>{e.push({type:"frame",target:s})}),console.log("playActions:",e),this.presentPlayManager.play(e)}exitPresentMode(){this.currentMode.value="edit",this.presentPlayManager&&(this.presentPlayManager.destroy(),this.presentPlayManager=null),this.hidePresentationCanvas()}async cloneCanvasContent(){console.log(""),this.presentationCanvas.clear(),this.presentationCanvas.setViewportTransform([1,0,0,1,0,0]);const e=this.canvas.getObjects();for(const t of e){console.log(`: ${t.type}, id: ${t.id}`);try{await t.clone("type","name").then(n=>{(t.type==="pageframe"||t.type==="frame")&&n.set({stroke:"transparent",shadow:null,strokeWidth:0}),n.set({left:t.left,top:t.top,scaleX:t.scaleX,scaleY:t.scaleY,angle:t.angle,selectable:!0,lockMovementX:!0,lockMovementY:!0,lockRotation:!0,lockScalingX:!0,lockScalingY:!0,hasControls:!0,hasBorders:!0}),console.log(`: ${t.type}, id: ${t.id}`),this.presentationCanvas.add(n)})}catch(n){console.error(`: ${t.type}, id: ${t.id}`,n)}}console.log(` ${this.presentationCanvas.getObjects().length} `),this.presentationCanvas.requestRenderAll()}showPresentationCanvas(){if(this.canvas.wrapperEl&&(this.canvas.wrapperEl.style.display="none"),this.presentationCanvas.wrapperEl){const e=this.presentationCanvas.wrapperEl;Object.assign(e.style,{display:"block",position:"fixed",top:"0",left:"0",width:"100vw",height:"100vh",zIndex:"9999",backgroundColor:"#fff"}),this.ensureCanvasLayersVisible()}this.enterFullscreen(),this.adjustPresentationSize(),this.presentationCanvas.requestRenderAll()}ensureCanvasLayersVisible(){const e=this.presentationCanvas.lowerCanvasEl;e&&(e.style.display="block",e.style.visibility="visible");const t=this.presentationCanvas.upperCanvasEl;t&&(t.style.display="block",t.style.visibility="visible");const n=this.presentationCanvas.cacheCanvasEl;n&&(n.style.display="block",n.style.visibility="visible")}hidePresentationCanvas(){this.exitFullscreen(),this.presentationCanvas.wrapperEl&&(this.presentationCanvas.wrapperEl.style.display="none"),this.canvas.wrapperEl&&(this.canvas.wrapperEl.style.display="block")}handleKeyDown(e){if(this.currentMode.value==="present")switch(e.key){case"Escape":this.exitPresentMode();break}}handleResize(){this.currentMode.value==="present"&&this.adjustPresentationSize()}adjustPresentationSize(){const e=window.innerWidth,t=window.innerHeight;console.log(`: ${e}x${t}`),this.presentationCanvas.setDimensions({width:e,height:t}),this.presentationCanvas.requestRenderAll(),this.ensureCanvasLayersVisible(),console.log(":",{:this.presentationCanvas.getObjects().length,:this.presentationCanvas.backgroundColor,:{width:this.presentationCanvas.width,height:this.presentationCanvas.height},:this.presentationCanvas.viewportTransform})}async enterFullscreen(){try{this.presentationCanvas.wrapperEl&&this.presentationCanvas.wrapperEl.requestFullscreen&&await this.presentationCanvas.wrapperEl.requestFullscreen()}catch(e){console.error("Failed to enter fullscreen:",e)}}async exitFullscreen(){try{document.fullscreenElement&&await document.exitFullscreen()}catch(e){console.error("Failed to exit fullscreen:",e)}}}class PM{constructor(e,t){X(this,"canvas");X(this,"canvasManager");X(this,"isSpaceDragging",!1);X(this,"clipboardObject",null);this.canvas=e,this.canvasManager=t,this.initSpaceDragMode(),this.initCopyPasteHandlers()}initSpaceDragMode(){window.addEventListener("keydown",this.handleKeyDown.bind(this)),window.addEventListener("keyup",this.handleKeyUp.bind(this))}initCopyPasteHandlers(){window.addEventListener("keydown",this.handleCopyPaste.bind(this))}handleKeyDown(e){e.code==="Space"&&!this.isSpaceDragging&&(this.isSpaceDragging=!0,this.canvas.defaultCursor="grab",this.canvas.selection=!1,this.canvas.forEachObject(t=>{t.selectable=!1,t.evented=!1}))}handleKeyUp(e){e.code==="Space"&&(this.isSpaceDragging=!1,this.canvas.defaultCursor="default",this.canvas.selection=!0,this.canvas.forEachObject(t=>{t.selectable=!0,t.evented=!0}))}pasteImageFromUrl(e){console.log("URL",e);let t=this.canvas.getVpCenter();const n=this.canvasManager.getControlsManager();if(!n){console.error("ControlsManager ");return}n.addImage(e,{left:t.x,top:t.y,originX:"center",originY:"center"}).then(s=>{s&&console.log("",s)}).catch(s=>{console.error(":",s),URL.revokeObjectURL(e)})}handleCopyPaste(e){if(e.ctrlKey){const t=this.canvas.getActiveObject();if(t&&"isEditing"in t&&t.isEditing)return;e.code==="KeyC"?(e.preventDefault(),e.stopPropagation(),this.handleCopy()):e.code==="KeyV"&&(e.preventDefault(),e.stopPropagation(),this.checkClipboardAndPaste())}}handleCopy(){const e=this.canvas.getActiveObject();e&&!(e instanceof xt)&&e.clone().then(t=>{this.clipboardObject=t;const n=document.createElement("textarea");n.value="next-slide-object",n.style.position="fixed",n.style.left="-999999px",n.style.top="-999999px",document.body.appendChild(n),n.focus(),n.select();const s=document.execCommand("copy");document.body.removeChild(n),s?console.log(" execCommand "):console.warn("execCommand "),console.log("",t)}).catch(t=>{console.error(":",t)})}async checkClipboardAndPaste(){try{const e=await navigator.clipboard.read();let t=!1;for(const n of e)if(n.types.includes("image/png")||n.types.includes("image/jpeg")||n.types.includes("image/gif")){const s=await n.getType(n.types.find(o=>o.startsWith("image/"))||"image/png"),i=URL.createObjectURL(s);this.pasteImageFromUrl(i),t=!0;break}!t&&this.clipboardObject&&this.handleInternalPaste()}catch(e){console.warn(":",e),this.clipboardObject&&this.handleInternalPaste()}}async handleInternalPaste(){if(console.log("handleInternalPaste "),!this.clipboardObject){console.log("");return}const e=this.canvas.getActiveObject();let t={x:this.canvas.width/2,y:this.canvas.height/2};if(e){const s=e.getCenterPoint();t={x:s.x,y:s.y}}const n=this.canvasManager.getControlsManager();if(!n){console.error("ControlsManager ");return}try{const s=await n.addClonedObject(this.clipboardObject,{left:t.x,top:t.y,originX:"center",originY:"center"});s?(this.canvas.setActiveObject(s),this.canvas.requestRenderAll(),console.log("",s)):console.error(": ")}catch(s){console.error(":",s)}}isInSpaceDragMode(){return this.isSpaceDragging}destroy(){window.removeEventListener("keydown",this.handleKeyDown.bind(this)),window.removeEventListener("keyup",this.handleKeyUp.bind(this)),window.removeEventListener("keydown",this.handleCopyPaste.bind(this))}}class AM{constructor(e,t,n){X(this,"canvas");X(this,"canvasManager");X(this,"eventManager");X(this,"isDragging",!1);X(this,"lastPosX",0);X(this,"lastPosY",0);X(this,"currentHoverObject",null);this.canvas=e,this.canvasManager=t,this.eventManager=n,this.setupEventOverrides(),this.initMouseEvents()}initMouseEvents(){this.setupMouseDownEvents(),this.setupMouseMoveEvents(),this.setupMouseUpEvents(),this.setupMouseWheelEvents()}setupEventOverrides(){const e=this.canvas,t=this.canvas.findTarget;this.canvas.findTarget=function(n){const s=this.getPointer(n,!0),i=new j(s.x,s.y),{target:o}=Ah(e,i);return o||t.call(this,n)}}setupMouseDownEvents(){this.canvas.on("mouse:down",e=>{if(this.eventManager.getKeyboardHandler().isInSpaceDragMode())this.isDragging=!0,this.canvas.selection=!1,this.canvas.defaultCursor="grabbing";else{this.isDragging=!1,this.canvas.selection=!0;const t=this.canvas.getViewportPoint(e);console.log("[MouseEventHandler] mouse:down",t);const n=new j(t.x,t.y),{target:s}=Ah(this.canvas,n);if(s){this.canvas.setActiveObject(s),this.canvas.requestRenderAll(),e.target=s;return}}this.lastPosX=e.e.clientX,this.lastPosY=e.e.clientY})}setupMouseMoveEvents(){let e=null;this.canvas.on("mouse:move",t=>{if(this.isDragging){if(e)return;e=requestAnimationFrame(()=>{const s=t.e.clientX-this.lastPosX,i=t.e.clientY-this.lastPosY,o=this.canvas.viewportTransform;o[4]+=s,o[5]+=i,this.canvas.setViewportTransform(o),this.lastPosX=t.e.clientX,this.lastPosY=t.e.clientY,e=null});return}const n=this.canvas.getViewportPoint(t);this.eventManager.getKeyboardHandler().isInSpaceDragMode()||this.canvas.isDraggingObject||this.handleObjectHover(n)})}handleObjectHover(e){this.canvas.defaultCursor="default";const t=new j(e.x,e.y),{target:n}=Ah(this.canvas,t);this.currentHoverObject!==n&&(this.currentHoverObject&&(this.canvas.getActiveObjects().includes(this.currentHoverObject)||this.handleHoverOut(this.currentHoverObject)),n&&(this.canvas.getActiveObjects().includes(n)||this.handleHoverIn(n)),this.currentHoverObject=n,this.canvas.requestRenderAll())}setupMouseUpEvents(){this.canvas.on("mouse:up",()=>{this.isDragging=!1,this.eventManager.getKeyboardHandler().isInSpaceDragMode()?this.canvas.defaultCursor="grab":this.canvas.selection=!0})}setupMouseWheelEvents(){this.canvas.on("mouse:wheel",e=>{const t=e.e.deltaY;let n=this.canvas.getZoom();n*=.999**t,n=Math.min(Math.max(Rr.MIN_ZOOM,n),Rr.MAX_ZOOM);const s={x:e.e.offsetX,y:e.e.offsetY};this.canvas.zoomToPoint(new j(s.x,s.y),n),e.e.preventDefault(),e.e.stopPropagation()})}handleHoverIn(e){if(e.type===At.type&&typeof e.showBorder=="function"){e.showBorder(!0);return}e._originalCustomBorderColor||this.saveOriginalState(e),e._originalHoverCursor||(e._originalHoverCursor=e.hoverCursor,e.hoverCursor="default");const t=this.canvas.getZoom(),n={borderColor:e instanceof xt?Lt.BORDER.SLIDES_HOVER:Lt.BORDER.HOVER,strokeWidth:Rr.STROKE_WIDTH/t,borderScaleFactor:Rr.BORDER_SCALE_FACTOR};e.type!==At.type&&(n.customBorderColor=e instanceof xt?Lt.BORDER.SLIDES_HOVER:Lt.BORDER.HOVER),e.set(n)}handleHoverOut(e){if(e.type===At.type&&typeof e.showBorder=="function"){e.showBorder(!1);return}e._originalHoverCursor!==void 0&&(e.hoverCursor=e._originalHoverCursor,delete e._originalHoverCursor),this.restoreOriginalState(e)}saveOriginalState(e){e._originalBorderColor=e.borderColor,e._originalStroke=e.stroke,e._originalCustomBorderColor=e.customBorderColor,e._originalStrokeWidth=e.strokeWidth,e._originalBorderScaleFactor=e.borderScaleFactor,e._originalHoverCursor=e.hoverCursor}restoreOriginalState(e){if(e._originalCustomBorderColor!==void 0){const t={borderColor:e._originalBorderColor,strokeWidth:e._originalStrokeWidth,borderScaleFactor:e._originalBorderScaleFactor};e.type!==At.type&&(t.customBorderColor=e._originalCustomBorderColor),e.set(t),delete e._originalBorderColor,delete e._originalStroke,delete e._originalStrokeWidth,delete e._originalBorderScaleFactor,delete e._originalCustomBorderColor,e._originalHoverCursor!==void 0&&(e.hoverCursor=e._originalHoverCursor,delete e._originalHoverCursor),this.canvas.requestRenderAll()}}destroy(){this.canvas.off("mouse:down"),this.canvas.off("mouse:move"),this.canvas.off("mouse:up"),this.canvas.off("mouse:wheel")}}class FM{constructor(e,t){X(this,"canvas");X(this,"canvasManager");this.canvas=e,this.canvasManager=t,this.setupObjectEvents()}setupObjectEvents(){this.canvas.on("object:added",e=>{const t=e.target;t&&Ae.emit(ye.CANVAS.CANVAS_UPDATE,{type:ye.CANVAS.CANVAS_UPDATE,target:t})}),this.canvas.on("object:moving",e=>{const t=e.target;t&&typeof t.fire=="function"&&t.fire("moving",e),this.canvas.isDraggingObject=!0}),this.canvas.on("object:scaling",e=>{e.target}),this.canvas.on("object:rotating",e=>{e.target}),this.canvas.on("object:modified",e=>{this.canvas.isDraggingObject=!1;const t=e.target;t&&Ae.emit(ye.CANVAS.CANVAS_UPDATE,{type:ye.CANVAS.CANVAS_UPDATE,target:t})}),this.canvas.on("object:removed",e=>{console.log("object:removed",e);const t=e.target;t&&Ae.emit(ye.CANVAS.CANVAS_UPDATE,{type:ye.CANVAS.CANVAS_UPDATE,target:t})})}destroy(){this.canvas.off("object:added"),this.canvas.off("object:modified"),this.canvas.off("object:removed"),this.canvas.off("object:moving"),this.canvas.off("object:scaling"),this.canvas.off("object:rotating")}}class kM{constructor(e,t){X(this,"canvas");X(this,"canvasManager");this.canvas=e,this.canvasManager=t,this.setupSelectionEvents()}setupSelectionEvents(){this.canvas.on("selection:created",this.handleSelection.bind(this)),this.canvas.on("selection:updated",this.handleSelection.bind(this)),this.canvas.on("selection:cleared",this.handleSelectionCleared.bind(this))}handleSelection(e){var n;const t=(n=e.selected)==null?void 0:n[0];t&&(this.handleSelectionEventBorderStatus(e),t.type===At.type||t.type==="textbox"?this.showTextSettingToolbar(t):this.hideTextSettingToolbar(),t.type===ji.type?this.showImageSettingToolbar(t):this.hideImageSettingToolbar(),t.type===at.type?this.canvasManager.getFrameManager().setCurrentFrame(t):t.type===zt.type&&this.canvasManager.getFrameManager().setCurrentFrame(null),this.toggleFrameNumberControls(t))}handleSelectionCleared(e){this.canvasManager.getFrameManager().setCurrentFrame(null),this.handleSelectionEventBorderStatus(e),this.toggleFrameNumberControls(null),this.hideTextSettingToolbar()}handleSelectionEventBorderStatus(e){const t=e.deselected;(t==null?void 0:t.length)>0&&t.forEach(s=>{if(s.type===At.type&&typeof s.showBorder=="function"){s.showBorder(!1);return}this.restoreOriginalState(s)});const n=e.selected;(n==null?void 0:n.length)>0&&n.forEach(s=>{if(s.type===zt.type||s.type===at.type){s._originalCustomBorderColor===void 0&&(s._originalBorderColor=s.borderColor,s._originalCustomBorderColor=s.customBorderColor,s._originalStrokeWidth=s.strokeWidth,s._originalBorderScaleFactor=s.borderScaleFactor,s.set({borderColor:Lt.BORDER.SLIDES_HOVER,customBorderColor:Lt.BORDER.SLIDES_HOVER,strokeWidth:Rr.STROKE_WIDTH}),this.canvas.requestRenderAll());return}})}restoreOriginalState(e){if(e._originalCustomBorderColor!==void 0){const t={borderColor:e._originalBorderColor};e.type!==At.type&&(t.customBorderColor=e._originalCustomBorderColor),e.set(t),delete e._originalBorderColor,delete e._originalStroke,delete e._originalStrokeWidth,delete e._originalBorderScaleFactor,delete e._originalCustomBorderColor,this.canvas.requestRenderAll()}}toggleFrameNumberControls(e){if(!e){this.hideAllFrameNumberControls();return}this.canvas.getActiveObjects().length>0&&this.hasFrameSelected()?this.showAllFrameNumberControls(e):this.hideAllFrameNumberControls()}hasFrameSelected(){return this.canvas.getActiveObjects().some(t=>t instanceof at)}showAllFrameNumberControls(e){this.canvas.getObjects().forEach(n=>{n instanceof at&&(n.setNumberControlVisibility(!0),n.isCurrentSelected=n===e)}),this.canvas.requestRenderAll()}hideAllFrameNumberControls(){this.canvas.getObjects().forEach(t=>{t instanceof at&&(t.setNumberControlVisibility(!1),t.isCurrentSelected=!1)}),this.canvas.requestRenderAll()}showTextSettingToolbar(e){!e||e.type!==At.type||Ae.emit(ye.CONTROL_PANEL.SHOW_TEXT_SETTING_TOOLBAR,{target:e,canvas:this.canvas,canvasManager:this.canvasManager})}hideTextSettingToolbar(){Ae.emit(ye.CONTROL_PANEL.HIDE_TEXT_SETTING_TOOLBAR)}showImageSettingToolbar(e){e&&Ae.emit(ye.CONTROL_PANEL.SHOW_IMAGE_SETTING_TOOLBAR,{target:e,canvas:this.canvas,canvasManager:this.canvasManager})}hideImageSettingToolbar(){Ae.emit(ye.CONTROL_PANEL.HIDE_IMAGE_SETTING_TOOLBAR)}destroy(){this.canvas.off("selection:created"),this.canvas.off("selection:updated"),this.canvas.off("selection:cleared")}}class RM{constructor(e,t){X(this,"keyboardHandler");X(this,"mouseHandler");X(this,"objectEventHandler");X(this,"selectionEventHandler");this.keyboardHandler=new PM(e,t),this.mouseHandler=new AM(e,t,this),this.objectEventHandler=new FM(e,t),this.selectionEventHandler=new kM(e,t)}getKeyboardHandler(){return this.keyboardHandler}getMouseHandler(){return this.mouseHandler}destroy(){this.keyboardHandler.destroy(),this.mouseHandler.destroy()}}class DM{constructor(e,t){X(this,"syncEnabled",!0);X(this,"syncDebounceTimer",null);X(this,"syncInProgress",!1);X(this,"pendingSync",!1);X(this,"backgroundColorListener",null);X(this,"backgroundImageListener",null);this.sourceCanvas=e,this.targetCanvas=t,this.initCanvasSyncEvents()}initCanvasSyncEvents(){this.sourceCanvas.on("object:added",()=>this.debounceSyncCanvases()),this.sourceCanvas.on("object:removed",()=>this.debounceSyncCanvases()),this.sourceCanvas.on("object:modified",()=>this.debounceSyncCanvases()),this.sourceCanvas.on("after:render",()=>{this.pendingSync&&!this.syncInProgress&&this.syncCanvases()}),this.backgroundColorListener=e=>{console.log(":",e,e.canvas,this.sourceCanvas,e.canvas===this.sourceCanvas),e&&(console.log(":",this.sourceCanvas),this.debounceSyncCanvases())},Ae.on(ye.CANVAS.BACKGROUND_COLOR_CHANGE,this.backgroundColorListener),this.backgroundImageListener=e=>{e&&this.debounceSyncCanvases()},Ae.on(ye.CANVAS.BACKGROUND_IMAGE_CHANGE,this.backgroundImageListener)}debounceSyncCanvases(e=500){if(this.syncEnabled){if(this.syncInProgress){this.pendingSync=!0;return}this.syncDebounceTimer!==null&&window.clearTimeout(this.syncDebounceTimer),this.syncDebounceTimer=window.setTimeout(()=>{this.syncCanvases()},e)}}async syncCanvases(){if(!(!this.syncEnabled||this.syncInProgress)){this.syncInProgress=!0,this.pendingSync=!1;try{if(this.targetCanvas.clear(),this.sourceCanvas.backgroundColor&&(this.targetCanvas.backgroundColor=this.sourceCanvas.backgroundColor),this.sourceCanvas.backgroundImage)try{const s=this.sourceCanvas.backgroundImage;if(typeof s.getSrc=="function"){const i=s.getSrc();i&&un.fromURL(i,{crossOrigin:"anonymous"}).then(o=>{o&&(o.scaleX=s.scaleX||1,o.scaleY=s.scaleY||1,o.left=s.left||0,o.top=s.top||0,o.originX=s.originX||"left",o.originY=s.originY||"top",o.width=s.width,o.height=s.height,this.targetCanvas.backgroundImage=o,this.targetCanvas.requestRenderAll())})}else try{const i=await s.clone();this.targetCanvas.backgroundImage=i,this.targetCanvas.requestRenderAll()}catch(i){console.error(":",i);const o=s.toJSON(),a=await cr.enlivenObjects([o]);a&&a[0]&&(this.targetCanvas.backgroundImage=a[0],this.targetCanvas.requestRenderAll())}}catch(s){console.error(":",s)}const t=this.sourceCanvas.getObjects().map(s=>new Promise(async i=>{try{const o=await s.clone();i(o)}catch(o){console.error(`: ${s.type}`,o);const a=new jt;i(a)}}));(await Promise.all(t)).forEach(s=>{if(!s)return;s.hasOwnProperty("controls")&&(s.controls={});const i=s.type;(i===at.type||i===zt.type||i===xt.type)&&(s.customBorderColor="transparent",s.fill="transparent",s.backgroundColor="transparent",s.stroke="transparent",i===at.type&&typeof s.setNumberControlVisibility=="function"&&s.setNumberControlVisibility(!1),s.selectable=!1,s.hoverCursor="default"),this.targetCanvas.add(s)}),this.targetCanvas.requestRenderAll(),this.syncInProgress=!1,this.pendingSync&&requestAnimationFrame(()=>this.syncCanvases())}catch(e){console.error(":",e),this.syncInProgress=!1}}}enableSync(e=!0){this.syncEnabled=e,e&&!this.syncInProgress&&this.syncCanvases()}forceSyncCanvases(){this.syncDebounceTimer!==null&&(window.clearTimeout(this.syncDebounceTimer),this.syncDebounceTimer=null),this.syncCanvases()}destroy(){this.syncDebounceTimer!==null&&(window.clearTimeout(this.syncDebounceTimer),this.syncDebounceTimer=null),this.sourceCanvas.off("object:added"),this.sourceCanvas.off("object:removed"),this.sourceCanvas.off("object:modified"),this.sourceCanvas.off("after:render"),this.backgroundColorListener&&(Ae.off(ye.CANVAS.BACKGROUND_COLOR_CHANGE,this.backgroundColorListener),this.backgroundColorListener=null),this.backgroundImageListener&&(Ae.off(ye.CANVAS.BACKGROUND_IMAGE_CHANGE,this.backgroundImageListener),this.backgroundImageListener=null)}}class IM{constructor(e,t,n,s={}){X(this,"controlsManager");X(this,"canvas");X(this,"presentationCanvas");X(this,"canvasSyncManager");X(this,"pageFrameManager");X(this,"frameManager");X(this,"modeManager");X(this,"eventManager");X(this,"isDragging",!1);X(this,"lastPosX",0);X(this,"lastPosY",0);X(this,"contextMenuManager");X(this,"isSpaceDragging",!1);const i={width:n.clientWidth,height:n.clientHeight,backgroundColor:"#00000000",selection:!0,preserveObjectStacking:!0,allowTouchScrolling:!1,stopContextMenu:!0,skipOffscreen:!0,fireRightClick:!1,fireMiddleClick:!1,enableRetinaScaling:!0,renderOnAddRemove:!0,stateful:!1,...s};this.canvas=new bo(e,i),this.canvas.viewportTransform=[1,0,0,1,0,0],this.presentationCanvas=new cl(t,{...i,selection:!1}),this.presentationCanvas.viewportTransform=[1,0,0,1,0,0],this.canvasSyncManager=new DM(this.canvas,this.presentationCanvas),this.canvas.wrapperEl.style.transform="translateZ(0)",this.canvas.wrapperEl.style.backfaceVisibility="hidden",this.canvas.wrapperEl.style.perspective="1000px",this.canvas.wrapperEl.style.willChange="transform",this.presentationCanvas.wrapperEl.style.transform="translateZ(0)",this.presentationCanvas.wrapperEl.style.backfaceVisibility="hidden",this.presentationCanvas.wrapperEl.style.perspective="1000px",this.presentationCanvas.wrapperEl.style.willChange="transform",this.canvas.selection=!0,this.canvas.skipTargetFind=!1,this.canvas.perPixelTargetFind=!1,this.canvas.targetFindTolerance=4,this.canvas.selection=!0,this.canvas.skipTargetFind=!1,this.canvas.perPixelTargetFind=!1,Ls.createControls=function(){const o=Mb.createObjectDefaultControls();return delete o.mtr,{controls:o}},Ls.ownDefaults={...Ls.ownDefaults,cornerColor:As.CORNER.COLOR,cornerStyle:As.CORNER.STYLE,padding:Rr.PADDING_0,cornerSize:As.CORNER.SIZE,transparentCorners:As.CORNER.TRANSPARENT,lockRotation:!1},this.initAligningGuidelines(),this.pageFrameManager=new NO(this.canvas),this.frameManager=this.pageFrameManager.getFrameManager(),this.controlsManager=new VO(this.canvas,this),this.modeManager=new MM(this.canvas,this.presentationCanvas),this.eventManager=new RM(this.canvas,this),this.contextMenuManager=new ZO(this.canvas,this),this.initPageFramge(),this.initResizeListener(),DO(this)}initAligningGuidelines(){const e={margin:4,width:1,color:"rgb(255,0,0,0.9)"};hE(this.canvas,e)}initPageFramge(){const e=this.createPageFrame();this.canvas.add(e),this.canvas.centerObject(e),this.canvas.bringObjectToFront(e)}initResizeListener(){window.addEventListener("resize",()=>{var t;const e=(t=this.canvas.wrapperEl)==null?void 0:t.parentElement;e&&(this.canvas.setDimensions({width:e.clientWidth,height:e.clientHeight}),this.canvas.requestRenderAll())}),window.dispatchEvent(new Event("resize"))}getControlsManager(){return this.controlsManager}getModeManager(){return this.modeManager}createPageFrame(){return this.pageFrameManager.createDefaultPage()}getPageFrame(){return this.pageFrameManager.getPageFrame()}addNewFrame(){return this.pageFrameManager.addNewFrame()}getCurrentFrame(){return this.frameManager.getCurrentFrame()}getAllFrames(){return this.frameManager.getAllFrames()}getAllSlides(){const e=this.getPageFrame(),t=this.frameManager.getAllFrames();return e?[e,...t]:t}deleteFrame(e){this.pageFrameManager.deleteFrame(e)}moveFrameUp(e){this.frameManager.moveFrameUp(e)}moveFrameDown(e){this.frameManager.moveFrameDown(e)}handleResize(e,t){this.canvas.setDimensions({width:e,height:t}),this.presentationCanvas.setDimensions({width:e,height:t})}destroy(){this.canvas.dispose(),this.presentationCanvas.dispose(),this.canvasSyncManager.destroy(),this.canvasSyncManager&&this.canvasSyncManager.destroy()}navigateToFrame(e){const t=this.getMainCanvas(),n=fi(t,e);t.setViewportTransform(n.transform)}setZoom(e){this.canvas.setZoom(e)}getZoom(){return this.canvas.getZoom()}setBackgroundColor(e){this.canvas.backgroundColor=e,this.canvas.requestRenderAll()}getPageFrameManager(){return this.pageFrameManager}getFrameManager(){return this.frameManager}getAllObjects(){return this.canvas.getObjects()}getMainCanvas(){return this.canvas}getPresentationCanvas(){return this.presentationCanvas}clear(){this.pageFrameManager.clear(),this.canvas.clear()}removeObject(e){const t=this.getFrameManager().findParentFrame(e);t&&t.removeContent(e),this.canvas.remove(e)}exportCanvasToJSON(){try{const e=[...this.canvas.viewportTransform];this.canvas.setViewportTransform([1,0,0,1,0,0]);const t=this.canvas.toJSON();this.canvas.setViewportTransform(e);const n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),s=URL.createObjectURL(n),i=document.createElement("a");i.href=s;const o=new Date,a=`NextSlide_Export_${o.getFullYear()}${(o.getMonth()+1).toString().padStart(2,"0")}${o.getDate().toString().padStart(2,"0")}_${o.getHours().toString().padStart(2,"0")}${o.getMinutes().toString().padStart(2,"0")}.json`;i.download=a,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(s),console.log("")}catch(e){console.error(":",e)}}importCanvasFromJSON(e){console.log("importCanvasFromJSON",e);try{this.clear();const t=typeof e=="string"?JSON.parse(e):e;this.canvas.loadFromJSON(t).then(()=>{console.log(""),this.canvas.requestRenderAll(),this.pageFrameManager.updateReferences()})}catch(t){console.error(":",t)}}}class LM{constructor(e,t,n,s,i){X(this,"thumbnailCanvases",new Map);X(this,"framesRef");X(this,"canvasManager");X(this,"updateFramesCallback");X(this,"updateTimer",null);X(this,"defaultWidth",224);X(this,"defaultHeight",126);X(this,"eventListenersSet",!1);this.onUpdateStart=n,this.onUpdateComplete=s,console.log("[] ",e,t),this.canvasManager=e,this.updateFramesCallback=i,this.framesRef=t,this.setupEventListeners(),this.checkCanvasManagerAndUpdate()}async checkCanvasManagerAndUpdate(){var e;for(let t=0;t<5;t++){if(this.canvasManager&&typeof this.canvasManager.getAllSlides=="function"){console.log("[] canvasManager"),(e=this.updateFramesCallback)==null||e.call(this);return}console.log(`[] canvasManager (${t+1}/5)`),await new Promise(n=>setTimeout(n,100))}console.warn("[] canvasManager")}setCanvasManager(e){this.canvasManager=e}setUpdateFramesCallback(e){this.updateFramesCallback=e}getPageOverview(){var e;return(e=this.canvasManager)==null?void 0:e.getPageFrame()}initThumbnailCanvas(e,t,n,s=this.defaultWidth,i=this.defaultHeight){const o=document.createElement("canvas");return o.width=s,o.height=i,o.style.width="100%",o.style.height="100%",o.style.objectFit="contain",this.mountCanvasToContainer(n,o),this.thumbnailCanvases.set(t,{canvas:o,container:n}),e===zt.type&&this.updateFrameThumbnails(),o}mountCanvasToContainer(e,t){if(!e){console.warn("[] Canvas");return}if(!(e instanceof HTMLElement)||typeof e.appendChild!="function"){console.error("[] CanvasDOM",e);return}e.innerHTML="",e.appendChild(t)}hasThumbnailCanvas(e){return this.thumbnailCanvases.has(e)}getThumbnailCanvas(e){var t;return(t=this.thumbnailCanvases.get(e))==null?void 0:t.canvas}getPageOverviewCanvas(){return this.getThumbnailCanvas("overview")}getFrameThumbnailCanvas(e){return this.getThumbnailCanvas(e)}getAllThumbnailCanvases(){return this.thumbnailCanvases}setupEventListeners(){this.eventListenersSet||(Ae.on(ye.CANVAS.CANVAS_UPDATE,e=>{this.updateFramesCallback&&this.updateFramesCallback(),this.updateAllThumbnails()}),this.eventListenersSet=!0)}removeEventListeners(){this.eventListenersSet&&(Ae.off(ye.CANVAS.CANVAS_UPDATE),this.eventListenersSet=!1,console.log("[] "))}updateAllThumbnails(e=100){var t;(t=this.onUpdateStart)==null||t.call(this),this.updateTimer&&clearTimeout(this.updateTimer),this.updateTimer=window.setTimeout(async()=>{var n;try{await this.updateFrameThumbnails(),(n=this.onUpdateComplete)==null||n.call(this)}catch(s){console.error("[] :",s)}},e)}async updatePageOverviewThumbnail(e){const t=this.thumbnailCanvases.get(e);if(!t){console.warn("[] ");return}const{canvas:n}=t,s=this.getPageOverview();if(!s){console.warn("[] ");return}try{await s.thumbnail(n,"PageOverview "+new Date().getTime())||console.warn("[] ")}catch(i){console.error("[] :",i)}}async updateFrameThumbnails(){let e=[];this.framesRef instanceof Array?e=this.framesRef:e=this.framesRef.value;for(const t of e)try{if(!t.id){console.warn("[] Frame ID");continue}const n=this.thumbnailCanvases.get(t.id);if(!n){console.warn(`[] Frame ${t.id} Canvas`);continue}const{canvas:s}=n;await t.thumbnail(s)||console.warn(`[] Frame ${t.id} `)}catch(n){console.error("[] Frame:",n)}}dispose(){this.removeEventListeners(),this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null),this.thumbnailCanvases.clear()}}const BM={class:"sidebar-content"},jM={class:"sidebar-body"},zM={class:"operation-group"},HM={class:"add-frame-container"},$M={key:0,class:"dropdown-menu"},NM={class:"frames-list-container"},VM={class:"frames-list"},WM={key:0,class:"frame-number"},YM={class:"frame-thumbnail"},XM=["data-frame-id"],UM={class:"frame-title"},GM={class:"arrow"},qM=Re({__name:"Sidebar",props:{collapsed:{type:Boolean},canvasManager:{}},emits:["update:collapsed"],setup(r,{emit:e}){Cw(b=>({"07fb74e4":sn(Lt).PRIMARY}));const t=r,n=e,s=G(!1),i=G([]),o=G(!1),a=G(null),l=G({}),c=G(null),u=()=>{if(!t.canvasManager){i.value=[];return}const b=t.canvasManager.getAllSlides()||[];i.value=b},h=()=>{t.canvasManager&&(console.log("[Sidebar] "),c.value=new LM(t.canvasManager,i,()=>{},()=>{},()=>{u()}))},d=()=>{n("update:collapsed",!t.collapsed)},f=me(()=>{var b;return(b=t.canvasManager)==null?void 0:b.getPageFrame()}),g=me(()=>f.value!=null),p=()=>{var b;(b=t.canvasManager)==null||b.addNewFrame(),o.value=!1},m=()=>{var b;(b=t.canvasManager)==null||b.addNewFrame(),o.value=!1},v=b=>{t.canvasManager&&t.canvasManager.navigateToFrame(b)},_=()=>{o.value=!1},x=(b,w)=>{var S;a.value=b,(S=c.value)!=null&&S.initThumbnailCanvas(zt.type,w,b)},y=(b,w)=>{var S;l.value[w]=b,(S=c.value)!=null&&S.initThumbnailCanvas(at.type,w,b)},C=b=>{v(b)},E=b=>{v(b)};return Ot(()=>t.canvasManager,b=>{console.log("[Sidebar] canvasManager :",b),c.value?c.value.setCanvasManager(b):h()},{immediate:!0}),Et(()=>{u(),document.addEventListener("click",_)}),Nr(()=>{var b;(b=c.value)!=null&&b.dispose(),document.removeEventListener("click",_)}),(b,w)=>{const S=ka("el-button");return ce(),Se("div",{class:Pt(["sidebar",{"sidebar-collapsed":b.collapsed}]),onMouseenter:w[2]||(w[2]=$=>s.value=!0),onMouseleave:w[3]||(w[3]=$=>s.value=!1)},[P("div",BM,[P("div",jM,[P("div",zM,[P("div",HM,[dt(S,{type:"primary",onClick:p,disabled:!g.value,style:_n({backgroundColor:sn(Lt).PRIMARY}),class:"add-frame-button"},{default:ho(()=>w[4]||(w[4]=[P("div",{class:"button-content"},[P("span",null,[P("svg",{class:"plus-icon",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[P("path",{d:"M12 4V20M4 12H20",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})]),el("Add frame")])],-1)])),_:1},8,["disabled","style"])]),o.value?(ce(),Se("div",$M,[P("div",{class:"dropdown-item",onClick:m},w[5]||(w[5]=[P("svg",{class:"draw-icon",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[P("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM21.41 6.34l-3.75-3.75-2.53 2.54 3.75 3.75 2.53-2.54z",fill:"currentColor"})],-1),el(" Frame ")]))])):ft("",!0)]),w[6]||(w[6]=P("div",{class:"divider"},null,-1)),P("div",NM,[P("div",VM,[(ce(!0),Se(Ne,null,xn(i.value,($,N,H,U)=>{const ee=[$.id];if(U&&U.key===$.id&&fw(U,ee))return U;const re=(ce(),Se("div",{key:$.id,class:Pt(["frame-item",{overview:N===0}]),onClick:te=>N===0?C($):E($)},[N>0?(ce(),Se("div",WM,pn(N),1)):ft("",!0),P("div",YM,[P("div",{ref_for:!0,ref:te=>N===0?x(te,$.id):y(te,$.id),class:"canvas-container","data-frame-id":$.id},null,8,XM)]),P("div",UM,pn(N===0?"":` ${N}`),1)],10,["onClick"]));return re.memo=ee,re},w,0),128))])])])]),P("div",{class:Pt(["collapse-button",{show:s.value||b.collapsed}]),onClick:d},[P("span",GM,pn(b.collapsed?"":""),1)],2)],34)}}}),KM=Yn(qM,[["__scopeId","data-v-78e3d16d"]]),ZM={class:"canvas-container",ref:"containerRef"},JM=Re({__name:"BaseCanvas",emits:["canvas-ready"],setup(r,{expose:e,emit:t}){const n=t,s=G(null),i=G(null);let o=null;return Et(async()=>{await dr(),s.value&&i.value&&s.value.parentElement?(o=new IM(s.value,i.value,s.value.parentElement),await dr(),n("canvas-ready"),console.log("Canvas canvasManager ")):console.warn("Canvas  canvasManager")}),Nr(()=>{o==null||o.destroy(),o=null}),e({canvasManager:me(()=>o)}),(a,l)=>(ce(),Se("div",ZM,[P("canvas",{ref_key:"canvasRef",ref:s},null,512),P("canvas",{ref_key:"presentationCanvasRef",ref:i,class:"presentation-canvas"},null,512)],512))}}),QM=Yn(JM,[["__scopeId","data-v-090fcc12"]]),eP={class:"background-image-selector"},tP={class:"image-list-container"},nP={class:"image-grid"},rP=["onClick"],sP=["src","alt"],iP={key:0,class:"load-more-container"},oP={key:1,class:"loading-indicator"},aP=50,lP=1200,cP=2133,bm=300,uP=Re({__name:"BackgroundImageSelector",props:{canvas:{},target:{},position:{}},emits:["select-image"],setup(r){const e=r,t=G(null),n=G([]),s=G(1),i=G(!1),o=()=>{t.value&&t.value.click()},a=h=>{const d=h.target;if(d.files&&d.files[0]){const f=d.files[0],g=URL.createObjectURL(f),p=e.canvas;if(!p){URL.revokeObjectURL(g);return}console.log("",g),Qp(p,g),d.value=""}},l=async()=>{if(!i.value){i.value=!0;try{const h=await fetch(`https://picsum.photos/v2/list?page=${s.value}&limit=${aP}`);if(!h.ok)throw new Error(`HTTP error! status: ${h.status}`);const f=(await h.json()).map(g=>{const p=g.id,m=`https://picsum.photos/id/${p}/${cP}/${lP}`,v=`https://picsum.photos/id/${p}/${bm}/${bm}`;return{url:m,thumbnail:v,author:g.author||""}});n.value=[...n.value,...f],s.value++}catch(h){console.error(":",h)}finally{i.value=!1}}},c=()=>{l()},u=h=>{e.canvas&&Qp(e.canvas,h)};return Et(()=>{l()}),(h,d)=>(ce(),Se("div",eP,[d[2]||(d[2]=P("div",{class:"info-text"},[P("p",null,""),P("p",{class:"hint"}," JPGPNGSVG ")],-1)),P("button",{class:"select-button",onClick:o},"  "),P("input",{type:"file",ref_key:"fileInput",ref:t,accept:"image/*",style:{display:"none"},onChange:a},null,544),P("div",tP,[d[1]||(d[1]=P("h3",{class:"section-title"},"",-1)),P("div",nP,[(ce(!0),Se(Ne,null,xn(n.value,(f,g)=>(ce(),Se("div",{key:g,class:"image-item",onClick:p=>u(f.url)},[P("img",{src:f.thumbnail,alt:` ${g+1}`,class:"thumbnail"},null,8,sP)],8,rP))),128))]),i.value?ft("",!0):(ce(),Se("div",iP,[P("button",{class:"load-more-button",onClick:c},"")])),i.value?(ce(),Se("div",oP,d[0]||(d[0]=[P("span",null,"...",-1)]))):ft("",!0)])]))}}),hP=Yn(uP,[["__scopeId","data-v-a8564d03"]]),dP={class:"background-color-selector"},fP={class:"color-picker"},gP={class:"color-input-wrapper"},pP={class:"color-presets"},mP={class:"preset-grid"},vP=["onClick"],yP=Re({__name:"BackgroundColorSelector",props:{canvas:{},target:{},position:{}},setup(r){const e=r,t=G("#FFFFFF"),n=["#FFFFFF","#F5F5F5","#EEEEEE","#E0E0E0","#FFEBEE","#FCE4EC","#F3E5F5","#EDE7F6","#E8EAF6","#E3F2FD","#E1F5FE","#E0F7FA","#E0F2F1","#E8F5E9","#F1F8E9","#F9FBE7","#FFFDE7","#FFF8E1","#FFF3E0","#FBE9E7"],s=()=>{e.canvas&&IO(e.canvas,t.value)},i=o=>{t.value=o,s()};return(o,a)=>(ce(),Se("div",dP,[P("div",fP,[a[2]||(a[2]=P("label",{for:"color-input"},":",-1)),P("div",gP,[zr(P("input",{type:"color",id:"color-input","onUpdate:modelValue":a[0]||(a[0]=l=>t.value=l),onChange:s},null,544),[[nl,t.value]]),zr(P("input",{type:"text","onUpdate:modelValue":a[1]||(a[1]=l=>t.value=l),onChange:s,placeholder:"#FFFFFF"},null,544),[[nl,t.value]])])]),P("div",pP,[a[3]||(a[3]=P("h4",null,":",-1)),P("div",mP,[(ce(),Se(Ne,null,xn(n,l=>P("div",{key:l,class:"color-preset",style:_n({backgroundColor:l}),onClick:c=>i(l)},null,12,vP)),64))])])]))}}),bP=Yn(yP,[["__scopeId","data-v-aab8b53b"]]),_P="data:image/svg+xml,%3c?xml%20version='1.0'?%3e%3csvg%20width='30'%20height='40'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cg%20class='layer'%3e%3ctitle%20_mstHash='1'%20_mstTextHash='5637814'%3e%201%20%3c/title%3e%3cg%20fill='%23333333'%20id='svg_1'%20stroke='%23333333'%20stroke-width='2'%20transform='rotate(180%2015%2019.7952)'%3e%3c!--%20%20--%3e%3cpolygon%20id='svg_2'%20points='7.75571882724762,9.741044044494629%2016.73842203617096,19.741044998168945%207.75571882724762,29.741044998168945%2013.369908332824707,29.741044998168945%2022.352611541748047,19.741044998168945%2013.369908332824707,9.741044044494629%20'%20transform='rotate(90%2015%2019.741)'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",xP=Object.freeze(Object.defineProperty({__proto__:null,default:_P},Symbol.toStringTag,{value:"Module"})),CP="data:image/svg+xml,%3c?xml%20version='1.0'?%3e%3csvg%20width='30'%20height='40'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cg%20class='layer'%3e%3ctitle%20_mstHash='1'%20_mstTextHash='5637814'%3e%201%20%3c/title%3e%3cg%20fill='%23333333'%20id='svg_1'%20stroke='%23333333'%20stroke-width='2'%3e%3c!--%20%20--%3e%3cpolygon%20id='svg_2'%20points='7.75571882724762,9.741044044494629%2016.73842203617096,19.741044998168945%207.75571882724762,29.741044998168945%2013.369908332824707,29.741044998168945%2022.352611541748047,19.741044998168945%2013.369908332824707,9.741044044494629%20'%20transform='rotate(90%2015%2019.741)'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",wP=Object.freeze(Object.defineProperty({__proto__:null,default:CP},Symbol.toStringTag,{value:"Module"})),SP="data:image/svg+xml,%3c?xml%20version='1.0'?%3e%3csvg%20width='30'%20height='40'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cg%20class='layer'%3e%3ctitle%20_mstHash='1'%20_mstTextHash='5637814'%3e%201%20%3c/title%3e%3cg%20fill='%23333333'%20id='svg_1'%20stroke='%23333333'%20stroke-width='2'%20transform='rotate(-135%2015%2019.7952)'%3e%3c!--%20%20--%3e%3cpolygon%20id='svg_2'%20points='7.75571882724762,9.741044044494629%2016.73842203617096,19.741044998168945%207.75571882724762,29.741044998168945%2013.369908332824707,29.741044998168945%2022.352611541748047,19.741044998168945%2013.369908332824707,9.741044044494629%20'%20transform='rotate(90%2015%2019.741)'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",TP=Object.freeze(Object.defineProperty({__proto__:null,default:SP},Symbol.toStringTag,{value:"Module"})),OP="data:image/svg+xml,%3c?xml%20version='1.0'?%3e%3csvg%20width='30'%20height='40'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cg%20class='layer'%3e%3ctitle%20_mstHash='1'%20_mstTextHash='5637814'%3e%201%20%3c/title%3e%3cg%20fill='%23333333'%20id='svg_1'%20stroke='%23333333'%20stroke-width='2'%20transform='rotate(-45%2015%2019.7952)'%3e%3c!--%20%20--%3e%3cpolygon%20id='svg_2'%20points='7.75571882724762,9.741044044494629%2016.73842203617096,19.741044998168945%207.75571882724762,29.741044998168945%2013.369908332824707,29.741044998168945%2022.352611541748047,19.741044998168945%2013.369908332824707,9.741044044494629%20'%20transform='rotate(90%2015%2019.741)'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",EP=Object.freeze(Object.defineProperty({__proto__:null,default:OP},Symbol.toStringTag,{value:"Module"})),MP="data:image/svg+xml,%3c?xml%20version='1.0'?%3e%3csvg%20width='30'%20height='40'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cg%20class='layer'%3e%3ctitle%20_mstHash='1'%20_mstTextHash='5637814'%3e%201%20%3c/title%3e%3cg%20fill='%23333333'%20id='svg_1'%20stroke='%23333333'%20stroke-width='2'%20transform='rotate(-90%2015%2019.7952)'%3e%3c!--%20%20--%3e%3cpolygon%20id='svg_2'%20points='7.75571882724762,9.741044044494629%2016.73842203617096,19.741044998168945%207.75571882724762,29.741044998168945%2013.369908332824707,29.741044998168945%2022.352611541748047,19.741044998168945%2013.369908332824707,9.741044044494629%20'%20transform='rotate(90%2015%2019.741)'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",PP=Object.freeze(Object.defineProperty({__proto__:null,default:MP},Symbol.toStringTag,{value:"Module"})),AP="data:image/svg+xml,%3c?xml%20version='1.0'?%3e%3csvg%20width='30'%20height='40'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cg%20class='layer'%3e%3ctitle%20_mstHash='1'%20_mstTextHash='5637814'%3e%201%20%3c/title%3e%3cg%20fill='%23333333'%20id='svg_1'%20stroke='%23333333'%20stroke-width='2'%20transform='rotate(90%2015%2019.7952)'%3e%3c!--%20%20--%3e%3cpolygon%20id='svg_2'%20points='7.75571882724762,9.741044044494629%2016.73842203617096,19.741044998168945%207.75571882724762,29.741044998168945%2013.369908332824707,29.741044998168945%2022.352611541748047,19.741044998168945%2013.369908332824707,9.741044044494629%20'%20transform='rotate(90%2015%2019.741)'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",FP=Object.freeze(Object.defineProperty({__proto__:null,default:AP},Symbol.toStringTag,{value:"Module"})),kP="data:image/svg+xml,%3c?xml%20version='1.0'?%3e%3csvg%20width='30'%20height='40'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cg%20class='layer'%3e%3ctitle%20_mstHash='1'%20_mstTextHash='5637814'%3e%201%20%3c/title%3e%3cg%20fill='%23333333'%20id='svg_1'%20stroke='%23333333'%20stroke-width='2'%20transform='rotate(135%2015%2019.7952)'%3e%3c!--%20%20--%3e%3cpolygon%20id='svg_2'%20points='7.75571882724762,9.741044044494629%2016.73842203617096,19.741044998168945%207.75571882724762,29.741044998168945%2013.369908332824707,29.741044998168945%2022.352611541748047,19.741044998168945%2013.369908332824707,9.741044044494629%20'%20transform='rotate(90%2015%2019.741)'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",RP=Object.freeze(Object.defineProperty({__proto__:null,default:kP},Symbol.toStringTag,{value:"Module"})),DP="data:image/svg+xml,%3c?xml%20version='1.0'?%3e%3csvg%20width='30'%20height='40'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cg%20class='layer'%3e%3ctitle%20_mstHash='1'%20_mstTextHash='5637814'%3e%201%20%3c/title%3e%3cg%20fill='%23333333'%20id='svg_1'%20stroke='%23333333'%20stroke-width='2'%20transform='rotate(45%2015%2019.7952)'%3e%3c!--%20%20--%3e%3cpolygon%20id='svg_2'%20points='7.75571882724762,9.741044044494629%2016.73842203617096,19.741044998168945%207.75571882724762,29.741044998168945%2013.369908332824707,29.741044998168945%2022.352611541748047,19.741044998168945%2013.369908332824707,9.741044044494629%20'%20transform='rotate(90%2015%2019.741)'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",IP=Object.freeze(Object.defineProperty({__proto__:null,default:DP},Symbol.toStringTag,{value:"Module"})),LP={class:"insert-image-selector"},BP={class:"image-list-container"},jP={class:"image-grid"},zP=["onClick"],HP=["src","alt"],$P={class:"image-list-container"},NP={class:"image-grid"},VP=["onClick"],WP=["src","alt"],YP={key:0,class:"load-more-container"},XP={key:1,class:"loading-indicator"},UP=50,_m=1200,xm=300,GP=Re({__name:"InsertImageSelector",props:{canvas:{},canvasManager:{},target:{},position:{},action:{}},setup(r){const e=G([]),t=r,n=G(null),s=G([]),i=G(1),o=G(!1),a=()=>{n.value&&n.value.click()},l=f=>{const g=f.target;if(g.files&&g.files[0]){const p=g.files[0],m=URL.createObjectURL(p);t.canvasManager.getControlsManager().addImage(m),g.value=""}},c=async()=>{try{const f=Object.assign({"/public/svg/.svg":xP,"/public/svg/.svg":wP,"/public/svg/.svg":TP,"/public/svg/.svg":EP,"/public/svg/.svg":PP,"/public/svg/.svg":FP,"/public/svg/.svg":RP,"/public/svg/.svg":IP});console.log("svgContext",f);const g=Object.entries(f).map(([p,m])=>({url:m.default}));console.log("svgContext images",g),e.value=g}catch(f){console.error(":",f)}},u=async()=>{if(!o.value){o.value=!0;try{const f=await fetch(`https://picsum.photos/v2/list?page=${i.value}&limit=${UP}`);if(!f.ok)throw new Error(`HTTP error! status: ${f.status}`);const p=(await f.json()).map(m=>{const v=m.id,_=`https://picsum.photos/id/${v}/${_m}/${_m}`,x=`https://picsum.photos/id/${v}/${xm}/${xm}`;return{url:_,thumbnail:x,author:m.author||""}});s.value=[...s.value,...p],i.value++}catch(f){console.error(":",f)}finally{o.value=!1}}},h=()=>{u()},d=f=>{t.canvasManager&&(t.action&&t.action===ye.PANEL_ACTION.REPLACE_IMAGE?t.target&&t.target.replaceImage&&t.target.replaceImage(f):t.canvasManager.getControlsManager().addImage(f))};return Et(()=>{c(),u()}),(f,g)=>(ce(),Se("div",LP,[g[3]||(g[3]=P("div",{class:"info-text"},[P("p",null,""),P("p",{class:"hint"}," JPGPNGSVG ")],-1)),P("button",{class:"select-button",onClick:a},"  "),P("input",{type:"file",ref_key:"fileInput",ref:n,accept:"image/*",style:{display:"none"},onChange:l},null,544),P("div",BP,[g[0]||(g[0]=P("h3",{class:"section-title"},"",-1)),P("div",jP,[(ce(!0),Se(Ne,null,xn(e.value,(p,m)=>(ce(),Se("div",{key:m,class:"image-item",onClick:v=>d(p.url)},[P("img",{src:p.url,alt:` ${m+1}`,class:"thumbnail"},null,8,HP)],8,zP))),128))])]),P("div",$P,[g[2]||(g[2]=P("h3",{class:"section-title"},"",-1)),P("div",NP,[(ce(!0),Se(Ne,null,xn(s.value,(p,m)=>(ce(),Se("div",{key:m,class:"image-item",onClick:v=>d(p.url)},[P("img",{src:p.thumbnail,alt:` ${m+1}`,class:"thumbnail"},null,8,WP)],8,VP))),128))]),o.value?ft("",!0):(ce(),Se("div",YP,[P("button",{class:"load-more-button",onClick:h},"")])),o.value?(ce(),Se("div",XP,g[1]||(g[1]=[P("span",null,"...",-1)]))):ft("",!0)])]))}}),qP=Yn(GP,[["__scopeId","data-v-44d17c8a"]]),KP={class:"panel-content"},ZP={class:"panel-header"},JP={class:"panel-body"},QP=Re({__name:"ControlPanel",props:{collapsed:{type:Boolean},panelData:{}},emits:["update:collapsed"],setup(r,{emit:e}){const t=r,n=e,s=mu(null),i=G(""),o=G(""),a=G({canvas:null,target:null,position:null});Ot(()=>t.panelData,u=>{u&&(i.value=u.type,o.value=u.action,a.value={canvas:u.canvas,target:u.target,position:u.position,canvasManager:u.canvasManager},u.type===ye.PANEL_TYPE.BACKGROUND_IMAGE?s.value=hP:u.type===ye.PANEL_TYPE.BACKGROUND_COLOR?s.value=bP:u.type===ye.PANEL_TYPE.INSERT_IMAGE&&(s.value=qP))},{immediate:!0});const l=()=>{n("update:collapsed",!0)},c=me(()=>{switch(i.value){case ye.PANEL_TYPE.BACKGROUND_IMAGE:return"";case ye.PANEL_TYPE.BACKGROUND_COLOR:return"";case ye.PANEL_TYPE.INSERT_IMAGE:return o.value&&o.value===ye.PANEL_ACTION.REPLACE_IMAGE?"":"";default:return""}});return(u,h)=>(ce(),Se("div",{class:Pt(["control-panel",{"panel-collapsed":u.collapsed}])},[P("div",KP,[P("div",ZP,[P("h3",null,pn(c.value),1),P("button",{class:"close-button",onClick:l},h[0]||(h[0]=[P("span",{class:"close-icon"},"",-1)]))]),P("div",JP,[s.value?(ce(),Nt(s0(s.value),{key:0,canvas:a.value.canvas,action:o.value,target:a.value.target,position:a.value.position,canvasManager:a.value.canvasManager},null,8,["canvas","action","target","position","canvasManager"])):ft("",!0)])])],2))}}),eA=Yn(QP,[["__scopeId","data-v-576e24b2"]]),tA={"Microsoft YaHei":"","Microsoft YaHei UI":" UI",SimSun:"",SimHei:"",KaiTi:"",FangSong:"",STXihei:"",STKaiti:"",STSong:"",STFangsong:"",STZhongsong:"",STHupo:"",STXinwei:"",STLiti:"",FZShuTi:"",FZYaoti:"",YouYuan:"",LiSu:"",NSimSun:"","DFKai-SB":"","Source Han Sans CN":"","Source Han Serif CN":"","Noto Sans SC":"Noto Sans ","Noto Serif SC":"Noto Serif ","PingFang SC":"-","Hiragino Sans GB":"","WenQuanYi Micro Hei":"","WenQuanYi Zen Hei":"",HYQiHei:"",HYKaiti:"",HYZhuoKai:"",HYLeMiao:"",HYXiaoMaiTi:"",HYCuYuan:"",HYDaSongJ:"",HYShangWeiShouShuW:"W",MingLiU:"",PMingLiU:"","MingLiU-ExtB":"-ExtB","PMingLiU-ExtB":"-ExtB",MingLiU_HKSCS:"_HKSCS","MingLiU_HKSCS-ExtB":"_HKSCS-ExtB","SimSun-ExtB":"-ExtB",FangSong_GB2312:"_GB2312",KaiTi_GB2312:"_GB2312",Dengxian:"","Dengxian Light":" Light","Founder Type":"","Founder Clear Song":"","Founder Black Body":"","Founder Thin":"","Founder Compact":"","Founder Cute":"","Founder Handwriting":"","Founder Elegant":"","Founder Super":"","Founder Shao":"","Founder Simplified":"","Founder Imitation Song":"","Founder Regular Script":"","Founder Small":"","Founder Xin":"","Founder Yan":"","Founder Fang":"","Founder Song":"","Founder Old":"",Arial:"Arial ","Arial Black":"Arial ","Comic Sans MS":"Comic Sans ","Courier New":"Courier New ",Georgia:"Georgia ",Impact:"Impact ","Times New Roman":"Times New Roman ","Trebuchet MS":"Trebuchet MS ",Verdana:"Verdana ",Webdings:"Webdings ",Wingdings:"Wingdings ",Calibri:"Calibri ",Cambria:"Cambria ",Consolas:"Consolas ","Segoe UI":"Segoe UI ",Tahoma:"Tahoma ",Helvetica:"Helvetica ","Helvetica Neue":"Helvetica Neue ","Lucida Sans":"Lucida Sans ","Lucida Console":"Lucida Console ",Monaco:"Monaco ","Palatino Linotype":"Palatino Linotype ","Book Antiqua":"Book Antiqua ",Garamond:"Garamond ","Century Gothic":"Century Gothic ","Franklin Gothic":"Franklin Gothic ",Copperplate:"Copperplate ",Papyrus:"Papyrus ","Brush Script MT":"Brush Script MT "};async function nA(){try{if("queryLocalFonts"in window){const e=(await window.queryLocalFonts()).map(s=>({label:tA[s.family]||s.family,value:s.family})),t=[],n=new Map;for(const s of e)n.has(s.value.toLowerCase())||(n.set(s.value.toLowerCase(),!0),t.push(s));return t}else return console.warn("queryLocalFonts API"),[]}catch(r){return console.error(":",r),[]}}const rA=[{label:"",value:"Microsoft YaHei"},{label:"",value:"SimSun"},{label:"",value:"SimHei"},{label:"",value:"KaiTi"},{label:"",value:"FangSong"},{label:"Arial ",value:"Arial"},{label:"Times New Roman ",value:"Times New Roman"},{label:"Courier New ",value:"Courier New"}],sA={class:"color-picker-panel"},iA={class:"color-category"},oA={class:"color-options"},aA=["onClick"],lA={class:"color-category"},cA={class:"color-options"},uA=["onClick"],hA={class:"color-category"},dA={class:"color-options"},fA=["onClick"],gA={class:"color-category"},pA={class:"color-options"},mA={class:"color-category"},vA={class:"custom-color-picker"},yA={class:"color-input-group"},bA=["value"],_A={class:"color-category"},xA={class:"opacity-control"},CA={class:"opacity-value"},wA=Re({__name:"ColorPicker",props:{color:{},opacity:{}},emits:["update:color","update:opacity","select"],setup(r,{emit:e}){const t=r,n=e,s=G(t.color),i=G(t.opacity??1),o=G(t.color==="transparent"?"":t.color),a=G(null);Et(()=>{a.value&&s.value!=="transparent"&&(a.value.value=s.value)}),Ot(()=>t.color,g=>{s.value=g,o.value=g==="transparent"?"":g}),Ot(()=>t.opacity,g=>{g!==void 0&&(i.value=g)},{immediate:!0});const l=()=>{n("update:opacity",i.value)},c=g=>{s.value=g,o.value=g==="transparent"?"":g,n("update:color",g),n("select",g,i.value)},u=g=>{const p=g.target;o.value=p.value,s.value=p.value,n("update:color",p.value)},h=g=>{const p=g.target;/^#[0-9A-F]{6}$/i.test(p.value)&&a.value&&(a.value.value=p.value)},d=()=>{(!o.value||!/^#[0-9A-F]{6}$/i.test(o.value))&&(o.value=s.value==="transparent"?"#000000":s.value)},f=()=>{/^#[0-9A-F]{6}$/i.test(o.value)&&c(o.value)};return(g,p)=>(ce(),Se("div",sA,[P("div",iA,[p[5]||(p[5]=P("div",{class:"category-title"},"",-1)),P("div",oA,[(ce(!0),Se(Ne,null,xn(sn(Na).GRADIENT_COLORS,m=>(ce(),Se("div",{key:m,class:"color-option",style:_n({backgroundColor:m}),onClick:v=>c(m)},null,12,aA))),128))])]),P("div",lA,[p[6]||(p[6]=P("div",{class:"category-title"},"UI",-1)),P("div",cA,[(ce(!0),Se(Ne,null,xn(sn(Na).FLAT_UI_COLORS.slice(0,10),m=>(ce(),Se("div",{key:m,class:"color-option",style:_n({backgroundColor:m}),onClick:v=>c(m)},null,12,uA))),128))])]),P("div",hA,[p[7]||(p[7]=P("div",{class:"category-title"},"",-1)),P("div",dA,[(ce(!0),Se(Ne,null,xn(sn(Na).TRADITIONAL_CHINESE_COLORS.slice(0,10),m=>(ce(),Se("div",{key:m,class:"color-option",style:_n({backgroundColor:m}),onClick:v=>c(m)},null,12,fA))),128))])]),P("div",gA,[p[8]||(p[8]=P("div",{class:"category-title"},"",-1)),P("div",pA,[P("div",{class:"color-option",style:{"background-color":"#000000"},onClick:p[0]||(p[0]=m=>c("#000000"))}),P("div",{class:"color-option",style:{"background-color":"#FFFFFF"},onClick:p[1]||(p[1]=m=>c("#FFFFFF"))}),P("div",{class:"color-option transparent",onClick:p[2]||(p[2]=m=>c("transparent"))})])]),P("div",mA,[p[9]||(p[9]=P("div",{class:"category-title"},"",-1)),P("div",vA,[P("div",yA,[P("input",{type:"color",ref_key:"colorPickerInput",ref:a,value:s.value==="transparent"?"#000000":s.value,onInput:u,class:"color-input"},null,40,bA),zr(P("input",{type:"text","onUpdate:modelValue":p[3]||(p[3]=m=>o.value=m),onInput:h,onBlur:d,class:"color-text-input",placeholder:"#RRGGBB"},null,544),[[nl,o.value]])])])]),P("div",_A,[p[10]||(p[10]=P("div",{class:"category-title"},"",-1)),P("div",xA,[zr(P("input",{type:"range",min:"0",max:"1",step:"0.05","onUpdate:modelValue":p[4]||(p[4]=m=>i.value=m),onInput:l,class:"opacity-slider"},null,544),[[nl,i.value]]),P("div",CA,pn(Math.round(i.value*100))+"%",1)])]),P("button",{class:"apply-color-btn",onClick:f},"")]))}}),bc=Yn(wA,[["__scopeId","data-v-a75b1ecf"]]),SA={class:"toolbar-buttons"},TA={class:"text-style-control"},OA=["value"],EA={class:"font-family-control"},MA=["value"],PA={class:"font-size-control"},AA={class:"align-control"},FA={key:0,class:"align-menu"},kA={class:"align-menu-inner"},RA={class:"color-selector"},DA={class:"color-selector"},IA={class:"color-selector"},LA=Re({__name:"TextSettingToolbar",props:{canvasManager:{},panelData:{}},setup(r){const e=r,t=G(!1),n=G(null),s=G({top:0,left:0}),i=G(!1),o=G(!1),a=G(!1),l=G(!1),c=G(!1),u=G(!1),h=G(16),d=G("#000000"),f=G("transparent"),g=G("transparent"),p=G("left"),m=G(!1),v=G("Arial"),_=G("normal"),x=G(!1),y=G(!1),C=[{label:"",value:"normal"},{label:"1",value:"heading1"},{label:"2",value:"heading2"},{label:"3",value:"heading3"},{label:"4",value:"heading4"},{label:"",value:"quote"},{label:"",value:"code"}],E=G([...rA]),b=async()=>{nA().then(M=>{E.value=M}).catch(M=>{console.error(":",M),alert("")})},w=M=>{R(M),i.value=!1},S=M=>{ue(M),o.value=!1},$=M=>{de(M),a.value=!1},N=me(()=>({top:`${s.value.top}px`,left:`${s.value.left}px`})),H=()=>{if(!n.value)return;const M=n.value;l.value=M.fontWeight==="bold",c.value=M.fontStyle==="italic",u.value=M.underline===!0,h.value=M.fontSize||16,d.value=M.fill||"#000000",f.value=M.textBackgroundColor||"transparent",g.value=M.backgroundColor||"transparent",p.value=M.textAlign||"left",v.value=M.fontFamily||"Arial",x.value=M.listStyle==="unordered",y.value=M.listStyle==="ordered",M.fontSize>=40?_.value="heading1":M.fontSize>=32?_.value="heading2":M.fontSize>=24?_.value="heading3":M.fontSize>=18?_.value="heading4":_.value="normal"},U=()=>{var B;if(!n.value)return;const M=n.value,D=M.fontWeight==="bold"?"normal":"bold";M.set("fontWeight",D),l.value=D==="bold",(B=e.canvasManager)==null||B.canvas.renderAll()},ee=()=>{var B;if(!n.value)return;const M=n.value,D=M.fontStyle==="italic"?"normal":"italic";M.set("fontStyle",D),c.value=D==="italic",(B=e.canvasManager)==null||B.canvas.renderAll()},re=()=>{var B;if(!n.value)return;const M=n.value,D=!M.underline;M.set("underline",D),u.value=D,(B=e.canvasManager)==null||B.canvas.renderAll()},te=()=>{if(!n.value)return;const M=n.value,D=Math.min((M.fontSize||16)+1,1e3);M.setFontSize(D,!0),h.value=D},z=()=>{if(!n.value)return;const M=n.value,D=Math.min((M.fontSize||16)-1,1e3);M.setFontSize(D,!0),h.value=D},R=M=>{var B;if(!n.value)return;n.value.set("fill",M),d.value=M,i.value=!1,(B=e.canvasManager)==null||B.canvas.renderAll()},ue=M=>{var B;if(!n.value)return;n.value.set("textBackgroundColor",M),f.value=M,o.value=!1,(B=e.canvasManager)==null||B.canvas.renderAll()},de=M=>{if(!n.value)return;n.value.set("backgroundColor",M),g.value=M,a.value=!1},Ce=M=>{if(!n.value)return;n.value.set("textAlign",M),p.value=M,m.value=!1},fe=()=>{if(!n.value)return;const M=n.value;typeof M.setListStyle=="function"&&(x.value=!x.value,x.value?(y.value=!1,M.setListStyle("unordered")):M.setListStyle("none"))},$e=()=>{var D;if(!n.value)return;const M=n.value;typeof M.setListStyle=="function"&&(y.value=!y.value,y.value?(x.value=!1,M.setListStyle("ordered")):M.setListStyle("none"),(D=e.canvasManager)==null||D.canvas.renderAll())},Te=()=>{var D;if(!n.value)return;n.value.set("fontFamily",v.value),(D=e.canvasManager)==null||D.canvas.renderAll()},De=()=>{var D;if(!n.value)return;const M=n.value;switch(_.value){case"heading1":M.applyTextStyle({fontSize:40,fontWeight:"bold"}),h.value=40,l.value=!0;break;case"heading2":M.applyTextStyle({fontSize:32,fontWeight:"bold"}),h.value=32,l.value=!0;break;case"heading3":M.applyTextStyle({fontSize:24,fontWeight:"bold"}),h.value=24,l.value=!0;break;case"heading4":M.applyTextStyle({fontSize:18,fontWeight:"bold"}),h.value=18,l.value=!0;break;case"quote":M.applyTextStyle({fontStyle:"italic",textBackgroundColor:"#f0f0f0"}),c.value=!0,f.value="#f0f0f0";break;case"code":M.applyTextStyle({fontFamily:"Courier New",textBackgroundColor:"#f5f5f5"}),v.value="Courier New",f.value="#f5f5f5";break;case"normal":default:M.applyTextStyle({fontSize:16,fontWeight:"normal",fontStyle:"normal",textBackgroundColor:"transparent"}),h.value=16,l.value=!1,c.value=!1,f.value="transparent";break}(D=e.canvasManager)==null||D.canvas.renderAll()},ve=()=>{var Y;if(!n.value||!((Y=e.canvasManager)!=null&&Y.canvas))return;const M=e.canvasManager.canvas,B=n.value.getBoundingRect(),se=M.getZoom(),Me=M.viewportTransform;if(!Me)return;const T=B.left*se+Me[4],O=B.top*se+Me[5];B.width*se,B.height*se;const L=document.querySelector(".text-format-toolbar"),q=L?L.offsetWidth:300,Z=L?L.offsetHeight:50,k=window.innerWidth,V=window.innerHeight;let K=T-q/2,W=O-Z-15;K=Math.max(10,Math.min(K,k-q-10)),W=Math.max(10,Math.min(W,V-Z-10)),s.value={left:K,top:W}};return Et(()=>{b(),document.addEventListener("click",M=>{(i.value||o.value)&&!M.composedPath().some(D=>{var B;return(B=D.classList)==null?void 0:B.contains("color-selector")})&&(i.value=!1,o.value=!1,a.value=!1)}),document.addEventListener("click",M=>{M.composedPath().some(D=>{var B;return(B=D.classList)==null?void 0:B.contains("align-control")})||(m.value=!1)})}),Nr(()=>{document.removeEventListener("click",()=>{})}),Ot(()=>e.panelData,M=>{M&&M.target&&(n.value=M.target,t.value=!0,H(),ve())},{immediate:!0}),(M,D)=>t.value?(ce(),Se("div",{key:0,class:"text-format-toolbar",style:_n(N.value)},[P("div",SA,[P("div",TA,[zr(P("select",{"onUpdate:modelValue":D[0]||(D[0]=B=>_.value=B),onChange:De},[(ce(),Se(Ne,null,xn(C,B=>P("option",{key:B.value,value:B.value},pn(B.label),9,OA)),64))],544),[[ad,_.value]])]),D[25]||(D[25]=P("div",{class:"divider"},null,-1)),P("button",{onClick:U,class:Pt({active:l.value}),title:""},D[13]||(D[13]=[P("i",{class:"fas fa-bold"},null,-1)]),2),P("button",{onClick:ee,class:Pt({active:c.value}),title:""},D[14]||(D[14]=[P("i",{class:"fas fa-italic"},null,-1)]),2),P("button",{onClick:re,class:Pt({active:u.value}),title:""},D[15]||(D[15]=[P("i",{class:"fas fa-underline"},null,-1)]),2),D[26]||(D[26]=P("div",{class:"divider"},null,-1)),P("div",EA,[zr(P("select",{"onUpdate:modelValue":D[1]||(D[1]=B=>v.value=B),onChange:Te},[(ce(!0),Se(Ne,null,xn(E.value,B=>(ce(),Se("option",{key:B.value,value:B.value},pn(B.label),9,MA))),128))],544),[[ad,v.value]])]),D[27]||(D[27]=P("div",{class:"divider"},null,-1)),P("div",PA,[P("button",{onClick:z,title:""},D[16]||(D[16]=[P("i",{class:"fas fa-minus"},null,-1)])),P("span",null,pn(h.value),1),P("button",{onClick:te,title:""},D[17]||(D[17]=[P("i",{class:"fas fa-plus"},null,-1)]))]),D[28]||(D[28]=P("div",{class:"divider"},null,-1)),P("div",AA,[P("button",{onClick:D[2]||(D[2]=B=>m.value=!m.value),class:Pt({active:m.value}),title:""},D[18]||(D[18]=[P("i",{class:"fas fa-align-left"},null,-1)]),2),m.value?(ce(),Se("div",FA,[P("div",kA,[P("button",{onClick:D[3]||(D[3]=B=>Ce("left")),class:Pt({active:p.value==="left"}),title:""},D[19]||(D[19]=[P("i",{class:"fas fa-align-left"},null,-1)]),2),P("button",{onClick:D[4]||(D[4]=B=>Ce("center")),class:Pt({active:p.value==="center"}),title:""},D[20]||(D[20]=[P("i",{class:"fas fa-align-center"},null,-1)]),2),P("button",{onClick:D[5]||(D[5]=B=>Ce("right")),class:Pt({active:p.value==="right"}),title:""},D[21]||(D[21]=[P("i",{class:"fas fa-align-right"},null,-1)]),2),P("button",{onClick:D[6]||(D[6]=B=>Ce("justify")),class:Pt({active:p.value==="justify"}),title:""},D[22]||(D[22]=[P("i",{class:"fas fa-align-justify"},null,-1)]),2)])])):ft("",!0)]),D[29]||(D[29]=P("div",{class:"divider"},null,-1)),P("button",{onClick:fe,class:Pt({active:x.value}),title:""},D[23]||(D[23]=[P("i",{class:"fas fa-list-ul"},null,-1)]),2),P("button",{onClick:$e,class:Pt({active:y.value}),title:""},D[24]||(D[24]=[P("i",{class:"fas fa-list-ol"},null,-1)]),2),D[30]||(D[30]=P("div",{class:"divider"},null,-1)),P("div",RA,[P("button",{onClick:D[7]||(D[7]=B=>i.value=!i.value),title:""},[P("div",{class:"color-preview",style:_n({backgroundColor:d.value})},null,4)]),i.value?(ce(),Nt(bc,{key:0,color:d.value,"onUpdate:color":D[8]||(D[8]=B=>d.value=B),onSelect:w},null,8,["color"])):ft("",!0)]),P("div",DA,[P("button",{onClick:D[9]||(D[9]=B=>o.value=!o.value),title:""},[P("div",{class:"color-preview bg-color-preview",style:_n({backgroundColor:f.value})},null,4)]),o.value?(ce(),Nt(bc,{key:0,color:f.value,"onUpdate:color":D[10]||(D[10]=B=>f.value=B),onSelect:S},null,8,["color"])):ft("",!0)]),P("div",IA,[P("button",{onClick:D[11]||(D[11]=B=>a.value=!a.value),title:""},[P("div",{class:"color-preview box-bg-color-preview",style:_n({backgroundColor:g.value})},null,4)]),a.value?(ce(),Nt(bc,{key:0,color:g.value,"onUpdate:color":D[12]||(D[12]=B=>g.value=B),onSelect:$},null,8,["color"])):ft("",!0)])])],4)):ft("",!0)}}),BA=Yn(LA,[["__scopeId","data-v-c69e5711"]]),jA={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},zA=Re({name:"RoundedCornerOutlined",render:function(e,t){return ce(),Se("svg",jA,t[0]||(t[0]=[P("path",{d:"M19 19h2v2h-2v-2zm0-2h2v-2h-2v2zM3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm0-4h2V3H3v2zm4 0h2V3H7v2zm8 16h2v-2h-2v2zm-4 0h2v-2h-2v2zm4 0h2v-2h-2v2zm-8 0h2v-2H7v2zm-4 0h2v-2H3v2zM21 8c0-2.76-2.24-5-5-5h-5v2h5c1.65 0 3 1.35 3 3v5h2V8z",fill:"currentColor"},null,-1)]))}}),HA={class:"toolbar-buttons"},$A={class:"filter-control"},NA=["value"],VA={class:"fill-color-container"},WA={class:"button-content"},YA={key:0,class:"corner-radius-panel"},XA={class:"corner-radius-grid"},UA={class:"corner-radius-item"},GA={class:"input-with-unit"},qA={class:"corner-radius-item"},KA={class:"input-with-unit"},ZA={class:"corner-radius-item"},JA={class:"input-with-unit"},QA={class:"corner-radius-item"},eF={class:"input-with-unit"},tF={class:"corner-radius-actions"},nF={class:"opacity-control"},rF=Re({__name:"ImageSettingToolbar",props:{canvasManager:{},panelData:{}},setup(r){const e=r,t=G(!1),n=G(null),s=G({top:0,left:0}),i=G("none"),o=G(!1),a=G("#FFFFFF"),l=G(.3),c=G(!1),u=G(!1),h=G(!1),d=G({topLeft:0,topRight:0,bottomLeft:0,bottomRight:0}),f=G(1),g=[{label:"",value:"none"},{label:"",value:"grayscale"},{label:"",value:"sepia"},{label:"",value:"invert"},{label:"",value:"blur"},{label:"",value:"sharpen"}],p=me(()=>({top:`${s.value.top}px`,left:`${s.value.left}px`})),m=(z,R)=>{_(z,R),c.value=!1},v=()=>{c.value=!c.value},_=(z,R=.3)=>{var de;if(!n.value)return;n.value.setFillColor(z,R),a.value=z,(de=e.canvasManager)==null||de.canvas.requestRenderAll()},x=()=>{if(!n.value)return;const z=n.value;if(i.value=C(z)||"none",z.getFillColor){const R=z.getFillColor();o.value=!!R.color,a.value=R.color||"#FFFFFF",l.value=R.opacity}else o.value=!!z.fill,a.value=z.fill||"#FFFFFF";y(z),f.value=z.opacity!==void 0?z.opacity:1},y=z=>{const R=z.getCornerRadius?z.getCornerRadius():{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0};u.value=Object.values(R).some(ue=>ue>0)},C=z=>{if(!z.filters||z.filters.length===0)return"none";const R=z.filters[0];return R?R instanceof xr.Grayscale?"grayscale":R instanceof xr.Sepia?"sepia":R instanceof xr.Invert?"invert":R instanceof xr.Blur?"blur":R instanceof xr.Convolute&&R.matrix?"sharpen":"none":"none"},E=()=>{var ue;if(!n.value)return;const z=n.value,R=[];switch(i.value){case"grayscale":R.push(new xr.Grayscale);break;case"sepia":R.push(new xr.Sepia);break;case"invert":R.push(new xr.Invert);break;case"blur":R.push(new xr.Blur({blur:.25}));break;case"sharpen":R.push(new xr.Convolute({matrix:[0,-1,0,-1,5,-1,0,-1,0]}));break}z.filters=R,z.applyFilters(),(ue=e.canvasManager)==null||ue.canvas.renderAll()},b=()=>{if(h.value=!h.value,h.value&&n.value){const R=n.value.getCornerRadius();d.value={topLeft:R.topLeft,topRight:R.topRight,bottomLeft:R.bottomLeft,bottomRight:R.bottomRight}}},w=()=>{if(!n.value)return;const z=n.value;z.setCornerRadii({topLeft:d.value.topLeft,topRight:d.value.topRight,bottomRight:d.value.bottomRight,bottomLeft:d.value.bottomLeft}),y(z)},S=()=>{if(!n.value)return;const z=Math.max(d.value.topLeft,d.value.topRight,d.value.bottomLeft,d.value.bottomRight);d.value={topLeft:z,topRight:z,bottomLeft:z,bottomRight:z},w()},$=()=>{n.value&&(d.value={topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},w())},N=()=>{b()},H=()=>{var R;if(!n.value)return;n.value.set("opacity",f.value),(R=e.canvasManager)==null||R.canvas.renderAll()},U=()=>{var R;if(!n.value)return;const z=n.value;z.set("flipX",!z.flipX),(R=e.canvasManager)==null||R.canvas.renderAll()},ee=()=>{var R;if(!n.value)return;const z=n.value;z.set("flipY",!z.flipY),(R=e.canvasManager)==null||R.canvas.renderAll()},re=()=>{var z;Ae.emit(ye.CONTROL_PANEL.OPEN,{type:ye.PANEL_TYPE.INSERT_IMAGE,action:ye.PANEL_ACTION.REPLACE_IMAGE,canvas:(z=e.canvasManager)==null?void 0:z.canvas,canvasManager:e.canvasManager,target:n.value,position:null})},te=()=>{var Me;if(!n.value||!((Me=e.canvasManager)!=null&&Me.canvas))return;const z=e.canvasManager.canvas,ue=n.value.getBoundingRect(),de=z.getZoom(),Ce=z.viewportTransform;if(!Ce)return;const fe=ue.left*de+Ce[4],$e=ue.top*de+Ce[5];ue.width*de,ue.height*de;const Te=document.querySelector(".image-format-toolbar"),De=Te?Te.offsetWidth:300,ve=Te?Te.offsetHeight:50,M=window.innerWidth,D=window.innerHeight;let B=fe-De/2,se=$e-ve-15;B=Math.max(10,Math.min(B,M-De-10)),se=Math.max(10,Math.min(se,D-ve-10)),s.value={left:B,top:se}};return Ot(()=>e.panelData,z=>{z&&z.target&&(n.value=z.target,t.value=!0,x(),te())},{immediate:!0}),Et(()=>{}),(z,R)=>{const ue=ka("n-icon"),de=ka("n-input-number"),Ce=ka("n-button");return t.value?(ce(),Se("div",{key:0,class:"image-format-toolbar",style:_n(p.value)},[P("div",HA,[P("div",$A,[zr(P("select",{"onUpdate:modelValue":R[0]||(R[0]=fe=>i.value=fe),onChange:E},[(ce(),Se(Ne,null,xn(g,fe=>P("option",{key:fe.value,value:fe.value},pn(fe.label),9,NA)),64))],544),[[ad,i.value]])]),R[23]||(R[23]=P("div",{class:"divider"},null,-1)),P("div",VA,[P("button",{onClick:v,class:Pt({active:o.value}),title:""},[P("div",WA,[R[8]||(R[8]=P("i",{class:"fas fa-fill-drip"},null,-1)),o.value?(ce(),Se("div",{key:0,class:"color-indicator",style:_n({backgroundColor:a.value})},null,4)):ft("",!0)])],2),c.value?(ce(),Nt(bc,{key:0,color:a.value,"onUpdate:color":R[1]||(R[1]=fe=>a.value=fe),opacity:l.value,"onUpdate:opacity":R[2]||(R[2]=fe=>l.value=fe),onSelect:m,class:"color-picker-position"},null,8,["color","opacity"])):ft("",!0)]),R[24]||(R[24]=P("div",{class:"divider"},null,-1)),P("button",{onClick:N,class:Pt({active:u.value}),title:""},[dt(ue,{size:"17"},{default:ho(()=>[dt(sn(zA))]),_:1})],2),h.value?(ce(),Se("div",YA,[P("div",XA,[P("div",UA,[R[10]||(R[10]=P("label",null,"",-1)),P("div",GA,[(ce(),Nt(de,{value:d.value.topLeft,"onUpdate:value":[R[3]||(R[3]=fe=>d.value.topLeft=fe),w],min:0,step:1,size:"small",class:"corner-input-number","default-value":0,key:`topLeft-${d.value.topLeft}`},null,8,["value"])),R[9]||(R[9]=P("span",{class:"unit"},"px",-1))])]),P("div",qA,[R[12]||(R[12]=P("label",null,"",-1)),P("div",KA,[(ce(),Nt(de,{value:d.value.topRight,"onUpdate:value":[R[4]||(R[4]=fe=>d.value.topRight=fe),w],min:0,step:1,size:"small",class:"corner-input-number","default-value":0,key:`topRight-${d.value.topRight}`},null,8,["value"])),R[11]||(R[11]=P("span",{class:"unit"},"px",-1))])]),P("div",ZA,[R[14]||(R[14]=P("label",null,"",-1)),P("div",JA,[(ce(),Nt(de,{value:d.value.bottomLeft,"onUpdate:value":[R[5]||(R[5]=fe=>d.value.bottomLeft=fe),w],min:0,step:1,size:"small",class:"corner-input-number","default-value":0,key:`bottomLeft-${d.value.bottomLeft}`},null,8,["value"])),R[13]||(R[13]=P("span",{class:"unit"},"px",-1))])]),P("div",QA,[R[16]||(R[16]=P("label",null,"",-1)),P("div",eF,[(ce(),Nt(de,{value:d.value.bottomRight,"onUpdate:value":[R[6]||(R[6]=fe=>d.value.bottomRight=fe),w],min:0,step:1,size:"small",class:"corner-input-number","default-value":0,key:`bottomRight-${d.value.bottomRight}`},null,8,["value"])),R[15]||(R[15]=P("span",{class:"unit"},"px",-1))])])]),P("div",tF,[dt(Ce,{size:"small",type:"primary",onClick:S,class:"corner-button"},{default:ho(()=>R[17]||(R[17]=[el("")])),_:1}),dt(Ce,{size:"small",onClick:$,class:"corner-button"},{default:ho(()=>R[18]||(R[18]=[el("")])),_:1})])])):ft("",!0),R[25]||(R[25]=P("div",{class:"divider"},null,-1)),P("div",nF,[R[19]||(R[19]=P("span",null,":",-1)),zr(P("input",{type:"range",min:"0",max:"1",step:"0.1","onUpdate:modelValue":R[7]||(R[7]=fe=>f.value=fe),onInput:H},null,544),[[nl,f.value]]),P("span",null,pn(Math.round(f.value*100))+"%",1)]),R[26]||(R[26]=P("div",{class:"divider"},null,-1)),P("button",{onClick:U,title:""},R[20]||(R[20]=[P("i",{class:"fas fa-arrows-alt-h"},null,-1)])),P("button",{onClick:ee,title:""},R[21]||(R[21]=[P("i",{class:"fas fa-arrows-alt-v"},null,-1)])),R[27]||(R[27]=P("div",{class:"divider"},null,-1)),P("button",{onClick:re,title:""},R[22]||(R[22]=[P("i",{class:"fas fa-exchange-alt"},null,-1)]))])],4)):ft("",!0)}}}),sF=Yn(rF,[["__scopeId","data-v-1016b2b9"]]);function iF(r){const e=G(!1),t=G(null),n=G(null),s=o=>{t.value=o,e.value=!0,n.value&&(n.value.getTextSettingToolbarData().value=o,n.value.getTextSettingToolbarVisible().value=!0)},i=()=>{e.value=!1,t.value=null,n.value&&(n.value.getTextSettingToolbarVisible().value=!1,n.value.getTextSettingToolbarData().value=null)};return Et(()=>{Ae.on(ye.CONTROL_PANEL.SHOW_TEXT_SETTING_TOOLBAR,s),Ae.on(ye.CONTROL_PANEL.HIDE_TEXT_SETTING_TOOLBAR,i)}),Nr(()=>{Ae.off(ye.CONTROL_PANEL.SHOW_TEXT_SETTING_TOOLBAR,s),Ae.off(ye.CONTROL_PANEL.HIDE_TEXT_SETTING_TOOLBAR,i),n.value&&(n.value.destroy(),n.value=null)}),{settingToolsHandle:n,textSettingToolbarVisible:e,textSettingToolbarData:t}}function oF(r){const e=G(!1),t=G(null),n=G(null),s=o=>{console.log("handleShowImageSettingToolbar",o),t.value=o,e.value=!0,n.value&&(n.value.getImageSettingToolbarData().value=o,n.value.getImageSettingToolbarVisible().value=!0)},i=()=>{e.value=!1,t.value=null,n.value&&(n.value.getImageSettingToolbarVisible().value=!1,n.value.getImageSettingToolbarData().value=null)};return Et(()=>{Ae.on(ye.CONTROL_PANEL.SHOW_IMAGE_SETTING_TOOLBAR,s),Ae.on(ye.CONTROL_PANEL.HIDE_IMAGE_SETTING_TOOLBAR,i)}),Nr(()=>{Ae.off(ye.CONTROL_PANEL.SHOW_IMAGE_SETTING_TOOLBAR,s),Ae.off(ye.CONTROL_PANEL.HIDE_IMAGE_SETTING_TOOLBAR,i),n.value&&(n.value.destroy(),n.value=null)}),{imageSettingToolsHandle:n,imageSettingToolbarVisible:e,imageSettingToolbarData:t}}const aF={class:"editor"},lF={key:0,class:"editor-toolbar"},cF={class:"editor-main"},uF={class:"editor-workspace"},hF={key:0,class:"floating-panels"},dF=Re({__name:"NextEditorVue",emits:["update:controlPanelCollapsed"],setup(r,{emit:e}){const t=e,n=G(!1),s=G(null),i=G(!1),o=G(!1),a=G(!1),l=G(null),c=mu(null),u=me(()=>{var C;return(C=s.value)==null?void 0:C.selectedFrame}),h=me(()=>{var C;return(C=s.value)==null?void 0:C.selectedPage}),d=me(()=>{var C,E;return n.value?(c.value||(c.value=(C=s.value)==null?void 0:C.canvasManager,console.log("NextEditor computed canvasManager:",{manager:c.value,hasCanvas:((E=c.value)==null?void 0:E.canvas)!=null})),c.value):(console.log("Canvas canvasManager "),null)}),{textSettingToolbarVisible:f,textSettingToolbarData:g}=iF(),{imageSettingToolbarVisible:p,imageSettingToolbarData:m}=oF(),v=C=>{o.value=C,t("update:controlPanelCollapsed",C)};Ot(d,C=>{console.log("NextEditor canvasManager ",C),C&&C.canvas&&dr(()=>{n.value=!0})},{immediate:!0});const _=async()=>{console.log("Canvas "),await dr(),s.value&&s.value.canvasManager?(c.value=s.value.canvasManager,n.value=!0,console.log("Canvas canvasManager ")):(console.warn("Canvas  canvasManager "),setTimeout(x,100))},x=()=>{s.value&&s.value.canvasManager?(c.value=s.value.canvasManager,n.value=!0,console.log("Canvas canvasManager ")):console.warn("canvasManager ")},y=C=>{l.value=C,a.value=!0,setTimeout(()=>{o.value=!1},0)};return Et(async()=>{console.log("NextEditor  Canvas ")}),Et(()=>{Ae.on(ye.CONTROL_PANEL.OPEN,y)}),Nr(()=>{Ae.off(ye.CONTROL_PANEL.OPEN,y)}),Ot(o,C=>{C===!0&&setTimeout(()=>{a.value=!1},300)}),(C,E)=>(ce(),Se("div",aF,[n.value?(ce(),Se("div",lF,[dt(cT,{"canvas-manager":d.value},null,8,["canvas-manager"])])):ft("",!0),P("div",cF,[P("div",uF,[dt(QM,{ref_key:"canvasRef",ref:s,onCanvasReady:_},null,512)]),n.value?(ce(),Se("div",hF,[dt(KM,{collapsed:i.value,"onUpdate:collapsed":E[0]||(E[0]=b=>i.value=b),"canvas-manager":d.value,"selected-frame":u.value,"selected-page":h.value},null,8,["collapsed","canvas-manager","selected-frame","selected-page"]),a.value?(ce(),Nt(eA,{key:0,collapsed:o.value,"onUpdate:collapsed":[E[1]||(E[1]=b=>o.value=b),v],"panel-data":l.value},null,8,["collapsed","panel-data"])):ft("",!0),sn(f)?(ce(),Nt(BA,{key:1,"canvas-manager":d.value,"panel-data":sn(g)},null,8,["canvas-manager","panel-data"])):ft("",!0),sn(p)?(ce(),Nt(sF,{key:2,"canvas-manager":d.value,"panel-data":sn(m)},null,8,["canvas-manager","panel-data"])):ft("",!0)])):ft("",!0)])]))}}),fF=Yn(dF,[["__scopeId","data-v-cc0257d2"]]),gF={class:"test-page"},pF={class:"content-container"},mF={class:"canvas-wrapper"},vF={class:"debug-panel"},yF={class:"zoom-controls"},bF={class:"zoom-level"},Cm=.1,wm=5,Sm=.1,_F=Re({__name:"TestPage",setup(r){K0();const e=G(null);let t=null;const n=G(1),s=()=>{n.value<wm&&(n.value=Math.min(n.value+Sm,wm),a())},i=()=>{n.value>Cm&&(n.value=Math.max(n.value-Sm,Cm),a())},o=()=>{n.value=1,a()},a=()=>{t&&t.renderAll()},l=()=>{if(!e.value)return;t=new cl(e.value,{width:window.innerWidth,height:window.innerHeight,backgroundColor:"#f0f0f0"});const h=new Ms(`

`,{isWrapping:!0,splitByGrapheme:!0,width:200,textAlign:"justify"});t.add(h),t.on("selection:created",function(d){console.log("selection:created ",d.target)}),t.on("selection:updated",function(d){}),ji.create("https://fastly.picsum.photos/id/3/300/300.jpg?hmac=RT2JK6MzdIgNIWoIj61uPcz8aOSOi3lu2vhnwOxs7lY",{left:100,top:100,width:100,height:100,rx:100,ry:100}).then(d=>{d.setFillColor("#FF0000",.5),t==null||t.add(d),t==null||t.setActiveObject(d)}),t.renderAll()},c=()=>{t&&console.log("Canvas :",t.__eventListeners)},u=()=>{t&&(t.setWidth(window.innerWidth),t.setHeight(window.innerHeight),t.renderAll())};return Et(()=>{l(),window.addEventListener("resize",u)}),Nr(()=>{window.removeEventListener("resize",u),t&&(t.dispose(),t=null)}),(h,d)=>(ce(),Se("div",gF,[P("div",pF,[P("div",mF,[P("canvas",{ref_key:"canvasRef",ref:e,class:"full-canvas"},null,512)]),P("div",vF,[P("button",{onClick:c,class:"debug-btn"},""),P("div",yF,[P("button",{onClick:s,class:"debug-btn"},""),P("span",bF,pn(Math.round(n.value*100))+"%",1),P("button",{onClick:i,class:"debug-btn"},""),P("button",{onClick:o,class:"debug-btn"},"")])])])]))}}),xF=Yn(_F,[["__scopeId","data-v-a061455e"]]),CF=[{path:"/",name:"Editor",component:fF},{path:"/test",name:"TestPage",component:xF}],wF=QS({history:MS(),routes:CF});function SF(r){let e=".",t="__",n="--",s;if(r){let g=r.blockPrefix;g&&(e=g),g=r.elementPrefix,g&&(t=g),g=r.modifierPrefix,g&&(n=g)}const i={install(g){s=g.c;const p=g.context;p.bem={},p.bem.b=null,p.bem.els=null}};function o(g){let p,m;return{before(v){p=v.bem.b,m=v.bem.els,v.bem.els=null},after(v){v.bem.b=p,v.bem.els=m},$({context:v,props:_}){return g=typeof g=="string"?g:g({context:v,props:_}),v.bem.b=g,`${(_==null?void 0:_.bPrefix)||e}${v.bem.b}`}}}function a(g){let p;return{before(m){p=m.bem.els},after(m){m.bem.els=p},$({context:m,props:v}){return g=typeof g=="string"?g:g({context:m,props:v}),m.bem.els=g.split(",").map(_=>_.trim()),m.bem.els.map(_=>`${(v==null?void 0:v.bPrefix)||e}${m.bem.b}${t}${_}`).join(", ")}}}function l(g){return{$({context:p,props:m}){g=typeof g=="string"?g:g({context:p,props:m});const v=g.split(",").map(y=>y.trim());function _(y){return v.map(C=>`&${(m==null?void 0:m.bPrefix)||e}${p.bem.b}${y!==void 0?`${t}${y}`:""}${n}${C}`).join(", ")}const x=p.bem.els;return x!==null?_(x[0]):_()}}}function c(g){return{$({context:p,props:m}){g=typeof g=="string"?g:g({context:p,props:m});const v=p.bem.els;return`&:not(${(m==null?void 0:m.bPrefix)||e}${p.bem.b}${v!==null&&v.length>0?`${t}${v[0]}`:""}${n}${g})`}}}return Object.assign(i,{cB:(...g)=>s(o(g[0]),g[1],g[2]),cE:(...g)=>s(a(g[0]),g[1],g[2]),cM:(...g)=>s(l(g[0]),g[1],g[2]),cNotM:(...g)=>s(c(g[0]),g[1],g[2])}),i}function TF(r){let e=0;for(let t=0;t<r.length;++t)r[t]==="&"&&++e;return e}const z_=/\s*,(?![^(]*\))\s*/g,OF=/\s+/g;function EF(r,e){const t=[];return e.split(z_).forEach(n=>{let s=TF(n);if(s){if(s===1){r.forEach(o=>{t.push(n.replace("&",o))});return}}else{r.forEach(o=>{t.push((o&&o+" ")+n)});return}let i=[n];for(;s--;){const o=[];i.forEach(a=>{r.forEach(l=>{o.push(a.replace("&",l))})}),i=o}i.forEach(o=>t.push(o))}),t}function MF(r,e){const t=[];return e.split(z_).forEach(n=>{r.forEach(s=>{t.push((s&&s+" ")+n)})}),t}function PF(r){let e=[""];return r.forEach(t=>{t=t&&t.trim(),t&&(t.includes("&")?e=EF(e,t):e=MF(e,t))}),e.join(", ").replace(OF," ")}function Tm(r){if(!r)return;const e=r.parentElement;e&&e.removeChild(r)}function Wu(r,e){return(e??document.head).querySelector(`style[cssr-id="${r}"]`)}function AF(r){const e=document.createElement("style");return e.setAttribute("cssr-id",r),e}function Ql(r){return r?/^\s*@(s|m)/.test(r):!1}const FF=/[A-Z]/g;function H_(r){return r.replace(FF,e=>"-"+e.toLowerCase())}function kF(r,e="  "){return typeof r=="object"&&r!==null?` {
`+Object.entries(r).map(t=>e+`  ${H_(t[0])}: ${t[1]};`).join(`
`)+`
`+e+"}":`: ${r};`}function RF(r,e,t){return typeof r=="function"?r({context:e.context,props:t}):r}function Om(r,e,t,n){if(!e)return"";const s=RF(e,t,n);if(!s)return"";if(typeof s=="string")return`${r} {
${s}
}`;const i=Object.keys(s);if(i.length===0)return t.config.keepEmptyBlock?r+` {
}`:"";const o=r?[r+" {"]:[];return i.forEach(a=>{const l=s[a];if(a==="raw"){o.push(`
`+l+`
`);return}a=H_(a),l!=null&&o.push(`  ${a}${kF(l)}`)}),r&&o.push("}"),o.join(`
`)}function Wd(r,e,t){r&&r.forEach(n=>{if(Array.isArray(n))Wd(n,e,t);else if(typeof n=="function"){const s=n(e);Array.isArray(s)?Wd(s,e,t):s&&t(s)}else n&&t(n)})}function $_(r,e,t,n,s){const i=r.$;let o="";if(!i||typeof i=="string")Ql(i)?o=i:e.push(i);else if(typeof i=="function"){const c=i({context:n.context,props:s});Ql(c)?o=c:e.push(c)}else if(i.before&&i.before(n.context),!i.$||typeof i.$=="string")Ql(i.$)?o=i.$:e.push(i.$);else if(i.$){const c=i.$({context:n.context,props:s});Ql(c)?o=c:e.push(c)}const a=PF(e),l=Om(a,r.props,n,s);o?t.push(`${o} {`):l.length&&t.push(l),r.children&&Wd(r.children,{context:n.context,props:s},c=>{if(typeof c=="string"){const u=Om(a,{raw:c},n,s);t.push(u)}else $_(c,e,t,n,s)}),e.pop(),o&&t.push("}"),i&&i.after&&i.after(n.context)}function DF(r,e,t){const n=[];return $_(r,[],n,e,t),n.join(`

`)}function Yd(r){for(var e=0,t,n=0,s=r.length;s>=4;++n,s-=4)t=r.charCodeAt(n)&255|(r.charCodeAt(++n)&255)<<8|(r.charCodeAt(++n)&255)<<16|(r.charCodeAt(++n)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(s){case 3:e^=(r.charCodeAt(n+2)&255)<<16;case 2:e^=(r.charCodeAt(n+1)&255)<<8;case 1:e^=r.charCodeAt(n)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}typeof window<"u"&&(window.__cssrContext={});function IF(r,e,t,n){const{els:s}=e;if(t===void 0)s.forEach(Tm),e.els=[];else{const i=Wu(t,n);i&&s.includes(i)&&(Tm(i),e.els=s.filter(o=>o!==i))}}function Em(r,e){r.push(e)}function LF(r,e,t,n,s,i,o,a,l){let c;if(t===void 0&&(c=e.render(n),t=Yd(c)),l){l.adapter(t,c??e.render(n));return}a===void 0&&(a=document.head);const u=Wu(t,a);if(u!==null&&!i)return u;const h=u??AF(t);if(c===void 0&&(c=e.render(n)),h.textContent=c,u!==null)return u;if(o){const d=a.querySelector(`meta[name="${o}"]`);if(d)return a.insertBefore(h,d),Em(e.els,h),h}return s?a.insertBefore(h,a.querySelector("style, link")):a.appendChild(h),Em(e.els,h),h}function BF(r){return DF(this,this.instance,r)}function jF(r={}){const{id:e,ssr:t,props:n,head:s=!1,force:i=!1,anchorMetaName:o,parent:a}=r;return LF(this.instance,this,e,n,s,i,o,a,t)}function zF(r={}){const{id:e,parent:t}=r;IF(this.instance,this,e,t)}const ec=function(r,e,t,n){return{instance:r,$:e,props:t,children:n,els:[],render:BF,mount:jF,unmount:zF}},HF=function(r,e,t,n){return Array.isArray(e)?ec(r,{$:null},null,e):Array.isArray(t)?ec(r,e,null,t):Array.isArray(n)?ec(r,e,t,n):ec(r,e,t,null)};function $F(r={}){const e={c:(...t)=>HF(e,...t),use:(t,...n)=>t.install(e,...n),find:Wu,context:{},config:r};return e}function NF(r,e){if(r===void 0)return!1;if(e){const{context:{ids:t}}=e;return t.has(r)}return Wu(r)!==null}const VF="n",WF=`.${VF}-`,YF="__",XF="--",N_=$F(),V_=SF({blockPrefix:WF,elementPrefix:YF,modifierPrefix:XF});N_.use(V_);const{c:be,find:jI}=N_,{cB:je,cE:he,cM:Ye,cNotM:gi}=V_;function ke(r,e){return r+(e==="default"?"":e.replace(/^[a-z]/,t=>t.toUpperCase()))}function UF(r){return r.composedPath()[0]||null}function Mm(r){return typeof r=="string"?r.endsWith("px")?Number(r.slice(0,r.length-2)):Number(r):r}function oo(r,e){const t=r.trim().split(/\s+/g),n={top:t[0]};switch(t.length){case 1:n.right=t[0],n.bottom=t[0],n.left=t[0];break;case 2:n.right=t[1],n.left=t[1],n.bottom=t[0];break;case 3:n.right=t[1],n.bottom=t[2],n.left=t[1];break;case 4:n.right=t[1],n.bottom=t[2],n.left=t[3];break;default:throw new Error("[seemly/getMargin]:"+r+" is not a valid value.")}return n}const Pm={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32",transparent:"#0000"};function GF(r,e,t){e/=100,t/=100;let n=(s,i=(s+r/60)%6)=>t-t*e*Math.max(Math.min(i,4-i,1),0);return[n(5)*255,n(3)*255,n(1)*255]}function qF(r,e,t){e/=100,t/=100;let n=e*Math.min(t,1-t),s=(i,o=(i+r/30)%12)=>t-n*Math.max(Math.min(o-3,9-o,1),-1);return[s(0)*255,s(8)*255,s(4)*255]}const Vr="^\\s*",Wr="\\s*$",Xs="\\s*((\\.\\d+)|(\\d+(\\.\\d*)?))%\\s*",jn="\\s*((\\.\\d+)|(\\d+(\\.\\d*)?))\\s*",bi="([0-9A-Fa-f])",_i="([0-9A-Fa-f]{2})",W_=new RegExp(`${Vr}hsl\\s*\\(${jn},${Xs},${Xs}\\)${Wr}`),Y_=new RegExp(`${Vr}hsv\\s*\\(${jn},${Xs},${Xs}\\)${Wr}`),X_=new RegExp(`${Vr}hsla\\s*\\(${jn},${Xs},${Xs},${jn}\\)${Wr}`),U_=new RegExp(`${Vr}hsva\\s*\\(${jn},${Xs},${Xs},${jn}\\)${Wr}`),KF=new RegExp(`${Vr}rgb\\s*\\(${jn},${jn},${jn}\\)${Wr}`),ZF=new RegExp(`${Vr}rgba\\s*\\(${jn},${jn},${jn},${jn}\\)${Wr}`),JF=new RegExp(`${Vr}#${bi}${bi}${bi}${Wr}`),QF=new RegExp(`${Vr}#${_i}${_i}${_i}${Wr}`),ek=new RegExp(`${Vr}#${bi}${bi}${bi}${bi}${Wr}`),tk=new RegExp(`${Vr}#${_i}${_i}${_i}${_i}${Wr}`);function yn(r){return parseInt(r,16)}function nk(r){try{let e;if(e=X_.exec(r))return[nu(e[1]),Ds(e[5]),Ds(e[9]),Pi(e[13])];if(e=W_.exec(r))return[nu(e[1]),Ds(e[5]),Ds(e[9]),1];throw new Error(`[seemly/hsla]: Invalid color value ${r}.`)}catch(e){throw e}}function rk(r){try{let e;if(e=U_.exec(r))return[nu(e[1]),Ds(e[5]),Ds(e[9]),Pi(e[13])];if(e=Y_.exec(r))return[nu(e[1]),Ds(e[5]),Ds(e[9]),1];throw new Error(`[seemly/hsva]: Invalid color value ${r}.`)}catch(e){throw e}}function Us(r){try{let e;if(e=QF.exec(r))return[yn(e[1]),yn(e[2]),yn(e[3]),1];if(e=KF.exec(r))return[tn(e[1]),tn(e[5]),tn(e[9]),1];if(e=ZF.exec(r))return[tn(e[1]),tn(e[5]),tn(e[9]),Pi(e[13])];if(e=JF.exec(r))return[yn(e[1]+e[1]),yn(e[2]+e[2]),yn(e[3]+e[3]),1];if(e=tk.exec(r))return[yn(e[1]),yn(e[2]),yn(e[3]),Pi(yn(e[4])/255)];if(e=ek.exec(r))return[yn(e[1]+e[1]),yn(e[2]+e[2]),yn(e[3]+e[3]),Pi(yn(e[4]+e[4])/255)];if(r in Pm)return Us(Pm[r]);if(W_.test(r)||X_.test(r)){const[t,n,s,i]=nk(r);return[...qF(t,n,s),i]}else if(Y_.test(r)||U_.test(r)){const[t,n,s,i]=rk(r);return[...GF(t,n,s),i]}throw new Error(`[seemly/rgba]: Invalid color value ${r}.`)}catch(e){throw e}}function sk(r){return r>1?1:r<0?0:r}function Xd(r,e,t,n){return`rgba(${tn(r)}, ${tn(e)}, ${tn(t)}, ${sk(n)})`}function Hh(r,e,t,n,s){return tn((r*e*(1-n)+t*n)/s)}function cg(r,e){Array.isArray(r)||(r=Us(r)),Array.isArray(e)||(e=Us(e));const t=r[3],n=e[3],s=Pi(t+n-t*n);return Xd(Hh(r[0],t,e[0],n,s),Hh(r[1],t,e[1],n,s),Hh(r[2],t,e[2],n,s),s)}function xi(r,e){const[t,n,s,i=1]=Array.isArray(r)?r:Us(r);return typeof e.alpha=="number"?Xd(t,n,s,e.alpha):Xd(t,n,s,i)}function tc(r,e){const[t,n,s,i=1]=Array.isArray(r)?r:Us(r),{lightness:o=1,alpha:a=1}=e;return ik([t*o,n*o,s*o,i*a])}function Pi(r){const e=Math.round(Number(r)*100)/100;return e>1?1:e<0?0:e}function nu(r){const e=Math.round(Number(r));return e>=360||e<0?0:e}function tn(r){const e=Math.round(Number(r));return e>255?255:e<0?0:e}function Ds(r){const e=Math.round(Number(r));return e>100?100:e<0?0:e}function ik(r){const[e,t,n]=r;return 3 in r?`rgba(${tn(e)}, ${tn(t)}, ${tn(n)}, ${Pi(r[3])})`:`rgba(${tn(e)}, ${tn(t)}, ${tn(n)}, 1)`}function _c(r){return r.composedPath()[0]}const ok={mousemoveoutside:new WeakMap,clickoutside:new WeakMap};function ak(r,e,t){if(r==="mousemoveoutside"){const n=s=>{e.contains(_c(s))||t(s)};return{mousemove:n,touchstart:n}}else if(r==="clickoutside"){let n=!1;const s=o=>{n=!e.contains(_c(o))},i=o=>{n&&(e.contains(_c(o))||t(o))};return{mousedown:s,mouseup:i,touchstart:s,touchend:i}}return console.error(`[evtd/create-trap-handler]: name \`${r}\` is invalid. This could be a bug of evtd.`),{}}function G_(r,e,t){const n=ok[r];let s=n.get(e);s===void 0&&n.set(e,s=new WeakMap);let i=s.get(t);return i===void 0&&s.set(t,i=ak(r,e,t)),i}function lk(r,e,t,n){if(r==="mousemoveoutside"||r==="clickoutside"){const s=G_(r,e,t);return Object.keys(s).forEach(i=>{is(i,document,s[i],n)}),!0}return!1}function ck(r,e,t,n){if(r==="mousemoveoutside"||r==="clickoutside"){const s=G_(r,e,t);return Object.keys(s).forEach(i=>{ts(i,document,s[i],n)}),!0}return!1}function uk(){if(typeof window>"u")return{on:()=>{},off:()=>{}};const r=new WeakMap,e=new WeakMap;function t(){r.set(this,!0)}function n(){r.set(this,!0),e.set(this,!0)}function s(b,w,S){const $=b[w];return b[w]=function(){return S.apply(b,arguments),$.apply(b,arguments)},b}function i(b,w){b[w]=Event.prototype[w]}const o=new WeakMap,a=Object.getOwnPropertyDescriptor(Event.prototype,"currentTarget");function l(){var b;return(b=o.get(this))!==null&&b!==void 0?b:null}function c(b,w){a!==void 0&&Object.defineProperty(b,"currentTarget",{configurable:!0,enumerable:!0,get:w??a.get})}const u={bubble:{},capture:{}},h={};function d(){const b=function(w){const{type:S,eventPhase:$,bubbles:N}=w,H=_c(w);if($===2)return;const U=$===1?"capture":"bubble";let ee=H;const re=[];for(;ee===null&&(ee=window),re.push(ee),ee!==window;)ee=ee.parentNode||null;const te=u.capture[S],z=u.bubble[S];if(s(w,"stopPropagation",t),s(w,"stopImmediatePropagation",n),c(w,l),U==="capture"){if(te===void 0)return;for(let R=re.length-1;R>=0&&!r.has(w);--R){const ue=re[R],de=te.get(ue);if(de!==void 0){o.set(w,ue);for(const Ce of de){if(e.has(w))break;Ce(w)}}if(R===0&&!N&&z!==void 0){const Ce=z.get(ue);if(Ce!==void 0)for(const fe of Ce){if(e.has(w))break;fe(w)}}}}else if(U==="bubble"){if(z===void 0)return;for(let R=0;R<re.length&&!r.has(w);++R){const ue=re[R],de=z.get(ue);if(de!==void 0){o.set(w,ue);for(const Ce of de){if(e.has(w))break;Ce(w)}}}}i(w,"stopPropagation"),i(w,"stopImmediatePropagation"),c(w)};return b.displayName="evtdUnifiedHandler",b}function f(){const b=function(w){const{type:S,eventPhase:$}=w;if($!==2)return;const N=h[S];N!==void 0&&N.forEach(H=>H(w))};return b.displayName="evtdUnifiedWindowEventHandler",b}const g=d(),p=f();function m(b,w){const S=u[b];return S[w]===void 0&&(S[w]=new Map,window.addEventListener(w,g,b==="capture")),S[w]}function v(b){return h[b]===void 0&&(h[b]=new Set,window.addEventListener(b,p)),h[b]}function _(b,w){let S=b.get(w);return S===void 0&&b.set(w,S=new Set),S}function x(b,w,S,$){const N=u[w][S];if(N!==void 0){const H=N.get(b);if(H!==void 0&&H.has($))return!0}return!1}function y(b,w){const S=h[b];return!!(S!==void 0&&S.has(w))}function C(b,w,S,$){let N;if(typeof $=="object"&&$.once===!0?N=te=>{E(b,w,N,$),S(te)}:N=S,lk(b,w,N,$))return;const U=$===!0||typeof $=="object"&&$.capture===!0?"capture":"bubble",ee=m(U,b),re=_(ee,w);if(re.has(N)||re.add(N),w===window){const te=v(b);te.has(N)||te.add(N)}}function E(b,w,S,$){if(ck(b,w,S,$))return;const H=$===!0||typeof $=="object"&&$.capture===!0,U=H?"capture":"bubble",ee=m(U,b),re=_(ee,w);if(w===window&&!x(w,H?"bubble":"capture",b,S)&&y(b,S)){const z=h[b];z.delete(S),z.size===0&&(window.removeEventListener(b,p),h[b]=void 0)}re.has(S)&&re.delete(S),re.size===0&&ee.delete(w),ee.size===0&&(window.removeEventListener(b,g,U==="capture"),u[U][b]=void 0)}return{on:C,off:E}}const{on:is,off:ts}=uk();function Or(r){const e=me(r),t=G(e.value);return Ot(e,n=>{t.value=n}),typeof r=="function"?t:{__v_isRef:!0,get value(){return t.value},set value(n){r.set(n)}}}function q_(r,e){return Ot(r,t=>{t!==void 0&&(e.value=t)}),me(()=>r.value===void 0?e.value:r.value)}function hk(){const r=G(!1);return Et(()=>{r.value=!0}),hf(r)}const dk=(typeof window>"u"?!1:/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!window.MSStream;function fk(){return dk}const Yu=typeof document<"u"&&typeof window<"u";function gk(r){const e={isDeactivated:!1};let t=!1;return Zv(()=>{if(e.isDeactivated=!1,!t){t=!0;return}r()}),Jv(()=>{e.isDeactivated=!0,t||(t=!0)}),e}const pk="@css-render/vue3-ssr";function mk(r,e){return`<style cssr-id="${r}">
${e}
</style>`}function vk(r,e,t){const{styles:n,ids:s}=t;s.has(r)||n!==null&&(s.add(r),n.push(mk(r,e)))}const yk=typeof document<"u";function Xu(){if(yk)return;const r=Ct(pk,null);if(r!==null)return{adapter:(e,t)=>vk(e,t,r),context:r}}function Am(r,e){console.error(`[vueuc/${r}]: ${e}`)}var Ai=[],bk=function(){return Ai.some(function(r){return r.activeTargets.length>0})},_k=function(){return Ai.some(function(r){return r.skippedTargets.length>0})},Fm="ResizeObserver loop completed with undelivered notifications.",xk=function(){var r;typeof ErrorEvent=="function"?r=new ErrorEvent("error",{message:Fm}):(r=document.createEvent("Event"),r.initEvent("error",!1,!1),r.message=Fm),window.dispatchEvent(r)},yl;(function(r){r.BORDER_BOX="border-box",r.CONTENT_BOX="content-box",r.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(yl||(yl={}));var Fi=function(r){return Object.freeze(r)},Ck=function(){function r(e,t){this.inlineSize=e,this.blockSize=t,Fi(this)}return r}(),K_=function(){function r(e,t,n,s){return this.x=e,this.y=t,this.width=n,this.height=s,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Fi(this)}return r.prototype.toJSON=function(){var e=this,t=e.x,n=e.y,s=e.top,i=e.right,o=e.bottom,a=e.left,l=e.width,c=e.height;return{x:t,y:n,top:s,right:i,bottom:o,left:a,width:l,height:c}},r.fromRect=function(e){return new r(e.x,e.y,e.width,e.height)},r}(),ug=function(r){return r instanceof SVGElement&&"getBBox"in r},Z_=function(r){if(ug(r)){var e=r.getBBox(),t=e.width,n=e.height;return!t&&!n}var s=r,i=s.offsetWidth,o=s.offsetHeight;return!(i||o||r.getClientRects().length)},km=function(r){var e;if(r instanceof Element)return!0;var t=(e=r==null?void 0:r.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(t&&r instanceof t.Element)},wk=function(r){switch(r.tagName){case"INPUT":if(r.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Xa=typeof window<"u"?window:{},nc=new WeakMap,Rm=/auto|scroll/,Sk=/^tb|vertical/,Tk=/msie|trident/i.test(Xa.navigator&&Xa.navigator.userAgent),Cr=function(r){return parseFloat(r||"0")},wo=function(r,e,t){return r===void 0&&(r=0),e===void 0&&(e=0),t===void 0&&(t=!1),new Ck((t?e:r)||0,(t?r:e)||0)},Dm=Fi({devicePixelContentBoxSize:wo(),borderBoxSize:wo(),contentBoxSize:wo(),contentRect:new K_(0,0,0,0)}),J_=function(r,e){if(e===void 0&&(e=!1),nc.has(r)&&!e)return nc.get(r);if(Z_(r))return nc.set(r,Dm),Dm;var t=getComputedStyle(r),n=ug(r)&&r.ownerSVGElement&&r.getBBox(),s=!Tk&&t.boxSizing==="border-box",i=Sk.test(t.writingMode||""),o=!n&&Rm.test(t.overflowY||""),a=!n&&Rm.test(t.overflowX||""),l=n?0:Cr(t.paddingTop),c=n?0:Cr(t.paddingRight),u=n?0:Cr(t.paddingBottom),h=n?0:Cr(t.paddingLeft),d=n?0:Cr(t.borderTopWidth),f=n?0:Cr(t.borderRightWidth),g=n?0:Cr(t.borderBottomWidth),p=n?0:Cr(t.borderLeftWidth),m=h+c,v=l+u,_=p+f,x=d+g,y=a?r.offsetHeight-x-r.clientHeight:0,C=o?r.offsetWidth-_-r.clientWidth:0,E=s?m+_:0,b=s?v+x:0,w=n?n.width:Cr(t.width)-E-C,S=n?n.height:Cr(t.height)-b-y,$=w+m+C+_,N=S+v+y+x,H=Fi({devicePixelContentBoxSize:wo(Math.round(w*devicePixelRatio),Math.round(S*devicePixelRatio),i),borderBoxSize:wo($,N,i),contentBoxSize:wo(w,S,i),contentRect:new K_(h,l,w,S)});return nc.set(r,H),H},Q_=function(r,e,t){var n=J_(r,t),s=n.borderBoxSize,i=n.contentBoxSize,o=n.devicePixelContentBoxSize;switch(e){case yl.DEVICE_PIXEL_CONTENT_BOX:return o;case yl.BORDER_BOX:return s;default:return i}},Ok=function(){function r(e){var t=J_(e);this.target=e,this.contentRect=t.contentRect,this.borderBoxSize=Fi([t.borderBoxSize]),this.contentBoxSize=Fi([t.contentBoxSize]),this.devicePixelContentBoxSize=Fi([t.devicePixelContentBoxSize])}return r}(),ex=function(r){if(Z_(r))return 1/0;for(var e=0,t=r.parentNode;t;)e+=1,t=t.parentNode;return e},Ek=function(){var r=1/0,e=[];Ai.forEach(function(o){if(o.activeTargets.length!==0){var a=[];o.activeTargets.forEach(function(c){var u=new Ok(c.target),h=ex(c.target);a.push(u),c.lastReportedSize=Q_(c.target,c.observedBox),h<r&&(r=h)}),e.push(function(){o.callback.call(o.observer,a,o.observer)}),o.activeTargets.splice(0,o.activeTargets.length)}});for(var t=0,n=e;t<n.length;t++){var s=n[t];s()}return r},Im=function(r){Ai.forEach(function(t){t.activeTargets.splice(0,t.activeTargets.length),t.skippedTargets.splice(0,t.skippedTargets.length),t.observationTargets.forEach(function(s){s.isActive()&&(ex(s.target)>r?t.activeTargets.push(s):t.skippedTargets.push(s))})})},Mk=function(){var r=0;for(Im(r);bk();)r=Ek(),Im(r);return _k()&&xk(),r>0},$h,tx=[],Pk=function(){return tx.splice(0).forEach(function(r){return r()})},Ak=function(r){if(!$h){var e=0,t=document.createTextNode(""),n={characterData:!0};new MutationObserver(function(){return Pk()}).observe(t,n),$h=function(){t.textContent="".concat(e?e--:e++)}}tx.push(r),$h()},Fk=function(r){Ak(function(){requestAnimationFrame(r)})},xc=0,kk=function(){return!!xc},Rk=250,Dk={attributes:!0,characterData:!0,childList:!0,subtree:!0},Lm=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],Bm=function(r){return r===void 0&&(r=0),Date.now()+r},Nh=!1,Ik=function(){function r(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return r.prototype.run=function(e){var t=this;if(e===void 0&&(e=Rk),!Nh){Nh=!0;var n=Bm(e);Fk(function(){var s=!1;try{s=Mk()}finally{if(Nh=!1,e=n-Bm(),!kk())return;s?t.run(1e3):e>0?t.run(e):t.start()}})}},r.prototype.schedule=function(){this.stop(),this.run()},r.prototype.observe=function(){var e=this,t=function(){return e.observer&&e.observer.observe(document.body,Dk)};document.body?t():Xa.addEventListener("DOMContentLoaded",t)},r.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Lm.forEach(function(t){return Xa.addEventListener(t,e.listener,!0)}))},r.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),Lm.forEach(function(t){return Xa.removeEventListener(t,e.listener,!0)}),this.stopped=!0)},r}(),Ud=new Ik,jm=function(r){!xc&&r>0&&Ud.start(),xc+=r,!xc&&Ud.stop()},Lk=function(r){return!ug(r)&&!wk(r)&&getComputedStyle(r).display==="inline"},Bk=function(){function r(e,t){this.target=e,this.observedBox=t||yl.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return r.prototype.isActive=function(){var e=Q_(this.target,this.observedBox,!0);return Lk(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},r}(),jk=function(){function r(e,t){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=t}return r}(),rc=new WeakMap,zm=function(r,e){for(var t=0;t<r.length;t+=1)if(r[t].target===e)return t;return-1},sc=function(){function r(){}return r.connect=function(e,t){var n=new jk(e,t);rc.set(e,n)},r.observe=function(e,t,n){var s=rc.get(e),i=s.observationTargets.length===0;zm(s.observationTargets,t)<0&&(i&&Ai.push(s),s.observationTargets.push(new Bk(t,n&&n.box)),jm(1),Ud.schedule())},r.unobserve=function(e,t){var n=rc.get(e),s=zm(n.observationTargets,t),i=n.observationTargets.length===1;s>=0&&(i&&Ai.splice(Ai.indexOf(n),1),n.observationTargets.splice(s,1),jm(-1))},r.disconnect=function(e){var t=this,n=rc.get(e);n.observationTargets.slice().forEach(function(s){return t.unobserve(e,s.target)}),n.activeTargets.splice(0,n.activeTargets.length)},r}(),zk=function(){function r(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");sc.connect(this,e)}return r.prototype.observe=function(e,t){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!km(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");sc.observe(this,e,t)},r.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!km(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");sc.unobserve(this,e)},r.prototype.disconnect=function(){sc.disconnect(this)},r.toString=function(){return"function ResizeObserver () { [polyfill code] }"},r}();class Hk{constructor(){this.handleResize=this.handleResize.bind(this),this.observer=new(typeof window<"u"&&window.ResizeObserver||zk)(this.handleResize),this.elHandlersMap=new Map}handleResize(e){for(const t of e){const n=this.elHandlersMap.get(t.target);n!==void 0&&n(t)}}registerHandler(e,t){this.elHandlersMap.set(e,t),this.observer.observe(e)}unregisterHandler(e){this.elHandlersMap.has(e)&&(this.elHandlersMap.delete(e),this.observer.unobserve(e))}}const Hm=new Hk,Gd=Re({name:"ResizeObserver",props:{onResize:Function},setup(r){let e=!1;const t=wl().proxy;function n(s){const{onResize:i}=r;i!==void 0&&i(s)}Et(()=>{const s=t.$el;if(s===void 0){Am("resize-observer","$el does not exist.");return}if(s.nextElementSibling!==s.nextSibling&&s.nodeType===3&&s.nodeValue!==""){Am("resize-observer","$el can not be observed (it may be a text node).");return}s.nextElementSibling!==null&&(Hm.registerHandler(s.nextElementSibling,n),e=!0)}),Ho(()=>{e&&Hm.unregisterHandler(t.$el.nextElementSibling)})},render(){return O1(this.$slots,"default")}});function $m(r){return r.replace(/#|\(|\)|,|\s|\./g,"_")}const $k=/^(\d|\.)+$/,Nm=/(\d|\.)+/;function Nk(r,{c:e=1,offset:t=0,attachPx:n=!0}={}){if(typeof r=="number"){const s=(r+t)*e;return s===0?"0":`${s}px`}else if(typeof r=="string")if($k.test(r)){const s=(Number(r)+t)*e;return n?s===0?"0":`${s}px`:`${s}`}else{const s=Nm.exec(r);return s?r.replace(Nm,String((Number(s[0])+t)*e)):r}return r}function Vm(r){const{left:e,right:t,top:n,bottom:s}=oo(r);return`${n} ${e} ${s} ${t}`}function Vk(r,e){console.error(`[naive/${r}]: ${e}`)}function Wk(r,e){throw new Error(`[naive/${r}]: ${e}`)}function st(r,...e){if(Array.isArray(r))r.forEach(t=>st(t,...e));else return r(...e)}function Al(r){return r.some(e=>To(e)?!(e.type===nn||e.type===Ne&&!Al(e.children)):!0)?r:null}function ki(r,e){return r&&Al(r())||e()}function Yk(r,e,t){return r&&Al(r(e))||t(e)}function Is(r,e){const t=r&&Al(r());return e(t||null)}function Xk(r){return!(r&&Al(r()))}const Wm=Re({render(){var r,e;return(e=(r=this.$slots).default)===null||e===void 0?void 0:e.call(r)}}),Xi="n-config-provider",Uk="n";function Fl(r={},e={defaultBordered:!0}){const t=Ct(Xi,null);return{inlineThemeDisabled:t==null?void 0:t.inlineThemeDisabled,mergedRtlRef:t==null?void 0:t.mergedRtlRef,mergedComponentPropsRef:t==null?void 0:t.mergedComponentPropsRef,mergedBreakpointsRef:t==null?void 0:t.mergedBreakpointsRef,mergedBorderedRef:me(()=>{var n,s;const{bordered:i}=r;return i!==void 0?i:(s=(n=t==null?void 0:t.mergedBorderedRef.value)!==null&&n!==void 0?n:e.defaultBordered)!==null&&s!==void 0?s:!0}),mergedClsPrefixRef:t?t.mergedClsPrefixRef:mu(Uk),namespaceRef:me(()=>t==null?void 0:t.mergedNamespaceRef.value)}}function Uu(r,e,t,n){t||Wk("useThemeClass","cssVarsRef is not passed");const s=Ct(Xi,null),i=s==null?void 0:s.mergedThemeHashRef,o=s==null?void 0:s.styleMountTarget,a=G(""),l=Xu();let c;const u=`__${r}`,h=()=>{let d=u;const f=e?e.value:void 0,g=i==null?void 0:i.value;g&&(d+=`-${g}`),f&&(d+=`-${f}`);const{themeOverrides:p,builtinThemeOverrides:m}=n;p&&(d+=`-${Yd(JSON.stringify(p))}`),m&&(d+=`-${Yd(JSON.stringify(m))}`),a.value=d,c=()=>{const v=t.value;let _="";for(const x in v)_+=`${x}: ${v[x]};`;be(`.${d}`,_).mount({id:d,ssr:l,parent:o}),c=void 0}};return Qa(()=>{h()}),{themeClass:a,onRender:()=>{c==null||c()}}}const Ym="n-form-item";function hg(r,{defaultSize:e="medium",mergedSize:t,mergedDisabled:n}={}){const s=Ct(Ym,null);po(Ym,null);const i=me(t?()=>t(s):()=>{const{size:l}=r;if(l)return l;if(s){const{mergedSize:c}=s;if(c.value!==void 0)return c.value}return e}),o=me(n?()=>n(s):()=>{const{disabled:l}=r;return l!==void 0?l:s?s.disabled.value:!1}),a=me(()=>{const{status:l}=r;return l||(s==null?void 0:s.mergedValidationStatus.value)});return Ho(()=>{s&&s.restoreValidation()}),{mergedSizeRef:i,mergedDisabledRef:o,mergedStatusRef:a,nTriggerFormBlur(){s&&s.handleContentBlur()},nTriggerFormChange(){s&&s.handleContentChange()},nTriggerFormFocus(){s&&s.handleContentFocus()},nTriggerFormInput(){s&&s.handleContentInput()}}}const Gk={name:"en-US",global:{undo:"Undo",redo:"Redo",confirm:"Confirm",clear:"Clear"},Popconfirm:{positiveText:"Confirm",negativeText:"Cancel"},Cascader:{placeholder:"Please Select",loading:"Loading",loadingRequiredMessage:r=>`Please load all ${r}'s descendants before checking it.`},Time:{dateFormat:"yyyy-MM-dd",dateTimeFormat:"yyyy-MM-dd HH:mm:ss"},DatePicker:{yearFormat:"yyyy",monthFormat:"MMM",dayFormat:"eeeeee",yearTypeFormat:"yyyy",monthTypeFormat:"yyyy-MM",dateFormat:"yyyy-MM-dd",dateTimeFormat:"yyyy-MM-dd HH:mm:ss",quarterFormat:"yyyy-qqq",weekFormat:"YYYY-w",clear:"Clear",now:"Now",confirm:"Confirm",selectTime:"Select Time",selectDate:"Select Date",datePlaceholder:"Select Date",datetimePlaceholder:"Select Date and Time",monthPlaceholder:"Select Month",yearPlaceholder:"Select Year",quarterPlaceholder:"Select Quarter",weekPlaceholder:"Select Week",startDatePlaceholder:"Start Date",endDatePlaceholder:"End Date",startDatetimePlaceholder:"Start Date and Time",endDatetimePlaceholder:"End Date and Time",startMonthPlaceholder:"Start Month",endMonthPlaceholder:"End Month",monthBeforeYear:!0,firstDayOfWeek:6,today:"Today"},DataTable:{checkTableAll:"Select all in the table",uncheckTableAll:"Unselect all in the table",confirm:"Confirm",clear:"Clear"},LegacyTransfer:{sourceTitle:"Source",targetTitle:"Target"},Transfer:{selectAll:"Select all",unselectAll:"Unselect all",clearAll:"Clear",total:r=>`Total ${r} items`,selected:r=>`${r} items selected`},Empty:{description:"No Data"},Select:{placeholder:"Please Select"},TimePicker:{placeholder:"Select Time",positiveText:"OK",negativeText:"Cancel",now:"Now",clear:"Clear"},Pagination:{goto:"Goto",selectionSuffix:"page"},DynamicTags:{add:"Add"},Log:{loading:"Loading"},Input:{placeholder:"Please Input"},InputNumber:{placeholder:"Please Input"},DynamicInput:{create:"Create"},ThemeEditor:{title:"Theme Editor",clearAllVars:"Clear All Variables",clearSearch:"Clear Search",filterCompName:"Filter Component Name",filterVarName:"Filter Variable Name",import:"Import",export:"Export",restore:"Reset to Default"},Image:{tipPrevious:"Previous picture ()",tipNext:"Next picture ()",tipCounterclockwise:"Counterclockwise",tipClockwise:"Clockwise",tipZoomOut:"Zoom out",tipZoomIn:"Zoom in",tipDownload:"Download",tipClose:"Close (Esc)",tipOriginalSize:"Zoom to original size"}};function Vh(r){return(e={})=>{const t=e.width?String(e.width):r.defaultWidth;return r.formats[t]||r.formats[r.defaultWidth]}}function ia(r){return(e,t)=>{const n=t!=null&&t.context?String(t.context):"standalone";let s;if(n==="formatting"&&r.formattingValues){const o=r.defaultFormattingWidth||r.defaultWidth,a=t!=null&&t.width?String(t.width):o;s=r.formattingValues[a]||r.formattingValues[o]}else{const o=r.defaultWidth,a=t!=null&&t.width?String(t.width):r.defaultWidth;s=r.values[a]||r.values[o]}const i=r.argumentCallback?r.argumentCallback(e):e;return s[i]}}function oa(r){return(e,t={})=>{const n=t.width,s=n&&r.matchPatterns[n]||r.matchPatterns[r.defaultMatchWidth],i=e.match(s);if(!i)return null;const o=i[0],a=n&&r.parsePatterns[n]||r.parsePatterns[r.defaultParseWidth],l=Array.isArray(a)?Kk(a,h=>h.test(o)):qk(a,h=>h.test(o));let c;c=r.valueCallback?r.valueCallback(l):l,c=t.valueCallback?t.valueCallback(c):c;const u=e.slice(o.length);return{value:c,rest:u}}}function qk(r,e){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&e(r[t]))return t}function Kk(r,e){for(let t=0;t<r.length;t++)if(e(r[t]))return t}function Zk(r){return(e,t={})=>{const n=e.match(r.matchPattern);if(!n)return null;const s=n[0],i=e.match(r.parsePattern);if(!i)return null;let o=r.valueCallback?r.valueCallback(i[0]):i[0];o=t.valueCallback?t.valueCallback(o):o;const a=e.slice(s.length);return{value:o,rest:a}}}const Jk={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Qk=(r,e,t)=>{let n;const s=Jk[r];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n},eR={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},tR=(r,e,t,n)=>eR[r],nR={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},rR={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},sR={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},iR={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},oR={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},aR={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},lR=(r,e)=>{const t=Number(r),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},cR={ordinalNumber:lR,era:ia({values:nR,defaultWidth:"wide"}),quarter:ia({values:rR,defaultWidth:"wide",argumentCallback:r=>r-1}),month:ia({values:sR,defaultWidth:"wide"}),day:ia({values:iR,defaultWidth:"wide"}),dayPeriod:ia({values:oR,defaultWidth:"wide",formattingValues:aR,defaultFormattingWidth:"wide"})},uR=/^(\d+)(th|st|nd|rd)?/i,hR=/\d+/i,dR={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},fR={any:[/^b/i,/^(a|c)/i]},gR={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},pR={any:[/1/i,/2/i,/3/i,/4/i]},mR={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},vR={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},yR={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},bR={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},_R={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},xR={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},CR={ordinalNumber:Zk({matchPattern:uR,parsePattern:hR,valueCallback:r=>parseInt(r,10)}),era:oa({matchPatterns:dR,defaultMatchWidth:"wide",parsePatterns:fR,defaultParseWidth:"any"}),quarter:oa({matchPatterns:gR,defaultMatchWidth:"wide",parsePatterns:pR,defaultParseWidth:"any",valueCallback:r=>r+1}),month:oa({matchPatterns:mR,defaultMatchWidth:"wide",parsePatterns:vR,defaultParseWidth:"any"}),day:oa({matchPatterns:yR,defaultMatchWidth:"wide",parsePatterns:bR,defaultParseWidth:"any"}),dayPeriod:oa({matchPatterns:_R,defaultMatchWidth:"any",parsePatterns:xR,defaultParseWidth:"any"})},wR={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},SR={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},TR={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},OR={date:Vh({formats:wR,defaultWidth:"full"}),time:Vh({formats:SR,defaultWidth:"full"}),dateTime:Vh({formats:TR,defaultWidth:"full"})},ER={code:"en-US",formatDistance:Qk,formatLong:OR,formatRelative:tR,localize:cR,match:CR,options:{weekStartsOn:0,firstWeekContainsDate:1}},MR={name:"en-US",locale:ER};var nx=typeof global=="object"&&global&&global.Object===Object&&global,PR=typeof self=="object"&&self&&self.Object===Object&&self,Uo=nx||PR||Function("return this")(),jo=Uo.Symbol,rx=Object.prototype,AR=rx.hasOwnProperty,FR=rx.toString,aa=jo?jo.toStringTag:void 0;function kR(r){var e=AR.call(r,aa),t=r[aa];try{r[aa]=void 0;var n=!0}catch{}var s=FR.call(r);return n&&(e?r[aa]=t:delete r[aa]),s}var RR=Object.prototype,DR=RR.toString;function IR(r){return DR.call(r)}var LR="[object Null]",BR="[object Undefined]",Xm=jo?jo.toStringTag:void 0;function kl(r){return r==null?r===void 0?BR:LR:Xm&&Xm in Object(r)?kR(r):IR(r)}function Go(r){return r!=null&&typeof r=="object"}var jR="[object Symbol]";function zR(r){return typeof r=="symbol"||Go(r)&&kl(r)==jR}function HR(r,e){for(var t=-1,n=r==null?0:r.length,s=Array(n);++t<n;)s[t]=e(r[t],t,r);return s}var ru=Array.isArray,Um=jo?jo.prototype:void 0,Gm=Um?Um.toString:void 0;function sx(r){if(typeof r=="string")return r;if(ru(r))return HR(r,sx)+"";if(zR(r))return Gm?Gm.call(r):"";var e=r+"";return e=="0"&&1/r==-1/0?"-0":e}function Ui(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}function ix(r){return r}var $R="[object AsyncFunction]",NR="[object Function]",VR="[object GeneratorFunction]",WR="[object Proxy]";function dg(r){if(!Ui(r))return!1;var e=kl(r);return e==NR||e==VR||e==$R||e==WR}var Wh=Uo["__core-js_shared__"],qm=function(){var r=/[^.]+$/.exec(Wh&&Wh.keys&&Wh.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function YR(r){return!!qm&&qm in r}var XR=Function.prototype,UR=XR.toString;function GR(r){if(r!=null){try{return UR.call(r)}catch{}try{return r+""}catch{}}return""}var qR=/[\\^$.*+?()[\]{}|]/g,KR=/^\[object .+?Constructor\]$/,ZR=Function.prototype,JR=Object.prototype,QR=ZR.toString,eD=JR.hasOwnProperty,tD=RegExp("^"+QR.call(eD).replace(qR,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function nD(r){if(!Ui(r)||YR(r))return!1;var e=dg(r)?tD:KR;return e.test(GR(r))}function rD(r,e){return r==null?void 0:r[e]}function fg(r,e){var t=rD(r,e);return nD(t)?t:void 0}var Km=Object.create,sD=function(){function r(){}return function(e){if(!Ui(e))return{};if(Km)return Km(e);r.prototype=e;var t=new r;return r.prototype=void 0,t}}();function iD(r,e,t){switch(t.length){case 0:return r.call(e);case 1:return r.call(e,t[0]);case 2:return r.call(e,t[0],t[1]);case 3:return r.call(e,t[0],t[1],t[2])}return r.apply(e,t)}function oD(r,e){var t=-1,n=r.length;for(e||(e=Array(n));++t<n;)e[t]=r[t];return e}var aD=800,lD=16,cD=Date.now;function uD(r){var e=0,t=0;return function(){var n=cD(),s=lD-(n-t);if(t=n,s>0){if(++e>=aD)return arguments[0]}else e=0;return r.apply(void 0,arguments)}}function hD(r){return function(){return r}}var su=function(){try{var r=fg(Object,"defineProperty");return r({},"",{}),r}catch{}}(),dD=su?function(r,e){return su(r,"toString",{configurable:!0,enumerable:!1,value:hD(e),writable:!0})}:ix,fD=uD(dD),gD=9007199254740991,pD=/^(?:0|[1-9]\d*)$/;function ox(r,e){var t=typeof r;return e=e??gD,!!e&&(t=="number"||t!="symbol"&&pD.test(r))&&r>-1&&r%1==0&&r<e}function gg(r,e,t){e=="__proto__"&&su?su(r,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):r[e]=t}function Gu(r,e){return r===e||r!==r&&e!==e}var mD=Object.prototype,vD=mD.hasOwnProperty;function yD(r,e,t){var n=r[e];(!(vD.call(r,e)&&Gu(n,t))||t===void 0&&!(e in r))&&gg(r,e,t)}function bD(r,e,t,n){var s=!t;t||(t={});for(var i=-1,o=e.length;++i<o;){var a=e[i],l=void 0;l===void 0&&(l=r[a]),s?gg(t,a,l):yD(t,a,l)}return t}var Zm=Math.max;function _D(r,e,t){return e=Zm(e===void 0?r.length-1:e,0),function(){for(var n=arguments,s=-1,i=Zm(n.length-e,0),o=Array(i);++s<i;)o[s]=n[e+s];s=-1;for(var a=Array(e+1);++s<e;)a[s]=n[s];return a[e]=t(o),iD(r,this,a)}}function xD(r,e){return fD(_D(r,e,ix),r+"")}var CD=9007199254740991;function ax(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=CD}function pg(r){return r!=null&&ax(r.length)&&!dg(r)}function wD(r,e,t){if(!Ui(t))return!1;var n=typeof e;return(n=="number"?pg(t)&&ox(e,t.length):n=="string"&&e in t)?Gu(t[e],r):!1}function SD(r){return xD(function(e,t){var n=-1,s=t.length,i=s>1?t[s-1]:void 0,o=s>2?t[2]:void 0;for(i=r.length>3&&typeof i=="function"?(s--,i):void 0,o&&wD(t[0],t[1],o)&&(i=s<3?void 0:i,s=1),e=Object(e);++n<s;){var a=t[n];a&&r(e,a,n,i)}return e})}var TD=Object.prototype;function lx(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||TD;return r===t}function OD(r,e){for(var t=-1,n=Array(r);++t<r;)n[t]=e(t);return n}var ED="[object Arguments]";function Jm(r){return Go(r)&&kl(r)==ED}var cx=Object.prototype,MD=cx.hasOwnProperty,PD=cx.propertyIsEnumerable,qd=Jm(function(){return arguments}())?Jm:function(r){return Go(r)&&MD.call(r,"callee")&&!PD.call(r,"callee")};function AD(){return!1}var ux=typeof zn=="object"&&zn&&!zn.nodeType&&zn,Qm=ux&&typeof Hn=="object"&&Hn&&!Hn.nodeType&&Hn,FD=Qm&&Qm.exports===ux,ev=FD?Uo.Buffer:void 0,kD=ev?ev.isBuffer:void 0,hx=kD||AD,RD="[object Arguments]",DD="[object Array]",ID="[object Boolean]",LD="[object Date]",BD="[object Error]",jD="[object Function]",zD="[object Map]",HD="[object Number]",$D="[object Object]",ND="[object RegExp]",VD="[object Set]",WD="[object String]",YD="[object WeakMap]",XD="[object ArrayBuffer]",UD="[object DataView]",GD="[object Float32Array]",qD="[object Float64Array]",KD="[object Int8Array]",ZD="[object Int16Array]",JD="[object Int32Array]",QD="[object Uint8Array]",e3="[object Uint8ClampedArray]",t3="[object Uint16Array]",n3="[object Uint32Array]",nt={};nt[GD]=nt[qD]=nt[KD]=nt[ZD]=nt[JD]=nt[QD]=nt[e3]=nt[t3]=nt[n3]=!0;nt[RD]=nt[DD]=nt[XD]=nt[ID]=nt[UD]=nt[LD]=nt[BD]=nt[jD]=nt[zD]=nt[HD]=nt[$D]=nt[ND]=nt[VD]=nt[WD]=nt[YD]=!1;function r3(r){return Go(r)&&ax(r.length)&&!!nt[kl(r)]}function s3(r){return function(e){return r(e)}}var dx=typeof zn=="object"&&zn&&!zn.nodeType&&zn,Ua=dx&&typeof Hn=="object"&&Hn&&!Hn.nodeType&&Hn,i3=Ua&&Ua.exports===dx,Yh=i3&&nx.process,tv=function(){try{var r=Ua&&Ua.require&&Ua.require("util").types;return r||Yh&&Yh.binding&&Yh.binding("util")}catch{}}(),nv=tv&&tv.isTypedArray,fx=nv?s3(nv):r3;function o3(r,e){var t=ru(r),n=!t&&qd(r),s=!t&&!n&&hx(r),i=!t&&!n&&!s&&fx(r),o=t||n||s||i,a=o?OD(r.length,String):[],l=a.length;for(var c in r)o&&(c=="length"||s&&(c=="offset"||c=="parent")||i&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||ox(c,l))||a.push(c);return a}function a3(r,e){return function(t){return r(e(t))}}function l3(r){var e=[];if(r!=null)for(var t in Object(r))e.push(t);return e}var c3=Object.prototype,u3=c3.hasOwnProperty;function h3(r){if(!Ui(r))return l3(r);var e=lx(r),t=[];for(var n in r)n=="constructor"&&(e||!u3.call(r,n))||t.push(n);return t}function gx(r){return pg(r)?o3(r):h3(r)}var bl=fg(Object,"create");function d3(){this.__data__=bl?bl(null):{},this.size=0}function f3(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e}var g3="__lodash_hash_undefined__",p3=Object.prototype,m3=p3.hasOwnProperty;function v3(r){var e=this.__data__;if(bl){var t=e[r];return t===g3?void 0:t}return m3.call(e,r)?e[r]:void 0}var y3=Object.prototype,b3=y3.hasOwnProperty;function _3(r){var e=this.__data__;return bl?e[r]!==void 0:b3.call(e,r)}var x3="__lodash_hash_undefined__";function C3(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=bl&&e===void 0?x3:e,this}function Hi(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Hi.prototype.clear=d3;Hi.prototype.delete=f3;Hi.prototype.get=v3;Hi.prototype.has=_3;Hi.prototype.set=C3;function w3(){this.__data__=[],this.size=0}function qu(r,e){for(var t=r.length;t--;)if(Gu(r[t][0],e))return t;return-1}var S3=Array.prototype,T3=S3.splice;function O3(r){var e=this.__data__,t=qu(e,r);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():T3.call(e,t,1),--this.size,!0}function E3(r){var e=this.__data__,t=qu(e,r);return t<0?void 0:e[t][1]}function M3(r){return qu(this.__data__,r)>-1}function P3(r,e){var t=this.__data__,n=qu(t,r);return n<0?(++this.size,t.push([r,e])):t[n][1]=e,this}function gs(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}gs.prototype.clear=w3;gs.prototype.delete=O3;gs.prototype.get=E3;gs.prototype.has=M3;gs.prototype.set=P3;var px=fg(Uo,"Map");function A3(){this.size=0,this.__data__={hash:new Hi,map:new(px||gs),string:new Hi}}function F3(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}function Ku(r,e){var t=r.__data__;return F3(e)?t[typeof e=="string"?"string":"hash"]:t.map}function k3(r){var e=Ku(this,r).delete(r);return this.size-=e?1:0,e}function R3(r){return Ku(this,r).get(r)}function D3(r){return Ku(this,r).has(r)}function I3(r,e){var t=Ku(this,r),n=t.size;return t.set(r,e),this.size+=t.size==n?0:1,this}function qo(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}qo.prototype.clear=A3;qo.prototype.delete=k3;qo.prototype.get=R3;qo.prototype.has=D3;qo.prototype.set=I3;function L3(r){return r==null?"":sx(r)}var mx=a3(Object.getPrototypeOf,Object),B3="[object Object]",j3=Function.prototype,z3=Object.prototype,vx=j3.toString,H3=z3.hasOwnProperty,$3=vx.call(Object);function N3(r){if(!Go(r)||kl(r)!=B3)return!1;var e=mx(r);if(e===null)return!0;var t=H3.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&vx.call(t)==$3}function V3(r,e,t){var n=-1,s=r.length;e<0&&(e=-e>s?0:s+e),t=t>s?s:t,t<0&&(t+=s),s=e>t?0:t-e>>>0,e>>>=0;for(var i=Array(s);++n<s;)i[n]=r[n+e];return i}function W3(r,e,t){var n=r.length;return t=t===void 0?n:t,V3(r,e,t)}var Y3="\\ud800-\\udfff",X3="\\u0300-\\u036f",U3="\\ufe20-\\ufe2f",G3="\\u20d0-\\u20ff",q3=X3+U3+G3,K3="\\ufe0e\\ufe0f",Z3="\\u200d",J3=RegExp("["+Z3+Y3+q3+K3+"]");function yx(r){return J3.test(r)}function Q3(r){return r.split("")}var bx="\\ud800-\\udfff",e5="\\u0300-\\u036f",t5="\\ufe20-\\ufe2f",n5="\\u20d0-\\u20ff",r5=e5+t5+n5,s5="\\ufe0e\\ufe0f",i5="["+bx+"]",Kd="["+r5+"]",Zd="\\ud83c[\\udffb-\\udfff]",o5="(?:"+Kd+"|"+Zd+")",_x="[^"+bx+"]",xx="(?:\\ud83c[\\udde6-\\uddff]){2}",Cx="[\\ud800-\\udbff][\\udc00-\\udfff]",a5="\\u200d",wx=o5+"?",Sx="["+s5+"]?",l5="(?:"+a5+"(?:"+[_x,xx,Cx].join("|")+")"+Sx+wx+")*",c5=Sx+wx+l5,u5="(?:"+[_x+Kd+"?",Kd,xx,Cx,i5].join("|")+")",h5=RegExp(Zd+"(?="+Zd+")|"+u5+c5,"g");function d5(r){return r.match(h5)||[]}function f5(r){return yx(r)?d5(r):Q3(r)}function g5(r){return function(e){e=L3(e);var t=yx(e)?f5(e):void 0,n=t?t[0]:e.charAt(0),s=t?W3(t,1).join(""):e.slice(1);return n[r]()+s}}var p5=g5("toUpperCase");function m5(){this.__data__=new gs,this.size=0}function v5(r){var e=this.__data__,t=e.delete(r);return this.size=e.size,t}function y5(r){return this.__data__.get(r)}function b5(r){return this.__data__.has(r)}var _5=200;function x5(r,e){var t=this.__data__;if(t instanceof gs){var n=t.__data__;if(!px||n.length<_5-1)return n.push([r,e]),this.size=++t.size,this;t=this.__data__=new qo(n)}return t.set(r,e),this.size=t.size,this}function Ko(r){var e=this.__data__=new gs(r);this.size=e.size}Ko.prototype.clear=m5;Ko.prototype.delete=v5;Ko.prototype.get=y5;Ko.prototype.has=b5;Ko.prototype.set=x5;var Tx=typeof zn=="object"&&zn&&!zn.nodeType&&zn,rv=Tx&&typeof Hn=="object"&&Hn&&!Hn.nodeType&&Hn,C5=rv&&rv.exports===Tx,sv=C5?Uo.Buffer:void 0;sv&&sv.allocUnsafe;function w5(r,e){return r.slice()}var iv=Uo.Uint8Array;function S5(r){var e=new r.constructor(r.byteLength);return new iv(e).set(new iv(r)),e}function T5(r,e){var t=S5(r.buffer);return new r.constructor(t,r.byteOffset,r.length)}function O5(r){return typeof r.constructor=="function"&&!lx(r)?sD(mx(r)):{}}function E5(r){return function(e,t,n){for(var s=-1,i=Object(e),o=n(e),a=o.length;a--;){var l=o[++s];if(t(i[l],l,i)===!1)break}return e}}var M5=E5();function Jd(r,e,t){(t!==void 0&&!Gu(r[e],t)||t===void 0&&!(e in r))&&gg(r,e,t)}function P5(r){return Go(r)&&pg(r)}function Qd(r,e){if(!(e==="constructor"&&typeof r[e]=="function")&&e!="__proto__")return r[e]}function A5(r){return bD(r,gx(r))}function F5(r,e,t,n,s,i,o){var a=Qd(r,t),l=Qd(e,t),c=o.get(l);if(c){Jd(r,t,c);return}var u=i?i(a,l,t+"",r,e,o):void 0,h=u===void 0;if(h){var d=ru(l),f=!d&&hx(l),g=!d&&!f&&fx(l);u=l,d||f||g?ru(a)?u=a:P5(a)?u=oD(a):f?(h=!1,u=w5(l)):g?(h=!1,u=T5(l)):u=[]:N3(l)||qd(l)?(u=a,qd(a)?u=A5(a):(!Ui(a)||dg(a))&&(u=O5(l))):h=!1}h&&(o.set(l,u),s(u,l,n,i,o),o.delete(l)),Jd(r,t,u)}function Ox(r,e,t,n,s){r!==e&&M5(e,function(i,o){if(s||(s=new Ko),Ui(i))F5(r,e,o,t,Ox,n,s);else{var a=n?n(Qd(r,o),i,o+"",r,e,s):void 0;a===void 0&&(a=i),Jd(r,o,a)}},gx)}var ic=SD(function(r,e,t){Ox(r,e,t)});function Ex(r){const{mergedLocaleRef:e,mergedDateLocaleRef:t}=Ct(Xi,null)||{},n=me(()=>{var i,o;return(o=(i=e==null?void 0:e.value)===null||i===void 0?void 0:i[r])!==null&&o!==void 0?o:Gk[r]});return{dateLocaleRef:me(()=>{var i;return(i=t==null?void 0:t.value)!==null&&i!==void 0?i:MR}),localeRef:n}}const _l="naive-ui-style";function Zu(r,e,t){if(!e)return;const n=Xu(),s=me(()=>{const{value:a}=e;if(!a)return;const l=a[r];if(l)return l}),i=Ct(Xi,null),o=()=>{Qa(()=>{const{value:a}=t,l=`${a}${r}Rtl`;if(NF(l,n))return;const{value:c}=s;c&&c.style.mount({id:l,head:!0,anchorMetaName:_l,props:{bPrefix:a?`.${a}-`:void 0},ssr:n,parent:i==null?void 0:i.styleMountTarget})})};return n?o():_u(o),s}const Rl={fontFamily:'v-sans, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',fontFamilyMono:"v-mono, SFMono-Regular, Menlo, Consolas, Courier, monospace",fontWeight:"400",fontWeightStrong:"500",cubicBezierEaseInOut:"cubic-bezier(.4, 0, .2, 1)",cubicBezierEaseOut:"cubic-bezier(0, 0, .2, 1)",cubicBezierEaseIn:"cubic-bezier(.4, 0, 1, 1)",borderRadius:"3px",borderRadiusSmall:"2px",fontSize:"14px",fontSizeMini:"12px",fontSizeTiny:"12px",fontSizeSmall:"14px",fontSizeMedium:"14px",fontSizeLarge:"15px",fontSizeHuge:"16px",lineHeight:"1.6",heightMini:"16px",heightTiny:"22px",heightSmall:"28px",heightMedium:"34px",heightLarge:"40px",heightHuge:"46px"},{fontSize:k5,fontFamily:R5,lineHeight:D5}=Rl,Mx=be("body",`
 margin: 0;
 font-size: ${k5};
 font-family: ${R5};
 line-height: ${D5};
 -webkit-text-size-adjust: 100%;
 -webkit-tap-highlight-color: transparent;
`,[be("input",`
 font-family: inherit;
 font-size: inherit;
 `)]);function Dl(r,e,t){if(!e)return;const n=Xu(),s=Ct(Xi,null),i=()=>{const o=t.value;e.mount({id:o===void 0?r:o+r,head:!0,anchorMetaName:_l,props:{bPrefix:o?`.${o}-`:void 0},ssr:n,parent:s==null?void 0:s.styleMountTarget}),s!=null&&s.preflightStyleDisabled||Mx.mount({id:"n-global",head:!0,anchorMetaName:_l,ssr:n,parent:s==null?void 0:s.styleMountTarget})};n?i():_u(i)}function vr(r,e,t,n,s,i){const o=Xu(),a=Ct(Xi,null);if(t){const c=()=>{const u=i==null?void 0:i.value;t.mount({id:u===void 0?e:u+e,head:!0,props:{bPrefix:u?`.${u}-`:void 0},anchorMetaName:_l,ssr:o,parent:a==null?void 0:a.styleMountTarget}),a!=null&&a.preflightStyleDisabled||Mx.mount({id:"n-global",head:!0,anchorMetaName:_l,ssr:o,parent:a==null?void 0:a.styleMountTarget})};o?c():_u(c)}return me(()=>{var c;const{theme:{common:u,self:h,peers:d={}}={},themeOverrides:f={},builtinThemeOverrides:g={}}=s,{common:p,peers:m}=f,{common:v=void 0,[r]:{common:_=void 0,self:x=void 0,peers:y={}}={}}=(a==null?void 0:a.mergedThemeRef.value)||{},{common:C=void 0,[r]:E={}}=(a==null?void 0:a.mergedThemeOverridesRef.value)||{},{common:b,peers:w={}}=E,S=ic({},u||_||v||n.common,C,b,p),$=ic((c=h||x||n.self)===null||c===void 0?void 0:c(S),g,E,f);return{common:S,self:$,peers:ic({},n.peers,y,d),peerOverrides:ic({},g.peers,w,m)}})}vr.props={theme:Object,themeOverrides:Object,builtinThemeOverrides:Object};const I5=je("base-icon",`
 height: 1em;
 width: 1em;
 line-height: 1em;
 text-align: center;
 display: inline-block;
 position: relative;
 fill: currentColor;
 transform: translateZ(0);
`,[be("svg",`
 height: 1em;
 width: 1em;
 `)]),zo=Re({name:"BaseIcon",props:{role:String,ariaLabel:String,ariaDisabled:{type:Boolean,default:void 0},ariaHidden:{type:Boolean,default:void 0},clsPrefix:{type:String,required:!0},onClick:Function,onMousedown:Function,onMouseup:Function},setup(r){Dl("-base-icon",I5,Di(r,"clsPrefix"))},render(){return J("i",{class:`${this.clsPrefix}-base-icon`,onClick:this.onClick,onMousedown:this.onMousedown,onMouseup:this.onMouseup,role:this.role,"aria-label":this.ariaLabel,"aria-hidden":this.ariaHidden,"aria-disabled":this.ariaDisabled},this.$slots)}}),mg=Re({name:"BaseIconSwitchTransition",setup(r,{slots:e}){const t=hk();return()=>J(Ac,{name:"icon-switch-transition",appear:t.value},e)}}),L5=Re({name:"Add",render(){return J("svg",{width:"512",height:"512",viewBox:"0 0 512 512",fill:"none",xmlns:"http://www.w3.org/2000/svg"},J("path",{d:"M256 112V400M400 256H112",stroke:"currentColor","stroke-width":"32","stroke-linecap":"round","stroke-linejoin":"round"}))}});function B5(r,e){const t=Re({render(){return e()}});return Re({name:p5(r),setup(){var n;const s=(n=Ct(Xi,null))===null||n===void 0?void 0:n.mergedIconsRef;return()=>{var i;const o=(i=s==null?void 0:s.value)===null||i===void 0?void 0:i[r];return o?o():J(t,null)}}})}const j5=Re({name:"ChevronDown",render(){return J("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},J("path",{d:"M3.14645 5.64645C3.34171 5.45118 3.65829 5.45118 3.85355 5.64645L8 9.79289L12.1464 5.64645C12.3417 5.45118 12.6583 5.45118 12.8536 5.64645C13.0488 5.84171 13.0488 6.15829 12.8536 6.35355L8.35355 10.8536C8.15829 11.0488 7.84171 11.0488 7.64645 10.8536L3.14645 6.35355C2.95118 6.15829 2.95118 5.84171 3.14645 5.64645Z",fill:"currentColor"}))}}),z5=B5("clear",()=>J("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},J("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},J("g",{fill:"currentColor","fill-rule":"nonzero"},J("path",{d:"M8,2 C11.3137085,2 14,4.6862915 14,8 C14,11.3137085 11.3137085,14 8,14 C4.6862915,14 2,11.3137085 2,8 C2,4.6862915 4.6862915,2 8,2 Z M6.5343055,5.83859116 C6.33943736,5.70359511 6.07001296,5.72288026 5.89644661,5.89644661 L5.89644661,5.89644661 L5.83859116,5.9656945 C5.70359511,6.16056264 5.72288026,6.42998704 5.89644661,6.60355339 L5.89644661,6.60355339 L7.293,8 L5.89644661,9.39644661 L5.83859116,9.4656945 C5.70359511,9.66056264 5.72288026,9.92998704 5.89644661,10.1035534 L5.89644661,10.1035534 L5.9656945,10.1614088 C6.16056264,10.2964049 6.42998704,10.2771197 6.60355339,10.1035534 L6.60355339,10.1035534 L8,8.707 L9.39644661,10.1035534 L9.4656945,10.1614088 C9.66056264,10.2964049 9.92998704,10.2771197 10.1035534,10.1035534 L10.1035534,10.1035534 L10.1614088,10.0343055 C10.2964049,9.83943736 10.2771197,9.57001296 10.1035534,9.39644661 L10.1035534,9.39644661 L8.707,8 L10.1035534,6.60355339 L10.1614088,6.5343055 C10.2964049,6.33943736 10.2771197,6.07001296 10.1035534,5.89644661 L10.1035534,5.89644661 L10.0343055,5.83859116 C9.83943736,5.70359511 9.57001296,5.72288026 9.39644661,5.89644661 L9.39644661,5.89644661 L8,7.293 L6.60355339,5.89644661 Z"}))))),H5=Re({name:"Eye",render(){return J("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},J("path",{d:"M255.66 112c-77.94 0-157.89 45.11-220.83 135.33a16 16 0 0 0-.27 17.77C82.92 340.8 161.8 400 255.66 400c92.84 0 173.34-59.38 221.79-135.25a16.14 16.14 0 0 0 0-17.47C428.89 172.28 347.8 112 255.66 112z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"}),J("circle",{cx:"256",cy:"256",r:"80",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"}))}}),$5=Re({name:"EyeOff",render(){return J("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},J("path",{d:"M432 448a15.92 15.92 0 0 1-11.31-4.69l-352-352a16 16 0 0 1 22.62-22.62l352 352A16 16 0 0 1 432 448z",fill:"currentColor"}),J("path",{d:"M255.66 384c-41.49 0-81.5-12.28-118.92-36.5c-34.07-22-64.74-53.51-88.7-91v-.08c19.94-28.57 41.78-52.73 65.24-72.21a2 2 0 0 0 .14-2.94L93.5 161.38a2 2 0 0 0-2.71-.12c-24.92 21-48.05 46.76-69.08 76.92a31.92 31.92 0 0 0-.64 35.54c26.41 41.33 60.4 76.14 98.28 100.65C162 402 207.9 416 255.66 416a239.13 239.13 0 0 0 75.8-12.58a2 2 0 0 0 .77-3.31l-21.58-21.58a4 4 0 0 0-3.83-1a204.8 204.8 0 0 1-51.16 6.47z",fill:"currentColor"}),J("path",{d:"M490.84 238.6c-26.46-40.92-60.79-75.68-99.27-100.53C349 110.55 302 96 255.66 96a227.34 227.34 0 0 0-74.89 12.83a2 2 0 0 0-.75 3.31l21.55 21.55a4 4 0 0 0 3.88 1a192.82 192.82 0 0 1 50.21-6.69c40.69 0 80.58 12.43 118.55 37c34.71 22.4 65.74 53.88 89.76 91a.13.13 0 0 1 0 .16a310.72 310.72 0 0 1-64.12 72.73a2 2 0 0 0-.15 2.95l19.9 19.89a2 2 0 0 0 2.7.13a343.49 343.49 0 0 0 68.64-78.48a32.2 32.2 0 0 0-.1-34.78z",fill:"currentColor"}),J("path",{d:"M256 160a95.88 95.88 0 0 0-21.37 2.4a2 2 0 0 0-1 3.38l112.59 112.56a2 2 0 0 0 3.38-1A96 96 0 0 0 256 160z",fill:"currentColor"}),J("path",{d:"M165.78 233.66a2 2 0 0 0-3.38 1a96 96 0 0 0 115 115a2 2 0 0 0 1-3.38z",fill:"currentColor"}))}}),N5=Re({name:"Remove",render(){return J("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},J("line",{x1:"400",y1:"256",x2:"112",y2:"256",style:`
        fill: none;
        stroke: currentColor;
        stroke-linecap: round;
        stroke-linejoin: round;
        stroke-width: 32px;
      `}))}}),{cubicBezierEaseInOut:V5}=Rl;function iu({originalTransform:r="",left:e=0,top:t=0,transition:n=`all .3s ${V5} !important`}={}){return[be("&.icon-switch-transition-enter-from, &.icon-switch-transition-leave-to",{transform:`${r} scale(0.75)`,left:e,top:t,opacity:0}),be("&.icon-switch-transition-enter-to, &.icon-switch-transition-leave-from",{transform:`scale(1) ${r}`,left:e,top:t,opacity:1}),be("&.icon-switch-transition-enter-active, &.icon-switch-transition-leave-active",{transformOrigin:"center",position:"absolute",left:e,top:t,transition:n})]}const W5=je("base-clear",`
 flex-shrink: 0;
 height: 1em;
 width: 1em;
 position: relative;
`,[be(">",[he("clear",`
 font-size: var(--n-clear-size);
 height: 1em;
 width: 1em;
 cursor: pointer;
 color: var(--n-clear-color);
 transition: color .3s var(--n-bezier);
 display: flex;
 `,[be("&:hover",`
 color: var(--n-clear-color-hover)!important;
 `),be("&:active",`
 color: var(--n-clear-color-pressed)!important;
 `)]),he("placeholder",`
 display: flex;
 `),he("clear, placeholder",`
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 `,[iu({originalTransform:"translateX(-50%) translateY(-50%)",left:"50%",top:"50%"})])])]),ef=Re({name:"BaseClear",props:{clsPrefix:{type:String,required:!0},show:Boolean,onClear:Function},setup(r){return Dl("-base-clear",W5,Di(r,"clsPrefix")),{handleMouseDown(e){e.preventDefault()}}},render(){const{clsPrefix:r}=this;return J("div",{class:`${r}-base-clear`},J(mg,null,{default:()=>{var e,t;return this.show?J("div",{key:"dismiss",class:`${r}-base-clear__clear`,onClick:this.onClear,onMousedown:this.handleMouseDown,"data-clear":!0},ki(this.$slots.icon,()=>[J(zo,{clsPrefix:r},{default:()=>J(z5,null)})])):J("div",{key:"icon",class:`${r}-base-clear__placeholder`},(t=(e=this.$slots).placeholder)===null||t===void 0?void 0:t.call(e))}}))}}),Y5=Re({name:"FadeInExpandTransition",props:{appear:Boolean,group:Boolean,mode:String,onLeave:Function,onAfterLeave:Function,onAfterEnter:Function,width:Boolean,reverse:Boolean},setup(r,{slots:e}){function t(a){r.width?a.style.maxWidth=`${a.offsetWidth}px`:a.style.maxHeight=`${a.offsetHeight}px`,a.offsetWidth}function n(a){r.width?a.style.maxWidth="0":a.style.maxHeight="0",a.offsetWidth;const{onLeave:l}=r;l&&l()}function s(a){r.width?a.style.maxWidth="":a.style.maxHeight="";const{onAfterLeave:l}=r;l&&l()}function i(a){if(a.style.transition="none",r.width){const l=a.offsetWidth;a.style.maxWidth="0",a.offsetWidth,a.style.transition="",a.style.maxWidth=`${l}px`}else if(r.reverse)a.style.maxHeight=`${a.offsetHeight}px`,a.offsetHeight,a.style.transition="",a.style.maxHeight="0";else{const l=a.offsetHeight;a.style.maxHeight="0",a.offsetWidth,a.style.transition="",a.style.maxHeight=`${l}px`}a.offsetWidth}function o(a){var l;r.width?a.style.maxWidth="":r.reverse||(a.style.maxHeight=""),(l=r.onAfterEnter)===null||l===void 0||l.call(r)}return()=>{const{group:a,width:l,appear:c,mode:u}=r,h=a?Bw:Ac,d={name:l?"fade-in-width-expand-transition":"fade-in-height-expand-transition",appear:c,onEnter:i,onAfterEnter:o,onBeforeLeave:t,onLeave:n,onAfterLeave:s};return a||(d.mode=u),J(h,d,e)}}}),X5=be([be("@keyframes rotator",`
 0% {
 -webkit-transform: rotate(0deg);
 transform: rotate(0deg);
 }
 100% {
 -webkit-transform: rotate(360deg);
 transform: rotate(360deg);
 }`),je("base-loading",`
 position: relative;
 line-height: 0;
 width: 1em;
 height: 1em;
 `,[he("transition-wrapper",`
 position: absolute;
 width: 100%;
 height: 100%;
 `,[iu()]),he("placeholder",`
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 `,[iu({left:"50%",top:"50%",originalTransform:"translateX(-50%) translateY(-50%)"})]),he("container",`
 animation: rotator 3s linear infinite both;
 `,[he("icon",`
 height: 1em;
 width: 1em;
 `)])])]),Xh="1.6s",U5={strokeWidth:{type:Number,default:28},stroke:{type:String,default:void 0}},Px=Re({name:"BaseLoading",props:Object.assign({clsPrefix:{type:String,required:!0},show:{type:Boolean,default:!0},scale:{type:Number,default:1},radius:{type:Number,default:100}},U5),setup(r){Dl("-base-loading",X5,Di(r,"clsPrefix"))},render(){const{clsPrefix:r,radius:e,strokeWidth:t,stroke:n,scale:s}=this,i=e/s;return J("div",{class:`${r}-base-loading`,role:"img","aria-label":"loading"},J(mg,null,{default:()=>this.show?J("div",{key:"icon",class:`${r}-base-loading__transition-wrapper`},J("div",{class:`${r}-base-loading__container`},J("svg",{class:`${r}-base-loading__icon`,viewBox:`0 0 ${2*i} ${2*i}`,xmlns:"http://www.w3.org/2000/svg",style:{color:n}},J("g",null,J("animateTransform",{attributeName:"transform",type:"rotate",values:`0 ${i} ${i};270 ${i} ${i}`,begin:"0s",dur:Xh,fill:"freeze",repeatCount:"indefinite"}),J("circle",{class:`${r}-base-loading__icon`,fill:"none",stroke:"currentColor","stroke-width":t,"stroke-linecap":"round",cx:i,cy:i,r:e-t/2,"stroke-dasharray":5.67*e,"stroke-dashoffset":18.48*e},J("animateTransform",{attributeName:"transform",type:"rotate",values:`0 ${i} ${i};135 ${i} ${i};450 ${i} ${i}`,begin:"0s",dur:Xh,fill:"freeze",repeatCount:"indefinite"}),J("animate",{attributeName:"stroke-dashoffset",values:`${5.67*e};${1.42*e};${5.67*e}`,begin:"0s",dur:Xh,fill:"freeze",repeatCount:"indefinite"})))))):J("div",{key:"placeholder",class:`${r}-base-loading__placeholder`},this.$slots)}))}}),{cubicBezierEaseInOut:ov}=Rl;function G5({name:r="fade-in",enterDuration:e="0.2s",leaveDuration:t="0.2s",enterCubicBezier:n=ov,leaveCubicBezier:s=ov}={}){return[be(`&.${r}-transition-enter-active`,{transition:`all ${e} ${n}!important`}),be(`&.${r}-transition-leave-active`,{transition:`all ${t} ${s}!important`}),be(`&.${r}-transition-enter-from, &.${r}-transition-leave-to`,{opacity:0}),be(`&.${r}-transition-leave-from, &.${r}-transition-enter-to`,{opacity:1})]}const xe={neutralBase:"#FFF",neutralInvertBase:"#000",neutralTextBase:"#000",neutralPopover:"#fff",neutralCard:"#fff",neutralModal:"#fff",neutralBody:"#fff",alpha1:"0.82",alpha2:"0.72",alpha3:"0.38",alpha4:"0.24",alpha5:"0.18",alphaClose:"0.6",alphaDisabled:"0.5",alphaAvatar:"0.2",alphaProgressRail:".08",alphaInput:"0",alphaScrollbar:"0.25",alphaScrollbarHover:"0.4",primaryHover:"#36ad6a",primaryDefault:"#18a058",primaryActive:"#0c7a43",primarySuppl:"#36ad6a",infoHover:"#4098fc",infoDefault:"#2080f0",infoActive:"#1060c9",infoSuppl:"#4098fc",errorHover:"#de576d",errorDefault:"#d03050",errorActive:"#ab1f3f",errorSuppl:"#de576d",warningHover:"#fcb040",warningDefault:"#f0a020",warningActive:"#c97c10",warningSuppl:"#fcb040",successHover:"#36ad6a",successDefault:"#18a058",successActive:"#0c7a43",successSuppl:"#36ad6a"},q5=Us(xe.neutralBase),Ax=Us(xe.neutralInvertBase),K5=`rgba(${Ax.slice(0,3).join(", ")}, `;function av(r){return`${K5+String(r)})`}function Kt(r){const e=Array.from(Ax);return e[3]=Number(r),cg(q5,e)}const Il=Object.assign(Object.assign({name:"common"},Rl),{baseColor:xe.neutralBase,primaryColor:xe.primaryDefault,primaryColorHover:xe.primaryHover,primaryColorPressed:xe.primaryActive,primaryColorSuppl:xe.primarySuppl,infoColor:xe.infoDefault,infoColorHover:xe.infoHover,infoColorPressed:xe.infoActive,infoColorSuppl:xe.infoSuppl,successColor:xe.successDefault,successColorHover:xe.successHover,successColorPressed:xe.successActive,successColorSuppl:xe.successSuppl,warningColor:xe.warningDefault,warningColorHover:xe.warningHover,warningColorPressed:xe.warningActive,warningColorSuppl:xe.warningSuppl,errorColor:xe.errorDefault,errorColorHover:xe.errorHover,errorColorPressed:xe.errorActive,errorColorSuppl:xe.errorSuppl,textColorBase:xe.neutralTextBase,textColor1:"rgb(31, 34, 37)",textColor2:"rgb(51, 54, 57)",textColor3:"rgb(118, 124, 130)",textColorDisabled:Kt(xe.alpha4),placeholderColor:Kt(xe.alpha4),placeholderColorDisabled:Kt(xe.alpha5),iconColor:Kt(xe.alpha4),iconColorHover:tc(Kt(xe.alpha4),{lightness:.75}),iconColorPressed:tc(Kt(xe.alpha4),{lightness:.9}),iconColorDisabled:Kt(xe.alpha5),opacity1:xe.alpha1,opacity2:xe.alpha2,opacity3:xe.alpha3,opacity4:xe.alpha4,opacity5:xe.alpha5,dividerColor:"rgb(239, 239, 245)",borderColor:"rgb(224, 224, 230)",closeIconColor:Kt(Number(xe.alphaClose)),closeIconColorHover:Kt(Number(xe.alphaClose)),closeIconColorPressed:Kt(Number(xe.alphaClose)),closeColorHover:"rgba(0, 0, 0, .09)",closeColorPressed:"rgba(0, 0, 0, .13)",clearColor:Kt(xe.alpha4),clearColorHover:tc(Kt(xe.alpha4),{lightness:.75}),clearColorPressed:tc(Kt(xe.alpha4),{lightness:.9}),scrollbarColor:av(xe.alphaScrollbar),scrollbarColorHover:av(xe.alphaScrollbarHover),scrollbarWidth:"5px",scrollbarHeight:"5px",scrollbarBorderRadius:"5px",progressRailColor:Kt(xe.alphaProgressRail),railColor:"rgb(219, 219, 223)",popoverColor:xe.neutralPopover,tableColor:xe.neutralCard,cardColor:xe.neutralCard,modalColor:xe.neutralModal,bodyColor:xe.neutralBody,tagColor:"#eee",avatarColor:Kt(xe.alphaAvatar),invertedColor:"rgb(0, 20, 40)",inputColor:Kt(xe.alphaInput),codeColor:"rgb(244, 244, 248)",tabColor:"rgb(247, 247, 250)",actionColor:"rgb(250, 250, 252)",tableHeaderColor:"rgb(250, 250, 252)",hoverColor:"rgb(243, 243, 245)",tableColorHover:"rgba(0, 0, 100, 0.03)",tableColorStriped:"rgba(0, 0, 100, 0.02)",pressedColor:"rgb(237, 237, 239)",opacityDisabled:xe.alphaDisabled,inputColorDisabled:"rgb(250, 250, 252)",buttonColor2:"rgba(46, 51, 56, .05)",buttonColor2Hover:"rgba(46, 51, 56, .09)",buttonColor2Pressed:"rgba(46, 51, 56, .13)",boxShadow1:"0 1px 2px -2px rgba(0, 0, 0, .08), 0 3px 6px 0 rgba(0, 0, 0, .06), 0 5px 12px 4px rgba(0, 0, 0, .04)",boxShadow2:"0 3px 6px -4px rgba(0, 0, 0, .12), 0 6px 16px 0 rgba(0, 0, 0, .08), 0 9px 28px 8px rgba(0, 0, 0, .05)",boxShadow3:"0 6px 16px -9px rgba(0, 0, 0, .08), 0 9px 28px 0 rgba(0, 0, 0, .05), 0 12px 48px 16px rgba(0, 0, 0, .03)"}),Z5={railInsetHorizontalBottom:"auto 2px 4px 2px",railInsetHorizontalTop:"4px 2px auto 2px",railInsetVerticalRight:"2px 4px 2px auto",railInsetVerticalLeft:"2px auto 2px 4px",railColor:"transparent"};function J5(r){const{scrollbarColor:e,scrollbarColorHover:t,scrollbarHeight:n,scrollbarWidth:s,scrollbarBorderRadius:i}=r;return Object.assign(Object.assign({},Z5),{height:n,width:s,borderRadius:i,color:e,colorHover:t})}const Q5={common:Il,self:J5},eI=je("scrollbar",`
 overflow: hidden;
 position: relative;
 z-index: auto;
 height: 100%;
 width: 100%;
`,[be(">",[je("scrollbar-container",`
 width: 100%;
 overflow: scroll;
 height: 100%;
 min-height: inherit;
 max-height: inherit;
 scrollbar-width: none;
 `,[be("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",`
 width: 0;
 height: 0;
 display: none;
 `),be(">",[je("scrollbar-content",`
 box-sizing: border-box;
 min-width: 100%;
 `)])])]),be(">, +",[je("scrollbar-rail",`
 position: absolute;
 pointer-events: none;
 user-select: none;
 background: var(--n-scrollbar-rail-color);
 -webkit-user-select: none;
 `,[Ye("horizontal",`
 height: var(--n-scrollbar-height);
 `,[be(">",[he("scrollbar",`
 height: var(--n-scrollbar-height);
 border-radius: var(--n-scrollbar-border-radius);
 right: 0;
 `)])]),Ye("horizontal--top",`
 top: var(--n-scrollbar-rail-top-horizontal-top); 
 right: var(--n-scrollbar-rail-right-horizontal-top); 
 bottom: var(--n-scrollbar-rail-bottom-horizontal-top); 
 left: var(--n-scrollbar-rail-left-horizontal-top); 
 `),Ye("horizontal--bottom",`
 top: var(--n-scrollbar-rail-top-horizontal-bottom); 
 right: var(--n-scrollbar-rail-right-horizontal-bottom); 
 bottom: var(--n-scrollbar-rail-bottom-horizontal-bottom); 
 left: var(--n-scrollbar-rail-left-horizontal-bottom); 
 `),Ye("vertical",`
 width: var(--n-scrollbar-width);
 `,[be(">",[he("scrollbar",`
 width: var(--n-scrollbar-width);
 border-radius: var(--n-scrollbar-border-radius);
 bottom: 0;
 `)])]),Ye("vertical--left",`
 top: var(--n-scrollbar-rail-top-vertical-left); 
 right: var(--n-scrollbar-rail-right-vertical-left); 
 bottom: var(--n-scrollbar-rail-bottom-vertical-left); 
 left: var(--n-scrollbar-rail-left-vertical-left); 
 `),Ye("vertical--right",`
 top: var(--n-scrollbar-rail-top-vertical-right); 
 right: var(--n-scrollbar-rail-right-vertical-right); 
 bottom: var(--n-scrollbar-rail-bottom-vertical-right); 
 left: var(--n-scrollbar-rail-left-vertical-right); 
 `),Ye("disabled",[be(">",[he("scrollbar","pointer-events: none;")])]),be(">",[he("scrollbar",`
 z-index: 1;
 position: absolute;
 cursor: pointer;
 pointer-events: all;
 background-color: var(--n-scrollbar-color);
 transition: background-color .2s var(--n-scrollbar-bezier);
 `,[G5(),be("&:hover","background-color: var(--n-scrollbar-color-hover);")])])])])]),tI=Object.assign(Object.assign({},vr.props),{duration:{type:Number,default:0},scrollable:{type:Boolean,default:!0},xScrollable:Boolean,trigger:{type:String,default:"hover"},useUnifiedContainer:Boolean,triggerDisplayManually:Boolean,container:Function,content:Function,containerClass:String,containerStyle:[String,Object],contentClass:[String,Array],contentStyle:[String,Object],horizontalRailStyle:[String,Object],verticalRailStyle:[String,Object],onScroll:Function,onWheel:Function,onResize:Function,internalOnUpdateScrollLeft:Function,internalHoistYRail:Boolean,yPlacement:{type:String,default:"right"},xPlacement:{type:String,default:"bottom"}}),nI=Re({name:"Scrollbar",props:tI,inheritAttrs:!1,setup(r){const{mergedClsPrefixRef:e,inlineThemeDisabled:t,mergedRtlRef:n}=Fl(r),s=Zu("Scrollbar",n,e),i=G(null),o=G(null),a=G(null),l=G(null),c=G(null),u=G(null),h=G(null),d=G(null),f=G(null),g=G(null),p=G(null),m=G(0),v=G(0),_=G(!1),x=G(!1);let y=!1,C=!1,E,b,w=0,S=0,$=0,N=0;const H=fk(),U=vr("Scrollbar","-scrollbar",eI,Q5,r,e),ee=me(()=>{const{value:ne}=d,{value:pe}=u,{value:Oe}=g;return ne===null||pe===null||Oe===null?0:Math.min(ne,Oe*ne/pe+Mm(U.value.self.width)*1.5)}),re=me(()=>`${ee.value}px`),te=me(()=>{const{value:ne}=f,{value:pe}=h,{value:Oe}=p;return ne===null||pe===null||Oe===null?0:Oe*ne/pe+Mm(U.value.self.height)*1.5}),z=me(()=>`${te.value}px`),R=me(()=>{const{value:ne}=d,{value:pe}=m,{value:Oe}=u,{value:Ze}=g;if(ne===null||Oe===null||Ze===null)return 0;{const yt=Oe-ne;return yt?pe/yt*(Ze-ee.value):0}}),ue=me(()=>`${R.value}px`),de=me(()=>{const{value:ne}=f,{value:pe}=v,{value:Oe}=h,{value:Ze}=p;if(ne===null||Oe===null||Ze===null)return 0;{const yt=Oe-ne;return yt?pe/yt*(Ze-te.value):0}}),Ce=me(()=>`${de.value}px`),fe=me(()=>{const{value:ne}=d,{value:pe}=u;return ne!==null&&pe!==null&&pe>ne}),$e=me(()=>{const{value:ne}=f,{value:pe}=h;return ne!==null&&pe!==null&&pe>ne}),Te=me(()=>{const{trigger:ne}=r;return ne==="none"||_.value}),De=me(()=>{const{trigger:ne}=r;return ne==="none"||x.value}),ve=me(()=>{const{container:ne}=r;return ne?ne():o.value}),M=me(()=>{const{content:ne}=r;return ne?ne():a.value}),D=(ne,pe)=>{if(!r.scrollable)return;if(typeof ne=="number"){O(ne,pe??0,0,!1,"auto");return}const{left:Oe,top:Ze,index:yt,elSize:Gt,position:An,behavior:tt,el:qt,debounce:br=!0}=ne;(Oe!==void 0||Ze!==void 0)&&O(Oe??0,Ze??0,0,!1,tt),qt!==void 0?O(0,qt.offsetTop,qt.offsetHeight,br,tt):yt!==void 0&&Gt!==void 0?O(0,yt*Gt,Gt,br,tt):An==="bottom"?O(0,Number.MAX_SAFE_INTEGER,0,!1,tt):An==="top"&&O(0,0,0,!1,tt)},B=gk(()=>{r.container||D({top:m.value,left:v.value})}),se=()=>{B.isDeactivated||ge()},Me=ne=>{if(B.isDeactivated)return;const{onResize:pe}=r;pe&&pe(ne),ge()},T=(ne,pe)=>{if(!r.scrollable)return;const{value:Oe}=ve;Oe&&(typeof ne=="object"?Oe.scrollBy(ne):Oe.scrollBy(ne,pe||0))};function O(ne,pe,Oe,Ze,yt){const{value:Gt}=ve;if(Gt){if(Ze){const{scrollTop:An,offsetHeight:tt}=Gt;if(pe>An){pe+Oe<=An+tt||Gt.scrollTo({left:ne,top:pe+Oe-tt,behavior:yt});return}}Gt.scrollTo({left:ne,top:pe,behavior:yt})}}function L(){K(),W(),ge()}function q(){Z()}function Z(){k(),V()}function k(){b!==void 0&&window.clearTimeout(b),b=window.setTimeout(()=>{x.value=!1},r.duration)}function V(){E!==void 0&&window.clearTimeout(E),E=window.setTimeout(()=>{_.value=!1},r.duration)}function K(){E!==void 0&&window.clearTimeout(E),_.value=!0}function W(){b!==void 0&&window.clearTimeout(b),x.value=!0}function Y(ne){const{onScroll:pe}=r;pe&&pe(ne),ae()}function ae(){const{value:ne}=ve;ne&&(m.value=ne.scrollTop,v.value=ne.scrollLeft*(s!=null&&s.value?-1:1))}function ie(){const{value:ne}=M;ne&&(u.value=ne.offsetHeight,h.value=ne.offsetWidth);const{value:pe}=ve;pe&&(d.value=pe.offsetHeight,f.value=pe.offsetWidth);const{value:Oe}=c,{value:Ze}=l;Oe&&(p.value=Oe.offsetWidth),Ze&&(g.value=Ze.offsetHeight)}function le(){const{value:ne}=ve;ne&&(m.value=ne.scrollTop,v.value=ne.scrollLeft*(s!=null&&s.value?-1:1),d.value=ne.offsetHeight,f.value=ne.offsetWidth,u.value=ne.scrollHeight,h.value=ne.scrollWidth);const{value:pe}=c,{value:Oe}=l;pe&&(p.value=pe.offsetWidth),Oe&&(g.value=Oe.offsetHeight)}function ge(){r.scrollable&&(r.useUnifiedContainer?le():(ie(),ae()))}function Pe(ne){var pe;return!(!((pe=i.value)===null||pe===void 0)&&pe.contains(UF(ne)))}function Be(ne){ne.preventDefault(),ne.stopPropagation(),C=!0,is("mousemove",window,Ie,!0),is("mouseup",window,Rt,!0),S=v.value,$=s!=null&&s.value?window.innerWidth-ne.clientX:ne.clientX}function Ie(ne){if(!C)return;E!==void 0&&window.clearTimeout(E),b!==void 0&&window.clearTimeout(b);const{value:pe}=f,{value:Oe}=h,{value:Ze}=te;if(pe===null||Oe===null)return;const Gt=(s!=null&&s.value?window.innerWidth-ne.clientX-$:ne.clientX-$)*(Oe-pe)/(pe-Ze),An=Oe-pe;let tt=S+Gt;tt=Math.min(An,tt),tt=Math.max(tt,0);const{value:qt}=ve;if(qt){qt.scrollLeft=tt*(s!=null&&s.value?-1:1);const{internalOnUpdateScrollLeft:br}=r;br&&br(tt)}}function Rt(ne){ne.preventDefault(),ne.stopPropagation(),ts("mousemove",window,Ie,!0),ts("mouseup",window,Rt,!0),C=!1,ge(),Pe(ne)&&Z()}function Dt(ne){ne.preventDefault(),ne.stopPropagation(),y=!0,is("mousemove",window,Yt,!0),is("mouseup",window,Xt,!0),w=m.value,N=ne.clientY}function Yt(ne){if(!y)return;E!==void 0&&window.clearTimeout(E),b!==void 0&&window.clearTimeout(b);const{value:pe}=d,{value:Oe}=u,{value:Ze}=ee;if(pe===null||Oe===null)return;const Gt=(ne.clientY-N)*(Oe-pe)/(pe-Ze),An=Oe-pe;let tt=w+Gt;tt=Math.min(An,tt),tt=Math.max(tt,0);const{value:qt}=ve;qt&&(qt.scrollTop=tt)}function Xt(ne){ne.preventDefault(),ne.stopPropagation(),ts("mousemove",window,Yt,!0),ts("mouseup",window,Xt,!0),y=!1,ge(),Pe(ne)&&Z()}Qa(()=>{const{value:ne}=$e,{value:pe}=fe,{value:Oe}=e,{value:Ze}=c,{value:yt}=l;Ze&&(ne?Ze.classList.remove(`${Oe}-scrollbar-rail--disabled`):Ze.classList.add(`${Oe}-scrollbar-rail--disabled`)),yt&&(pe?yt.classList.remove(`${Oe}-scrollbar-rail--disabled`):yt.classList.add(`${Oe}-scrollbar-rail--disabled`))}),Et(()=>{r.container||ge()}),Ho(()=>{E!==void 0&&window.clearTimeout(E),b!==void 0&&window.clearTimeout(b),ts("mousemove",window,Yt,!0),ts("mouseup",window,Xt,!0)});const yr=me(()=>{const{common:{cubicBezierEaseInOut:ne},self:{color:pe,colorHover:Oe,height:Ze,width:yt,borderRadius:Gt,railInsetHorizontalTop:An,railInsetHorizontalBottom:tt,railInsetVerticalRight:qt,railInsetVerticalLeft:br,railColor:Ll}}=U.value,{top:Ju,right:Gi,bottom:qi,left:Qu}=oo(An),{top:eh,right:Bl,bottom:ps,left:I}=oo(tt),{top:Q,right:_e,bottom:qe,left:rt}=oo(s!=null&&s.value?Vm(qt):qt),{top:Ue,right:Yr,bottom:Xr,left:Ur}=oo(s!=null&&s.value?Vm(br):br);return{"--n-scrollbar-bezier":ne,"--n-scrollbar-color":pe,"--n-scrollbar-color-hover":Oe,"--n-scrollbar-border-radius":Gt,"--n-scrollbar-width":yt,"--n-scrollbar-height":Ze,"--n-scrollbar-rail-top-horizontal-top":Ju,"--n-scrollbar-rail-right-horizontal-top":Gi,"--n-scrollbar-rail-bottom-horizontal-top":qi,"--n-scrollbar-rail-left-horizontal-top":Qu,"--n-scrollbar-rail-top-horizontal-bottom":eh,"--n-scrollbar-rail-right-horizontal-bottom":Bl,"--n-scrollbar-rail-bottom-horizontal-bottom":ps,"--n-scrollbar-rail-left-horizontal-bottom":I,"--n-scrollbar-rail-top-vertical-right":Q,"--n-scrollbar-rail-right-vertical-right":_e,"--n-scrollbar-rail-bottom-vertical-right":qe,"--n-scrollbar-rail-left-vertical-right":rt,"--n-scrollbar-rail-top-vertical-left":Ue,"--n-scrollbar-rail-right-vertical-left":Yr,"--n-scrollbar-rail-bottom-vertical-left":Xr,"--n-scrollbar-rail-left-vertical-left":Ur,"--n-scrollbar-rail-color":Ll}}),rr=t?Uu("scrollbar",void 0,yr,r):void 0;return Object.assign(Object.assign({},{scrollTo:D,scrollBy:T,sync:ge,syncUnifiedContainer:le,handleMouseEnterWrapper:L,handleMouseLeaveWrapper:q}),{mergedClsPrefix:e,rtlEnabled:s,containerScrollTop:m,wrapperRef:i,containerRef:o,contentRef:a,yRailRef:l,xRailRef:c,needYBar:fe,needXBar:$e,yBarSizePx:re,xBarSizePx:z,yBarTopPx:ue,xBarLeftPx:Ce,isShowXBar:Te,isShowYBar:De,isIos:H,handleScroll:Y,handleContentResize:se,handleContainerResize:Me,handleYScrollMouseDown:Dt,handleXScrollMouseDown:Be,cssVars:t?void 0:yr,themeClass:rr==null?void 0:rr.themeClass,onRender:rr==null?void 0:rr.onRender})},render(){var r;const{$slots:e,mergedClsPrefix:t,triggerDisplayManually:n,rtlEnabled:s,internalHoistYRail:i,yPlacement:o,xPlacement:a,xScrollable:l}=this;if(!this.scrollable)return(r=e.default)===null||r===void 0?void 0:r.call(e);const c=this.trigger==="none",u=(f,g)=>J("div",{ref:"yRailRef",class:[`${t}-scrollbar-rail`,`${t}-scrollbar-rail--vertical`,`${t}-scrollbar-rail--vertical--${o}`,f],"data-scrollbar-rail":!0,style:[g||"",this.verticalRailStyle],"aria-hidden":!0},J(c?Wm:Ac,c?null:{name:"fade-in-transition"},{default:()=>this.needYBar&&this.isShowYBar&&!this.isIos?J("div",{class:`${t}-scrollbar-rail__scrollbar`,style:{height:this.yBarSizePx,top:this.yBarTopPx},onMousedown:this.handleYScrollMouseDown}):null})),h=()=>{var f,g;return(f=this.onRender)===null||f===void 0||f.call(this),J("div",bf(this.$attrs,{role:"none",ref:"wrapperRef",class:[`${t}-scrollbar`,this.themeClass,s&&`${t}-scrollbar--rtl`],style:this.cssVars,onMouseenter:n?void 0:this.handleMouseEnterWrapper,onMouseleave:n?void 0:this.handleMouseLeaveWrapper}),[this.container?(g=e.default)===null||g===void 0?void 0:g.call(e):J("div",{role:"none",ref:"containerRef",class:[`${t}-scrollbar-container`,this.containerClass],style:this.containerStyle,onScroll:this.handleScroll,onWheel:this.onWheel},J(Gd,{onResize:this.handleContentResize},{default:()=>J("div",{ref:"contentRef",role:"none",style:[{width:this.xScrollable?"fit-content":null},this.contentStyle],class:[`${t}-scrollbar-content`,this.contentClass]},e)})),i?null:u(void 0,void 0),l&&J("div",{ref:"xRailRef",class:[`${t}-scrollbar-rail`,`${t}-scrollbar-rail--horizontal`,`${t}-scrollbar-rail--horizontal--${a}`],style:this.horizontalRailStyle,"data-scrollbar-rail":!0,"aria-hidden":!0},J(c?Wm:Ac,c?null:{name:"fade-in-transition"},{default:()=>this.needXBar&&this.isShowXBar&&!this.isIos?J("div",{class:`${t}-scrollbar-rail__scrollbar`,style:{width:this.xBarSizePx,right:s?this.xBarLeftPx:void 0,left:s?void 0:this.xBarLeftPx},onMousedown:this.handleXScrollMouseDown}):null}))])},d=this.container?h():J(Gd,{onResize:this.handleContainerResize},{default:h});return i?J(Ne,null,d,u(this.themeClass,this.cssVars)):d}}),rI=Re({name:"InternalSelectionSuffix",props:{clsPrefix:{type:String,required:!0},showArrow:{type:Boolean,default:void 0},showClear:{type:Boolean,default:void 0},loading:{type:Boolean,default:!1},onClear:Function},setup(r,{slots:e}){return()=>{const{clsPrefix:t}=r;return J(Px,{clsPrefix:t,class:`${t}-base-suffix`,strokeWidth:24,scale:.85,show:r.loading},{default:()=>r.showArrow?J(ef,{clsPrefix:t,show:r.showClear,onClear:r.onClear},{placeholder:()=>J(zo,{clsPrefix:t,class:`${t}-base-suffix__arrow`},{default:()=>ki(e.default,()=>[J(j5,null)])})}):null})}}}),{cubicBezierEaseInOut:_s}=Rl;function sI({duration:r=".2s",delay:e=".1s"}={}){return[be("&.fade-in-width-expand-transition-leave-from, &.fade-in-width-expand-transition-enter-to",{opacity:1}),be("&.fade-in-width-expand-transition-leave-to, &.fade-in-width-expand-transition-enter-from",`
 opacity: 0!important;
 margin-left: 0!important;
 margin-right: 0!important;
 `),be("&.fade-in-width-expand-transition-leave-active",`
 overflow: hidden;
 transition:
 opacity ${r} ${_s},
 max-width ${r} ${_s} ${e},
 margin-left ${r} ${_s} ${e},
 margin-right ${r} ${_s} ${e};
 `),be("&.fade-in-width-expand-transition-enter-active",`
 overflow: hidden;
 transition:
 opacity ${r} ${_s} ${e},
 max-width ${r} ${_s},
 margin-left ${r} ${_s},
 margin-right ${r} ${_s};
 `)]}const iI=je("base-wave",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 border-radius: inherit;
`),oI=Re({name:"BaseWave",props:{clsPrefix:{type:String,required:!0}},setup(r){Dl("-base-wave",iI,Di(r,"clsPrefix"));const e=G(null),t=G(!1);let n=null;return Ho(()=>{n!==null&&window.clearTimeout(n)}),{active:t,selfRef:e,play(){n!==null&&(window.clearTimeout(n),t.value=!1,n=null),dr(()=>{var s;(s=e.value)===null||s===void 0||s.offsetHeight,t.value=!0,n=window.setTimeout(()=>{t.value=!1,n=null},1e3)})}}},render(){const{clsPrefix:r}=this;return J("div",{ref:"selfRef","aria-hidden":!0,class:[`${r}-base-wave`,this.active&&`${r}-base-wave--active`]})}}),aI=Yu&&"chrome"in window;Yu&&navigator.userAgent.includes("Firefox");const Fx=Yu&&navigator.userAgent.includes("Safari")&&!aI,lI={paddingTiny:"0 8px",paddingSmall:"0 10px",paddingMedium:"0 12px",paddingLarge:"0 14px",clearSize:"16px"};function cI(r){const{textColor2:e,textColor3:t,textColorDisabled:n,primaryColor:s,primaryColorHover:i,inputColor:o,inputColorDisabled:a,borderColor:l,warningColor:c,warningColorHover:u,errorColor:h,errorColorHover:d,borderRadius:f,lineHeight:g,fontSizeTiny:p,fontSizeSmall:m,fontSizeMedium:v,fontSizeLarge:_,heightTiny:x,heightSmall:y,heightMedium:C,heightLarge:E,actionColor:b,clearColor:w,clearColorHover:S,clearColorPressed:$,placeholderColor:N,placeholderColorDisabled:H,iconColor:U,iconColorDisabled:ee,iconColorHover:re,iconColorPressed:te,fontWeight:z}=r;return Object.assign(Object.assign({},lI),{fontWeight:z,countTextColorDisabled:n,countTextColor:t,heightTiny:x,heightSmall:y,heightMedium:C,heightLarge:E,fontSizeTiny:p,fontSizeSmall:m,fontSizeMedium:v,fontSizeLarge:_,lineHeight:g,lineHeightTextarea:g,borderRadius:f,iconSize:"16px",groupLabelColor:b,groupLabelTextColor:e,textColor:e,textColorDisabled:n,textDecorationColor:e,caretColor:s,placeholderColor:N,placeholderColorDisabled:H,color:o,colorDisabled:a,colorFocus:o,groupLabelBorder:`1px solid ${l}`,border:`1px solid ${l}`,borderHover:`1px solid ${i}`,borderDisabled:`1px solid ${l}`,borderFocus:`1px solid ${i}`,boxShadowFocus:`0 0 0 2px ${xi(s,{alpha:.2})}`,loadingColor:s,loadingColorWarning:c,borderWarning:`1px solid ${c}`,borderHoverWarning:`1px solid ${u}`,colorFocusWarning:o,borderFocusWarning:`1px solid ${u}`,boxShadowFocusWarning:`0 0 0 2px ${xi(c,{alpha:.2})}`,caretColorWarning:c,loadingColorError:h,borderError:`1px solid ${h}`,borderHoverError:`1px solid ${d}`,colorFocusError:o,borderFocusError:`1px solid ${d}`,boxShadowFocusError:`0 0 0 2px ${xi(h,{alpha:.2})}`,caretColorError:h,clearColor:w,clearColorHover:S,clearColorPressed:$,iconColor:U,iconColorDisabled:ee,iconColorHover:re,iconColorPressed:te,suffixTextColor:e})}const kx={name:"Input",common:Il,self:cI},Rx="n-input",uI=je("input",`
 max-width: 100%;
 cursor: text;
 line-height: 1.5;
 z-index: auto;
 outline: none;
 box-sizing: border-box;
 position: relative;
 display: inline-flex;
 border-radius: var(--n-border-radius);
 background-color: var(--n-color);
 transition: background-color .3s var(--n-bezier);
 font-size: var(--n-font-size);
 font-weight: var(--n-font-weight);
 --n-padding-vertical: calc((var(--n-height) - 1.5 * var(--n-font-size)) / 2);
`,[he("input, textarea",`
 overflow: hidden;
 flex-grow: 1;
 position: relative;
 `),he("input-el, textarea-el, input-mirror, textarea-mirror, separator, placeholder",`
 box-sizing: border-box;
 font-size: inherit;
 line-height: 1.5;
 font-family: inherit;
 border: none;
 outline: none;
 background-color: #0000;
 text-align: inherit;
 transition:
 -webkit-text-fill-color .3s var(--n-bezier),
 caret-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 text-decoration-color .3s var(--n-bezier);
 `),he("input-el, textarea-el",`
 -webkit-appearance: none;
 scrollbar-width: none;
 width: 100%;
 min-width: 0;
 text-decoration-color: var(--n-text-decoration-color);
 color: var(--n-text-color);
 caret-color: var(--n-caret-color);
 background-color: transparent;
 `,[be("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",`
 width: 0;
 height: 0;
 display: none;
 `),be("&::placeholder",`
 color: #0000;
 -webkit-text-fill-color: transparent !important;
 `),be("&:-webkit-autofill ~",[he("placeholder","display: none;")])]),Ye("round",[gi("textarea","border-radius: calc(var(--n-height) / 2);")]),he("placeholder",`
 pointer-events: none;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 overflow: hidden;
 color: var(--n-placeholder-color);
 `,[be("span",`
 width: 100%;
 display: inline-block;
 `)]),Ye("textarea",[he("placeholder","overflow: visible;")]),gi("autosize","width: 100%;"),Ye("autosize",[he("textarea-el, input-el",`
 position: absolute;
 top: 0;
 left: 0;
 height: 100%;
 `)]),je("input-wrapper",`
 overflow: hidden;
 display: inline-flex;
 flex-grow: 1;
 position: relative;
 padding-left: var(--n-padding-left);
 padding-right: var(--n-padding-right);
 `),he("input-mirror",`
 padding: 0;
 height: var(--n-height);
 line-height: var(--n-height);
 overflow: hidden;
 visibility: hidden;
 position: static;
 white-space: pre;
 pointer-events: none;
 `),he("input-el",`
 padding: 0;
 height: var(--n-height);
 line-height: var(--n-height);
 `,[be("&[type=password]::-ms-reveal","display: none;"),be("+",[he("placeholder",`
 display: flex;
 align-items: center; 
 `)])]),gi("textarea",[he("placeholder","white-space: nowrap;")]),he("eye",`
 display: flex;
 align-items: center;
 justify-content: center;
 transition: color .3s var(--n-bezier);
 `),Ye("textarea","width: 100%;",[je("input-word-count",`
 position: absolute;
 right: var(--n-padding-right);
 bottom: var(--n-padding-vertical);
 `),Ye("resizable",[je("input-wrapper",`
 resize: vertical;
 min-height: var(--n-height);
 `)]),he("textarea-el, textarea-mirror, placeholder",`
 height: 100%;
 padding-left: 0;
 padding-right: 0;
 padding-top: var(--n-padding-vertical);
 padding-bottom: var(--n-padding-vertical);
 word-break: break-word;
 display: inline-block;
 vertical-align: bottom;
 box-sizing: border-box;
 line-height: var(--n-line-height-textarea);
 margin: 0;
 resize: none;
 white-space: pre-wrap;
 scroll-padding-block-end: var(--n-padding-vertical);
 `),he("textarea-mirror",`
 width: 100%;
 pointer-events: none;
 overflow: hidden;
 visibility: hidden;
 position: static;
 white-space: pre-wrap;
 overflow-wrap: break-word;
 `)]),Ye("pair",[he("input-el, placeholder","text-align: center;"),he("separator",`
 display: flex;
 align-items: center;
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
 white-space: nowrap;
 `,[je("icon",`
 color: var(--n-icon-color);
 `),je("base-icon",`
 color: var(--n-icon-color);
 `)])]),Ye("disabled",`
 cursor: not-allowed;
 background-color: var(--n-color-disabled);
 `,[he("border","border: var(--n-border-disabled);"),he("input-el, textarea-el",`
 cursor: not-allowed;
 color: var(--n-text-color-disabled);
 text-decoration-color: var(--n-text-color-disabled);
 `),he("placeholder","color: var(--n-placeholder-color-disabled);"),he("separator","color: var(--n-text-color-disabled);",[je("icon",`
 color: var(--n-icon-color-disabled);
 `),je("base-icon",`
 color: var(--n-icon-color-disabled);
 `)]),je("input-word-count",`
 color: var(--n-count-text-color-disabled);
 `),he("suffix, prefix","color: var(--n-text-color-disabled);",[je("icon",`
 color: var(--n-icon-color-disabled);
 `),je("internal-icon",`
 color: var(--n-icon-color-disabled);
 `)])]),gi("disabled",[he("eye",`
 color: var(--n-icon-color);
 cursor: pointer;
 `,[be("&:hover",`
 color: var(--n-icon-color-hover);
 `),be("&:active",`
 color: var(--n-icon-color-pressed);
 `)]),be("&:hover",[he("state-border","border: var(--n-border-hover);")]),Ye("focus","background-color: var(--n-color-focus);",[he("state-border",`
 border: var(--n-border-focus);
 box-shadow: var(--n-box-shadow-focus);
 `)])]),he("border, state-border",`
 box-sizing: border-box;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 pointer-events: none;
 border-radius: inherit;
 border: var(--n-border);
 transition:
 box-shadow .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `),he("state-border",`
 border-color: #0000;
 z-index: 1;
 `),he("prefix","margin-right: 4px;"),he("suffix",`
 margin-left: 4px;
 `),he("suffix, prefix",`
 transition: color .3s var(--n-bezier);
 flex-wrap: nowrap;
 flex-shrink: 0;
 line-height: var(--n-height);
 white-space: nowrap;
 display: inline-flex;
 align-items: center;
 justify-content: center;
 color: var(--n-suffix-text-color);
 `,[je("base-loading",`
 font-size: var(--n-icon-size);
 margin: 0 2px;
 color: var(--n-loading-color);
 `),je("base-clear",`
 font-size: var(--n-icon-size);
 `,[he("placeholder",[je("base-icon",`
 transition: color .3s var(--n-bezier);
 color: var(--n-icon-color);
 font-size: var(--n-icon-size);
 `)])]),be(">",[je("icon",`
 transition: color .3s var(--n-bezier);
 color: var(--n-icon-color);
 font-size: var(--n-icon-size);
 `)]),je("base-icon",`
 font-size: var(--n-icon-size);
 `)]),je("input-word-count",`
 pointer-events: none;
 line-height: 1.5;
 font-size: .85em;
 color: var(--n-count-text-color);
 transition: color .3s var(--n-bezier);
 margin-left: 4px;
 font-variant: tabular-nums;
 `),["warning","error"].map(r=>Ye(`${r}-status`,[gi("disabled",[je("base-loading",`
 color: var(--n-loading-color-${r})
 `),he("input-el, textarea-el",`
 caret-color: var(--n-caret-color-${r});
 `),he("state-border",`
 border: var(--n-border-${r});
 `),be("&:hover",[he("state-border",`
 border: var(--n-border-hover-${r});
 `)]),be("&:focus",`
 background-color: var(--n-color-focus-${r});
 `,[he("state-border",`
 box-shadow: var(--n-box-shadow-focus-${r});
 border: var(--n-border-focus-${r});
 `)]),Ye("focus",`
 background-color: var(--n-color-focus-${r});
 `,[he("state-border",`
 box-shadow: var(--n-box-shadow-focus-${r});
 border: var(--n-border-focus-${r});
 `)])])]))]),hI=je("input",[Ye("disabled",[he("input-el, textarea-el",`
 -webkit-text-fill-color: var(--n-text-color-disabled);
 `)])]);function dI(r){let e=0;for(const t of r)e++;return e}function oc(r){return r===""||r==null}function fI(r){const e=G(null);function t(){const{value:i}=r;if(!(i!=null&&i.focus)){s();return}const{selectionStart:o,selectionEnd:a,value:l}=i;if(o==null||a==null){s();return}e.value={start:o,end:a,beforeText:l.slice(0,o),afterText:l.slice(a)}}function n(){var i;const{value:o}=e,{value:a}=r;if(!o||!a)return;const{value:l}=a,{start:c,beforeText:u,afterText:h}=o;let d=l.length;if(l.endsWith(h))d=l.length-h.length;else if(l.startsWith(u))d=u.length;else{const f=u[c-1],g=l.indexOf(f,c-1);g!==-1&&(d=g+1)}(i=a.setSelectionRange)===null||i===void 0||i.call(a,d,d)}function s(){e.value=null}return Ot(r,s),{recordCursor:t,restoreCursor:n}}const lv=Re({name:"InputWordCount",setup(r,{slots:e}){const{mergedValueRef:t,maxlengthRef:n,mergedClsPrefixRef:s,countGraphemesRef:i}=Ct(Rx),o=me(()=>{const{value:a}=t;return a===null||Array.isArray(a)?0:(i.value||dI)(a)});return()=>{const{value:a}=n,{value:l}=t;return J("span",{class:`${s.value}-input-word-count`},Yk(e.default,{value:l===null||Array.isArray(l)?"":l},()=>[a===void 0?o.value:`${o.value} / ${a}`]))}}}),gI=Object.assign(Object.assign({},vr.props),{bordered:{type:Boolean,default:void 0},type:{type:String,default:"text"},placeholder:[Array,String],defaultValue:{type:[String,Array],default:null},value:[String,Array],disabled:{type:Boolean,default:void 0},size:String,rows:{type:[Number,String],default:3},round:Boolean,minlength:[String,Number],maxlength:[String,Number],clearable:Boolean,autosize:{type:[Boolean,Object],default:!1},pair:Boolean,separator:String,readonly:{type:[String,Boolean],default:!1},passivelyActivated:Boolean,showPasswordOn:String,stateful:{type:Boolean,default:!0},autofocus:Boolean,inputProps:Object,resizable:{type:Boolean,default:!0},showCount:Boolean,loading:{type:Boolean,default:void 0},allowInput:Function,renderCount:Function,onMousedown:Function,onKeydown:Function,onKeyup:[Function,Array],onInput:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onClick:[Function,Array],onChange:[Function,Array],onClear:[Function,Array],countGraphemes:Function,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],textDecoration:[String,Array],attrSize:{type:Number,default:20},onInputBlur:[Function,Array],onInputFocus:[Function,Array],onDeactivate:[Function,Array],onActivate:[Function,Array],onWrapperFocus:[Function,Array],onWrapperBlur:[Function,Array],internalDeactivateOnEnter:Boolean,internalForceFocus:Boolean,internalLoadingBeforeSuffix:{type:Boolean,default:!0},showPasswordToggle:Boolean}),Dx=Re({name:"Input",props:gI,slots:Object,setup(r){const{mergedClsPrefixRef:e,mergedBorderedRef:t,inlineThemeDisabled:n,mergedRtlRef:s}=Fl(r),i=vr("Input","-input",uI,kx,r,e);Fx&&Dl("-input-safari",hI,e);const o=G(null),a=G(null),l=G(null),c=G(null),u=G(null),h=G(null),d=G(null),f=fI(d),g=G(null),{localeRef:p}=Ex("Input"),m=G(r.defaultValue),v=Di(r,"value"),_=q_(v,m),x=hg(r),{mergedSizeRef:y,mergedDisabledRef:C,mergedStatusRef:E}=x,b=G(!1),w=G(!1),S=G(!1),$=G(!1);let N=null;const H=me(()=>{const{placeholder:I,pair:Q}=r;return Q?Array.isArray(I)?I:I===void 0?["",""]:[I,I]:I===void 0?[p.value.placeholder]:[I]}),U=me(()=>{const{value:I}=S,{value:Q}=_,{value:_e}=H;return!I&&(oc(Q)||Array.isArray(Q)&&oc(Q[0]))&&_e[0]}),ee=me(()=>{const{value:I}=S,{value:Q}=_,{value:_e}=H;return!I&&_e[1]&&(oc(Q)||Array.isArray(Q)&&oc(Q[1]))}),re=Or(()=>r.internalForceFocus||b.value),te=Or(()=>{if(C.value||r.readonly||!r.clearable||!re.value&&!w.value)return!1;const{value:I}=_,{value:Q}=re;return r.pair?!!(Array.isArray(I)&&(I[0]||I[1]))&&(w.value||Q):!!I&&(w.value||Q)}),z=me(()=>{const{showPasswordOn:I}=r;if(I)return I;if(r.showPasswordToggle)return"click"}),R=G(!1),ue=me(()=>{const{textDecoration:I}=r;return I?Array.isArray(I)?I.map(Q=>({textDecoration:Q})):[{textDecoration:I}]:["",""]}),de=G(void 0),Ce=()=>{var I,Q;if(r.type==="textarea"){const{autosize:_e}=r;if(_e&&(de.value=(Q=(I=g.value)===null||I===void 0?void 0:I.$el)===null||Q===void 0?void 0:Q.offsetWidth),!a.value||typeof _e=="boolean")return;const{paddingTop:qe,paddingBottom:rt,lineHeight:Ue}=window.getComputedStyle(a.value),Yr=Number(qe.slice(0,-2)),Xr=Number(rt.slice(0,-2)),Ur=Number(Ue.slice(0,-2)),{value:Zo}=l;if(!Zo)return;if(_e.minRows){const Jo=Math.max(_e.minRows,1),th=`${Yr+Xr+Ur*Jo}px`;Zo.style.minHeight=th}if(_e.maxRows){const Jo=`${Yr+Xr+Ur*_e.maxRows}px`;Zo.style.maxHeight=Jo}}},fe=me(()=>{const{maxlength:I}=r;return I===void 0?void 0:Number(I)});Et(()=>{const{value:I}=_;Array.isArray(I)||qt(I)});const $e=wl().proxy;function Te(I,Q){const{onUpdateValue:_e,"onUpdate:value":qe,onInput:rt}=r,{nTriggerFormInput:Ue}=x;_e&&st(_e,I,Q),qe&&st(qe,I,Q),rt&&st(rt,I,Q),m.value=I,Ue()}function De(I,Q){const{onChange:_e}=r,{nTriggerFormChange:qe}=x;_e&&st(_e,I,Q),m.value=I,qe()}function ve(I){const{onBlur:Q}=r,{nTriggerFormBlur:_e}=x;Q&&st(Q,I),_e()}function M(I){const{onFocus:Q}=r,{nTriggerFormFocus:_e}=x;Q&&st(Q,I),_e()}function D(I){const{onClear:Q}=r;Q&&st(Q,I)}function B(I){const{onInputBlur:Q}=r;Q&&st(Q,I)}function se(I){const{onInputFocus:Q}=r;Q&&st(Q,I)}function Me(){const{onDeactivate:I}=r;I&&st(I)}function T(){const{onActivate:I}=r;I&&st(I)}function O(I){const{onClick:Q}=r;Q&&st(Q,I)}function L(I){const{onWrapperFocus:Q}=r;Q&&st(Q,I)}function q(I){const{onWrapperBlur:Q}=r;Q&&st(Q,I)}function Z(){S.value=!0}function k(I){S.value=!1,I.target===h.value?V(I,1):V(I,0)}function V(I,Q=0,_e="input"){const qe=I.target.value;if(qt(qe),I instanceof InputEvent&&!I.isComposing&&(S.value=!1),r.type==="textarea"){const{value:Ue}=g;Ue&&Ue.syncUnifiedContainer()}if(N=qe,S.value)return;f.recordCursor();const rt=K(qe);if(rt)if(!r.pair)_e==="input"?Te(qe,{source:Q}):De(qe,{source:Q});else{let{value:Ue}=_;Array.isArray(Ue)?Ue=[Ue[0],Ue[1]]:Ue=["",""],Ue[Q]=qe,_e==="input"?Te(Ue,{source:Q}):De(Ue,{source:Q})}$e.$forceUpdate(),rt||dr(f.restoreCursor)}function K(I){const{countGraphemes:Q,maxlength:_e,minlength:qe}=r;if(Q){let Ue;if(_e!==void 0&&(Ue===void 0&&(Ue=Q(I)),Ue>Number(_e))||qe!==void 0&&(Ue===void 0&&(Ue=Q(I)),Ue<Number(_e)))return!1}const{allowInput:rt}=r;return typeof rt=="function"?rt(I):!0}function W(I){B(I),I.relatedTarget===o.value&&Me(),I.relatedTarget!==null&&(I.relatedTarget===u.value||I.relatedTarget===h.value||I.relatedTarget===a.value)||($.value=!1),le(I,"blur"),d.value=null}function Y(I,Q){se(I),b.value=!0,$.value=!0,T(),le(I,"focus"),Q===0?d.value=u.value:Q===1?d.value=h.value:Q===2&&(d.value=a.value)}function ae(I){r.passivelyActivated&&(q(I),le(I,"blur"))}function ie(I){r.passivelyActivated&&(b.value=!0,L(I),le(I,"focus"))}function le(I,Q){I.relatedTarget!==null&&(I.relatedTarget===u.value||I.relatedTarget===h.value||I.relatedTarget===a.value||I.relatedTarget===o.value)||(Q==="focus"?(M(I),b.value=!0):Q==="blur"&&(ve(I),b.value=!1))}function ge(I,Q){V(I,Q,"change")}function Pe(I){O(I)}function Be(I){D(I),Ie()}function Ie(){r.pair?(Te(["",""],{source:"clear"}),De(["",""],{source:"clear"})):(Te("",{source:"clear"}),De("",{source:"clear"}))}function Rt(I){const{onMousedown:Q}=r;Q&&Q(I);const{tagName:_e}=I.target;if(_e!=="INPUT"&&_e!=="TEXTAREA"){if(r.resizable){const{value:qe}=o;if(qe){const{left:rt,top:Ue,width:Yr,height:Xr}=qe.getBoundingClientRect(),Ur=14;if(rt+Yr-Ur<I.clientX&&I.clientX<rt+Yr&&Ue+Xr-Ur<I.clientY&&I.clientY<Ue+Xr)return}}I.preventDefault(),b.value||Oe()}}function Dt(){var I;w.value=!0,r.type==="textarea"&&((I=g.value)===null||I===void 0||I.handleMouseEnterWrapper())}function Yt(){var I;w.value=!1,r.type==="textarea"&&((I=g.value)===null||I===void 0||I.handleMouseLeaveWrapper())}function Xt(){C.value||z.value==="click"&&(R.value=!R.value)}function yr(I){if(C.value)return;I.preventDefault();const Q=qe=>{qe.preventDefault(),ts("mouseup",document,Q)};if(is("mouseup",document,Q),z.value!=="mousedown")return;R.value=!0;const _e=()=>{R.value=!1,ts("mouseup",document,_e)};is("mouseup",document,_e)}function rr(I){r.onKeyup&&st(r.onKeyup,I)}function Ut(I){switch(r.onKeydown&&st(r.onKeydown,I),I.key){case"Escape":pe();break;case"Enter":ne(I);break}}function ne(I){var Q,_e;if(r.passivelyActivated){const{value:qe}=$;if(qe){r.internalDeactivateOnEnter&&pe();return}I.preventDefault(),r.type==="textarea"?(Q=a.value)===null||Q===void 0||Q.focus():(_e=u.value)===null||_e===void 0||_e.focus()}}function pe(){r.passivelyActivated&&($.value=!1,dr(()=>{var I;(I=o.value)===null||I===void 0||I.focus()}))}function Oe(){var I,Q,_e;C.value||(r.passivelyActivated?(I=o.value)===null||I===void 0||I.focus():((Q=a.value)===null||Q===void 0||Q.focus(),(_e=u.value)===null||_e===void 0||_e.focus()))}function Ze(){var I;!((I=o.value)===null||I===void 0)&&I.contains(document.activeElement)&&document.activeElement.blur()}function yt(){var I,Q;(I=a.value)===null||I===void 0||I.select(),(Q=u.value)===null||Q===void 0||Q.select()}function Gt(){C.value||(a.value?a.value.focus():u.value&&u.value.focus())}function An(){const{value:I}=o;I!=null&&I.contains(document.activeElement)&&I!==document.activeElement&&pe()}function tt(I){if(r.type==="textarea"){const{value:Q}=a;Q==null||Q.scrollTo(I)}else{const{value:Q}=u;Q==null||Q.scrollTo(I)}}function qt(I){const{type:Q,pair:_e,autosize:qe}=r;if(!_e&&qe)if(Q==="textarea"){const{value:rt}=l;rt&&(rt.textContent=`${I??""}\r
`)}else{const{value:rt}=c;rt&&(I?rt.textContent=I:rt.innerHTML="&nbsp;")}}function br(){Ce()}const Ll=G({top:"0"});function Ju(I){var Q;const{scrollTop:_e}=I.target;Ll.value.top=`${-_e}px`,(Q=g.value)===null||Q===void 0||Q.syncUnifiedContainer()}let Gi=null;Qa(()=>{const{autosize:I,type:Q}=r;I&&Q==="textarea"?Gi=Ot(_,_e=>{!Array.isArray(_e)&&_e!==N&&qt(_e)}):Gi==null||Gi()});let qi=null;Qa(()=>{r.type==="textarea"?qi=Ot(_,I=>{var Q;!Array.isArray(I)&&I!==N&&((Q=g.value)===null||Q===void 0||Q.syncUnifiedContainer())}):qi==null||qi()}),po(Rx,{mergedValueRef:_,maxlengthRef:fe,mergedClsPrefixRef:e,countGraphemesRef:Di(r,"countGraphemes")});const Qu={wrapperElRef:o,inputElRef:u,textareaElRef:a,isCompositing:S,clear:Ie,focus:Oe,blur:Ze,select:yt,deactivate:An,activate:Gt,scrollTo:tt},eh=Zu("Input",s,e),Bl=me(()=>{const{value:I}=y,{common:{cubicBezierEaseInOut:Q},self:{color:_e,borderRadius:qe,textColor:rt,caretColor:Ue,caretColorError:Yr,caretColorWarning:Xr,textDecorationColor:Ur,border:Zo,borderDisabled:Jo,borderHover:th,borderFocus:jx,placeholderColor:zx,placeholderColorDisabled:Hx,lineHeightTextarea:$x,colorDisabled:Nx,colorFocus:Vx,textColorDisabled:Wx,boxShadowFocus:Yx,iconSize:Xx,colorFocusWarning:Ux,boxShadowFocusWarning:Gx,borderWarning:qx,borderFocusWarning:Kx,borderHoverWarning:Zx,colorFocusError:Jx,boxShadowFocusError:Qx,borderError:eC,borderFocusError:tC,borderHoverError:nC,clearSize:rC,clearColor:sC,clearColorHover:iC,clearColorPressed:oC,iconColor:aC,iconColorDisabled:lC,suffixTextColor:cC,countTextColor:uC,countTextColorDisabled:hC,iconColorHover:dC,iconColorPressed:fC,loadingColor:gC,loadingColorError:pC,loadingColorWarning:mC,fontWeight:vC,[ke("padding",I)]:yC,[ke("fontSize",I)]:bC,[ke("height",I)]:_C}}=i.value,{left:xC,right:CC}=oo(yC);return{"--n-bezier":Q,"--n-count-text-color":uC,"--n-count-text-color-disabled":hC,"--n-color":_e,"--n-font-size":bC,"--n-font-weight":vC,"--n-border-radius":qe,"--n-height":_C,"--n-padding-left":xC,"--n-padding-right":CC,"--n-text-color":rt,"--n-caret-color":Ue,"--n-text-decoration-color":Ur,"--n-border":Zo,"--n-border-disabled":Jo,"--n-border-hover":th,"--n-border-focus":jx,"--n-placeholder-color":zx,"--n-placeholder-color-disabled":Hx,"--n-icon-size":Xx,"--n-line-height-textarea":$x,"--n-color-disabled":Nx,"--n-color-focus":Vx,"--n-text-color-disabled":Wx,"--n-box-shadow-focus":Yx,"--n-loading-color":gC,"--n-caret-color-warning":Xr,"--n-color-focus-warning":Ux,"--n-box-shadow-focus-warning":Gx,"--n-border-warning":qx,"--n-border-focus-warning":Kx,"--n-border-hover-warning":Zx,"--n-loading-color-warning":mC,"--n-caret-color-error":Yr,"--n-color-focus-error":Jx,"--n-box-shadow-focus-error":Qx,"--n-border-error":eC,"--n-border-focus-error":tC,"--n-border-hover-error":nC,"--n-loading-color-error":pC,"--n-clear-color":sC,"--n-clear-size":rC,"--n-clear-color-hover":iC,"--n-clear-color-pressed":oC,"--n-icon-color":aC,"--n-icon-color-hover":dC,"--n-icon-color-pressed":fC,"--n-icon-color-disabled":lC,"--n-suffix-text-color":cC}}),ps=n?Uu("input",me(()=>{const{value:I}=y;return I[0]}),Bl,r):void 0;return Object.assign(Object.assign({},Qu),{wrapperElRef:o,inputElRef:u,inputMirrorElRef:c,inputEl2Ref:h,textareaElRef:a,textareaMirrorElRef:l,textareaScrollbarInstRef:g,rtlEnabled:eh,uncontrolledValue:m,mergedValue:_,passwordVisible:R,mergedPlaceholder:H,showPlaceholder1:U,showPlaceholder2:ee,mergedFocus:re,isComposing:S,activated:$,showClearButton:te,mergedSize:y,mergedDisabled:C,textDecorationStyle:ue,mergedClsPrefix:e,mergedBordered:t,mergedShowPasswordOn:z,placeholderStyle:Ll,mergedStatus:E,textAreaScrollContainerWidth:de,handleTextAreaScroll:Ju,handleCompositionStart:Z,handleCompositionEnd:k,handleInput:V,handleInputBlur:W,handleInputFocus:Y,handleWrapperBlur:ae,handleWrapperFocus:ie,handleMouseEnter:Dt,handleMouseLeave:Yt,handleMouseDown:Rt,handleChange:ge,handleClick:Pe,handleClear:Be,handlePasswordToggleClick:Xt,handlePasswordToggleMousedown:yr,handleWrapperKeydown:Ut,handleWrapperKeyup:rr,handleTextAreaMirrorResize:br,getTextareaScrollContainer:()=>a.value,mergedTheme:i,cssVars:n?void 0:Bl,themeClass:ps==null?void 0:ps.themeClass,onRender:ps==null?void 0:ps.onRender})},render(){var r,e;const{mergedClsPrefix:t,mergedStatus:n,themeClass:s,type:i,countGraphemes:o,onRender:a}=this,l=this.$slots;return a==null||a(),J("div",{ref:"wrapperElRef",class:[`${t}-input`,s,n&&`${t}-input--${n}-status`,{[`${t}-input--rtl`]:this.rtlEnabled,[`${t}-input--disabled`]:this.mergedDisabled,[`${t}-input--textarea`]:i==="textarea",[`${t}-input--resizable`]:this.resizable&&!this.autosize,[`${t}-input--autosize`]:this.autosize,[`${t}-input--round`]:this.round&&i!=="textarea",[`${t}-input--pair`]:this.pair,[`${t}-input--focus`]:this.mergedFocus,[`${t}-input--stateful`]:this.stateful}],style:this.cssVars,tabindex:!this.mergedDisabled&&this.passivelyActivated&&!this.activated?0:void 0,onFocus:this.handleWrapperFocus,onBlur:this.handleWrapperBlur,onClick:this.handleClick,onMousedown:this.handleMouseDown,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd,onKeyup:this.handleWrapperKeyup,onKeydown:this.handleWrapperKeydown},J("div",{class:`${t}-input-wrapper`},Is(l.prefix,c=>c&&J("div",{class:`${t}-input__prefix`},c)),i==="textarea"?J(nI,{ref:"textareaScrollbarInstRef",class:`${t}-input__textarea`,container:this.getTextareaScrollContainer,triggerDisplayManually:!0,useUnifiedContainer:!0,internalHoistYRail:!0},{default:()=>{var c,u;const{textAreaScrollContainerWidth:h}=this,d={width:this.autosize&&h&&`${h}px`};return J(Ne,null,J("textarea",Object.assign({},this.inputProps,{ref:"textareaElRef",class:[`${t}-input__textarea-el`,(c=this.inputProps)===null||c===void 0?void 0:c.class],autofocus:this.autofocus,rows:Number(this.rows),placeholder:this.placeholder,value:this.mergedValue,disabled:this.mergedDisabled,maxlength:o?void 0:this.maxlength,minlength:o?void 0:this.minlength,readonly:this.readonly,tabindex:this.passivelyActivated&&!this.activated?-1:void 0,style:[this.textDecorationStyle[0],(u=this.inputProps)===null||u===void 0?void 0:u.style,d],onBlur:this.handleInputBlur,onFocus:f=>{this.handleInputFocus(f,2)},onInput:this.handleInput,onChange:this.handleChange,onScroll:this.handleTextAreaScroll})),this.showPlaceholder1?J("div",{class:`${t}-input__placeholder`,style:[this.placeholderStyle,d],key:"placeholder"},this.mergedPlaceholder[0]):null,this.autosize?J(Gd,{onResize:this.handleTextAreaMirrorResize},{default:()=>J("div",{ref:"textareaMirrorElRef",class:`${t}-input__textarea-mirror`,key:"mirror"})}):null)}}):J("div",{class:`${t}-input__input`},J("input",Object.assign({type:i==="password"&&this.mergedShowPasswordOn&&this.passwordVisible?"text":i},this.inputProps,{ref:"inputElRef",class:[`${t}-input__input-el`,(r=this.inputProps)===null||r===void 0?void 0:r.class],style:[this.textDecorationStyle[0],(e=this.inputProps)===null||e===void 0?void 0:e.style],tabindex:this.passivelyActivated&&!this.activated?-1:void 0,placeholder:this.mergedPlaceholder[0],disabled:this.mergedDisabled,maxlength:o?void 0:this.maxlength,minlength:o?void 0:this.minlength,value:Array.isArray(this.mergedValue)?this.mergedValue[0]:this.mergedValue,readonly:this.readonly,autofocus:this.autofocus,size:this.attrSize,onBlur:this.handleInputBlur,onFocus:c=>{this.handleInputFocus(c,0)},onInput:c=>{this.handleInput(c,0)},onChange:c=>{this.handleChange(c,0)}})),this.showPlaceholder1?J("div",{class:`${t}-input__placeholder`},J("span",null,this.mergedPlaceholder[0])):null,this.autosize?J("div",{class:`${t}-input__input-mirror`,key:"mirror",ref:"inputMirrorElRef"},""):null),!this.pair&&Is(l.suffix,c=>c||this.clearable||this.showCount||this.mergedShowPasswordOn||this.loading!==void 0?J("div",{class:`${t}-input__suffix`},[Is(l["clear-icon-placeholder"],u=>(this.clearable||u)&&J(ef,{clsPrefix:t,show:this.showClearButton,onClear:this.handleClear},{placeholder:()=>u,icon:()=>{var h,d;return(d=(h=this.$slots)["clear-icon"])===null||d===void 0?void 0:d.call(h)}})),this.internalLoadingBeforeSuffix?null:c,this.loading!==void 0?J(rI,{clsPrefix:t,loading:this.loading,showArrow:!1,showClear:!1,style:this.cssVars}):null,this.internalLoadingBeforeSuffix?c:null,this.showCount&&this.type!=="textarea"?J(lv,null,{default:u=>{var h;const{renderCount:d}=this;return d?d(u):(h=l.count)===null||h===void 0?void 0:h.call(l,u)}}):null,this.mergedShowPasswordOn&&this.type==="password"?J("div",{class:`${t}-input__eye`,onMousedown:this.handlePasswordToggleMousedown,onClick:this.handlePasswordToggleClick},this.passwordVisible?ki(l["password-visible-icon"],()=>[J(zo,{clsPrefix:t},{default:()=>J(H5,null)})]):ki(l["password-invisible-icon"],()=>[J(zo,{clsPrefix:t},{default:()=>J($5,null)})])):null]):null)),this.pair?J("span",{class:`${t}-input__separator`},ki(l.separator,()=>[this.separator])):null,this.pair?J("div",{class:`${t}-input-wrapper`},J("div",{class:`${t}-input__input`},J("input",{ref:"inputEl2Ref",type:this.type,class:`${t}-input__input-el`,tabindex:this.passivelyActivated&&!this.activated?-1:void 0,placeholder:this.mergedPlaceholder[1],disabled:this.mergedDisabled,maxlength:o?void 0:this.maxlength,minlength:o?void 0:this.minlength,value:Array.isArray(this.mergedValue)?this.mergedValue[1]:void 0,readonly:this.readonly,style:this.textDecorationStyle[1],onBlur:this.handleInputBlur,onFocus:c=>{this.handleInputFocus(c,1)},onInput:c=>{this.handleInput(c,1)},onChange:c=>{this.handleChange(c,1)}}),this.showPlaceholder2?J("div",{class:`${t}-input__placeholder`},J("span",null,this.mergedPlaceholder[1])):null),Is(l.suffix,c=>(this.clearable||c)&&J("div",{class:`${t}-input__suffix`},[this.clearable&&J(ef,{clsPrefix:t,show:this.showClearButton,onClear:this.handleClear},{icon:()=>{var u;return(u=l["clear-icon"])===null||u===void 0?void 0:u.call(l)},placeholder:()=>{var u;return(u=l["clear-icon-placeholder"])===null||u===void 0?void 0:u.call(l)}}),c]))):null,this.mergedBordered?J("div",{class:`${t}-input__border`}):null,this.mergedBordered?J("div",{class:`${t}-input__state-border`}):null,this.showCount&&i==="textarea"?J(lv,null,{default:c=>{var u;const{renderCount:h}=this;return h?h(c):(u=l.count)===null||u===void 0?void 0:u.call(l,c)}}):null)}});function ii(r){return cg(r,[255,255,255,.16])}function ac(r){return cg(r,[0,0,0,.12])}const pI="n-button-group",mI={paddingTiny:"0 6px",paddingSmall:"0 10px",paddingMedium:"0 14px",paddingLarge:"0 18px",paddingRoundTiny:"0 10px",paddingRoundSmall:"0 14px",paddingRoundMedium:"0 18px",paddingRoundLarge:"0 22px",iconMarginTiny:"6px",iconMarginSmall:"6px",iconMarginMedium:"6px",iconMarginLarge:"6px",iconSizeTiny:"14px",iconSizeSmall:"18px",iconSizeMedium:"18px",iconSizeLarge:"20px",rippleDuration:".6s"};function vI(r){const{heightTiny:e,heightSmall:t,heightMedium:n,heightLarge:s,borderRadius:i,fontSizeTiny:o,fontSizeSmall:a,fontSizeMedium:l,fontSizeLarge:c,opacityDisabled:u,textColor2:h,textColor3:d,primaryColorHover:f,primaryColorPressed:g,borderColor:p,primaryColor:m,baseColor:v,infoColor:_,infoColorHover:x,infoColorPressed:y,successColor:C,successColorHover:E,successColorPressed:b,warningColor:w,warningColorHover:S,warningColorPressed:$,errorColor:N,errorColorHover:H,errorColorPressed:U,fontWeight:ee,buttonColor2:re,buttonColor2Hover:te,buttonColor2Pressed:z,fontWeightStrong:R}=r;return Object.assign(Object.assign({},mI),{heightTiny:e,heightSmall:t,heightMedium:n,heightLarge:s,borderRadiusTiny:i,borderRadiusSmall:i,borderRadiusMedium:i,borderRadiusLarge:i,fontSizeTiny:o,fontSizeSmall:a,fontSizeMedium:l,fontSizeLarge:c,opacityDisabled:u,colorOpacitySecondary:"0.16",colorOpacitySecondaryHover:"0.22",colorOpacitySecondaryPressed:"0.28",colorSecondary:re,colorSecondaryHover:te,colorSecondaryPressed:z,colorTertiary:re,colorTertiaryHover:te,colorTertiaryPressed:z,colorQuaternary:"#0000",colorQuaternaryHover:te,colorQuaternaryPressed:z,color:"#0000",colorHover:"#0000",colorPressed:"#0000",colorFocus:"#0000",colorDisabled:"#0000",textColor:h,textColorTertiary:d,textColorHover:f,textColorPressed:g,textColorFocus:f,textColorDisabled:h,textColorText:h,textColorTextHover:f,textColorTextPressed:g,textColorTextFocus:f,textColorTextDisabled:h,textColorGhost:h,textColorGhostHover:f,textColorGhostPressed:g,textColorGhostFocus:f,textColorGhostDisabled:h,border:`1px solid ${p}`,borderHover:`1px solid ${f}`,borderPressed:`1px solid ${g}`,borderFocus:`1px solid ${f}`,borderDisabled:`1px solid ${p}`,rippleColor:m,colorPrimary:m,colorHoverPrimary:f,colorPressedPrimary:g,colorFocusPrimary:f,colorDisabledPrimary:m,textColorPrimary:v,textColorHoverPrimary:v,textColorPressedPrimary:v,textColorFocusPrimary:v,textColorDisabledPrimary:v,textColorTextPrimary:m,textColorTextHoverPrimary:f,textColorTextPressedPrimary:g,textColorTextFocusPrimary:f,textColorTextDisabledPrimary:h,textColorGhostPrimary:m,textColorGhostHoverPrimary:f,textColorGhostPressedPrimary:g,textColorGhostFocusPrimary:f,textColorGhostDisabledPrimary:m,borderPrimary:`1px solid ${m}`,borderHoverPrimary:`1px solid ${f}`,borderPressedPrimary:`1px solid ${g}`,borderFocusPrimary:`1px solid ${f}`,borderDisabledPrimary:`1px solid ${m}`,rippleColorPrimary:m,colorInfo:_,colorHoverInfo:x,colorPressedInfo:y,colorFocusInfo:x,colorDisabledInfo:_,textColorInfo:v,textColorHoverInfo:v,textColorPressedInfo:v,textColorFocusInfo:v,textColorDisabledInfo:v,textColorTextInfo:_,textColorTextHoverInfo:x,textColorTextPressedInfo:y,textColorTextFocusInfo:x,textColorTextDisabledInfo:h,textColorGhostInfo:_,textColorGhostHoverInfo:x,textColorGhostPressedInfo:y,textColorGhostFocusInfo:x,textColorGhostDisabledInfo:_,borderInfo:`1px solid ${_}`,borderHoverInfo:`1px solid ${x}`,borderPressedInfo:`1px solid ${y}`,borderFocusInfo:`1px solid ${x}`,borderDisabledInfo:`1px solid ${_}`,rippleColorInfo:_,colorSuccess:C,colorHoverSuccess:E,colorPressedSuccess:b,colorFocusSuccess:E,colorDisabledSuccess:C,textColorSuccess:v,textColorHoverSuccess:v,textColorPressedSuccess:v,textColorFocusSuccess:v,textColorDisabledSuccess:v,textColorTextSuccess:C,textColorTextHoverSuccess:E,textColorTextPressedSuccess:b,textColorTextFocusSuccess:E,textColorTextDisabledSuccess:h,textColorGhostSuccess:C,textColorGhostHoverSuccess:E,textColorGhostPressedSuccess:b,textColorGhostFocusSuccess:E,textColorGhostDisabledSuccess:C,borderSuccess:`1px solid ${C}`,borderHoverSuccess:`1px solid ${E}`,borderPressedSuccess:`1px solid ${b}`,borderFocusSuccess:`1px solid ${E}`,borderDisabledSuccess:`1px solid ${C}`,rippleColorSuccess:C,colorWarning:w,colorHoverWarning:S,colorPressedWarning:$,colorFocusWarning:S,colorDisabledWarning:w,textColorWarning:v,textColorHoverWarning:v,textColorPressedWarning:v,textColorFocusWarning:v,textColorDisabledWarning:v,textColorTextWarning:w,textColorTextHoverWarning:S,textColorTextPressedWarning:$,textColorTextFocusWarning:S,textColorTextDisabledWarning:h,textColorGhostWarning:w,textColorGhostHoverWarning:S,textColorGhostPressedWarning:$,textColorGhostFocusWarning:S,textColorGhostDisabledWarning:w,borderWarning:`1px solid ${w}`,borderHoverWarning:`1px solid ${S}`,borderPressedWarning:`1px solid ${$}`,borderFocusWarning:`1px solid ${S}`,borderDisabledWarning:`1px solid ${w}`,rippleColorWarning:w,colorError:N,colorHoverError:H,colorPressedError:U,colorFocusError:H,colorDisabledError:N,textColorError:v,textColorHoverError:v,textColorPressedError:v,textColorFocusError:v,textColorDisabledError:v,textColorTextError:N,textColorTextHoverError:H,textColorTextPressedError:U,textColorTextFocusError:H,textColorTextDisabledError:h,textColorGhostError:N,textColorGhostHoverError:H,textColorGhostPressedError:U,textColorGhostFocusError:H,textColorGhostDisabledError:N,borderError:`1px solid ${N}`,borderHoverError:`1px solid ${H}`,borderPressedError:`1px solid ${U}`,borderFocusError:`1px solid ${H}`,borderDisabledError:`1px solid ${N}`,rippleColorError:N,waveOpacity:"0.6",fontWeight:ee,fontWeightStrong:R})}const Ix={name:"Button",common:Il,self:vI},yI=be([je("button",`
 margin: 0;
 font-weight: var(--n-font-weight);
 line-height: 1;
 font-family: inherit;
 padding: var(--n-padding);
 height: var(--n-height);
 font-size: var(--n-font-size);
 border-radius: var(--n-border-radius);
 color: var(--n-text-color);
 background-color: var(--n-color);
 width: var(--n-width);
 white-space: nowrap;
 outline: none;
 position: relative;
 z-index: auto;
 border: none;
 display: inline-flex;
 flex-wrap: nowrap;
 flex-shrink: 0;
 align-items: center;
 justify-content: center;
 user-select: none;
 -webkit-user-select: none;
 text-align: center;
 cursor: pointer;
 text-decoration: none;
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 opacity .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[Ye("color",[he("border",{borderColor:"var(--n-border-color)"}),Ye("disabled",[he("border",{borderColor:"var(--n-border-color-disabled)"})]),gi("disabled",[be("&:focus",[he("state-border",{borderColor:"var(--n-border-color-focus)"})]),be("&:hover",[he("state-border",{borderColor:"var(--n-border-color-hover)"})]),be("&:active",[he("state-border",{borderColor:"var(--n-border-color-pressed)"})]),Ye("pressed",[he("state-border",{borderColor:"var(--n-border-color-pressed)"})])])]),Ye("disabled",{backgroundColor:"var(--n-color-disabled)",color:"var(--n-text-color-disabled)"},[he("border",{border:"var(--n-border-disabled)"})]),gi("disabled",[be("&:focus",{backgroundColor:"var(--n-color-focus)",color:"var(--n-text-color-focus)"},[he("state-border",{border:"var(--n-border-focus)"})]),be("&:hover",{backgroundColor:"var(--n-color-hover)",color:"var(--n-text-color-hover)"},[he("state-border",{border:"var(--n-border-hover)"})]),be("&:active",{backgroundColor:"var(--n-color-pressed)",color:"var(--n-text-color-pressed)"},[he("state-border",{border:"var(--n-border-pressed)"})]),Ye("pressed",{backgroundColor:"var(--n-color-pressed)",color:"var(--n-text-color-pressed)"},[he("state-border",{border:"var(--n-border-pressed)"})])]),Ye("loading","cursor: wait;"),je("base-wave",`
 pointer-events: none;
 top: 0;
 right: 0;
 bottom: 0;
 left: 0;
 animation-iteration-count: 1;
 animation-duration: var(--n-ripple-duration);
 animation-timing-function: var(--n-bezier-ease-out), var(--n-bezier-ease-out);
 `,[Ye("active",{zIndex:1,animationName:"button-wave-spread, button-wave-opacity"})]),Yu&&"MozBoxSizing"in document.createElement("div").style?be("&::moz-focus-inner",{border:0}):null,he("border, state-border",`
 position: absolute;
 left: 0;
 top: 0;
 right: 0;
 bottom: 0;
 border-radius: inherit;
 transition: border-color .3s var(--n-bezier);
 pointer-events: none;
 `),he("border",{border:"var(--n-border)"}),he("state-border",{border:"var(--n-border)",borderColor:"#0000",zIndex:1}),he("icon",`
 margin: var(--n-icon-margin);
 margin-left: 0;
 height: var(--n-icon-size);
 width: var(--n-icon-size);
 max-width: var(--n-icon-size);
 font-size: var(--n-icon-size);
 position: relative;
 flex-shrink: 0;
 `,[je("icon-slot",`
 height: var(--n-icon-size);
 width: var(--n-icon-size);
 position: absolute;
 left: 0;
 top: 50%;
 transform: translateY(-50%);
 display: flex;
 align-items: center;
 justify-content: center;
 `,[iu({top:"50%",originalTransform:"translateY(-50%)"})]),sI()]),he("content",`
 display: flex;
 align-items: center;
 flex-wrap: nowrap;
 min-width: 0;
 `,[be("~",[he("icon",{margin:"var(--n-icon-margin)",marginRight:0})])]),Ye("block",`
 display: flex;
 width: 100%;
 `),Ye("dashed",[he("border, state-border",{borderStyle:"dashed !important"})]),Ye("disabled",{cursor:"not-allowed",opacity:"var(--n-opacity-disabled)"})]),be("@keyframes button-wave-spread",{from:{boxShadow:"0 0 0.5px 0 var(--n-ripple-color)"},to:{boxShadow:"0 0 0.5px 4.5px var(--n-ripple-color)"}}),be("@keyframes button-wave-opacity",{from:{opacity:"var(--n-wave-opacity)"},to:{opacity:0}})]),bI=Object.assign(Object.assign({},vr.props),{color:String,textColor:String,text:Boolean,block:Boolean,loading:Boolean,disabled:Boolean,circle:Boolean,size:String,ghost:Boolean,round:Boolean,secondary:Boolean,tertiary:Boolean,quaternary:Boolean,strong:Boolean,focusable:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},tag:{type:String,default:"button"},type:{type:String,default:"default"},dashed:Boolean,renderIcon:Function,iconPlacement:{type:String,default:"left"},attrType:{type:String,default:"button"},bordered:{type:Boolean,default:!0},onClick:[Function,Array],nativeFocusBehavior:{type:Boolean,default:!Fx}}),Lx=Re({name:"Button",props:bI,slots:Object,setup(r){const e=G(null),t=G(null),n=G(!1),s=Or(()=>!r.quaternary&&!r.tertiary&&!r.secondary&&!r.text&&(!r.color||r.ghost||r.dashed)&&r.bordered),i=Ct(pI,{}),{mergedSizeRef:o}=hg({},{defaultSize:"medium",mergedSize:y=>{const{size:C}=r;if(C)return C;const{size:E}=i;if(E)return E;const{mergedSize:b}=y||{};return b?b.value:"medium"}}),a=me(()=>r.focusable&&!r.disabled),l=y=>{var C;a.value||y.preventDefault(),!r.nativeFocusBehavior&&(y.preventDefault(),!r.disabled&&a.value&&((C=e.value)===null||C===void 0||C.focus({preventScroll:!0})))},c=y=>{var C;if(!r.disabled&&!r.loading){const{onClick:E}=r;E&&st(E,y),r.text||(C=t.value)===null||C===void 0||C.play()}},u=y=>{switch(y.key){case"Enter":if(!r.keyboard)return;n.value=!1}},h=y=>{switch(y.key){case"Enter":if(!r.keyboard||r.loading){y.preventDefault();return}n.value=!0}},d=()=>{n.value=!1},{inlineThemeDisabled:f,mergedClsPrefixRef:g,mergedRtlRef:p}=Fl(r),m=vr("Button","-button",yI,Ix,r,g),v=Zu("Button",p,g),_=me(()=>{const y=m.value,{common:{cubicBezierEaseInOut:C,cubicBezierEaseOut:E},self:b}=y,{rippleDuration:w,opacityDisabled:S,fontWeight:$,fontWeightStrong:N}=b,H=o.value,{dashed:U,type:ee,ghost:re,text:te,color:z,round:R,circle:ue,textColor:de,secondary:Ce,tertiary:fe,quaternary:$e,strong:Te}=r,De={"--n-font-weight":Te?N:$};let ve={"--n-color":"initial","--n-color-hover":"initial","--n-color-pressed":"initial","--n-color-focus":"initial","--n-color-disabled":"initial","--n-ripple-color":"initial","--n-text-color":"initial","--n-text-color-hover":"initial","--n-text-color-pressed":"initial","--n-text-color-focus":"initial","--n-text-color-disabled":"initial"};const M=ee==="tertiary",D=ee==="default",B=M?"default":ee;if(te){const W=de||z;ve={"--n-color":"#0000","--n-color-hover":"#0000","--n-color-pressed":"#0000","--n-color-focus":"#0000","--n-color-disabled":"#0000","--n-ripple-color":"#0000","--n-text-color":W||b[ke("textColorText",B)],"--n-text-color-hover":W?ii(W):b[ke("textColorTextHover",B)],"--n-text-color-pressed":W?ac(W):b[ke("textColorTextPressed",B)],"--n-text-color-focus":W?ii(W):b[ke("textColorTextHover",B)],"--n-text-color-disabled":W||b[ke("textColorTextDisabled",B)]}}else if(re||U){const W=de||z;ve={"--n-color":"#0000","--n-color-hover":"#0000","--n-color-pressed":"#0000","--n-color-focus":"#0000","--n-color-disabled":"#0000","--n-ripple-color":z||b[ke("rippleColor",B)],"--n-text-color":W||b[ke("textColorGhost",B)],"--n-text-color-hover":W?ii(W):b[ke("textColorGhostHover",B)],"--n-text-color-pressed":W?ac(W):b[ke("textColorGhostPressed",B)],"--n-text-color-focus":W?ii(W):b[ke("textColorGhostHover",B)],"--n-text-color-disabled":W||b[ke("textColorGhostDisabled",B)]}}else if(Ce){const W=D?b.textColor:M?b.textColorTertiary:b[ke("color",B)],Y=z||W,ae=ee!=="default"&&ee!=="tertiary";ve={"--n-color":ae?xi(Y,{alpha:Number(b.colorOpacitySecondary)}):b.colorSecondary,"--n-color-hover":ae?xi(Y,{alpha:Number(b.colorOpacitySecondaryHover)}):b.colorSecondaryHover,"--n-color-pressed":ae?xi(Y,{alpha:Number(b.colorOpacitySecondaryPressed)}):b.colorSecondaryPressed,"--n-color-focus":ae?xi(Y,{alpha:Number(b.colorOpacitySecondaryHover)}):b.colorSecondaryHover,"--n-color-disabled":b.colorSecondary,"--n-ripple-color":"#0000","--n-text-color":Y,"--n-text-color-hover":Y,"--n-text-color-pressed":Y,"--n-text-color-focus":Y,"--n-text-color-disabled":Y}}else if(fe||$e){const W=D?b.textColor:M?b.textColorTertiary:b[ke("color",B)],Y=z||W;fe?(ve["--n-color"]=b.colorTertiary,ve["--n-color-hover"]=b.colorTertiaryHover,ve["--n-color-pressed"]=b.colorTertiaryPressed,ve["--n-color-focus"]=b.colorSecondaryHover,ve["--n-color-disabled"]=b.colorTertiary):(ve["--n-color"]=b.colorQuaternary,ve["--n-color-hover"]=b.colorQuaternaryHover,ve["--n-color-pressed"]=b.colorQuaternaryPressed,ve["--n-color-focus"]=b.colorQuaternaryHover,ve["--n-color-disabled"]=b.colorQuaternary),ve["--n-ripple-color"]="#0000",ve["--n-text-color"]=Y,ve["--n-text-color-hover"]=Y,ve["--n-text-color-pressed"]=Y,ve["--n-text-color-focus"]=Y,ve["--n-text-color-disabled"]=Y}else ve={"--n-color":z||b[ke("color",B)],"--n-color-hover":z?ii(z):b[ke("colorHover",B)],"--n-color-pressed":z?ac(z):b[ke("colorPressed",B)],"--n-color-focus":z?ii(z):b[ke("colorFocus",B)],"--n-color-disabled":z||b[ke("colorDisabled",B)],"--n-ripple-color":z||b[ke("rippleColor",B)],"--n-text-color":de||(z?b.textColorPrimary:M?b.textColorTertiary:b[ke("textColor",B)]),"--n-text-color-hover":de||(z?b.textColorHoverPrimary:b[ke("textColorHover",B)]),"--n-text-color-pressed":de||(z?b.textColorPressedPrimary:b[ke("textColorPressed",B)]),"--n-text-color-focus":de||(z?b.textColorFocusPrimary:b[ke("textColorFocus",B)]),"--n-text-color-disabled":de||(z?b.textColorDisabledPrimary:b[ke("textColorDisabled",B)])};let se={"--n-border":"initial","--n-border-hover":"initial","--n-border-pressed":"initial","--n-border-focus":"initial","--n-border-disabled":"initial"};te?se={"--n-border":"none","--n-border-hover":"none","--n-border-pressed":"none","--n-border-focus":"none","--n-border-disabled":"none"}:se={"--n-border":b[ke("border",B)],"--n-border-hover":b[ke("borderHover",B)],"--n-border-pressed":b[ke("borderPressed",B)],"--n-border-focus":b[ke("borderFocus",B)],"--n-border-disabled":b[ke("borderDisabled",B)]};const{[ke("height",H)]:Me,[ke("fontSize",H)]:T,[ke("padding",H)]:O,[ke("paddingRound",H)]:L,[ke("iconSize",H)]:q,[ke("borderRadius",H)]:Z,[ke("iconMargin",H)]:k,waveOpacity:V}=b,K={"--n-width":ue&&!te?Me:"initial","--n-height":te?"initial":Me,"--n-font-size":T,"--n-padding":ue||te?"initial":R?L:O,"--n-icon-size":q,"--n-icon-margin":k,"--n-border-radius":te?"initial":ue||R?Me:Z};return Object.assign(Object.assign(Object.assign(Object.assign({"--n-bezier":C,"--n-bezier-ease-out":E,"--n-ripple-duration":w,"--n-opacity-disabled":S,"--n-wave-opacity":V},De),ve),se),K)}),x=f?Uu("button",me(()=>{let y="";const{dashed:C,type:E,ghost:b,text:w,color:S,round:$,circle:N,textColor:H,secondary:U,tertiary:ee,quaternary:re,strong:te}=r;C&&(y+="a"),b&&(y+="b"),w&&(y+="c"),$&&(y+="d"),N&&(y+="e"),U&&(y+="f"),ee&&(y+="g"),re&&(y+="h"),te&&(y+="i"),S&&(y+=`j${$m(S)}`),H&&(y+=`k${$m(H)}`);const{value:z}=o;return y+=`l${z[0]}`,y+=`m${E[0]}`,y}),_,r):void 0;return{selfElRef:e,waveElRef:t,mergedClsPrefix:g,mergedFocusable:a,mergedSize:o,showBorder:s,enterPressed:n,rtlEnabled:v,handleMousedown:l,handleKeydown:h,handleBlur:d,handleKeyup:u,handleClick:c,customColorCssVars:me(()=>{const{color:y}=r;if(!y)return null;const C=ii(y);return{"--n-border-color":y,"--n-border-color-hover":C,"--n-border-color-pressed":ac(y),"--n-border-color-focus":C,"--n-border-color-disabled":y}}),cssVars:f?void 0:_,themeClass:x==null?void 0:x.themeClass,onRender:x==null?void 0:x.onRender}},render(){const{mergedClsPrefix:r,tag:e,onRender:t}=this;t==null||t();const n=Is(this.$slots.default,s=>s&&J("span",{class:`${r}-button__content`},s));return J(e,{ref:"selfElRef",class:[this.themeClass,`${r}-button`,`${r}-button--${this.type}-type`,`${r}-button--${this.mergedSize}-type`,this.rtlEnabled&&`${r}-button--rtl`,this.disabled&&`${r}-button--disabled`,this.block&&`${r}-button--block`,this.enterPressed&&`${r}-button--pressed`,!this.text&&this.dashed&&`${r}-button--dashed`,this.color&&`${r}-button--color`,this.secondary&&`${r}-button--secondary`,this.loading&&`${r}-button--loading`,this.ghost&&`${r}-button--ghost`],tabindex:this.mergedFocusable?0:-1,type:this.attrType,style:this.cssVars,disabled:this.disabled,onClick:this.handleClick,onBlur:this.handleBlur,onMousedown:this.handleMousedown,onKeyup:this.handleKeyup,onKeydown:this.handleKeydown},this.iconPlacement==="right"&&n,J(Y5,{width:!0},{default:()=>Is(this.$slots.icon,s=>(this.loading||this.renderIcon||s)&&J("span",{class:`${r}-button__icon`,style:{margin:Xk(this.$slots.default)?"0":""}},J(mg,null,{default:()=>this.loading?J(Px,{clsPrefix:r,key:"loading",class:`${r}-icon-slot`,strokeWidth:20}):J("div",{key:"icon",class:`${r}-icon-slot`,role:"none"},this.renderIcon?this.renderIcon():s)})))}),this.iconPlacement==="left"&&n,this.text?null:J(oI,{ref:"waveElRef",clsPrefix:r}),this.showBorder?J("div",{"aria-hidden":!0,class:`${r}-button__border`,style:this.customColorCssVars}):null,this.showBorder?J("div",{"aria-hidden":!0,class:`${r}-button__state-border`,style:this.customColorCssVars}):null)}}),cv=Lx;function _I(r){const{textColorBase:e,opacity1:t,opacity2:n,opacity3:s,opacity4:i,opacity5:o}=r;return{color:e,opacity1Depth:t,opacity2Depth:n,opacity3Depth:s,opacity4Depth:i,opacity5Depth:o}}const xI={common:Il,self:_I},CI=je("icon",`
 height: 1em;
 width: 1em;
 line-height: 1em;
 text-align: center;
 display: inline-block;
 position: relative;
 fill: currentColor;
 transform: translateZ(0);
`,[Ye("color-transition",{transition:"color .3s var(--n-bezier)"}),Ye("depth",{color:"var(--n-color)"},[be("svg",{opacity:"var(--n-opacity)",transition:"opacity .3s var(--n-bezier)"})]),be("svg",{height:"1em",width:"1em"})]),wI=Object.assign(Object.assign({},vr.props),{depth:[String,Number],size:[Number,String],color:String,component:[Object,Function]}),SI=Re({_n_icon__:!0,name:"Icon",inheritAttrs:!1,props:wI,setup(r){const{mergedClsPrefixRef:e,inlineThemeDisabled:t}=Fl(r),n=vr("Icon","-icon",CI,xI,r,e),s=me(()=>{const{depth:o}=r,{common:{cubicBezierEaseInOut:a},self:l}=n.value;if(o!==void 0){const{color:c,[`opacity${o}Depth`]:u}=l;return{"--n-bezier":a,"--n-color":c,"--n-opacity":u}}return{"--n-bezier":a,"--n-color":"","--n-opacity":""}}),i=t?Uu("icon",me(()=>`${r.depth||"d"}`),s,r):void 0;return{mergedClsPrefix:e,mergedStyle:me(()=>{const{size:o,color:a}=r;return{fontSize:Nk(o),color:a}}),cssVars:t?void 0:s,themeClass:i==null?void 0:i.themeClass,onRender:i==null?void 0:i.onRender}},render(){var r;const{$parent:e,depth:t,mergedClsPrefix:n,component:s,onRender:i,themeClass:o}=this;return!((r=e==null?void 0:e.$options)===null||r===void 0)&&r._n_icon__&&Vk("icon","don't wrap `n-icon` inside `n-icon`"),i==null||i(),J("i",bf(this.$attrs,{role:"img",class:[`${n}-icon`,o,{[`${n}-icon--depth`]:t,[`${n}-icon--color-transition`]:t!==void 0}],style:[this.cssVars,this.mergedStyle]}),s?J(s):this.$slots)}});function TI(r){const{textColorDisabled:e}=r;return{iconColorDisabled:e}}const OI={name:"InputNumber",common:Il,peers:{Button:Ix,Input:kx},self:TI},EI=be([je("input-number-suffix",`
 display: inline-block;
 margin-right: 10px;
 `),je("input-number-prefix",`
 display: inline-block;
 margin-left: 10px;
 `)]);function MI(r){return r==null||typeof r=="string"&&r.trim()===""?null:Number(r)}function PI(r){return r.includes(".")&&(/^(-)?\d+.*(\.|0)$/.test(r)||/^-?\d*$/.test(r))||r==="-"||r==="-0"}function Uh(r){return r==null?!0:!Number.isNaN(r)}function uv(r,e){return typeof r!="number"?"":e===void 0?String(r):r.toFixed(e)}function Gh(r){if(r===null)return null;if(typeof r=="number")return r;{const e=Number(r);return Number.isNaN(e)?null:e}}const hv=800,dv=100,AI=Object.assign(Object.assign({},vr.props),{autofocus:Boolean,loading:{type:Boolean,default:void 0},placeholder:String,defaultValue:{type:Number,default:null},value:Number,step:{type:[Number,String],default:1},min:[Number,String],max:[Number,String],size:String,disabled:{type:Boolean,default:void 0},validator:Function,bordered:{type:Boolean,default:void 0},showButton:{type:Boolean,default:!0},buttonPlacement:{type:String,default:"right"},inputProps:Object,readonly:Boolean,clearable:Boolean,keyboard:{type:Object,default:{}},updateValueOnInput:{type:Boolean,default:!0},round:{type:Boolean,default:void 0},parse:Function,format:Function,precision:Number,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onChange:[Function,Array]}),FI=Re({name:"InputNumber",props:AI,slots:Object,setup(r){const{mergedBorderedRef:e,mergedClsPrefixRef:t,mergedRtlRef:n}=Fl(r),s=vr("InputNumber","-input-number",EI,OI,r,t),{localeRef:i}=Ex("InputNumber"),o=hg(r),{mergedSizeRef:a,mergedDisabledRef:l,mergedStatusRef:c}=o,u=G(null),h=G(null),d=G(null),f=G(r.defaultValue),g=Di(r,"value"),p=q_(g,f),m=G(""),v=k=>{const V=String(k).split(".")[1];return V?V.length:0},_=k=>{const V=[r.min,r.max,r.step,k].map(K=>K===void 0?0:v(K));return Math.max(...V)},x=Or(()=>{const{placeholder:k}=r;return k!==void 0?k:i.value.placeholder}),y=Or(()=>{const k=Gh(r.step);return k!==null?k===0?1:Math.abs(k):1}),C=Or(()=>{const k=Gh(r.min);return k!==null?k:null}),E=Or(()=>{const k=Gh(r.max);return k!==null?k:null}),b=()=>{const{value:k}=p;if(Uh(k)){const{format:V,precision:K}=r;V?m.value=V(k):k===null||K===void 0||v(k)>K?m.value=uv(k,void 0):m.value=uv(k,K)}else m.value=String(k)};b();const w=k=>{const{value:V}=p;if(k===V){b();return}const{"onUpdate:value":K,onUpdateValue:W,onChange:Y}=r,{nTriggerFormInput:ae,nTriggerFormChange:ie}=o;Y&&st(Y,k),W&&st(W,k),K&&st(K,k),f.value=k,ae(),ie()},S=({offset:k,doUpdateIfValid:V,fixPrecision:K,isInputing:W})=>{const{value:Y}=m;if(W&&PI(Y))return!1;const ae=(r.parse||MI)(Y);if(ae===null)return V&&w(null),null;if(Uh(ae)){const ie=v(ae),{precision:le}=r;if(le!==void 0&&le<ie&&!K)return!1;let ge=Number.parseFloat((ae+k).toFixed(le??_(ae)));if(Uh(ge)){const{value:Pe}=E,{value:Be}=C;if(Pe!==null&&ge>Pe){if(!V||W)return!1;ge=Pe}if(Be!==null&&ge<Be){if(!V||W)return!1;ge=Be}return r.validator&&!r.validator(ge)?!1:(V&&w(ge),ge)}}return!1},$=Or(()=>S({offset:0,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})===!1),N=Or(()=>{const{value:k}=p;if(r.validator&&k===null)return!1;const{value:V}=y;return S({offset:-V,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1}),H=Or(()=>{const{value:k}=p;if(r.validator&&k===null)return!1;const{value:V}=y;return S({offset:+V,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1});function U(k){const{onFocus:V}=r,{nTriggerFormFocus:K}=o;V&&st(V,k),K()}function ee(k){var V,K;if(k.target===((V=u.value)===null||V===void 0?void 0:V.wrapperElRef))return;const W=S({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0});if(W!==!1){const ie=(K=u.value)===null||K===void 0?void 0:K.inputElRef;ie&&(ie.value=String(W||"")),p.value===W&&b()}else b();const{onBlur:Y}=r,{nTriggerFormBlur:ae}=o;Y&&st(Y,k),ae(),dr(()=>{b()})}function re(k){const{onClear:V}=r;V&&st(V,k)}function te(){const{value:k}=H;if(!k){D();return}const{value:V}=p;if(V===null)r.validator||w(de());else{const{value:K}=y;S({offset:K,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}function z(){const{value:k}=N;if(!k){ve();return}const{value:V}=p;if(V===null)r.validator||w(de());else{const{value:K}=y;S({offset:-K,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}const R=U,ue=ee;function de(){if(r.validator)return null;const{value:k}=C,{value:V}=E;return k!==null?Math.max(0,k):V!==null?Math.min(0,V):0}function Ce(k){re(k),w(null)}function fe(k){var V,K,W;!((V=d.value)===null||V===void 0)&&V.$el.contains(k.target)&&k.preventDefault(),!((K=h.value)===null||K===void 0)&&K.$el.contains(k.target)&&k.preventDefault(),(W=u.value)===null||W===void 0||W.activate()}let $e=null,Te=null,De=null;function ve(){De&&(window.clearTimeout(De),De=null),$e&&(window.clearInterval($e),$e=null)}let M=null;function D(){M&&(window.clearTimeout(M),M=null),Te&&(window.clearInterval(Te),Te=null)}function B(){ve(),De=window.setTimeout(()=>{$e=window.setInterval(()=>{z()},dv)},hv),is("mouseup",document,ve,{once:!0})}function se(){D(),M=window.setTimeout(()=>{Te=window.setInterval(()=>{te()},dv)},hv),is("mouseup",document,D,{once:!0})}const Me=()=>{Te||te()},T=()=>{$e||z()};function O(k){var V,K;if(k.key==="Enter"){if(k.target===((V=u.value)===null||V===void 0?void 0:V.wrapperElRef))return;S({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&((K=u.value)===null||K===void 0||K.deactivate())}else if(k.key==="ArrowUp"){if(!H.value||r.keyboard.ArrowUp===!1)return;k.preventDefault(),S({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&te()}else if(k.key==="ArrowDown"){if(!N.value||r.keyboard.ArrowDown===!1)return;k.preventDefault(),S({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&z()}}function L(k){m.value=k,r.updateValueOnInput&&!r.format&&!r.parse&&r.precision===void 0&&S({offset:0,doUpdateIfValid:!0,isInputing:!0,fixPrecision:!1})}Ot(p,()=>{b()});const q={focus:()=>{var k;return(k=u.value)===null||k===void 0?void 0:k.focus()},blur:()=>{var k;return(k=u.value)===null||k===void 0?void 0:k.blur()},select:()=>{var k;return(k=u.value)===null||k===void 0?void 0:k.select()}},Z=Zu("InputNumber",n,t);return Object.assign(Object.assign({},q),{rtlEnabled:Z,inputInstRef:u,minusButtonInstRef:h,addButtonInstRef:d,mergedClsPrefix:t,mergedBordered:e,uncontrolledValue:f,mergedValue:p,mergedPlaceholder:x,displayedValueInvalid:$,mergedSize:a,mergedDisabled:l,displayedValue:m,addable:H,minusable:N,mergedStatus:c,handleFocus:R,handleBlur:ue,handleClear:Ce,handleMouseDown:fe,handleAddClick:Me,handleMinusClick:T,handleAddMousedown:se,handleMinusMousedown:B,handleKeyDown:O,handleUpdateDisplayedValue:L,mergedTheme:s,inputThemeOverrides:{paddingSmall:"0 8px 0 10px",paddingMedium:"0 8px 0 12px",paddingLarge:"0 8px 0 14px"},buttonThemeOverrides:me(()=>{const{self:{iconColorDisabled:k}}=s.value,[V,K,W,Y]=Us(k);return{textColorTextDisabled:`rgb(${V}, ${K}, ${W})`,opacityDisabled:`${Y}`}})})},render(){const{mergedClsPrefix:r,$slots:e}=this,t=()=>J(cv,{text:!0,disabled:!this.minusable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleMinusClick,onMousedown:this.handleMinusMousedown,ref:"minusButtonInstRef"},{icon:()=>ki(e["minus-icon"],()=>[J(zo,{clsPrefix:r},{default:()=>J(N5,null)})])}),n=()=>J(cv,{text:!0,disabled:!this.addable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleAddClick,onMousedown:this.handleAddMousedown,ref:"addButtonInstRef"},{icon:()=>ki(e["add-icon"],()=>[J(zo,{clsPrefix:r},{default:()=>J(L5,null)})])});return J("div",{class:[`${r}-input-number`,this.rtlEnabled&&`${r}-input-number--rtl`]},J(Dx,{ref:"inputInstRef",autofocus:this.autofocus,status:this.mergedStatus,bordered:this.mergedBordered,loading:this.loading,value:this.displayedValue,onUpdateValue:this.handleUpdateDisplayedValue,theme:this.mergedTheme.peers.Input,themeOverrides:this.mergedTheme.peerOverrides.Input,builtinThemeOverrides:this.inputThemeOverrides,size:this.mergedSize,placeholder:this.mergedPlaceholder,disabled:this.mergedDisabled,readonly:this.readonly,round:this.round,textDecoration:this.displayedValueInvalid?"line-through":void 0,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onClear:this.handleClear,clearable:this.clearable,inputProps:this.inputProps,internalLoadingBeforeSuffix:!0},{prefix:()=>{var s;return this.showButton&&this.buttonPlacement==="both"?[t(),Is(e.prefix,i=>i?J("span",{class:`${r}-input-number-prefix`},i):null)]:(s=e.prefix)===null||s===void 0?void 0:s.call(e)},suffix:()=>{var s;return this.showButton?[Is(e.suffix,i=>i?J("span",{class:`${r}-input-number-suffix`},i):null),this.buttonPlacement==="right"?t():null,n()]:(s=e.suffix)===null||s===void 0?void 0:s.call(e)}}))}}),kI="2.41.0";function RI({componentPrefix:r="N",components:e=[]}={}){const t=[];function n(i,o,a){i.component(r+o)||i.component(r+o,a)}function s(i){t.includes(i)||(t.push(i),e.forEach(o=>{const{name:a,alias:l}=o;n(i,a,o),l&&l.forEach(c=>{n(i,c,o)})}))}return{version:kI,componentPrefix:r,install:s}}const DI=RI({components:[SI,Lx,Dx,FI]}),Bx=Yw(Kw);Bx.use(wF).use(DI);Bx.mount("#app")});export default II();
